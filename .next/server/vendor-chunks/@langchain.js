"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/@langchain/core/dist/caches/base.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches/base.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n/**\n * This cache key should be consistent across all versions of LangChain.\n * It is currently NOT consistent across versions of LangChain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * separate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of LangChain.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(getCacheKey(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(getCacheKey(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRDtBQUNxQjtBQUNyRTs7Ozs7Ozs7O0NBU0MsR0FDTSxNQUFNRSxjQUFjLENBQUMsR0FBR0MsVUFBWUgsNERBQVlBLENBQUNHLFFBQVFDLElBQUksQ0FBQyxNQUFNO0FBQ3BFLFNBQVNDLDRCQUE0QkMsZ0JBQWdCO0lBQ3hELElBQUlBLGlCQUFpQkMsT0FBTyxLQUFLQyxXQUFXO1FBQ3hDLE9BQU87WUFDSEMsTUFBTUgsaUJBQWlCRyxJQUFJO1lBQzNCRixTQUFTTixpRkFBNkJBLENBQUNLLGlCQUFpQkMsT0FBTztRQUNuRTtJQUNKLE9BQ0s7UUFDRCxPQUFPO1lBQUVFLE1BQU1ILGlCQUFpQkcsSUFBSTtRQUFDO0lBQ3pDO0FBQ0o7QUFDTyxTQUFTQyxvQkFBb0JDLFVBQVU7SUFDMUMsTUFBTUMsa0JBQWtCO1FBQ3BCSCxNQUFNRSxXQUFXRixJQUFJO0lBQ3pCO0lBQ0EsSUFBSUUsV0FBV0osT0FBTyxLQUFLQyxXQUFXO1FBQ2xDSSxnQkFBZ0JMLE9BQU8sR0FBR0ksV0FBV0osT0FBTyxDQUFDTSxNQUFNO0lBQ3ZEO0lBQ0EsT0FBT0Q7QUFDWDtBQUNBOztDQUVDLEdBQ00sTUFBTUU7QUFDYjtBQUNBLE1BQU1DLGFBQWEsSUFBSUM7QUFDdkI7O0NBRUMsR0FDTSxNQUFNQyxzQkFBc0JIO0lBQy9CSSxZQUFZQyxHQUFHLENBQUU7UUFDYixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxLQUFLLEdBQUdQLE9BQU8sSUFBSUg7SUFDNUI7SUFDQTs7Ozs7O0tBTUMsR0FDRFcsT0FBT0MsTUFBTSxFQUFFQyxNQUFNLEVBQUU7UUFDbkIsT0FBT0MsUUFBUUMsT0FBTyxDQUFDLElBQUksQ0FBQ0wsS0FBSyxDQUFDTSxHQUFHLENBQUM5QixZQUFZMEIsUUFBUUMsWUFBWTtJQUMxRTtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUksT0FBT0wsTUFBTSxFQUFFQyxNQUFNLEVBQUVKLEtBQUssRUFBRTtRQUNoQyxJQUFJLENBQUNDLEtBQUssQ0FBQ1EsR0FBRyxDQUFDaEMsWUFBWTBCLFFBQVFDLFNBQVNKO0lBQ2hEO0lBQ0E7Ozs7S0FJQyxHQUNELE9BQU9VLFNBQVM7UUFDWixPQUFPLElBQUlsQixjQUFjRjtJQUM3QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhY2hlcy9iYXNlLmpzP2EyNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5zZWN1cmVIYXNoIH0gZnJvbSBcIi4uL3V0aWxzL2hhc2guanNcIjtcbmltcG9ydCB7IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIH0gZnJvbSBcIi4uL21lc3NhZ2VzL3V0aWxzLmpzXCI7XG4vKipcbiAqIFRoaXMgY2FjaGUga2V5IHNob3VsZCBiZSBjb25zaXN0ZW50IGFjcm9zcyBhbGwgdmVyc2lvbnMgb2YgTGFuZ0NoYWluLlxuICogSXQgaXMgY3VycmVudGx5IE5PVCBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBMYW5nQ2hhaW4uXG4gKlxuICogQSBodWdlIGJlbmVmaXQgb2YgaGF2aW5nIGEgcmVtb3RlIGNhY2hlIChsaWtlIHJlZGlzKSBpcyB0aGF0IHlvdSBjYW5cbiAqIGFjY2VzcyB0aGUgY2FjaGUgZnJvbSBkaWZmZXJlbnQgcHJvY2Vzc2VzL21hY2hpbmVzLiBUaGUgYWxsb3dzIHlvdSB0b1xuICogc2VwYXJhdGUgY29uY2VybnMgYW5kIHNjYWxlIGhvcml6b250YWxseS5cbiAqXG4gKiBUT0RPOiBNYWtlIGNhY2hlIGtleSBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBMYW5nQ2hhaW4uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYWNoZUtleSA9ICguLi5zdHJpbmdzKSA9PiBpbnNlY3VyZUhhc2goc3RyaW5ncy5qb2luKFwiX1wiKSk7XG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uKHN0b3JlZEdlbmVyYXRpb24pIHtcbiAgICBpZiAoc3RvcmVkR2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyB0ZXh0OiBzdG9yZWRHZW5lcmF0aW9uLnRleHQgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplR2VuZXJhdGlvbihnZW5lcmF0aW9uKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0ge1xuICAgICAgICB0ZXh0OiBnZW5lcmF0aW9uLnRleHQsXG4gICAgfTtcbiAgICBpZiAoZ2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VyaWFsaXplZFZhbHVlLm1lc3NhZ2UgPSBnZW5lcmF0aW9uLm1lc3NhZ2UudG9EaWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkVmFsdWU7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBjYWNoZXMuIEFsbCBjYWNoZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhY2hlIHtcbn1cbmNvbnN0IEdMT0JBTF9NQVAgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEEgY2FjaGUgZm9yIHN0b3JpbmcgTExNIGdlbmVyYXRpb25zIHRoYXQgc3RvcmVzIGRhdGEgaW4gbWVtb3J5LlxuICovXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEJhc2VDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBtYXAgPz8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBjYWNoZSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS4gSWYgdGhlXG4gICAgICogZGF0YSBpcyBub3QgZm91bmQsIGl0IHJldHVybnMgbnVsbC5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBsbG1LZXkgVGhlIExMTSBrZXkgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21wdCBhbmQgTExNIGtleSwgb3IgbnVsbCBpZiBub3QgZm91bmQuXG4gICAgICovXG4gICAgbG9va3VwKHByb21wdCwgbGxtS2V5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZS5nZXQoZ2V0Q2FjaGVLZXkocHJvbXB0LCBsbG1LZXkpKSA/PyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2FjaGUgd2l0aCBuZXcgZGF0YSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBzdG9yZSB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gbGxtS2V5IFRoZSBMTE0ga2V5IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBkYXRhIHRvIGJlIHN0b3JlZC5cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGUocHJvbXB0LCBsbG1LZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGdldENhY2hlS2V5KHByb21wdCwgbGxtS2V5KSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZ2xvYmFsIGluc3RhbmNlIG9mIEluTWVtb3J5Q2FjaGUgdXNpbmcgYSBwcmVkZWZpbmVkIGdsb2JhbFxuICAgICAqIG1hcCBhcyB0aGUgaW5pdGlhbCBjYWNoZS5cbiAgICAgKiBAcmV0dXJucyBBIGdsb2JhbCBpbnN0YW5jZSBvZiBJbk1lbW9yeUNhY2hlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnbG9iYWwoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5NZW1vcnlDYWNoZShHTE9CQUxfTUFQKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJnZXRDYWNoZUtleSIsInN0cmluZ3MiLCJqb2luIiwiZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uIiwic3RvcmVkR2VuZXJhdGlvbiIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJ0ZXh0Iiwic2VyaWFsaXplR2VuZXJhdGlvbiIsImdlbmVyYXRpb24iLCJzZXJpYWxpemVkVmFsdWUiLCJ0b0RpY3QiLCJCYXNlQ2FjaGUiLCJHTE9CQUxfTUFQIiwiTWFwIiwiSW5NZW1vcnlDYWNoZSIsImNvbnN0cnVjdG9yIiwibWFwIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNhY2hlIiwibG9va3VwIiwicHJvbXB0IiwibGxtS2V5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXQiLCJ1cGRhdGUiLCJzZXQiLCJnbG9iYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/caches/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler),\n/* harmony export */   callbackHandlerPrefersStreaming: () => (/* binding */ callbackHandlerPrefersStreaming),\n/* harmony export */   isBaseCallbackHandler: () => (/* binding */ isBaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\nfunction callbackHandlerPrefersStreaming(x) {\n    return \"lc_prefer_streaming\" in x && x.lc_prefer_streaming;\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    get lc_serializable_keys() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreCustomEvent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"raiseError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.ignoreCustomEvent = input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n            this.raiseError = input.raiseError ?? this.raiseError;\n            this.awaitHandlers = this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\nconst isBaseCallbackHandler = (x)=>{\n    const callbackHandler = x;\n    return callbackHandler !== undefined && typeof callbackHandler.copy === \"function\" && typeof callbackHandler.name === \"string\" && typeof callbackHandler.awaitHandlers === \"boolean\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTZCO0FBQytDO0FBQ25CO0FBQ3pEOzs7O0NBSUMsR0FDRCxNQUFNSTtBQUNOO0FBQ08sU0FBU0MsZ0NBQWdDQyxDQUFDO0lBQzdDLE9BQU8seUJBQXlCQSxLQUFLQSxFQUFFQyxtQkFBbUI7QUFDOUQ7QUFDQTs7Ozs7Q0FLQyxHQUNNLE1BQU1DLDRCQUE0Qko7SUFDckMsSUFBSUssZUFBZTtRQUNmLE9BQU87WUFBQztZQUFrQjtZQUFhLElBQUksQ0FBQ0MsSUFBSTtTQUFDO0lBQ3JEO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU9DO0lBQ1g7SUFDQSxJQUFJQyxnQkFBZ0I7UUFDaEIsT0FBT0Q7SUFDWDtJQUNBLElBQUlFLGFBQWE7UUFDYixPQUFPRjtJQUNYO0lBQ0EsSUFBSUcsdUJBQXVCO1FBQ3ZCLE9BQU9IO0lBQ1g7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9JLFVBQVU7UUFDYixPQUFPLElBQUksQ0FBQ04sSUFBSTtJQUNwQjtJQUNBOztLQUVDLEdBQ0QsSUFBSU8sUUFBUTtRQUNSLE9BQU87ZUFDQSxJQUFJLENBQUNSLFlBQVk7WUFDcEJQLHlFQUFrQkEsQ0FBQyxJQUFJLENBQUNnQixXQUFXO1NBQ3RDO0lBQ0w7SUFDQUEsWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFDN0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT3RCLHFFQUFzQkEsQ0FBQyxzQ0FBc0M7UUFDeEU7UUFDQSxJQUFJLENBQUN1QixTQUFTLEdBQUdQLFNBQVMsQ0FBQztRQUMzQixJQUFJQSxPQUFPO1lBQ1AsSUFBSSxDQUFDUSxTQUFTLEdBQUdSLE1BQU1RLFNBQVMsSUFBSSxJQUFJLENBQUNBLFNBQVM7WUFDbEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdULE1BQU1TLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdWLE1BQU1VLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxlQUFlLEdBQUdYLE1BQU1XLGVBQWUsSUFBSSxJQUFJLENBQUNBLGVBQWU7WUFDcEUsSUFBSSxDQUFDQyxpQkFBaUIsR0FDbEJaLE1BQU1ZLGlCQUFpQixJQUFJLElBQUksQ0FBQ0EsaUJBQWlCO1lBQ3JELElBQUksQ0FBQ0MsVUFBVSxHQUFHYixNQUFNYSxVQUFVLElBQUksSUFBSSxDQUFDQSxVQUFVO1lBQ3JELElBQUksQ0FBQ0MsYUFBYSxHQUNkLElBQUksQ0FBQ0QsVUFBVSxJQUFLYixDQUFBQSxNQUFNZSxhQUFhLElBQUksSUFBSSxDQUFDRCxhQUFhO1FBQ3JFO0lBQ0o7SUFDQUUsT0FBTztRQUNILE9BQU8sSUFBSSxJQUFJLENBQUNqQixXQUFXLENBQUMsSUFBSTtJQUNwQztJQUNBa0IsU0FBUztRQUNMLE9BQU9uQywrREFBWUEsQ0FBQ29DLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxJQUFJLENBQUMsSUFBSTtJQUNsRDtJQUNBQyx1QkFBdUI7UUFDbkIsT0FBT3RDLCtEQUFZQSxDQUFDb0MsU0FBUyxDQUFDRSxvQkFBb0IsQ0FBQ0QsSUFBSSxDQUFDLElBQUk7SUFDaEU7SUFDQSxPQUFPRSxZQUFZQyxPQUFPLEVBQUU7UUFDeEIsTUFBTUMsZ0JBQWdCbEM7WUFDbEJVLGFBQWM7Z0JBQ1YsS0FBSztnQkFDTEUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO29CQUNoQ0MsWUFBWTtvQkFDWkMsY0FBYztvQkFDZEMsVUFBVTtvQkFDVkMsT0FBT3pCLDRDQUFPO2dCQUNsQjtnQkFDQW9CLE9BQU93QixNQUFNLENBQUMsSUFBSSxFQUFFSDtZQUN4QjtRQUNKO1FBQ0EsT0FBTyxJQUFJQztJQUNmO0FBQ0o7QUFDTyxNQUFNRyx3QkFBd0IsQ0FBQ3ZDO0lBQ2xDLE1BQU13QyxrQkFBa0J4QztJQUN4QixPQUFRd0Msb0JBQW9CbEMsYUFDeEIsT0FBT2tDLGdCQUFnQlgsSUFBSSxLQUFLLGNBQ2hDLE9BQU9XLGdCQUFnQnBDLElBQUksS0FBSyxZQUNoQyxPQUFPb0MsZ0JBQWdCYixhQUFhLEtBQUs7QUFDakQsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcz81MTg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgZ2V0X2xjX3VuaXF1ZV9uYW1lLCB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlXG4gKiBvdmVycmlkZGVuIGluIGRlcml2ZWQgY2xhc3NlcyB0byBoYW5kbGUgdmFyaW91cyBldmVudHMgZHVyaW5nIHRoZVxuICogZXhlY3V0aW9uIG9mIGEgTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuICovXG5jbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nKHgpIHtcbiAgICByZXR1cm4gXCJsY19wcmVmZXJfc3RyZWFtaW5nXCIgaW4geCAmJiB4LmxjX3ByZWZlcl9zdHJlYW1pbmc7XG59XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGNyZWF0aW5nIGNhbGxiYWNrIGhhbmRsZXJzIGluIHRoZSBMYW5nQ2hhaW5cbiAqIGZyYW1ld29yay4gSXQgcHJvdmlkZXMgYSBzZXQgb2Ygb3B0aW9uYWwgbWV0aG9kcyB0aGF0IGNhbiBiZSBvdmVycmlkZGVuXG4gKiBpbiBkZXJpdmVkIGNsYXNzZXMgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGR1cmluZyB0aGUgZXhlY3V0aW9uIG9mIGFcbiAqIExhbmdDaGFpbiBhcHBsaWNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbiAgICBnZXQgbGNfbmFtZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJjYWxsYmFja3NcIiwgdGhpcy5uYW1lXTtcbiAgICB9XG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBsY19hdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX3NlcmlhbGl6YWJsZV9rZXlzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUxMTVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUNoYWluXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQWdlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVSZXRyaWV2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVDdXN0b21FdmVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJhaXNlRXJyb3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhd2FpdEhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpID09PSBcImZhbHNlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGNfa3dhcmdzID0gaW5wdXQgfHwge307XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVMTE0gPSBpbnB1dC5pZ25vcmVMTE0gPz8gdGhpcy5pZ25vcmVMTE07XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUNoYWluID0gaW5wdXQuaWdub3JlQ2hhaW4gPz8gdGhpcy5pZ25vcmVDaGFpbjtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQWdlbnQgPSBpbnB1dC5pZ25vcmVBZ2VudCA/PyB0aGlzLmlnbm9yZUFnZW50O1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVSZXRyaWV2ZXIgPSBpbnB1dC5pZ25vcmVSZXRyaWV2ZXIgPz8gdGhpcy5pZ25vcmVSZXRyaWV2ZXI7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUN1c3RvbUV2ZW50ID1cbiAgICAgICAgICAgICAgICBpbnB1dC5pZ25vcmVDdXN0b21FdmVudCA/PyB0aGlzLmlnbm9yZUN1c3RvbUV2ZW50O1xuICAgICAgICAgICAgdGhpcy5yYWlzZUVycm9yID0gaW5wdXQucmFpc2VFcnJvciA/PyB0aGlzLnJhaXNlRXJyb3I7XG4gICAgICAgICAgICB0aGlzLmF3YWl0SGFuZGxlcnMgPVxuICAgICAgICAgICAgICAgIHRoaXMucmFpc2VFcnJvciB8fCAoaW5wdXQuX2F3YWl0SGFuZGxlciA/PyB0aGlzLmF3YWl0SGFuZGxlcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gU2VyaWFsaXphYmxlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgdG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTk5vdEltcGxlbWVudGVkLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTWV0aG9kcyhtZXRob2RzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkLnY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG1ldGhvZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGFuZGxlcigpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBpc0Jhc2VDYWxsYmFja0hhbmRsZXIgPSAoeCkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrSGFuZGxlciA9IHg7XG4gICAgcmV0dXJuIChjYWxsYmFja0hhbmRsZXIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0eXBlb2YgY2FsbGJhY2tIYW5kbGVyLmNvcHkgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgY2FsbGJhY2tIYW5kbGVyLm5hbWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgdHlwZW9mIGNhbGxiYWNrSGFuZGxlci5hd2FpdEhhbmRsZXJzID09PSBcImJvb2xlYW5cIik7XG59O1xuIl0sIm5hbWVzIjpbInV1aWQiLCJTZXJpYWxpemFibGUiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyIsImNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmciLCJ4IiwibGNfcHJlZmVyX3N0cmVhbWluZyIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJsY19uYW1lc3BhY2UiLCJuYW1lIiwibGNfc2VjcmV0cyIsInVuZGVmaW5lZCIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwibGNfc2VyaWFsaXphYmxlX2tleXMiLCJsY19uYW1lIiwibGNfaWQiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsImlnbm9yZUxMTSIsImlnbm9yZUNoYWluIiwiaWdub3JlQWdlbnQiLCJpZ25vcmVSZXRyaWV2ZXIiLCJpZ25vcmVDdXN0b21FdmVudCIsInJhaXNlRXJyb3IiLCJhd2FpdEhhbmRsZXJzIiwiX2F3YWl0SGFuZGxlciIsImNvcHkiLCJ0b0pTT04iLCJwcm90b3R5cGUiLCJjYWxsIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJmcm9tTWV0aG9kcyIsIm1ldGhvZHMiLCJIYW5kbGVyIiwidjQiLCJhc3NpZ24iLCJpc0Jhc2VDYWxsYmFja0hhbmRsZXIiLCJjYWxsYmFja0hhbmRsZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   BaseRunManager: () => (/* binding */ BaseRunManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n/* harmony import */ var _utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/callbacks.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../singletons/async_local_storage/context.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\");\n\n\n\n\n\n\n\n\n\n\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    get parentRunId() {\n        return this._parentRunId;\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, _runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleCustomEvent?.(eventName, data, this.runId, this.tags, this.metadata);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err, _runId, _parentRunId, _tags, extraParams) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags, extraParams);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output, _runId, _parentRunId, _tags, extraParams) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags, extraParams);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForLLMStart(llm, [\n                        prompt\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        await handler.handleLLMStart?.(llm, [\n                            prompt\n                        ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForChatModelStart(llm, [\n                        messageGroup\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        if (handler.handleChatModelStart) {\n                            await handler.handleChatModelStart?.(llm, [\n                                messageGroup\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } else if (handler.handleLLMStart) {\n                            const messageString = (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.getBufferString)(messageGroup);\n                            await handler.handleLLMStart?.(llm, [\n                                messageString\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        }\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreChain) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForChainStart(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreAgent) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForToolStart(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreRetriever) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForRetrieverStart(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreCustomEvent) {\n                    try {\n                        await handler.handleCustomEvent?.(eventName, data, runId, this.tags, this.metadata);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_9__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        return this._configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options);\n    }\n    // TODO: Deprecate async method in favor of this one.\n    static _configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree()?.tracingEnabled || (0,_utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__.isTracingEnabled)();\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    const tracerV2 = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer();\n                    callbackManager.addHandler(tracerV2, true);\n                    // handoff between langchain and langsmith/traceable\n                    // override the parent run ID\n                    callbackManager._parentRunId = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree()?.id ?? callbackManager._parentRunId;\n                }\n            }\n        }\n        for (const { contextVar, inheritable = true, handlerClass, envVar } of (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__._getConfigureHooks)()){\n            const createIfNotInContext = envVar && (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(envVar) === \"true\" && handlerClass;\n            let handler;\n            const contextVarValue = contextVar !== undefined ? (0,_singletons_async_local_storage_context_js__WEBPACK_IMPORTED_MODULE_8__.getContextVariable)(contextVar) : undefined;\n            if (contextVarValue && (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseCallbackHandler)(contextVarValue)) {\n                handler = contextVarValue;\n            } else if (createIfNotInContext) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                handler = new handlerClass({});\n            }\n            if (handler !== undefined) {\n                if (!callbackManager) {\n                    callbackManager = new CallbackManager();\n                }\n                if (!callbackManager.handlers.some((h)=>h.name === handler.name)) {\n                    callbackManager.addHandler(handler, inheritable);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @deprecated Use [`traceable`](https://docs.smith.langchain.com/observability/how_to_guides/tracing/annotate_code)\n * from \"langsmith\" instead.\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ29DO0FBQ1Q7QUFDUjtBQUNFO0FBQ1M7QUFDbEI7QUFDUztBQUNQO0FBQ3FEO0FBQ2hHLFNBQVNhLHVCQUF1QkMsR0FBRztJQUN0QyxJQUFJLENBQUNBLEtBQUs7UUFDTixPQUFPLENBQUM7SUFDWixPQUNLLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsUUFBUSxVQUFVQSxLQUFLO1FBQzFDLE9BQU87WUFBRUcsV0FBV0g7UUFBSTtJQUM1QixPQUNLO1FBQ0QsT0FBT0E7SUFDWDtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNSTtJQUNUQyxXQUFXQyxPQUFPLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUNDLFdBQVcsQ0FBQztZQUFDRDtTQUFRO0lBQ3JDO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1FO0lBQ1RDLFlBQVlDLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUMsSUFBSSxFQUFFQyxlQUFlLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLFlBQVksQ0FBRTtRQUNsSEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPYjtRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1o7UUFDWDtRQUNBTyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHVCQUF1QjtZQUMvQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1g7UUFDWDtRQUNBTSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNk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LDhEQUE4RDtBQUN2RCxlQUFlMkksYUFBYUMsWUFBWSxFQUFFQyxZQUFZLEVBQUUsR0FBR0MsSUFBSTtJQUNsRSxNQUFNQyxhQUFhLElBQUlsQixXQUFXZSxhQUFhL0gsSUFBSSxFQUFFK0g7SUFDckQsTUFBTWhDLGtCQUFrQixNQUFNbUMsV0FBV1IsS0FBSyxDQUFDO1FBQUUsR0FBR08sSUFBSTtJQUFDO0lBQ3pELElBQUk7UUFDQSxNQUFNRSxTQUFTLE1BQU1ILGFBQWFqQyxvQkFBb0JrQztRQUN0RCxNQUFNQyxXQUFXUCxHQUFHLENBQUNDLGNBQWNPLFFBQVE7UUFDM0MsT0FBT0E7SUFDWCxFQUNBLE9BQU96SSxLQUFLO1FBQ1IsTUFBTXdJLFdBQVdwSSxLQUFLLENBQUNKO1FBQ3ZCLE1BQU1BO0lBQ1Y7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcz8wOWRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyLCBpc0Jhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgaXNUcmFjaW5nRW5hYmxlZCB9IGZyb20gXCIuLi91dGlscy9jYWxsYmFja3MuanNcIjtcbmltcG9ydCB7IGlzQmFzZVRyYWNlciB9IGZyb20gXCIuLi90cmFjZXJzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldENvbnRleHRWYXJpYWJsZSwgX2dldENvbmZpZ3VyZUhvb2tzLCB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvY29udGV4dC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgdGFncywgaW5oZXJpdGFibGVUYWdzLCBtZXRhZGF0YSwgaW5oZXJpdGFibGVNZXRhZGF0YSwgX3BhcmVudFJ1bklkKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZUhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlVGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZU1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IF9wYXJlbnRSdW5JZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHBhcmVudFJ1bklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUZXh0Py4odGV4dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVGV4dDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkYXRhLCBfcnVuSWQsIF90YWdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9tZXRhZGF0YSkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgdGhpcy5ydW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDdXN0b21FdmVudDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2VzIGNhbGxiYWNrcyBmb3IgcmV0cmlldmVyIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVuZD8uKGRvY3VtZW50cywgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckxMTVJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIGlkeCA/PyB7IHByb21wdDogMCwgY29tcGxldGlvbjogMCB9LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTU5ld1Rva2VuOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGt3YXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXQsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50QWN0aW9uPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50RW5kPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB3aXRoIE9wZW5BSSBhbmQgYSBzaW1wbGUgcHJvbXB0XG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBSdW5uaW5nIHRoZSBjaGFpbiB3aXRoIGEgc2luZ2xlIHF1ZXN0aW9uXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiAqICAgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGUgYWlyc3BlZWQgdmVsb2NpdHkgb2YgYW4gdW5sYWRlbiBzd2FsbG93P1wiLFxuICogfSk7XG4gKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlciBleHRlbmRzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFJ1bklkLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBvcHRpb25zPy5oYW5kbGVycyA/PyB0aGlzLmhhbmRsZXJzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgIHRoaXMudGFncyA9IG9wdGlvbnM/LnRhZ3MgPz8gdGhpcy50YWdzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IG9wdGlvbnM/LmluaGVyaXRhYmxlVGFncyA/PyB0aGlzLmluaGVyaXRhYmxlVGFncztcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZU1ldGFkYXRhID8/IHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGFyZW50IHJ1biBJRCwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBhcmVudCBydW4gSUQuXG4gICAgICovXG4gICAgZ2V0UGFyZW50UnVuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAvLyBDYW4ndCBoYXZlIGR1cGxpY2F0ZSBydW5zIHdpdGggdGhlIHNhbWUgcnVuIElEIChpZiBwcm92aWRlZClcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkXyA9IGlkeCA9PT0gMCAmJiBydW5JZCA/IHJ1bklkIDogdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgcnVuIHRvIHRoZSBydW4gbWFwLlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyB0aGlzIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQuXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0KGxsbSwgW3Byb21wdF0sIHJ1bklkXywgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFtwcm9tcHRdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobWVzc2FnZXMubWFwKGFzeW5jIChtZXNzYWdlR3JvdXAsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgaGF2ZSBkdXBsaWNhdGUgcnVucyB3aXRoIHRoZSBzYW1lIHJ1biBJRCAoaWYgcHJvdmlkZWQpXG4gICAgICAgICAgICBjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHV1aWR2NCgpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQ/LihsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRsZXIuaGFuZGxlTExNU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlU3RyaW5nID0gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgW21lc3NhZ2VTdHJpbmddLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkID0gdXVpZHY0KCksIHJ1blR5cGUgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQmFzZVRyYWNlcihoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyB0aGlzIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZC5cbiAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5TdGFydD8uKGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpblN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkID0gdXVpZHY0KCksIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgcnVuIHRvIHRoZSBydW4gbWFwLlxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIHRoaXMgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sU3RhcnQ/Lih0b29sLCBpbnB1dCwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCBydW4gdG8gdGhlIHJ1biBtYXAuXG4gICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQuXG4gICAgICAgICAgICAgICAgaGFuZGxlci5fY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJTdGFydD8uKHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkYXRhLCBydW5JZCwgX3RhZ3MsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX21ldGFkYXRhKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUN1c3RvbUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ3VzdG9tRXZlbnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmhlcml0KSB7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgIH1cbiAgICBzZXRIYW5kbGVycyhoYW5kbGVycywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVGFncyh0YWdzLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnJlbW92ZVRhZ3ModGFncyk7IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgIHRoaXMudGFncy5wdXNoKC4uLnRhZ3MpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVUYWdzKHRhZ3MpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdzLmZpbHRlcigodGFnKSA9PiAhdGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MgPSB0aGlzLmluaGVyaXRhYmxlVGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgfVxuICAgIGFkZE1ldGFkYXRhKG1ldGFkYXRhLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0geyAuLi50aGlzLm1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhID0geyAuLi50aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIC4uLm1ldGFkYXRhIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5tZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoYWRkaXRpb25hbEhhbmRsZXJzID0gW10sIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmluY2x1ZGVzKGhhbmRsZXIpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLnRhZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuaW5jbHVkZXModGFnKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgaW5oZXJpdGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IE9iamVjdC5rZXlzKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSkuaW5jbHVkZXMoa2V5KTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEoeyBba2V5XTogdGhpcy5tZXRhZGF0YVtrZXldIH0sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgYWRkaXRpb25hbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBQcmV2ZW50IG11bHRpcGxlIGNvcGllcyBvZiBjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcbiAgICAgICAgICAgIG1hbmFnZXIuaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChoKSA9PiBoLm5hbWUgPT09IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCIpXG4gICAgICAgICAgICAgICAgLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkdjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaGFuZGxlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgdGhpcygpO1xuICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIobmV3IEhhbmRsZXIoKSk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgY29uZmlndXJlKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmVTeW5jKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLy8gVE9ETzogRGVwcmVjYXRlIGFzeW5jIG1ldGhvZCBpbiBmYXZvciBvZiB0aGlzIG9uZS5cbiAgICBzdGF0aWMgX2NvbmZpZ3VyZVN5bmMoaW5oZXJpdGFibGVIYW5kbGVycywgbG9jYWxIYW5kbGVycywgaW5oZXJpdGFibGVUYWdzLCBsb2NhbFRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIGxvY2FsTWV0YWRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNhbGxiYWNrTWFuYWdlcjtcbiAgICAgICAgaWYgKGluaGVyaXRhYmxlSGFuZGxlcnMgfHwgbG9jYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5oZXJpdGFibGVIYW5kbGVycykgfHwgIWluaGVyaXRhYmxlSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLnNldEhhbmRsZXJzKGluaGVyaXRhYmxlSGFuZGxlcnM/Lm1hcChlbnN1cmVIYW5kbGVyKSA/PyBbXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBpbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gY2FsbGJhY2tNYW5hZ2VyLmNvcHkoQXJyYXkuaXNBcnJheShsb2NhbEhhbmRsZXJzKVxuICAgICAgICAgICAgICAgID8gbG9jYWxIYW5kbGVycy5tYXAoZW5zdXJlSGFuZGxlcilcbiAgICAgICAgICAgICAgICA6IGxvY2FsSGFuZGxlcnM/LmhhbmRsZXJzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVyYm9zZUVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1ZFUkJPU0VcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgICAgICBvcHRpb25zPy52ZXJib3NlO1xuICAgICAgICBjb25zdCB0cmFjaW5nVjJFbmFibGVkID0gTGFuZ0NoYWluVHJhY2VyLmdldFRyYWNlYWJsZVJ1blRyZWUoKT8udHJhY2luZ0VuYWJsZWQgfHxcbiAgICAgICAgICAgIGlzVHJhY2luZ0VuYWJsZWQoKTtcbiAgICAgICAgY29uc3QgdHJhY2luZ0VuYWJsZWQgPSB0cmFjaW5nVjJFbmFibGVkIHx8XG4gICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HXCIpID8/IGZhbHNlKTtcbiAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkIHx8IHRyYWNpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyLnByb3RvdHlwZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVIYW5kbGVyID0gbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihjb25zb2xlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhY2luZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNpbmdWMkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2VyVjIgPSBuZXcgTGFuZ0NoYWluVHJhY2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKHRyYWNlclYyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZG9mZiBiZXR3ZWVuIGxhbmdjaGFpbiBhbmQgbGFuZ3NtaXRoL3RyYWNlYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgcGFyZW50IHJ1biBJRFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuX3BhcmVudFJ1bklkID1cbiAgICAgICAgICAgICAgICAgICAgICAgIExhbmdDaGFpblRyYWNlci5nZXRUcmFjZWFibGVSdW5UcmVlKCk/LmlkID8/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLl9wYXJlbnRSdW5JZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB7IGNvbnRleHRWYXIsIGluaGVyaXRhYmxlID0gdHJ1ZSwgaGFuZGxlckNsYXNzLCBlbnZWYXIsIH0gb2YgX2dldENvbmZpZ3VyZUhvb2tzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUlmTm90SW5Db250ZXh0ID0gZW52VmFyICYmIGdldEVudmlyb25tZW50VmFyaWFibGUoZW52VmFyKSA9PT0gXCJ0cnVlXCIgJiYgaGFuZGxlckNsYXNzO1xuICAgICAgICAgICAgbGV0IGhhbmRsZXI7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0VmFyVmFsdWUgPSBjb250ZXh0VmFyICE9PSB1bmRlZmluZWQgPyBnZXRDb250ZXh0VmFyaWFibGUoY29udGV4dFZhcikgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoY29udGV4dFZhclZhbHVlICYmIGlzQmFzZUNhbGxiYWNrSGFuZGxlcihjb250ZXh0VmFyVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IGNvbnRleHRWYXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNyZWF0ZUlmTm90SW5Db250ZXh0KSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gbmV3IGhhbmRsZXJDbGFzcyh7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFuZGxlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdGFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVUYWdzIHx8IGxvY2FsVGFncykge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRUYWdzKGluaGVyaXRhYmxlVGFncyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MobG9jYWxUYWdzID8/IFtdLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaGVyaXRhYmxlTWV0YWRhdGEgfHwgbG9jYWxNZXRhZGF0YSkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShpbmhlcml0YWJsZU1ldGFkYXRhID8/IHt9KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkTWV0YWRhdGEobG9jYWxNZXRhZGF0YSA/PyB7fSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hbmFnZXI7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUhhbmRsZXIoaGFuZGxlcikge1xuICAgIGlmIChcIm5hbWVcIiBpbiBoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVyO1xuICAgIH1cbiAgICByZXR1cm4gQmFzZUNhbGxiYWNrSGFuZGxlci5mcm9tTWV0aG9kcyhoYW5kbGVyKTtcbn1cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIFtgdHJhY2VhYmxlYF0oaHR0cHM6Ly9kb2NzLnNtaXRoLmxhbmdjaGFpbi5jb20vb2JzZXJ2YWJpbGl0eS9ob3dfdG9fZ3VpZGVzL3RyYWNpbmcvYW5ub3RhdGVfY29kZSlcbiAqIGZyb20gXCJsYW5nc21pdGhcIiBpbnN0ZWFkLlxuICovXG5leHBvcnQgY2xhc3MgVHJhY2VHcm91cCB7XG4gICAgY29uc3RydWN0b3IoZ3JvdXBOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdyb3VwTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ3JvdXBOYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBvcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5NYW5hZ2VyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIoZ3JvdXBfbmFtZSwgaW5wdXRzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNiID0gbmV3IExhbmdDaGFpblRyYWNlcihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY20gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKFtjYl0pO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY20/LmhhbmRsZUNoYWluU3RhcnQoe1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcIm5vdF9pbXBsZW1lbnRlZFwiLFxuICAgICAgICAgICAgaWQ6IFtcImxhbmdjaGFpblwiLCBcImNhbGxiYWNrc1wiLCBcImdyb3Vwc1wiLCBncm91cF9uYW1lXSxcbiAgICAgICAgfSwgaW5wdXRzID8/IHt9KTtcbiAgICAgICAgaWYgKCFydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHJ1biBncm91cCBjYWxsYmFjayBtYW5hZ2VyLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuTWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoaW5wdXRzKSB7XG4gICAgICAgIGlmICghdGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSBhd2FpdCB0aGlzLmdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIodGhpcy5ncm91cE5hbWUsIGlucHV0cywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ydW5NYW5hZ2VyLmdldENoaWxkKCk7XG4gICAgfVxuICAgIGFzeW5jIGVycm9yKGVycikge1xuICAgICAgICBpZiAodGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bk1hbmFnZXIuaGFuZGxlQ2hhaW5FcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGVuZChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRW5kKG91dHB1dCA/PyB7fSk7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhY2VBc0dyb3VwKGdyb3VwT3B0aW9ucywgZW5jbG9zZWRDb2RlLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgdHJhY2VHcm91cCA9IG5ldyBUcmFjZUdyb3VwKGdyb3VwT3B0aW9ucy5uYW1lLCBncm91cE9wdGlvbnMpO1xuICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlciA9IGF3YWl0IHRyYWNlR3JvdXAuc3RhcnQoeyAuLi5hcmdzIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVuY2xvc2VkQ29kZShjYWxsYmFja01hbmFnZXIsIC4uLmFyZ3MpO1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVuZChfY29lcmNlVG9EaWN0KHJlc3VsdCwgXCJvdXRwdXRcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGF3YWl0IHRyYWNlR3JvdXAuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJpc0Jhc2VDYWxsYmFja0hhbmRsZXIiLCJDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIiwiZ2V0QnVmZmVyU3RyaW5nIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN1bWVDYWxsYmFjayIsImlzVHJhY2luZ0VuYWJsZWQiLCJpc0Jhc2VUcmFjZXIiLCJnZXRDb250ZXh0VmFyaWFibGUiLCJfZ2V0Q29uZmlndXJlSG9va3MiLCJwYXJzZUNhbGxiYWNrQ29uZmlnQXJnIiwiYXJnIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbGJhY2tzIiwiQmFzZUNhbGxiYWNrTWFuYWdlciIsInNldEhhbmRsZXIiLCJoYW5kbGVyIiwic2V0SGFuZGxlcnMiLCJCYXNlUnVuTWFuYWdlciIsImNvbnN0cnVjdG9yIiwicnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJ0YWdzIiwiaW5oZXJpdGFibGVUYWdzIiwibWV0YWRhdGEiLCJpbmhlcml0YWJsZU1ldGFkYXRhIiwiX3BhcmVudFJ1bklkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInBhcmVudFJ1bklkIiwiaGFuZGxlVGV4dCIsInRleHQiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZXJyIiwibG9nRnVuY3Rpb24iLCJyYWlzZUVycm9yIiwiY29uc29sZSIsImVycm9yIiwid2FybiIsIm5hbWUiLCJhd2FpdEhhbmRsZXJzIiwiaGFuZGxlQ3VzdG9tRXZlbnQiLCJldmVudE5hbWUiLCJkYXRhIiwiX3J1bklkIiwiX3RhZ3MiLCJfbWV0YWRhdGEiLCJDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4iLCJnZXRDaGlsZCIsInRhZyIsIm1hbmFnZXIiLCJDYWxsYmFja01hbmFnZXIiLCJhZGRUYWdzIiwiYWRkTWV0YWRhdGEiLCJoYW5kbGVSZXRyaWV2ZXJFbmQiLCJkb2N1bWVudHMiLCJpZ25vcmVSZXRyaWV2ZXIiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIkNhbGxiYWNrTWFuYWdlckZvckxMTVJ1biIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJmaWVsZHMiLCJpZ25vcmVMTE0iLCJwcm9tcHQiLCJjb21wbGV0aW9uIiwiaGFuZGxlTExNRXJyb3IiLCJleHRyYVBhcmFtcyIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsIkNhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIiwiaGFuZGxlQ2hhaW5FcnJvciIsImt3YXJncyIsImlnbm9yZUNoYWluIiwiaGFuZGxlQ2hhaW5FbmQiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImlnbm9yZUFnZW50IiwiaGFuZGxlQWdlbnRFbmQiLCJDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIiwiaGFuZGxlVG9vbEVycm9yIiwiaGFuZGxlVG9vbEVuZCIsIm9wdGlvbnMiLCJnZXRQYXJlbnRSdW5JZCIsImhhbmRsZUxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsInVuZGVmaW5lZCIsInJ1bk5hbWUiLCJydW5JZF8iLCJfY3JlYXRlUnVuRm9yTExNU3RhcnQiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsIm1lc3NhZ2VzIiwibWVzc2FnZUdyb3VwIiwiX2NyZWF0ZVJ1bkZvckNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZVN0cmluZyIsImhhbmRsZUNoYWluU3RhcnQiLCJjaGFpbiIsImlucHV0cyIsInJ1blR5cGUiLCJfY3JlYXRlUnVuRm9yQ2hhaW5TdGFydCIsImhhbmRsZVRvb2xTdGFydCIsInRvb2wiLCJpbnB1dCIsIl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQiLCJoYW5kbGVSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5IiwiX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0IiwiaWdub3JlQ3VzdG9tRXZlbnQiLCJhZGRIYW5kbGVyIiwiaW5oZXJpdCIsInB1c2giLCJyZW1vdmVIYW5kbGVyIiwiZmlsdGVyIiwiX2hhbmRsZXIiLCJyZW1vdmVUYWdzIiwiaW5jbHVkZXMiLCJyZW1vdmVNZXRhZGF0YSIsImtleSIsImtleXMiLCJjb3B5IiwiYWRkaXRpb25hbEhhbmRsZXJzIiwiaW5oZXJpdGFibGUiLCJoIiwic29tZSIsImZyb21IYW5kbGVycyIsIkhhbmRsZXIiLCJhc3NpZ24iLCJjb25maWd1cmUiLCJsb2NhbEhhbmRsZXJzIiwibG9jYWxUYWdzIiwibG9jYWxNZXRhZGF0YSIsIl9jb25maWd1cmVTeW5jIiwiY2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsInZlcmJvc2VFbmFibGVkIiwidmVyYm9zZSIsInRyYWNpbmdWMkVuYWJsZWQiLCJnZXRUcmFjZWFibGVSdW5UcmVlIiwidHJhY2luZ0VuYWJsZWQiLCJwcm90b3R5cGUiLCJjb25zb2xlSGFuZGxlciIsInRyYWNlclYyIiwiaWQiLCJjb250ZXh0VmFyIiwiaGFuZGxlckNsYXNzIiwiZW52VmFyIiwiY3JlYXRlSWZOb3RJbkNvbnRleHQiLCJjb250ZXh0VmFyVmFsdWUiLCJmcm9tTWV0aG9kcyIsIlRyYWNlR3JvdXAiLCJncm91cE5hbWUiLCJnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyIiwiZ3JvdXBfbmFtZSIsImNiIiwiY20iLCJydW5NYW5hZ2VyIiwibGMiLCJ0eXBlIiwiRXJyb3IiLCJzdGFydCIsImVuZCIsIl9jb2VyY2VUb0RpY3QiLCJkZWZhdWx0S2V5IiwidHJhY2VBc0dyb3VwIiwiZ3JvdXBPcHRpb25zIiwiZW5jbG9zZWRDb2RlIiwiYXJncyIsInRyYWNlR3JvdXAiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__.awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* reexport safe */ _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__.consumeCallback)\n/* harmony export */ });\n/* harmony import */ var _singletons_callbacks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/callbacks.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRjtBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvcHJvbWlzZXMuanM/ZWMzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhd2FpdEFsbENhbGxiYWNrcywgY29uc3VtZUNhbGxiYWNrIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvY2FsbGJhY2tzLmpzXCI7XG5leHBvcnQgeyBhd2FpdEFsbENhbGxiYWNrcywgY29uc3VtZUNhbGxiYWNrIH07XG4iXSwibmFtZXMiOlsiYXdhaXRBbGxDYWxsYmFja3MiLCJjb25zdW1lQ2FsbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/embeddings.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/embeddings.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */ class Embeddings {\n    constructor(params){\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(params ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUN0RDs7O0NBR0MsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEI7OztTQUdDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVYsK0RBQVdBLENBQUNHLFVBQVUsQ0FBQztJQUM3QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2VtYmVkZGluZ3MuanM/ZTE5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIG1ldGhvZHMgZm9yIGVtYmVkZGluZyBkb2N1bWVudHMgYW5kXG4gKiBxdWVyaWVzIHVzaW5nIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEVtYmVkZGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuICAgICAgICAgKiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXN5bmNDYWxsZXIiLCJFbWJlZGRpbmdzIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiY2FsbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/errors/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/errors/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLangChainErrorFields: () => (/* binding */ addLangChainErrorFields)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ /* eslint-disable no-param-reassign */ function addLangChainErrorFields(error, lc_error_code) {\n    error.lc_error_code = lc_error_code;\n    error.message = `${error.message}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${lc_error_code}/\\n`;\n    return error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxxREFBcUQsR0FDckQsb0NBQW9DLEdBQzdCLFNBQVNBLHdCQUF3QkMsS0FBSyxFQUFFQyxhQUFhO0lBQ3hERCxNQUFNQyxhQUFhLEdBQUdBO0lBQ3RCRCxNQUFNRSxPQUFPLEdBQUcsQ0FBQyxFQUFFRixNQUFNRSxPQUFPLENBQUMsOEVBQThFLEVBQUVELGNBQWMsR0FBRyxDQUFDO0lBQ25JLE9BQU9EO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXJyb3JzL2luZGV4LmpzPzE5MWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlcnJvciwgbGNfZXJyb3JfY29kZSkge1xuICAgIGVycm9yLmxjX2Vycm9yX2NvZGUgPSBsY19lcnJvcl9jb2RlO1xuICAgIGVycm9yLm1lc3NhZ2UgPSBgJHtlcnJvci5tZXNzYWdlfVxcblxcblRyb3VibGVzaG9vdGluZyBVUkw6IGh0dHBzOi8vanMubGFuZ2NoYWluLmNvbS9kb2NzL3Ryb3VibGVzaG9vdGluZy9lcnJvcnMvJHtsY19lcnJvcl9jb2RlfS9cXG5gO1xuICAgIHJldHVybiBlcnJvcjtcbn1cbiJdLCJuYW1lcyI6WyJhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyIsImVycm9yIiwibGNfZXJyb3JfY29kZSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/errors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken),\n/* harmony export */   isOpenAITool: () => (/* binding */ isOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _caches_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/caches/base.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    if (modelName.startsWith(\"gpt-4o\")) {\n        return \"gpt-4o\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\n/**\n * Whether or not the input matches the OpenAI tool definition.\n * @param {unknown} tool The input to check.\n * @returns {boolean} Whether the input is an OpenAI tool definition.\n */ function isOpenAITool(tool) {\n    if (typeof tool !== \"object\" || !tool) return false;\n    if (\"type\" in tool && tool.type === \"function\" && \"function\" in tool && typeof tool.function === \"object\" && tool.function && \"name\" in tool.function && \"parameters\" in tool.function) {\n        return true;\n    }\n    return false;\n}\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        const { cache, ...rest } = params;\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...rest\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof cache === \"object\") {\n            this.cache = cache;\n        } else if (cache) {\n            this.cache = _caches_base_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    async getNumTokens(content) {\n        // TODO: Figure out correct value.\n        if (typeof content !== \"string\") {\n            return 0;\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(content.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(content).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(// TODO: Fix when we remove the RunnableLambda backwards compatibility shim.\n    { config, ...callOptions }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUN3QjtBQUNSO0FBQ1g7QUFDQztBQUNSO0FBQ2hELDRDQUE0QztBQUNyQyxNQUFNTywwQkFBMEIsQ0FBQ0M7SUFDcEMsSUFBSUEsVUFBVUMsVUFBVSxDQUFDLHNCQUFzQjtRQUMzQyxPQUFPO0lBQ1g7SUFDQSxJQUFJRCxVQUFVQyxVQUFVLENBQUMsbUJBQW1CO1FBQ3hDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxjQUFjO1FBQ25DLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxXQUFXO1FBQ2hDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxXQUFXO1FBQ2hDLE9BQU87SUFDWDtJQUNBLE9BQU9EO0FBQ1gsRUFBRTtBQUNLLE1BQU1FLDBCQUEwQixDQUFDRjtJQUNwQyxPQUFRQTtRQUNKLEtBQUs7WUFDRCxPQUFPO1FBQ1g7WUFDSSxPQUFPO0lBQ2Y7QUFDSixFQUFFO0FBQ0ssTUFBTUcsc0JBQXNCLENBQUNIO0lBQ2hDLE9BQVFELHdCQUF3QkM7UUFDNUIsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDRjs7OztDQUlDLEdBQ00sU0FBU0ksYUFBYUMsSUFBSTtJQUM3QixJQUFJLE9BQU9BLFNBQVMsWUFBWSxDQUFDQSxNQUM3QixPQUFPO0lBQ1gsSUFB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QUlwRCw4REFBZUEsQ0FBQ29ELE1BQU1HLEdBQUcsQ0FBQ3RELDBFQUEwQkE7UUFDbkUsT0FDSztZQUNELE9BQU9tRDtRQUNYO0lBQ0o7SUFDQTs7S0FFQyxHQUNELDhEQUE4RDtJQUM5REkscUJBQXFCO1FBQ2pCLE9BQU8sQ0FBQztJQUNaO0lBQ0E7Ozs7S0FJQyxHQUNEQyx3Q0FDQSw0RUFBNEU7SUFDNUUsRUFBRUMsTUFBTSxFQUFFLEdBQUdDLGFBQWEsRUFBRTtRQUN4Qiw4REFBOEQ7UUFDOUQsTUFBTTNCLFNBQVM7WUFDWCxHQUFHLElBQUksQ0FBQ3dCLGtCQUFrQixFQUFFO1lBQzVCLEdBQUdHLFdBQVc7WUFDZEMsT0FBTyxJQUFJLENBQUNDLFFBQVE7WUFDcEJDLFFBQVEsSUFBSSxDQUFDQyxVQUFVO1FBQzNCO1FBQ0EsTUFBTUMsa0JBQWtCL0IsT0FBT2dDLE9BQU8sQ0FBQ2pDLFFBQVFrQyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxHQUFHN0IsTUFBTSxHQUFLQSxVQUFVVDtRQUNoRixNQUFNdUMsb0JBQW9CSixnQkFDckJULEdBQUcsQ0FBQyxDQUFDLENBQUNjLEtBQUsvQixNQUFNLEdBQUssQ0FBQyxFQUFFK0IsSUFBSSxDQUFDLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ2pDLE9BQU8sQ0FBQyxFQUN2RGtDLElBQUksR0FDSkMsSUFBSSxDQUFDO1FBQ1YsT0FBT0w7SUFDWDtJQUNBOzs7S0FHQyxHQUNETSxZQUFZO1FBQ1IsT0FBTztZQUNILEdBQUcsSUFBSSxDQUFDbEIsa0JBQWtCLEVBQUU7WUFDNUJJLE9BQU8sSUFBSSxDQUFDQyxRQUFRO1lBQ3BCQyxRQUFRLElBQUksQ0FBQ0MsVUFBVTtRQUMzQjtJQUNKO0lBQ0E7OztLQUdDLEdBQ0QsYUFBYVksWUFBWUMsS0FBSyxFQUFFO1FBQzVCLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzPzliZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuLi9jYWNoZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nUHJvbXB0VmFsdWUsIENoYXRQcm9tcHRWYWx1ZSwgfSBmcm9tIFwiLi4vcHJvbXB0X3ZhbHVlcy5qc1wiO1xuaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UgfSBmcm9tIFwiLi4vbWVzc2FnZXMvdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCB9IGZyb20gXCIuLi91dGlscy90aWt0b2tlbi5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbi8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2pzLXRpa3Rva2VuXG5leHBvcnQgY29uc3QgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby0xNmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJiby0xNmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJib1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC0zMmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNFwiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNG9cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTRvXCI7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbE5hbWU7XG59O1xuZXhwb3J0IGNvbnN0IGdldEVtYmVkZGluZ0NvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAobW9kZWxOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAyMDQ2O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0TW9kZWxDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpIHtcbiAgICAgICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMTZrXCI6XG4gICAgICAgICAgICByZXR1cm4gMTYzODQ7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NjtcbiAgICAgICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgICAgICAgICAgcmV0dXJuIDMyNzY4O1xuICAgICAgICBjYXNlIFwiZ3B0LTRcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWN1cmllLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODAwMDtcbiAgICAgICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgfVxufTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIGlucHV0IG1hdGNoZXMgdGhlIE9wZW5BSSB0b29sIGRlZmluaXRpb24uXG4gKiBAcGFyYW0ge3Vua25vd259IHRvb2wgVGhlIGlucHV0IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGlucHV0IGlzIGFuIE9wZW5BSSB0b29sIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSVRvb2wodG9vbCkge1xuICAgIGlmICh0eXBlb2YgdG9vbCAhPT0gXCJvYmplY3RcIiB8fCAhdG9vbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChcInR5cGVcIiBpbiB0b29sICYmXG4gICAgICAgIHRvb2wudHlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIFwiZnVuY3Rpb25cIiBpbiB0b29sICYmXG4gICAgICAgIHR5cGVvZiB0b29sLmZ1bmN0aW9uID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHRvb2wuZnVuY3Rpb24gJiZcbiAgICAgICAgXCJuYW1lXCIgaW4gdG9vbC5mdW5jdGlvbiAmJlxuICAgICAgICBcInBhcmFtZXRlcnNcIiBpbiB0b29sLmZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUsIH0pID0+IHtcbiAgICBsZXQgbnVtVG9rZW5zO1xuICAgIHRyeSB7XG4gICAgICAgIG51bVRva2VucyA9IChhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpKS5lbmNvZGUocHJvbXB0KS5sZW5ndGg7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiKTtcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAvLyBlYWNoIHRva2VuIGlzIH40IGNoYXJhY3RlcnM6IGh0dHBzOi8vaGVscC5vcGVuYWkuY29tL2VuL2FydGljbGVzLzQ5MzY4NTYtd2hhdC1hcmUtdG9rZW5zLWFuZC1ob3ctdG8tY291bnQtdGhlbSNcbiAgICAgICAgbnVtVG9rZW5zID0gTWF0aC5jZWlsKHByb21wdC5sZW5ndGggLyA0KTtcbiAgICB9XG4gICAgY29uc3QgbWF4VG9rZW5zID0gZ2V0TW9kZWxDb250ZXh0U2l6ZShtb2RlbE5hbWUpO1xuICAgIHJldHVybiBtYXhUb2tlbnMgLSBudW1Ub2tlbnM7XG59O1xuY29uc3QgZ2V0VmVyYm9zaXR5ID0gKCkgPT4gZmFsc2U7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscywgY2hhaW5zLCB0b29scy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5nQ2hhaW4gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWxsYmFja3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZlcmJvc2U6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKHBhcmFtcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHByaW50IG91dCByZXNwb25zZSB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmVyYm9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlcmJvc2UgPSBwYXJhbXMudmVyYm9zZSA/PyBnZXRWZXJib3NpdHkoKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBwYXJhbXMuY2FsbGJhY2tzO1xuICAgICAgICB0aGlzLnRhZ3MgPSBwYXJhbXMudGFncyA/PyBbXTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHBhcmFtcy5tZXRhZGF0YSA/PyB7fTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5ndWFnZU1vZGVsIGV4dGVuZHMgQmFzZUxhbmdDaGFpbiB7XG4gICAgLyoqXG4gICAgICogS2V5cyB0aGF0IHRoZSBsYW5ndWFnZSBtb2RlbCBhY2NlcHRzIGFzIGNhbGwgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzdG9wXCIsIFwidGltZW91dFwiLCBcInNpZ25hbFwiLCBcInRhZ3NcIiwgXCJtZXRhZGF0YVwiLCBcImNhbGxiYWNrc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoeyBjYWxsYmFja3MsIGNhbGxiYWNrTWFuYWdlciwgLi4ucGFyYW1zIH0pIHtcbiAgICAgICAgY29uc3QgeyBjYWNoZSwgLi4ucmVzdCB9ID0gcGFyYW1zO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBjYWxsYmFja3M6IGNhbGxiYWNrcyA/PyBjYWxsYmFja01hbmFnZXIsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcbiAgICAgICAgICogd2hpY2ggd2lsbCB0aHVzIGJlbmVmaXQgZnJvbSB0aGUgY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9lbmNvZGluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGNhY2hlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBJbk1lbW9yeUNhY2hlLmdsb2JhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcihwYXJhbXMgPz8ge30pO1xuICAgIH1cbiAgICBhc3luYyBnZXROdW1Ub2tlbnMoY29udGVudCkge1xuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3QgdmFsdWUuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBsZXQgbnVtVG9rZW5zID0gTWF0aC5jZWlsKGNvbnRlbnQubGVuZ3RoIC8gNCk7XG4gICAgICAgIGlmICghdGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW5jb2RpbmcgPSBhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKFwibW9kZWxOYW1lXCIgaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICA/IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKHRoaXMubW9kZWxOYW1lKVxuICAgICAgICAgICAgICAgICAgICA6IFwiZ3B0MlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbnVtVG9rZW5zID0gdGhpcy5fZW5jb2RpbmcuZW5jb2RlKGNvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtVG9rZW5zO1xuICAgIH1cbiAgICBzdGF0aWMgX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdQcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdFByb21wdFZhbHVlKGlucHV0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBvZiB0aGUgTExNLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHVuaXF1ZSBjYWNoZSBrZXkgZm9yIGEgc3BlY2lmaWMgY2FsbCB0byBhIHNwZWNpZmljIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBjYWxsT3B0aW9ucyBDYWxsIG9wdGlvbnMgZm9yIHRoZSBtb2RlbFxuICAgICAqIEByZXR1cm5zIEEgdW5pcXVlIGNhY2hlIGtleS5cbiAgICAgKi9cbiAgICBfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoXG4gICAgLy8gVE9ETzogRml4IHdoZW4gd2UgcmVtb3ZlIHRoZSBSdW5uYWJsZUxhbWJkYSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBzaGltLlxuICAgIHsgY29uZmlnLCAuLi5jYWxsT3B0aW9ucyB9KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICAuLi5jYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWx0ZXJlZEVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwYXJhbXMpLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRFbnRyaWVzID0gZmlsdGVyZWRFbnRyaWVzXG4gICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX06JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YClcbiAgICAgICAgICAgIC5zb3J0KClcbiAgICAgICAgICAgIC5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRFbnRyaWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBMb2FkIGFuIExMTSBmcm9tIGEganNvbi1saWtlIG9iamVjdCBkZXNjcmliaW5nIGl0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShfZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgLnRvSlNPTigpIGluc3RlYWRcIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkluTWVtb3J5Q2FjaGUiLCJTdHJpbmdQcm9tcHRWYWx1ZSIsIkNoYXRQcm9tcHRWYWx1ZSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwiQXN5bmNDYWxsZXIiLCJlbmNvZGluZ0Zvck1vZGVsIiwiUnVubmFibGUiLCJnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiIsIm1vZGVsTmFtZSIsInN0YXJ0c1dpdGgiLCJnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSIsImdldE1vZGVsQ29udGV4dFNpemUiLCJpc09wZW5BSVRvb2wiLCJ0b29sIiwidHlwZSIsImZ1bmN0aW9uIiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwicHJvbXB0IiwibnVtVG9rZW5zIiwiZW5jb2RlIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJjZWlsIiwibWF4VG9rZW5zIiwiZ2V0VmVyYm9zaXR5IiwiQmFzZUxhbmdDaGFpbiIsImxjX2F0dHJpYnV0ZXMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ2ZXJib3NlIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsIm1ldGFkYXRhIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJjYWxsS2V5cyIsImNhbGxiYWNrTWFuYWdlciIsImNhY2hlIiwicmVzdCIsImdsb2JhbCIsImNhbGxlciIsImdldE51bVRva2VucyIsImNvbnRlbnQiLCJfZW5jb2RpbmciLCJfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZSIsImlucHV0IiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiX2lkZW50aWZ5aW5nUGFyYW1zIiwiX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsIiwiY29uZmlnIiwiY2FsbE9wdGlvbnMiLCJfdHlwZSIsIl9sbG1UeXBlIiwiX21vZGVsIiwiX21vZGVsVHlwZSIsImZpbHRlcmVkRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJfIiwic2VyaWFsaXplZEVudHJpZXMiLCJrZXkiLCJKU09OIiwic3RyaW5naWZ5Iiwic29ydCIsImpvaW4iLCJzZXJpYWxpemUiLCJkZXNlcmlhbGl6ZSIsIl9kYXRhIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* binding */ createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../runnables/passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _utils_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/types/is_zod_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */ function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform (chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\" ? chunk.content : JSON.stringify(chunk.content)));\n        }\n    });\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */ class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseLanguageModel {\n    constructor(fields){\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"chat_models\",\n                this._llmType()\n            ]\n        });\n        Object.defineProperty(this, \"disableStreaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    _separateRunnableConfigFromCallOptionsCompat(options) {\n        // For backwards compat, keep `signal` in both runnableConfig and callOptions\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        callOptions.signal = runnableConfig.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */ async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks || this.disableStreaming) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n            const inheritableMetadata = {\n                ...runnableConfig.metadata,\n                ...this.getLsParams(callOptions)\n            };\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_4__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, inheritableMetadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [\n                messages\n            ], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let llmOutput;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null) chunk.message._updateId(`run-${runId}`);\n                    }\n                    chunk.message.response_metadata = {\n                        ...chunk.generationInfo,\n                        ...chunk.message.response_metadata\n                    };\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    } else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                    if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens\n                            }\n                        };\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    // TODO: Remove cast after figuring out inheritance\n                    generations: [\n                        [\n                            generationChunk\n                        ]\n                    ],\n                    llmOutput\n                })));\n        }\n    }\n    getLsParams(options) {\n        const providerName = this.getName().startsWith(\"Chat\") ? this.getName().replace(\"Chat\", \"\") : this.getName();\n        return {\n            ls_model_type: \"chat\",\n            ls_stop: options.stop,\n            ls_provider: providerName\n        };\n    }\n    /** @ignore */ async _generateUncached(messages, parsedOptions, handledOptions, startedRunManagers) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.coerceMessageLikeToMessage));\n        let runManagers;\n        if (startedRunManagers !== undefined && startedRunManagers.length === baseMessages.length) {\n            runManagers = startedRunManagers;\n        } else {\n            const inheritableMetadata = {\n                ...handledOptions.metadata,\n                ...this.getLsParams(parsedOptions)\n            };\n            // create callback manager and start run\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_4__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: parsedOptions,\n                invocation_params: this?.invocationParams(parsedOptions),\n                batch_size: 1\n            };\n            runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        }\n        const generations = [];\n        const llmOutputs = [];\n        // Even if stream is not explicitly called, check if model is implicitly\n        // called from streamEvents() or streamLog() to get all streamed events.\n        // Bail out if _streamResponseChunks not overridden\n        const hasStreamingHandler = !!runManagers?.[0].handlers.find(_callbacks_base_js__WEBPACK_IMPORTED_MODULE_9__.callbackHandlerPrefersStreaming);\n        if (hasStreamingHandler && !this.disableStreaming && baseMessages.length === 1 && this._streamResponseChunks !== BaseChatModel.prototype._streamResponseChunks) {\n            try {\n                const stream = await this._streamResponseChunks(baseMessages[0], parsedOptions, runManagers?.[0]);\n                let aggregated;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                let llmOutput;\n                for await (const chunk of stream){\n                    if (chunk.message.id == null) {\n                        const runId = runManagers?.at(0)?.runId;\n                        if (runId != null) chunk.message._updateId(`run-${runId}`);\n                    }\n                    if (aggregated === undefined) {\n                        aggregated = chunk;\n                    } else {\n                        aggregated = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_6__.concat)(aggregated, chunk);\n                    }\n                    if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isAIMessageChunk)(chunk.message) && chunk.message.usage_metadata !== undefined) {\n                        llmOutput = {\n                            tokenUsage: {\n                                promptTokens: chunk.message.usage_metadata.input_tokens,\n                                completionTokens: chunk.message.usage_metadata.output_tokens,\n                                totalTokens: chunk.message.usage_metadata.total_tokens\n                            }\n                        };\n                    }\n                }\n                if (aggregated === undefined) {\n                    throw new Error(\"Received empty response from chat model call.\");\n                }\n                generations.push([\n                    aggregated\n                ]);\n                await runManagers?.[0].handleLLMEnd({\n                    generations,\n                    llmOutput\n                });\n            } catch (e) {\n                await runManagers?.[0].handleLLMError(e);\n                throw e;\n            }\n        } else {\n            // generate results\n            const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {\n                    ...parsedOptions,\n                    promptIndex: i\n                }, runManagers?.[i])));\n            // handle results\n            await Promise.all(results.map(async (pResult, i)=>{\n                if (pResult.status === \"fulfilled\") {\n                    const result = pResult.value;\n                    for (const generation of result.generations){\n                        if (generation.message.id == null) {\n                            const runId = runManagers?.at(0)?.runId;\n                            if (runId != null) generation.message._updateId(`run-${runId}`);\n                        }\n                        generation.message.response_metadata = {\n                            ...generation.generationInfo,\n                            ...generation.message.response_metadata\n                        };\n                    }\n                    if (result.generations.length === 1) {\n                        result.generations[0].message.response_metadata = {\n                            ...result.llmOutput,\n                            ...result.generations[0].message.response_metadata\n                        };\n                    }\n                    generations[i] = result.generations;\n                    llmOutputs[i] = result.llmOutput;\n                    return runManagers?.[i]?.handleLLMEnd({\n                        generations: [\n                            result.generations\n                        ],\n                        llmOutput: result.llmOutput\n                    });\n                } else {\n                    // status === \"rejected\"\n                    await runManagers?.[i]?.handleLLMError(pResult.reason);\n                    return Promise.reject(pResult.reason);\n                }\n            }));\n        }\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined\n        };\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_2__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.coerceMessageLikeToMessage));\n        const inheritableMetadata = {\n            ...handledOptions.metadata,\n            ...this.getLsParams(parsedOptions)\n        };\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_4__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, inheritableMetadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index)=>{\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result.map((result)=>{\n                    if (\"message\" in result && (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(result.message) && (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isAIMessage)(result.message)) {\n                        // eslint-disable-next-line no-param-reassign\n                        result.message.usage_metadata = {\n                            input_tokens: 0,\n                            output_tokens: 0,\n                            total_tokens: 0\n                        };\n                    }\n                    // eslint-disable-next-line no-param-reassign\n                    result.generationInfo = {\n                        ...result.generationInfo,\n                        tokenUsage: {}\n                    };\n                    return result;\n                });\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                }, undefined, undefined, undefined, {\n                    cached: true\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason, undefined, undefined, undefined, {\n                    cached: true\n                });\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices,\n            startedRunManagers: runManagers\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_2__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>baseMessages[i]), callOptions, runnableConfig, startedRunManagers !== undefined ? missingPromptIndices.map((i)=>startedRunManagers?.[i]) : undefined);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async call(messages, options, callbacks) {\n        const result = await this.generate([\n            messages.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.coerceMessageLikeToMessage)\n        ], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */ async predict(text, options, callbacks) {\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(text);\n        const result = await this.call([\n            message\n        ], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n    withStructuredOutput(outputSchema, config) {\n        if (typeof this.bindTools !== \"function\") {\n            throw new Error(`Chat model must implement \".bindTools()\" to use withStructuredOutput.`);\n        }\n        if (config?.strict) {\n            throw new Error(`\"strict\" mode is not supported for this model by default.`);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const schema = outputSchema;\n        const name = config?.name;\n        const description = schema.description ?? \"A function available to call.\";\n        const method = config?.method;\n        const includeRaw = config?.includeRaw;\n        if (method === \"jsonMode\") {\n            throw new Error(`Base withStructuredOutput implementation only supports \"functionCalling\" as a method.`);\n        }\n        let functionName = name ?? \"extract\";\n        let tools;\n        if ((0,_utils_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_8__.isZodSchema)(schema)) {\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(schema)\n                    }\n                }\n            ];\n        } else {\n            if (\"name\" in schema) {\n                functionName = schema.name;\n            }\n            tools = [\n                {\n                    type: \"function\",\n                    function: {\n                        name: functionName,\n                        description,\n                        parameters: schema\n                    }\n                }\n            ];\n        }\n        const llm = this.bindTools(tools);\n        const outputParser = _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.RunnableLambda.from((input)=>{\n            if (!input.tool_calls || input.tool_calls.length === 0) {\n                throw new Error(\"No tool calls found in the response.\");\n            }\n            const toolCall = input.tool_calls.find((tc)=>tc.name === functionName);\n            if (!toolCall) {\n                throw new Error(`No tool call found with name ${functionName}.`);\n            }\n            return toolCall.args;\n        });\n        if (!includeRaw) {\n            return llm.pipe(outputParser).withConfig({\n                runName: \"StructuredOutput\"\n            });\n        }\n        const parserAssign = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_7__.RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config)=>outputParser.invoke(input.raw, config)\n        });\n        const parserNone = _runnables_passthrough_js__WEBPACK_IMPORTED_MODULE_7__.RunnablePassthrough.assign({\n            parsed: ()=>null\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [\n                parserNone\n            ]\n        });\n        return _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.RunnableSequence.from([\n            {\n                raw: llm\n            },\n            parsedWithFallback\n        ]).withConfig({\n            runName: \"StructuredOutputRunnable\"\n        });\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */ class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message\n                }\n            ]\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDcUY7QUFDakc7QUFDTTtBQUNZO0FBQ2M7QUFDN0I7QUFDc0I7QUFDSjtBQUNTO0FBQ3ZFOzs7O0NBSUMsR0FDTSxTQUFTZ0I7SUFDWixNQUFNQyxjQUFjLElBQUlDO0lBQ3hCLE9BQU8sSUFBSUMsZ0JBQWdCO1FBQ3ZCQyxXQUFVQyxLQUFLLEVBQUVDLFVBQVU7WUFDdkJBLFdBQVdDLE9BQU8sQ0FBQ04sWUFBWU8sTUFBTSxDQUFDLE9BQU9ILE1BQU1JLE9BQU8sS0FBSyxXQUN6REosTUFBTUksT0FBTyxHQUNiQyxLQUFLQyxTQUFTLENBQUNOLE1BQU1JLE9BQU87UUFDdEM7SUFDSjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsc0JBQXNCcEIsdURBQWlCQTtJQUNoRHFCLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ04sMkNBQTJDO1FBQzNDQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBZSxJQUFJLENBQUNDLFFBQVE7YUFBRztRQUN4RDtRQUNBTixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQUUsNkNBQTZDQyxPQUFPLEVBQUU7UUFDbEQsNkVBQTZFO1FBQzdFLE1BQU0sQ0FBQ0MsZ0JBQWdCQyxZQUFZLEdBQUcsS0FBSyxDQUFDQyx1Q0FBdUNIO1FBQ25GRSxZQUFZRSxNQUFNLEdBQUdILGVBQWVHLE1BQU07UUFDMUMsT0FBTztZQUFDSDtZQUFnQkM7U0FBWTtJQUN4QztJQUNBOzs7OztLQUtD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REFBU0EsQ0FBQ3dKO1FBQzlCLElBQUksT0FBT3BHLFFBQVE1QixPQUFPLEtBQUssVUFBVTtZQUNyQyxNQUFNLElBQUlpQyxNQUFNO1FBQ3BCO1FBQ0EsT0FBTztZQUNITixhQUFhO2dCQUNUO29CQUNJcUcsTUFBTXBHLFFBQVE1QixPQUFPO29CQUNyQjRCO2dCQUNKO2FBQ0g7UUFDTDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzPzJkODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgQUlNZXNzYWdlLCBIdW1hbk1lc3NhZ2UsIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlLCBpc0FJTWVzc2FnZUNodW5rLCBpc0Jhc2VNZXNzYWdlLCBpc0FJTWVzc2FnZSwgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFJVTl9LRVksIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5ndWFnZU1vZGVsLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhLCBSdW5uYWJsZVNlcXVlbmNlLCB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVQYXNzdGhyb3VnaCB9IGZyb20gXCIuLi9ydW5uYWJsZXMvcGFzc3Rocm91Z2guanNcIjtcbmltcG9ydCB7IGlzWm9kU2NoZW1hIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL2lzX3pvZF9zY2hlbWEuanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmcgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL2Jhc2UuanNcIjtcbi8qKlxuICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBzdHJlYW0gZm9yIGVuY29kaW5nIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIEJ5dGVzT3V0cHV0UGFyc2VyfSBpbnN0ZWFkXG4gKiBAcmV0dXJucyBBIFRyYW5zZm9ybVN0cmVhbSBpbnN0YW5jZSB0aGF0IGVuY29kZXMgY2hhdCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoYXRNZXNzYWdlQ2h1bmtFbmNvZGVyU3RyZWFtKCkge1xuICAgIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0ZXh0RW5jb2Rlci5lbmNvZGUodHlwZW9mIGNodW5rLmNvbnRlbnQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICA/IGNodW5rLmNvbnRlbnRcbiAgICAgICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGNodW5rLmNvbnRlbnQpKSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGNoYXQgbW9kZWxzLiBJdCBleHRlbmRzIHRoZSBCYXNlTGFuZ3VhZ2VNb2RlbCBjbGFzcyBhbmRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGdlbmVyYXRpbmcgY2hhdCBiYXNlZCBvbiBpbnB1dCBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIC8vIE9ubHkgZXZlciBpbnN0YW50aWF0ZWQgaW4gbWFpbiBMYW5nQ2hhaW5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJjaGF0X21vZGVsc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXNhYmxlU3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucykge1xuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdCwga2VlcCBgc2lnbmFsYCBpbiBib3RoIHJ1bm5hYmxlQ29uZmlnIGFuZCBjYWxsT3B0aW9uc1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHN1cGVyLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjYWxsT3B0aW9ucy5zaWduYWwgPSBydW5uYWJsZUNvbmZpZy5zaWduYWw7XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgc2luZ2xlIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2VDaHVuay5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0VmFsdWUgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVByb21wdChbcHJvbXB0VmFsdWVdLCBvcHRpb25zLCBvcHRpb25zPy5jYWxsYmFja3MpO1xuICAgICAgICBjb25zdCBjaGF0R2VuZXJhdGlvbiA9IHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXTtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgIHJldHVybiBjaGF0R2VuZXJhdGlvbi5tZXNzYWdlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX21lc3NhZ2VzLCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBTdWJjbGFzcyBjaGVjayByZXF1aXJlZCB0byBhdm9pZCBkb3VibGUgY2FsbGJhY2tzIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09XG4gICAgICAgICAgICBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MgfHxcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN0cmVhbWluZykge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHByb21wdC50b0NoYXRNZXNzYWdlcygpO1xuICAgICAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0KG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGVNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAuLi5ydW5uYWJsZUNvbmZpZy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdldExzUGFyYW1zKGNhbGxPcHRpb25zKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoY2FsbE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBbbWVzc2FnZXNdLCBydW5uYWJsZUNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHJ1bm5hYmxlQ29uZmlnLnJ1bk5hbWUpO1xuICAgICAgICAgICAgbGV0IGdlbmVyYXRpb25DaHVuaztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgbGxtT3V0cHV0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLm1lc3NhZ2UuaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuSWQgPSBydW5NYW5hZ2Vycz8uYXQoMCk/LnJ1bklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bklkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS5fdXBkYXRlSWQoYHJ1bi0ke3J1bklkfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2VuZXJhdGlvbkNodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25DaHVuayA9IGdlbmVyYXRpb25DaHVuay5jb25jYXQoY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FJTWVzc2FnZUNodW5rKGNodW5rLm1lc3NhZ2UpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxsbU91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS5pbnB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Ub2tlbnM6IGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEub3V0cHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEudG90YWxfdG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihlcnIpKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtbZ2VuZXJhdGlvbkNodW5rXV0sXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0LFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMc1BhcmFtcyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IHRoaXMuZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoXCJDaGF0XCIpXG4gICAgICAgICAgICA/IHRoaXMuZ2V0TmFtZSgpLnJlcGxhY2UoXCJDaGF0XCIsIFwiXCIpXG4gICAgICAgICAgICA6IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbHNfbW9kZWxfdHlwZTogXCJjaGF0XCIsXG4gICAgICAgICAgICBsc19zdG9wOiBvcHRpb25zLnN0b3AsXG4gICAgICAgICAgICBsc19wcm92aWRlcjogcHJvdmlkZXJOYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZVVuY2FjaGVkKG1lc3NhZ2VzLCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgc3RhcnRlZFJ1bk1hbmFnZXJzKSB7XG4gICAgICAgIGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICBsZXQgcnVuTWFuYWdlcnM7XG4gICAgICAgIGlmIChzdGFydGVkUnVuTWFuYWdlcnMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc3RhcnRlZFJ1bk1hbmFnZXJzLmxlbmd0aCA9PT0gYmFzZU1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgcnVuTWFuYWdlcnMgPSBzdGFydGVkUnVuTWFuYWdlcnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZU1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgIC4uLmhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0THNQYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gY3JlYXRlIGNhbGxiYWNrIG1hbmFnZXIgYW5kIHN0YXJ0IHJ1blxuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoaGFuZGxlZE9wdGlvbnMuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgaGFuZGxlZE9wdGlvbnMudGFncywgdGhpcy50YWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICAgICAgYmF0Y2hfc2l6ZTogMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcywgaGFuZGxlZE9wdGlvbnMucnVuSWQsIHVuZGVmaW5lZCwgZXh0cmEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoYW5kbGVkT3B0aW9ucy5ydW5OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBjb25zdCBsbG1PdXRwdXRzID0gW107XG4gICAgICAgIC8vIEV2ZW4gaWYgc3RyZWFtIGlzIG5vdCBleHBsaWNpdGx5IGNhbGxlZCwgY2hlY2sgaWYgbW9kZWwgaXMgaW1wbGljaXRseVxuICAgICAgICAvLyBjYWxsZWQgZnJvbSBzdHJlYW1FdmVudHMoKSBvciBzdHJlYW1Mb2coKSB0byBnZXQgYWxsIHN0cmVhbWVkIGV2ZW50cy5cbiAgICAgICAgLy8gQmFpbCBvdXQgaWYgX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIG5vdCBvdmVycmlkZGVuXG4gICAgICAgIGNvbnN0IGhhc1N0cmVhbWluZ0hhbmRsZXIgPSAhIXJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlcnMuZmluZChjYWxsYmFja0hhbmRsZXJQcmVmZXJzU3RyZWFtaW5nKTtcbiAgICAgICAgaWYgKGhhc1N0cmVhbWluZ0hhbmRsZXIgJiZcbiAgICAgICAgICAgICF0aGlzLmRpc2FibGVTdHJlYW1pbmcgJiZcbiAgICAgICAgICAgIGJhc2VNZXNzYWdlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzICE9PVxuICAgICAgICAgICAgICAgIEJhc2VDaGF0TW9kZWwucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhiYXNlTWVzc2FnZXNbMF0sIHBhcnNlZE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pO1xuICAgICAgICAgICAgICAgIGxldCBhZ2dyZWdhdGVkO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgbGV0IGxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsubWVzc2FnZS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBydW5JZCA9IHJ1bk1hbmFnZXJzPy5hdCgwKT8ucnVuSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVuSWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5tZXNzYWdlLl91cGRhdGVJZChgcnVuLSR7cnVuSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZCA9IGNvbmNhdChhZ2dyZWdhdGVkLCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQUlNZXNzYWdlQ2h1bmsoY2h1bmsubWVzc2FnZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLm1lc3NhZ2UudXNhZ2VfbWV0YWRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGxtT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuVXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0VG9rZW5zOiBjaHVuay5tZXNzYWdlLnVzYWdlX21ldGFkYXRhLmlucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogY2h1bmsubWVzc2FnZS51c2FnZV9tZXRhZGF0YS50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFnZ3JlZ2F0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWNlaXZlZCBlbXB0eSByZXNwb25zZSBmcm9tIGNoYXQgbW9kZWwgY2FsbC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zLnB1c2goW2FnZ3JlZ2F0ZWRdKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXJzPy5bMF0uaGFuZGxlTExNRXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHJlc3VsdHNcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QsIGkpID0+IHRoaXMuX2dlbmVyYXRlKG1lc3NhZ2VMaXN0LCB7IC4uLnBhcnNlZE9wdGlvbnMsIHByb21wdEluZGV4OiBpIH0sIHJ1bk1hbmFnZXJzPy5baV0pKSk7XG4gICAgICAgICAgICAvLyBoYW5kbGUgcmVzdWx0c1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5tYXAoYXN5bmMgKHBSZXN1bHQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocFJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIHJlc3VsdC5nZW5lcmF0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24ubWVzc2FnZS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuSWQgPSBydW5NYW5hZ2Vycz8uYXQoMCk/LnJ1bklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5JZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uLm1lc3NhZ2UuX3VwZGF0ZUlkKGBydW4tJHtydW5JZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5nZW5lcmF0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZW5lcmF0aW9uc1swXS5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0LmdlbmVyYXRpb25zWzBdLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW2ldID0gcmVzdWx0LmdlbmVyYXRpb25zO1xuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXRzW2ldID0gcmVzdWx0LmxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdC5nZW5lcmF0aW9uc10sXG4gICAgICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdHVzID09PSBcInJlamVjdGVkXCJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcnM/LltpXT8uaGFuZGxlTExNRXJyb3IocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmVhdGUgY29tYmluZWQgb3V0cHV0XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiBsbG1PdXRwdXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gdGhpcy5fY29tYmluZUxMTU91dHB1dD8uKC4uLmxsbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5NYW5hZ2Vyc1xuICAgICAgICAgICAgICAgID8geyBydW5JZHM6IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZUNhY2hlZCh7IG1lc3NhZ2VzLCBjYWNoZSwgbGxtU3RyaW5nS2V5LCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgfSkge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgaW5oZXJpdGFibGVNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIC4uLmhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgLi4udGhpcy5nZXRMc1BhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY3JlYXRlIGNhbGxiYWNrIG1hbmFnZXIgYW5kIHN0YXJ0IHJ1blxuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgYmFzZU1lc3NhZ2VzLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuICAgICAgICAvLyBnZW5lcmF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcChhc3luYyAoYmFzZU1lc3NhZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBKb2luIGFsbCBjb250ZW50IGludG8gb25lIHN0cmluZyBmb3IgdGhlIHByb21wdCBpbmRleFxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShiYXNlTWVzc2FnZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhY2hlLmxvb2t1cChwcm9tcHQsIGxsbVN0cmluZ0tleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gTWFwIHJ1biBtYW5hZ2VycyB0byB0aGUgcmVzdWx0cyBiZWZvcmUgZmlsdGVyaW5nIG91dCBudWxsIHJlc3VsdHNcbiAgICAgICAgLy8gTnVsbCByZXN1bHRzIGFyZSBqdXN0IGFic2VudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgICAgIC5tYXAoKHJlc3VsdCwgaW5kZXgpID0+ICh7IHJlc3VsdCwgcnVuTWFuYWdlcjogcnVuTWFuYWdlcnM/LltpbmRleF0gfSkpXG4gICAgICAgICAgICAuZmlsdGVyKCh7IHJlc3VsdCB9KSA9PiAocmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCkgfHxcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIik7XG4gICAgICAgIC8vIEhhbmRsZSByZXN1bHRzIGFuZCBjYWxsIHJ1biBtYW5hZ2Vyc1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWNoZWRSZXN1bHRzLm1hcChhc3luYyAoeyByZXN1bHQ6IHByb21pc2VSZXN1bHQsIHJ1bk1hbmFnZXIgfSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJvbWlzZVJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdC5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJtZXNzYWdlXCIgaW4gcmVzdWx0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Jhc2VNZXNzYWdlKHJlc3VsdC5tZXNzYWdlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBSU1lc3NhZ2UocmVzdWx0Lm1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5tZXNzYWdlLnVzYWdlX21ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuVXNhZ2U6IHt9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKHJlc3VsdFswXS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbcmVzdWx0XSxcbiAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHN0YXR1cyA9PT0gXCJyZWplY3RlZFwiXG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IocHJvbWlzZVJlc3VsdC5yZWFzb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwcm9taXNlUmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcyxcbiAgICAgICAgICAgIHN0YXJ0ZWRSdW5NYW5hZ2VyczogcnVuTWFuYWdlcnMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgY2hhdCBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIGFycmF5cyBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBMTE1SZXN1bHQuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICAvLyBwYXJzZSBjYWxsIG9wdGlvbnNcbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0KHBhcnNlZE9wdGlvbnMpO1xuICAgICAgICBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPSBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPz8gY2FsbGJhY2tzO1xuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKGJhc2VNZXNzYWdlcywgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSB0aGlzLl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzLCBzdGFydGVkUnVuTWFuYWdlcnMgfSA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlQ2FjaGVkKHtcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBiYXNlTWVzc2FnZXMsXG4gICAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICAgIGxsbVN0cmluZ0tleSxcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnM6IGNhbGxPcHRpb25zLFxuICAgICAgICAgICAgaGFuZGxlZE9wdGlvbnM6IHJ1bm5hYmxlQ29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxsbU91dHB1dCA9IHt9O1xuICAgICAgICBpZiAobWlzc2luZ1Byb21wdEluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQobWlzc2luZ1Byb21wdEluZGljZXMubWFwKChpKSA9PiBiYXNlTWVzc2FnZXNbaV0pLCBjYWxsT3B0aW9ucywgcnVubmFibGVDb25maWcsIHN0YXJ0ZWRSdW5NYW5hZ2VycyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IHN0YXJ0ZWRSdW5NYW5hZ2Vycz8uW2ldKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlc3VsdHMuZ2VuZXJhdGlvbnMubWFwKGFzeW5jIChnZW5lcmF0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdEluZGV4ID0gbWlzc2luZ1Byb21wdEluZGljZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW3Byb21wdEluZGV4XSA9IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gSm9pbiBhbGwgY29udGVudCBpbnRvIG9uZSBzdHJpbmcgZm9yIHRoZSBwcm9tcHQgaW5kZXhcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGJhc2VNZXNzYWdlc1twcm9tcHRJbmRleF0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnVwZGF0ZShwcm9tcHQsIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBfbW9kZWxUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJiYXNlX2NoYXRfbW9kZWxcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBwcm9tcHQgYmFzZWQgb24gdGhlIGlucHV0IHByb21wdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHByb21wdFZhbHVlcyBBbiBhcnJheSBvZiBCYXNlUHJvbXB0VmFsdWUgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUHJvbXB0KHByb21wdFZhbHVlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBjYWxsIHRvIHRoZSBjaGF0IG1vZGVsLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGwobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlKFttZXNzYWdlcy5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpXSwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSByZXN1bHQuZ2VuZXJhdGlvbnM7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9uc1swXVswXS5tZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIGNhbGwgdG8gdGhlIGNoYXQgbW9kZWwgd2l0aCBhIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0VmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGxQcm9tcHQocHJvbXB0VmFsdWUsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBwcm9tcHRNZXNzYWdlcyA9IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwocHJvbXB0TWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgcHJlZGljdE1lc3NhZ2VzKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBQcmVkaWN0cyB0aGUgbmV4dCBtZXNzYWdlIGJhc2VkIG9uIGEgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHRleHQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNhbGwoW21lc3NhZ2VdLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdC5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIHByZWRpY3Qgd2hlbiBvdXRwdXQgaXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmNvbnRlbnQ7XG4gICAgfVxuICAgIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgY29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kVG9vbHMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGF0IG1vZGVsIG11c3QgaW1wbGVtZW50IFwiLmJpbmRUb29scygpXCIgdG8gdXNlIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0LmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWc/LnN0cmljdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcInN0cmljdFwiIG1vZGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBtb2RlbCBieSBkZWZhdWx0LmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IG91dHB1dFNjaGVtYTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGNvbmZpZz8ubmFtZTtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzY2hlbWEuZGVzY3JpcHRpb24gPz8gXCJBIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBjYWxsLlwiO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBjb25maWc/Lm1ldGhvZDtcbiAgICAgICAgY29uc3QgaW5jbHVkZVJhdyA9IGNvbmZpZz8uaW5jbHVkZVJhdztcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJqc29uTW9kZVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhc2Ugd2l0aFN0cnVjdHVyZWRPdXRwdXQgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBcImZ1bmN0aW9uQ2FsbGluZ1wiIGFzIGEgbWV0aG9kLmApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmdW5jdGlvbk5hbWUgPSBuYW1lID8/IFwiZXh0cmFjdFwiO1xuICAgICAgICBsZXQgdG9vbHM7XG4gICAgICAgIGlmIChpc1pvZFNjaGVtYShzY2hlbWEpKSB7XG4gICAgICAgICAgICB0b29scyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKHNjaGVtYSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJuYW1lXCIgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gc2NoZW1hLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b29scyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxsbSA9IHRoaXMuYmluZFRvb2xzKHRvb2xzKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0UGFyc2VyID0gUnVubmFibGVMYW1iZGEuZnJvbSgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlmICghaW5wdXQudG9vbF9jYWxscyB8fCBpbnB1dC50b29sX2NhbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgY2FsbHMgZm91bmQgaW4gdGhlIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gaW5wdXQudG9vbF9jYWxscy5maW5kKCh0YykgPT4gdGMubmFtZSA9PT0gZnVuY3Rpb25OYW1lKTtcbiAgICAgICAgICAgIGlmICghdG9vbENhbGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHRvb2wgY2FsbCBmb3VuZCB3aXRoIG5hbWUgJHtmdW5jdGlvbk5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRvb2xDYWxsLmFyZ3M7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWluY2x1ZGVSYXcpIHtcbiAgICAgICAgICAgIHJldHVybiBsbG0ucGlwZShvdXRwdXRQYXJzZXIpLndpdGhDb25maWcoe1xuICAgICAgICAgICAgICAgIHJ1bk5hbWU6IFwiU3RydWN0dXJlZE91dHB1dFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VyQXNzaWduID0gUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHBhcnNlZDogKGlucHV0LCBjb25maWcpID0+IG91dHB1dFBhcnNlci5pbnZva2UoaW5wdXQucmF3LCBjb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VyTm9uZSA9IFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKHtcbiAgICAgICAgICAgIHBhcnNlZDogKCkgPT4gbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZFdpdGhGYWxsYmFjayA9IHBhcnNlckFzc2lnbi53aXRoRmFsbGJhY2tzKHtcbiAgICAgICAgICAgIGZhbGxiYWNrczogW3BhcnNlck5vbmVdLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmF3OiBsbG0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyc2VkV2l0aEZhbGxiYWNrLFxuICAgICAgICBdKS53aXRoQ29uZmlnKHtcbiAgICAgICAgICAgIHJ1bk5hbWU6IFwiU3RydWN0dXJlZE91dHB1dFJ1bm5hYmxlXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBleHRlbmRzIEJhc2VDaGF0TW9kZWwgYW5kIHByb3ZpZGVzIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiBvZiBfZ2VuZXJhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTaW1wbGVDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcbiAgICBhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMuX2NhbGwobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEFJTWVzc2FnZSh0ZXh0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBnZW5lcmF0ZSB3aXRoIGEgc2ltcGxlIGNoYXQgbW9kZWwgd2hlbiBvdXRwdXQgaXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiem9kVG9Kc29uU2NoZW1hIiwiQUlNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJpc0FJTWVzc2FnZUNodW5rIiwiaXNCYXNlTWVzc2FnZSIsImlzQUlNZXNzYWdlIiwiUlVOX0tFWSIsIkJhc2VMYW5ndWFnZU1vZGVsIiwiQ2FsbGJhY2tNYW5hZ2VyIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVNlcXVlbmNlIiwiY29uY2F0IiwiUnVubmFibGVQYXNzdGhyb3VnaCIsImlzWm9kU2NoZW1hIiwiY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyIsImNyZWF0ZUNoYXRNZXNzYWdlQ2h1bmtFbmNvZGVyU3RyZWFtIiwidGV4dEVuY29kZXIiLCJUZXh0RW5jb2RlciIsIlRyYW5zZm9ybVN0cmVhbSIsInRyYW5zZm9ybSIsImNodW5rIiwiY29udHJvbGxlciIsImVucXVldWUiLCJlbmNvZGUiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIkJhc2VDaGF0TW9kZWwiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfbGxtVHlwZSIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0Iiwib3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwiY2FsbE9wdGlvbnMiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsInNpZ25hbCIsImludm9rZSIsImlucHV0IiwicHJvbXB0VmFsdWUiLCJfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZSIsInJlc3VsdCIsImdlbmVyYXRlUHJvbXB0IiwiY2FsbGJhY2tzIiwiY2hhdEdlbmVyYXRpb24iLCJnZW5lcmF0aW9ucyIsIm1lc3NhZ2UiLCJfc3RyZWFtUmVzcG9uc2VDaHVua3MiLCJfbWVzc2FnZXMiLCJfb3B0aW9ucyIsIl9ydW5NYW5hZ2VyIiwiRXJyb3IiLCJfc3RyZWFtSXRlcmF0b3IiLCJwcm90b3R5cGUiLCJkaXNhYmxlU3RyZWFtaW5nIiwicHJvbXB0IiwibWVzc2FnZXMiLCJ0b0NoYXRNZXNzYWdlcyIsImluaGVyaXRhYmxlTWV0YWRhdGEiLCJtZXRhZGF0YSIsImdldExzUGFyYW1zIiwiY2FsbGJhY2tNYW5hZ2VyXyIsImNvbmZpZ3VyZSIsInRhZ3MiLCJ2ZXJib3NlIiwiZXh0cmEiLCJpbnZvY2F0aW9uX3BhcmFtcyIsImludm9jYXRpb25QYXJhbXMiLCJiYXRjaF9zaXplIiwicnVuTWFuYWdlcnMiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsInRvSlNPTiIsInJ1bklkIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsImdlbmVyYXRpb25DaHVuayIsImxsbU91dHB1dCIsImlkIiwiYXQiLCJfdXBkYXRlSWQiLCJyZXNwb25zZV9tZXRhZGF0YSIsImdlbmVyYXRpb25JbmZvIiwidXNhZ2VfbWV0YWRhdGEiLCJ0b2tlblVzYWdlIiwicHJvbXB0VG9rZW5zIiwiaW5wdXRfdG9rZW5zIiwiY29tcGxldGlvblRva2VucyIsIm91dHB1dF90b2tlbnMiLCJ0b3RhbFRva2VucyIsInRvdGFsX3Rva2VucyIsImVyciIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJydW5NYW5hZ2VyIiwiaGFuZGxlTExNRXJyb3IiLCJoYW5kbGVMTE1FbmQiLCJwcm92aWRlck5hbWUiLCJnZXROYW1lIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJsc19tb2RlbF90eXBlIiwibHNfc3RvcCIsInN0b3AiLCJsc19wcm92aWRlciIsIl9nZW5lcmF0ZVVuY2FjaGVkIiwicGFyc2VkT3B0aW9ucyIsImhhbmRsZWRPcHRpb25zIiwic3RhcnRlZFJ1bk1hbmFnZXJzIiwiYmFzZU1lc3NhZ2VzIiwibWVzc2FnZUxpc3QiLCJsZW5ndGgiLCJsbG1PdXRwdXRzIiwiaGFzU3RyZWFtaW5nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsInN0cmVhbSIsImFnZ3JlZ2F0ZWQiLCJwdXNoIiwiZSIsInJlc3VsdHMiLCJhbGxTZXR0bGVkIiwiaSIsIl9nZW5lcmF0ZSIsInByb21wdEluZGV4IiwicFJlc3VsdCIsInN0YXR1cyIsImdlbmVyYXRpb24iLCJyZWFzb24iLCJyZWplY3QiLCJvdXRwdXQiLCJfY29tYmluZUxMTU91dHB1dCIsInJ1bklkcyIsIm1hbmFnZXIiLCJfZ2VuZXJhdGVDYWNoZWQiLCJjYWNoZSIsImxsbVN0cmluZ0tleSIsIm1pc3NpbmdQcm9tcHRJbmRpY2VzIiwiYmFzZU1lc3NhZ2UiLCJpbmRleCIsInRvU3RyaW5nIiwibG9va3VwIiwiY2FjaGVkUmVzdWx0cyIsImZpbHRlciIsInByb21pc2VSZXN1bHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRleHQiLCJjYWNoZWQiLCJnZW5lcmF0ZSIsIkFycmF5IiwiaXNBcnJheSIsIl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbCIsInVwZGF0ZSIsIl9tb2RlbFR5cGUiLCJzZXJpYWxpemUiLCJfdHlwZSIsIl9tb2RlbCIsInByb21wdFZhbHVlcyIsInByb21wdE1lc3NhZ2VzIiwiY2FsbCIsImNhbGxQcm9tcHQiLCJwcmVkaWN0TWVzc2FnZXMiLCJwcmVkaWN0Iiwid2l0aFN0cnVjdHVyZWRPdXRwdXQiLCJvdXRwdXRTY2hlbWEiLCJjb25maWciLCJiaW5kVG9vbHMiLCJzdHJpY3QiLCJzY2hlbWEiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJtZXRob2QiLCJpbmNsdWRlUmF3IiwiZnVuY3Rpb25OYW1lIiwidG9vbHMiLCJ0eXBlIiwiZnVuY3Rpb24iLCJwYXJhbWV0ZXJzIiwibGxtIiwib3V0cHV0UGFyc2VyIiwiZnJvbSIsInRvb2xfY2FsbHMiLCJ0b29sQ2FsbCIsInRjIiwiYXJncyIsInBpcGUiLCJ3aXRoQ29uZmlnIiwicGFyc2VyQXNzaWduIiwiYXNzaWduIiwicGFyc2VkIiwicmF3IiwicGFyc2VyTm9uZSIsInBhcnNlZFdpdGhGYWxsYmFjayIsIndpdGhGYWxsYmFja3MiLCJmYWxsYmFja3MiLCJTaW1wbGVDaGF0TW9kZWwiLCJfY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/llms.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLM: () => (/* binding */ BaseLLM),\n/* harmony export */   LLM: () => (/* binding */ LLM)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n\n\n\n\n\n/**\n * LLM Wrapper. Takes in a prompt (or prompts) and returns a string.\n */ class BaseLLM extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseLanguageModel {\n    constructor({ concurrency, ...rest }){\n        super(concurrency ? {\n            maxConcurrency: concurrency,\n            ...rest\n        } : rest);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"llms\",\n                this._llmType()\n            ]\n        });\n    }\n    /**\n     * This method takes an input and options, and returns a string. It\n     * converts the input to a prompt value and generates a result based on\n     * the prompt.\n     * @param input Input for the LLM.\n     * @param options Options for the LLM call.\n     * @returns A string result based on the prompt.\n     */ async invoke(input, options) {\n        const promptValue = BaseLLM._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        return result.generations[0][0].text;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_input, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    _separateRunnableConfigFromCallOptionsCompat(options) {\n        // For backwards compat, keep `signal` in both runnableConfig and callOptions\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        callOptions.signal = runnableConfig.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseLLM.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseLLM._convertInputToPromptValue(input);\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(options);\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), [\n                prompt.toString()\n            ], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generation = new _outputs_js__WEBPACK_IMPORTED_MODULE_1__.GenerationChunk({\n                text: \"\"\n            });\n            try {\n                for await (const chunk of this._streamResponseChunks(prompt.toString(), callOptions, runManagers?.[0])){\n                    if (!generation) {\n                        generation = chunk;\n                    } else {\n                        generation = generation.concat(chunk);\n                    }\n                    if (typeof chunk.text === \"string\") {\n                        yield chunk.text;\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    generations: [\n                        [\n                            generation\n                        ]\n                    ]\n                })));\n        }\n    }\n    /**\n     * This method takes prompt values, options, and callbacks, and generates\n     * a result based on the prompts.\n     * @param promptValues Prompt values for the LLM.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns An LLMResult based on the prompts.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const prompts = promptValues.map((promptValue)=>promptValue.toString());\n        return this.generate(prompts, options, callbacks);\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _flattenLLMResult(llmResult) {\n        const llmResults = [];\n        for(let i = 0; i < llmResult.generations.length; i += 1){\n            const genList = llmResult.generations[i];\n            if (i === 0) {\n                llmResults.push({\n                    generations: [\n                        genList\n                    ],\n                    llmOutput: llmResult.llmOutput\n                });\n            } else {\n                const llmOutput = llmResult.llmOutput ? {\n                    ...llmResult.llmOutput,\n                    tokenUsage: {}\n                } : undefined;\n                llmResults.push({\n                    generations: [\n                        genList\n                    ],\n                    llmOutput\n                });\n            }\n        }\n        return llmResults;\n    }\n    /** @ignore */ async _generateUncached(prompts, parsedOptions, handledOptions, startedRunManagers) {\n        let runManagers;\n        if (startedRunManagers !== undefined && startedRunManagers.length === prompts.length) {\n            runManagers = startedRunManagers;\n        } else {\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: parsedOptions,\n                invocation_params: this?.invocationParams(parsedOptions),\n                batch_size: prompts.length\n            };\n            runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions?.runName);\n        }\n        // Even if stream is not explicitly called, check if model is implicitly\n        // called from streamEvents() or streamLog() to get all streamed events.\n        // Bail out if _streamResponseChunks not overridden\n        const hasStreamingHandler = !!runManagers?.[0].handlers.find(_callbacks_base_js__WEBPACK_IMPORTED_MODULE_5__.callbackHandlerPrefersStreaming);\n        let output;\n        if (hasStreamingHandler && prompts.length === 1 && this._streamResponseChunks !== BaseLLM.prototype._streamResponseChunks) {\n            try {\n                const stream = await this._streamResponseChunks(prompts[0], parsedOptions, runManagers?.[0]);\n                let aggregated;\n                for await (const chunk of stream){\n                    if (aggregated === undefined) {\n                        aggregated = chunk;\n                    } else {\n                        aggregated = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(aggregated, chunk);\n                    }\n                }\n                if (aggregated === undefined) {\n                    throw new Error(\"Received empty response from chat model call.\");\n                }\n                output = {\n                    generations: [\n                        [\n                            aggregated\n                        ]\n                    ],\n                    llmOutput: {}\n                };\n                await runManagers?.[0].handleLLMEnd(output);\n            } catch (e) {\n                await runManagers?.[0].handleLLMError(e);\n                throw e;\n            }\n        } else {\n            try {\n                output = await this._generate(prompts, parsedOptions, runManagers?.[0]);\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            const flattenedOutputs = this._flattenLLMResult(output);\n            await Promise.all((runManagers ?? []).map((runManager, i)=>runManager?.handleLLMEnd(flattenedOutputs[i])));\n        }\n        const runIds = runManagers?.map((manager)=>manager.runId) || undefined;\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runIds ? {\n                runIds\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ prompts, cache, llmStringKey, parsedOptions, handledOptions, runId }) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: prompts.length\n        };\n        const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, runId, undefined, extra, undefined, undefined, handledOptions?.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(prompts.map(async (prompt, index)=>{\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result.map((result)=>{\n                    // eslint-disable-next-line no-param-reassign\n                    result.generationInfo = {\n                        ...result.generationInfo,\n                        tokenUsage: {}\n                    };\n                    return result;\n                });\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                }, undefined, undefined, undefined, {\n                    cached: true\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason, undefined, undefined, undefined, {\n                    cached: true\n                });\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices,\n            startedRunManagers: runManagers\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Run the LLM on the given prompts and input, handling caching.\n     */ async generate(prompts, options, callbacks) {\n        if (!Array.isArray(prompts)) {\n            throw new Error(\"Argument 'prompts' is expected to be a string[]\");\n        }\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptionsCompat(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(prompts, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices, startedRunManagers } = await this._generateCached({\n            prompts,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig,\n            runId: runnableConfig.runId\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>prompts[i]), callOptions, runnableConfig, startedRunManagers !== undefined ? missingPromptIndices.map((i)=>startedRunManagers?.[i]) : undefined);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                return cache.update(prompts[promptIndex], llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     * Convenience wrapper for {@link generate} that takes in a single string prompt and returns a single string output.\n     */ async call(prompt, options, callbacks) {\n        const { generations } = await this.generate([\n            prompt\n        ], options, callbacks);\n        return generations[0][0].text;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method is similar to `call`, but it's used for making predictions\n     * based on the input text.\n     * @param text Input text for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A prediction based on the input text.\n     */ async predict(text, options, callbacks) {\n        return this.call(text, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method takes a list of messages, options, and callbacks, and\n     * returns a predicted message.\n     * @param messages A list of messages for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A predicted message based on the list of messages.\n     */ async predictMessages(messages, options, callbacks) {\n        const text = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(messages);\n        const prediction = await this.call(text, options, callbacks);\n        return new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(prediction);\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    _modelType() {\n        return \"base_llm\";\n    }\n}\n/**\n * LLM class that provides a simpler interface to subclass than {@link BaseLLM}.\n *\n * Requires only implementing a simpler {@link _call} method instead of {@link _generate}.\n *\n * @augments BaseLLM\n */ class LLM extends BaseLLM {\n    async _generate(prompts, options, runManager) {\n        const generations = await Promise.all(prompts.map((prompt, promptIndex)=>this._call(prompt, {\n                ...options,\n                promptIndex\n            }, runManager).then((text)=>[\n                    {\n                        text\n                    }\n                ])));\n        return {\n            generations\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUU7QUFDVDtBQUNDO0FBQ1o7QUFDSDtBQUMyQjtBQUN2RTs7Q0FFQyxHQUNNLE1BQU1RLGdCQUFnQkgsdURBQWlCQTtJQUMxQ0ksWUFBWSxFQUFFQyxXQUFXLEVBQUUsR0FBR0MsTUFBTSxDQUFFO1FBQ2xDLEtBQUssQ0FBQ0QsY0FBYztZQUFFRSxnQkFBZ0JGO1lBQWEsR0FBR0MsSUFBSTtRQUFDLElBQUlBO1FBQy9ELDJDQUEyQztRQUMzQ0UsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQVEsSUFBSSxDQUFDQyxRQUFRO2FBQUc7UUFDakQ7SUFDSjtJQUNBOzs7Ozs7O0tBT0MsR0FDRCxNQUFNQyxPQUFPQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtRQUN6QixNQUFNQyxjQUFjZixRQUFRZ0IsMEJBQTBCLENBQUNIO1FBQ3ZELE1BQU1JLFNBQVMsTUFBTSxJQUFJLENBQUNDLGNBQWMsQ0FBQztZQUFDSDtTQUFZLEVBQUVELFNBQVNBLFNBQVNLO1FBQzFFLE9BQU9GLE9BQU9HLFdBQVcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDQyxJQUFJO0lBQ3hDO0lBQ0EseUNBQXlDO0lBQ3pDLE9BQU9DLHNCQUFzQkMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFdBQVcsRUFBRTtRQUN4RCxNQUFNLElBQUlDLE1BQU07SUFDcEI7SUFDQUMsNkNBQTZDYixPQUFPLEVBQUU7UUFDbEQsNkVBQTZFO1FBQzdFLE1BQU0sQ0FBQ2MsZ0JBQWdCQyxZQUFZLEdBQUcsS0FBSyxDQUFDQyx1Q0FBdUNoQjtRQUNuRmUsWUFBWUUsTUFBTSxHQUFHSCxlQUFlRyxNQUFNO1FBQzFDLE9BQU87WUFBQ0g7WUFB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QUVBO29CQUFLO2lCQUFFO1FBQ2hLLE9BQU87WUFBRUQ7UUFBWTtJQUN6QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9sbG1zLmpzP2U0MzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlLCBnZXRCdWZmZXJTdHJpbmcsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBSVU5fS0VZLCBHZW5lcmF0aW9uQ2h1bmssIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5ndWFnZU1vZGVsLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmcgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL2Jhc2UuanNcIjtcbi8qKlxuICogTExNIFdyYXBwZXIuIFRha2VzIGluIGEgcHJvbXB0IChvciBwcm9tcHRzKSBhbmQgcmV0dXJucyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMTE0gZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoeyBjb25jdXJyZW5jeSwgLi4ucmVzdCB9KSB7XG4gICAgICAgIHN1cGVyKGNvbmN1cnJlbmN5ID8geyBtYXhDb25jdXJyZW5jeTogY29uY3VycmVuY3ksIC4uLnJlc3QgfSA6IHJlc3QpO1xuICAgICAgICAvLyBPbmx5IGV2ZXIgaW5zdGFudGlhdGVkIGluIG1haW4gTGFuZ0NoYWluXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwibGxtc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB0YWtlcyBhbiBpbnB1dCBhbmQgb3B0aW9ucywgYW5kIHJldHVybnMgYSBzdHJpbmcuIEl0XG4gICAgICogY29udmVydHMgdGhlIGlucHV0IHRvIGEgcHJvbXB0IHZhbHVlIGFuZCBnZW5lcmF0ZXMgYSByZXN1bHQgYmFzZWQgb25cbiAgICAgKiB0aGUgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCBmb3IgdGhlIExMTS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHQuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb21wdFZhbHVlID0gQmFzZUxMTS5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVQcm9tcHQoW3Byb21wdFZhbHVlXSwgb3B0aW9ucywgb3B0aW9ucz8uY2FsbGJhY2tzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXS50ZXh0O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX2lucHV0LCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucykge1xuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdCwga2VlcCBgc2lnbmFsYCBpbiBib3RoIHJ1bm5hYmxlQ29uZmlnIGFuZCBjYWxsT3B0aW9uc1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHN1cGVyLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjYWxsT3B0aW9ucy5zaWduYWwgPSBydW5uYWJsZUNvbmZpZy5zaWduYWw7XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBTdWJjbGFzcyBjaGVjayByZXF1aXJlZCB0byBhdm9pZCBkb3VibGUgY2FsbGJhY2tzIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09IEJhc2VMTE0ucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUxMTS5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQob3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIHJ1bm5hYmxlQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNhbGxPcHRpb25zLFxuICAgICAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKGNhbGxPcHRpb25zKSxcbiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQodGhpcy50b0pTT04oKSwgW3Byb21wdC50b1N0cmluZygpXSwgcnVubmFibGVDb25maWcucnVuSWQsIHVuZGVmaW5lZCwgZXh0cmEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBydW5uYWJsZUNvbmZpZy5ydW5OYW1lKTtcbiAgICAgICAgICAgIGxldCBnZW5lcmF0aW9uID0gbmV3IEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKHByb21wdC50b1N0cmluZygpLCBjYWxsT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZW5lcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uID0gZ2VuZXJhdGlvbi5jb25jYXQoY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsudGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgY2h1bmsudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbW2dlbmVyYXRpb25dXSxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgdGFrZXMgcHJvbXB0IHZhbHVlcywgb3B0aW9ucywgYW5kIGNhbGxiYWNrcywgYW5kIGdlbmVyYXRlc1xuICAgICAqIGEgcmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHRzLlxuICAgICAqIEBwYXJhbSBwcm9tcHRWYWx1ZXMgUHJvbXB0IHZhbHVlcyBmb3IgdGhlIExMTS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBDYWxsYmFja3MgZm9yIHRoZSBMTE0gY2FsbC5cbiAgICAgKiBAcmV0dXJucyBBbiBMTE1SZXN1bHQgYmFzZWQgb24gdGhlIHByb21wdHMuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVQcm9tcHQocHJvbXB0VmFsdWVzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0cyA9IHByb21wdFZhbHVlcy5tYXAoKHByb21wdFZhbHVlKSA9PiBwcm9tcHRWYWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW52b2NhdGlvblBhcmFtcyhfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIF9mbGF0dGVuTExNUmVzdWx0KGxsbVJlc3VsdCkge1xuICAgICAgICBjb25zdCBsbG1SZXN1bHRzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGxtUmVzdWx0LmdlbmVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBnZW5MaXN0ID0gbGxtUmVzdWx0LmdlbmVyYXRpb25zW2ldO1xuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBsbG1SZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW2dlbkxpc3RdLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IGxsbVJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsbG1PdXRwdXQgPSBsbG1SZXN1bHQubGxtT3V0cHV0XG4gICAgICAgICAgICAgICAgICAgID8geyAuLi5sbG1SZXN1bHQubGxtT3V0cHV0LCB0b2tlblVzYWdlOiB7fSB9XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGxsbVJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbZ2VuTGlzdF0sXG4gICAgICAgICAgICAgICAgICAgIGxsbU91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGxtUmVzdWx0cztcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfZ2VuZXJhdGVVbmNhY2hlZChwcm9tcHRzLCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgc3RhcnRlZFJ1bk1hbmFnZXJzKSB7XG4gICAgICAgIGxldCBydW5NYW5hZ2VycztcbiAgICAgICAgaWYgKHN0YXJ0ZWRSdW5NYW5hZ2VycyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzdGFydGVkUnVuTWFuYWdlcnMubGVuZ3RoID09PSBwcm9tcHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcnVuTWFuYWdlcnMgPSBzdGFydGVkUnVuTWFuYWdlcnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICAgICAgYmF0Y2hfc2l6ZTogcHJvbXB0cy5sZW5ndGgsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVMTE1TdGFydCh0aGlzLnRvSlNPTigpLCBwcm9tcHRzLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFdmVuIGlmIHN0cmVhbSBpcyBub3QgZXhwbGljaXRseSBjYWxsZWQsIGNoZWNrIGlmIG1vZGVsIGlzIGltcGxpY2l0bHlcbiAgICAgICAgLy8gY2FsbGVkIGZyb20gc3RyZWFtRXZlbnRzKCkgb3Igc3RyZWFtTG9nKCkgdG8gZ2V0IGFsbCBzdHJlYW1lZCBldmVudHMuXG4gICAgICAgIC8vIEJhaWwgb3V0IGlmIF9zdHJlYW1SZXNwb25zZUNodW5rcyBub3Qgb3ZlcnJpZGRlblxuICAgICAgICBjb25zdCBoYXNTdHJlYW1pbmdIYW5kbGVyID0gISFydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZXJzLmZpbmQoY2FsbGJhY2tIYW5kbGVyUHJlZmVyc1N0cmVhbWluZyk7XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIGlmIChoYXNTdHJlYW1pbmdIYW5kbGVyICYmXG4gICAgICAgICAgICBwcm9tcHRzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgIT09IEJhc2VMTE0ucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhwcm9tcHRzWzBdLCBwYXJzZWRPcHRpb25zLCBydW5NYW5hZ2Vycz8uWzBdKTtcbiAgICAgICAgICAgICAgICBsZXQgYWdncmVnYXRlZDtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWdncmVnYXRlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkID0gY29uY2F0KGFnZ3JlZ2F0ZWQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWdncmVnYXRlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY2VpdmVkIGVtcHR5IHJlc3BvbnNlIGZyb20gY2hhdCBtb2RlbCBjYWxsLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0geyBnZW5lcmF0aW9uczogW1thZ2dyZWdhdGVkXV0sIGxsbU91dHB1dDoge30gfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZUxMTUVuZChvdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2Vycz8uWzBdLmhhbmRsZUxMTUVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlKHByb21wdHMsIHBhcnNlZE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihlcnIpKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmxhdHRlbmVkT3V0cHV0cyA9IHRoaXMuX2ZsYXR0ZW5MTE1SZXN1bHQob3V0cHV0KTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoZmxhdHRlbmVkT3V0cHV0c1tpXSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5JZHMgPSBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuSWRzID8geyBydW5JZHMgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZUNhY2hlZCh7IHByb21wdHMsIGNhY2hlLCBsbG1TdHJpbmdLZXksIHBhcnNlZE9wdGlvbnMsIGhhbmRsZWRPcHRpb25zLCBydW5JZCwgfSkge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICBvcHRpb25zOiBwYXJzZWRPcHRpb25zLFxuICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICBiYXRjaF9zaXplOiBwcm9tcHRzLmxlbmd0aCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVMTE1TdGFydCh0aGlzLnRvSlNPTigpLCBwcm9tcHRzLCBydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgcmVzdWx0c1xuICAgICAgICBjb25zdCBtaXNzaW5nUHJvbXB0SW5kaWNlcyA9IFtdO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZS5sb29rdXAocHJvbXB0LCBsbG1TdHJpbmdLZXkpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ1Byb21wdEluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIE1hcCBydW4gbWFuYWdlcnMgdG8gdGhlIHJlc3VsdHMgYmVmb3JlIGZpbHRlcmluZyBvdXQgbnVsbCByZXN1bHRzXG4gICAgICAgIC8vIE51bGwgcmVzdWx0cyBhcmUganVzdCBhYnNlbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICAgIGNvbnN0IGNhY2hlZFJlc3VsdHMgPSByZXN1bHRzXG4gICAgICAgICAgICAubWFwKChyZXN1bHQsIGluZGV4KSA9PiAoeyByZXN1bHQsIHJ1bk1hbmFnZXI6IHJ1bk1hbmFnZXJzPy5baW5kZXhdIH0pKVxuICAgICAgICAgICAgLmZpbHRlcigoeyByZXN1bHQgfSkgPT4gKHJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgJiYgcmVzdWx0LnZhbHVlICE9IG51bGwpIHx8XG4gICAgICAgICAgICByZXN1bHQuc3RhdHVzID09PSBcInJlamVjdGVkXCIpO1xuICAgICAgICAvLyBIYW5kbGUgcmVzdWx0cyBhbmQgY2FsbCBydW4gbWFuYWdlcnNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FjaGVkUmVzdWx0cy5tYXAoYXN5bmMgKHsgcmVzdWx0OiBwcm9taXNlUmVzdWx0LCBydW5NYW5hZ2VyIH0sIGkpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHByb21pc2VSZXN1bHQudmFsdWU7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnNbaV0gPSByZXN1bHQubWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuVXNhZ2U6IHt9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKHJlc3VsdFswXS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbcmVzdWx0XSxcbiAgICAgICAgICAgICAgICB9LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHN0YXR1cyA9PT0gXCJyZWplY3RlZFwiXG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IocHJvbWlzZVJlc3VsdC5yZWFzb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwcm9taXNlUmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcyxcbiAgICAgICAgICAgIHN0YXJ0ZWRSdW5NYW5hZ2VyczogcnVuTWFuYWdlcnMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIExMTSBvbiB0aGUgZ2l2ZW4gcHJvbXB0cyBhbmQgaW5wdXQsIGhhbmRsaW5nIGNhY2hpbmcuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9tcHRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgJ3Byb21wdHMnIGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nW11cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnNDb21wYXQocGFyc2VkT3B0aW9ucyk7XG4gICAgICAgIHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA9IHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA/PyBjYWxsYmFja3M7XG4gICAgICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQocHJvbXB0cywgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSB0aGlzLl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzLCBzdGFydGVkUnVuTWFuYWdlcnMgfSA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlQ2FjaGVkKHtcbiAgICAgICAgICAgIHByb21wdHMsXG4gICAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICAgIGxsbVN0cmluZ0tleSxcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnM6IGNhbGxPcHRpb25zLFxuICAgICAgICAgICAgaGFuZGxlZE9wdGlvbnM6IHJ1bm5hYmxlQ29uZmlnLFxuICAgICAgICAgICAgcnVuSWQ6IHJ1bm5hYmxlQ29uZmlnLnJ1bklkLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxsbU91dHB1dCA9IHt9O1xuICAgICAgICBpZiAobWlzc2luZ1Byb21wdEluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQobWlzc2luZ1Byb21wdEluZGljZXMubWFwKChpKSA9PiBwcm9tcHRzW2ldKSwgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnLCBzdGFydGVkUnVuTWFuYWdlcnMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gbWlzc2luZ1Byb21wdEluZGljZXMubWFwKChpKSA9PiBzdGFydGVkUnVuTWFuYWdlcnM/LltpXSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLmdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHRJbmRleCA9IG1pc3NpbmdQcm9tcHRJbmRpY2VzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1twcm9tcHRJbmRleF0gPSBnZW5lcmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZS51cGRhdGUocHJvbXB0c1twcm9tcHRJbmRleF0sIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqIENvbnZlbmllbmNlIHdyYXBwZXIgZm9yIHtAbGluayBnZW5lcmF0ZX0gdGhhdCB0YWtlcyBpbiBhIHNpbmdsZSBzdHJpbmcgcHJvbXB0IGFuZCByZXR1cm5zIGEgc2luZ2xlIHN0cmluZyBvdXRwdXQuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbChwcm9tcHQsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCB7IGdlbmVyYXRpb25zIH0gPSBhd2FpdCB0aGlzLmdlbmVyYXRlKFtwcm9tcHRdLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbnNbMF1bMF0udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBzaW1pbGFyIHRvIGBjYWxsYCwgYnV0IGl0J3MgdXNlZCBmb3IgbWFraW5nIHByZWRpY3Rpb25zXG4gICAgICogYmFzZWQgb24gdGhlIGlucHV0IHRleHQuXG4gICAgICogQHBhcmFtIHRleHQgSW5wdXQgdGV4dCBmb3IgdGhlIHByZWRpY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgQ2FsbGJhY2tzIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHJldHVybnMgQSBwcmVkaWN0aW9uIGJhc2VkIG9uIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB0YWtlcyBhIGxpc3Qgb2YgbWVzc2FnZXMsIG9wdGlvbnMsIGFuZCBjYWxsYmFja3MsIGFuZFxuICAgICAqIHJldHVybnMgYSBwcmVkaWN0ZWQgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQSBsaXN0IG9mIG1lc3NhZ2VzIGZvciB0aGUgcHJlZGljdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBDYWxsYmFja3MgZm9yIHRoZSBMTE0gY2FsbC5cbiAgICAgKiBAcmV0dXJucyBBIHByZWRpY3RlZCBtZXNzYWdlIGJhc2VkIG9uIHRoZSBsaXN0IG9mIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3RNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgdGhpcy5jYWxsKHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHByZWRpY3Rpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgb2YgdGhlIExMTS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX21vZGVsVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYmFzZV9sbG1cIjtcbiAgICB9XG59XG4vKipcbiAqIExMTSBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2ltcGxlciBpbnRlcmZhY2UgdG8gc3ViY2xhc3MgdGhhbiB7QGxpbmsgQmFzZUxMTX0uXG4gKlxuICogUmVxdWlyZXMgb25seSBpbXBsZW1lbnRpbmcgYSBzaW1wbGVyIHtAbGluayBfY2FsbH0gbWV0aG9kIGluc3RlYWQgb2Yge0BsaW5rIF9nZW5lcmF0ZX0uXG4gKlxuICogQGF1Z21lbnRzIEJhc2VMTE1cbiAqL1xuZXhwb3J0IGNsYXNzIExMTSBleHRlbmRzIEJhc2VMTE0ge1xuICAgIGFzeW5jIF9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoKHByb21wdCwgcHJvbXB0SW5kZXgpID0+IHRoaXMuX2NhbGwocHJvbXB0LCB7IC4uLm9wdGlvbnMsIHByb21wdEluZGV4IH0sIHJ1bk1hbmFnZXIpLnRoZW4oKHRleHQpID0+IFt7IHRleHQgfV0pKSk7XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsImdldEJ1ZmZlclN0cmluZyIsIlJVTl9LRVkiLCJHZW5lcmF0aW9uQ2h1bmsiLCJDYWxsYmFja01hbmFnZXIiLCJCYXNlTGFuZ3VhZ2VNb2RlbCIsImNvbmNhdCIsImNhbGxiYWNrSGFuZGxlclByZWZlcnNTdHJlYW1pbmciLCJCYXNlTExNIiwiY29uc3RydWN0b3IiLCJjb25jdXJyZW5jeSIsInJlc3QiLCJtYXhDb25jdXJyZW5jeSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfbGxtVHlwZSIsImludm9rZSIsImlucHV0Iiwib3B0aW9ucyIsInByb21wdFZhbHVlIiwiX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUiLCJyZXN1bHQiLCJnZW5lcmF0ZVByb21wdCIsImNhbGxiYWNrcyIsImdlbmVyYXRpb25zIiwidGV4dCIsIl9zdHJlYW1SZXNwb25zZUNodW5rcyIsIl9pbnB1dCIsIl9vcHRpb25zIiwiX3J1bk1hbmFnZXIiLCJFcnJvciIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zQ29tcGF0IiwicnVubmFibGVDb25maWciLCJjYWxsT3B0aW9ucyIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zIiwic2lnbmFsIiwiX3N0cmVhbUl0ZXJhdG9yIiwicHJvdG90eXBlIiwicHJvbXB0IiwiY2FsbGJhY2tNYW5hZ2VyXyIsImNvbmZpZ3VyZSIsInRhZ3MiLCJtZXRhZGF0YSIsInZlcmJvc2UiLCJleHRyYSIsImludm9jYXRpb25fcGFyYW1zIiwiaW52b2NhdGlvblBhcmFtcyIsImJhdGNoX3NpemUiLCJydW5NYW5hZ2VycyIsImhhbmRsZUxMTVN0YXJ0IiwidG9KU09OIiwidG9TdHJpbmciLCJydW5JZCIsInVuZGVmaW5lZCIsInJ1bk5hbWUiLCJnZW5lcmF0aW9uIiwiY2h1bmsiLCJlcnIiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicnVuTWFuYWdlciIsImhhbmRsZUxMTUVycm9yIiwiaGFuZGxlTExNRW5kIiwicHJvbXB0VmFsdWVzIiwicHJvbXB0cyIsImdlbmVyYXRlIiwiX2ZsYXR0ZW5MTE1SZXN1bHQiLCJsbG1SZXN1bHQiLCJsbG1SZXN1bHRzIiwiaSIsImxlbmd0aCIsImdlbkxpc3QiLCJwdXNoIiwibGxtT3V0cHV0IiwidG9rZW5Vc2FnZSIsIl9nZW5lcmF0ZVVuY2FjaGVkIiwicGFyc2VkT3B0aW9ucyIsImhhbmRsZWRPcHRpb25zIiwic3RhcnRlZFJ1bk1hbmFnZXJzIiwiaGFzU3RyZWFtaW5nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsIm91dHB1dCIsInN0cmVhbSIsImFnZ3JlZ2F0ZWQiLCJlIiwiX2dlbmVyYXRlIiwiZmxhdHRlbmVkT3V0cHV0cyIsInJ1bklkcyIsIm1hbmFnZXIiLCJfZ2VuZXJhdGVDYWNoZWQiLCJjYWNoZSIsImxsbVN0cmluZ0tleSIsIm1pc3NpbmdQcm9tcHRJbmRpY2VzIiwicmVzdWx0cyIsImFsbFNldHRsZWQiLCJpbmRleCIsImxvb2t1cCIsImNhY2hlZFJlc3VsdHMiLCJmaWx0ZXIiLCJzdGF0dXMiLCJwcm9taXNlUmVzdWx0IiwiZ2VuZXJhdGlvbkluZm8iLCJoYW5kbGVMTE1OZXdUb2tlbiIsImNhY2hlZCIsInJlYXNvbiIsInJlamVjdCIsIkFycmF5IiwiaXNBcnJheSIsInN0b3AiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJwcm9tcHRJbmRleCIsInVwZGF0ZSIsImNhbGwiLCJwcmVkaWN0IiwicHJlZGljdE1lc3NhZ2VzIiwibWVzc2FnZXMiLCJwcmVkaWN0aW9uIiwiX2lkZW50aWZ5aW5nUGFyYW1zIiwic2VyaWFsaXplIiwiX3R5cGUiLCJfbW9kZWwiLCJfbW9kZWxUeXBlIiwiTExNIiwiX2NhbGwiLCJ0aGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEO0FBQzNCLFNBQVNFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRztJQUM5QixPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUgsdUNBQVNBLENBQUNHO0FBQ25DO0FBQ08sU0FBU0UsWUFBWUYsR0FBRyxFQUFFQyxHQUFHO0lBQ2hDLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJRixzQ0FBU0EsQ0FBQ0U7QUFDbkM7QUFDTyxTQUFTRyxRQUFRQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUosR0FBRztJQUN2QyxNQUFNSyxTQUFTLENBQUM7SUFDaEIsSUFBSyxNQUFNTixPQUFPSSxPQUFRO1FBQ3RCLElBQUlHLE9BQU9DLE1BQU0sQ0FBQ0osUUFBUUosTUFBTTtZQUM1Qk0sTUFBTSxDQUFDRCxPQUFPTCxLQUFLQyxLQUFLLEdBQUdHLE1BQU0sQ0FBQ0osSUFBSTtRQUMxQztJQUNKO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzPzBmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNuYWtlQ2FzZSBmcm9tIFwiZGVjYW1lbGl6ZVwiO1xuaW1wb3J0IGNhbWVsQ2FzZSBmcm9tIFwiY2FtZWxjYXNlXCI7XG5leHBvcnQgZnVuY3Rpb24ga2V5VG9Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgc25ha2VDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24ga2V5RnJvbUpzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBjYW1lbENhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBLZXlzKGZpZWxkcywgbWFwcGVyLCBtYXApIHtcbiAgICBjb25zdCBtYXBwZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oZmllbGRzLCBrZXkpKSB7XG4gICAgICAgICAgICBtYXBwZWRbbWFwcGVyKGtleSwgbWFwKV0gPSBmaWVsZHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwcGVkO1xufVxuIl0sIm5hbWVzIjpbInNuYWtlQ2FzZSIsImNhbWVsQ2FzZSIsImtleVRvSnNvbiIsImtleSIsIm1hcCIsImtleUZyb21Kc29uIiwibWFwS2V5cyIsImZpZWxkcyIsIm1hcHBlciIsIm1hcHBlZCIsIk9iamVjdCIsImhhc093biJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * A manual list of keys that should be serialized.\n     * If not overridden, all fields passed into the constructor will be serialized.\n     */ get lc_serializable_keys() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (this.lc_serializable_keys !== undefined) {\n            this.lc_kwargs = Object.fromEntries(Object.entries(kwargs || {}).filter(([key])=>this.lc_serializable_keys?.includes(key)));\n        } else {\n            this.lc_kwargs = kwargs ?? {};\n        }\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ25ELFNBQVNFLFlBQVlDLEdBQUc7SUFDcEIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1dBQUlBO0tBQUksR0FBRztRQUFFLEdBQUdBLEdBQUc7SUFBQztBQUNwRDtBQUNBLFNBQVNHLGVBQWVDLElBQUksRUFBRUMsVUFBVTtJQUNwQyxNQUFNQyxTQUFTUCxZQUFZSztJQUMzQixLQUFLLE1BQU0sQ0FBQ0csTUFBTUMsU0FBUyxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDdkQsTUFBTSxDQUFDTSxNQUFNLEdBQUdDLGFBQWEsR0FBR0wsS0FBS00sS0FBSyxDQUFDLEtBQUtDLE9BQU87UUFDdkQsOERBQThEO1FBQzlELElBQUlDLFVBQVVUO1FBQ2QsS0FBSyxNQUFNVSxRQUFRSixhQUFhRSxPQUFPLEdBQUk7WUFDdkMsSUFBSUMsT0FBTyxDQUFDQyxLQUFLLEtBQUtDLFdBQVc7Z0JBQzdCO1lBQ0o7WUFDQUYsT0FBTyxDQUFDQyxLQUFLLEdBQUdqQixZQUFZZ0IsT0FBTyxDQUFDQyxLQUFLO1lBQ3pDRCxVQUFVQSxPQUFPLENBQUNDLEtBQUs7UUFDM0I7UUFDQSxJQUFJRCxPQUFPLENBQUNKLEtBQUssS0FBS00sV0FBVztZQUM3QkYsT0FBTyxDQUFDSixLQUFLLEdBQUc7Z0JBQ1pPLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLElBQUk7b0JBQUNaO2lCQUFTO1lBQ2xCO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7O0NBR0MsR0FDTSxTQUFTZSxtQkFDaEIsbUVBQW1FO0FBQ25FQyxpQkFBaUI7SUFDYixnRUFBZ0U7SUFDaEUsNEVBQTRFO0lBQzVFLE1BQU1DLGNBQWNkLE9BQU9lLGNBQWMsQ0FBQ0Y7SUFDMUMsTUFBTUcscUJBQXFCLE9BQU9ILGtCQUFrQkksT0FBTyxLQUFL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QU9BLENBQUNXLE9BQU80QyxJQUFJLENBQUNELFNBQVNXLE1BQU0sR0FBRzVELGVBQWVpQyxRQUFRZ0IsV0FBV2hCLFFBQVF2QyxtREFBU0EsRUFBRXNEO1FBQ3ZHO0lBQ0o7SUFDQUQsdUJBQXVCO1FBQ25CLE9BQU87WUFDSGhDLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxJQUFJLElBQUksQ0FBQ1MsS0FBSztRQUNsQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanM/ZWUyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrZXlUb0pzb24sIG1hcEtleXMgfSBmcm9tIFwiLi9tYXBfa2V5cy5qc1wiO1xuZnVuY3Rpb24gc2hhbGxvd0NvcHkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKSA/IFsuLi5vYmpdIDogeyAuLi5vYmogfTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VTZWNyZXRzKHJvb3QsIHNlY3JldHNNYXApIHtcbiAgICBjb25zdCByZXN1bHQgPSBzaGFsbG93Q29weShyb290KTtcbiAgICBmb3IgKGNvbnN0IFtwYXRoLCBzZWNyZXRJZF0gb2YgT2JqZWN0LmVudHJpZXMoc2VjcmV0c01hcCkpIHtcbiAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBwYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBjdXJyZW50ID0gcmVzdWx0O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHNSZXZlcnNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRbcGFydF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHNoYWxsb3dDb3B5KGN1cnJlbnRbcGFydF0pO1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRbcGFydF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRbbGFzdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY3VycmVudFtsYXN0XSA9IHtcbiAgICAgICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNlY3JldFwiLFxuICAgICAgICAgICAgICAgIGlkOiBbc2VjcmV0SWRdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBHZXQgYSB1bmlxdWUgbmFtZSBmb3IgdGhlIG1vZHVsZSwgcmF0aGVyIHRoYW4gcGFyZW50IGNsYXNzIGltcGxlbWVudGF0aW9ucy5cbiAqIFNob3VsZCBub3QgYmUgc3ViY2xhc3NlZCwgc3ViY2xhc3MgbGNfbmFtZSBhYm92ZSBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X2xjX3VuaXF1ZV9uYW1lKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuc2VyaWFsaXphYmxlQ2xhc3MpIHtcbiAgICAvLyBcInN1cGVyXCIgaGVyZSB3b3VsZCByZWZlciB0byB0aGUgcGFyZW50IGNsYXNzIG9mIFNlcmlhbGl6YWJsZSxcbiAgICAvLyB3aGVuIHdlIHdhbnQgdGhlIHBhcmVudCBjbGFzcyBvZiB0aGUgbW9kdWxlIGFjdHVhbGx5IGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAgY29uc3QgcGFyZW50Q2xhc3MgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc2VyaWFsaXphYmxlQ2xhc3MpO1xuICAgIGNvbnN0IGxjTmFtZUlzU3ViY2xhc3NlZCA9IHR5cGVvZiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgKHR5cGVvZiBwYXJlbnRDbGFzcy5sY19uYW1lICE9PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUoKSAhPT0gcGFyZW50Q2xhc3MubGNfbmFtZSgpKTtcbiAgICBpZiAobGNOYW1lSXNTdWJjbGFzc2VkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubmFtZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2Ygc2VjcmV0cywgd2hpY2ggd2lsbCBiZSBvbWl0dGVkIGZyb20gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBLZXlzIGFyZSBwYXRocyB0byB0aGUgc2VjcmV0IGluIGNvbnN0cnVjdG9yIGFyZ3MsIGUuZy4gXCJmb28uYmFyLmJhelwiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIHNlY3JldCBpZHMsIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIGRlc2VyaWFsaXppbmcuXG4gICAgICovXG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFkZGl0aW9uYWwgYXR0cmlidXRlcyB0byBtZXJnZSB3aXRoIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMsIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZC5cbiAgICAgKiBUaGVzZSBhdHRyaWJ1dGVzIG5lZWQgdG8gYmUgYWNjZXB0ZWQgYnkgdGhlIGNvbnN0cnVjdG9yIGFzIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgYWxpYXNlcyBmb3IgY29uc3RydWN0b3IgYXJncy5cbiAgICAgKiBLZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLCBlLmcuIFwiZm9vXCIuXG4gICAgICogVmFsdWVzIGFyZSB0aGUgYWxpYXMgdGhhdCB3aWxsIHJlcGxhY2UgdGhlIGtleSBpbiBzZXJpYWxpemF0aW9uLlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byBlZy4gbWFrZSBhcmd1bWVudCBuYW1lcyBtYXRjaCBQeXRob24uXG4gICAgICovXG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFudWFsIGxpc3Qgb2Yga2V5cyB0aGF0IHNob3VsZCBiZSBzZXJpYWxpemVkLlxuICAgICAqIElmIG5vdCBvdmVycmlkZGVuLCBhbGwgZmllbGRzIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvciB3aWxsIGJlIHNlcmlhbGl6ZWQuXG4gICAgICovXG4gICAgZ2V0IGxjX3NlcmlhbGl6YWJsZV9rZXlzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihrd2FyZ3MsIC4uLl9hcmdzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5sY19zZXJpYWxpemFibGVfa2V5cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxjX2t3YXJncyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhrd2FyZ3MgfHwge30pLmZpbHRlcigoW2tleV0pID0+IHRoaXMubGNfc2VyaWFsaXphYmxlX2tleXM/LmluY2x1ZGVzKGtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGNfa3dhcmdzID0ga3dhcmdzID8/IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxjX3NlcmlhbGl6YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MgaW5zdGFuY2VvZiBTZXJpYWxpemFibGUgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmxjX2t3YXJncyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLmxjX2t3YXJncykpIHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdXBwb3J0IHNlcmlhbGl6YXRpb24gb2YgY2xhc3NlcyB3aXRoIGFyZyBub3QgYSBQT0pPXG4gICAgICAgICAgICAvLyBJJ20gYXdhcmUgdGhlIGNoZWNrIGFib3ZlIGlzbid0IGFzIHN0cmljdCBhcyBpdCBjb3VsZCBiZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGlhc2VzID0ge307XG4gICAgICAgIGNvbnN0IHNlY3JldHMgPSB7fTtcbiAgICAgICAgY29uc3Qga3dhcmdzID0gT2JqZWN0LmtleXModGhpcy5sY19rd2FyZ3MpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGFjY1trZXldID0ga2V5IGluIHRoaXMgPyB0aGlzW2tleV0gOiB0aGlzLmxjX2t3YXJnc1trZXldO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICAvLyBnZXQgc2VjcmV0cywgYXR0cmlidXRlcyBhbmQgYWxpYXNlcyBmcm9tIGFsbCBzdXBlcmNsYXNzZXNcbiAgICAgICAgZm9yIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgIGxldCBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpOyBjdXJyZW50OyBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN1cnJlbnQpKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGFsaWFzZXMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYWxpYXNlc1wiLCB0aGlzKSk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlY3JldHMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfc2VjcmV0c1wiLCB0aGlzKSk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGt3YXJncywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hdHRyaWJ1dGVzXCIsIHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmNsdWRlIGFsbCBzZWNyZXRzIHVzZWQsIGV2ZW4gaWYgbm90IGluIGt3YXJncyxcbiAgICAgICAgLy8gd2lsbCBiZSByZXBsYWNlZCB3aXRoIHNlbnRpbmVsIHZhbHVlIGluIHJlcGxhY2VTZWNyZXRzXG4gICAgICAgIE9iamVjdC5rZXlzKHNlY3JldHMpLmZvckVhY2goKGtleVBhdGgpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IHJlYWQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGxldCB3cml0ZSA9IGt3YXJncztcbiAgICAgICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0ga2V5UGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcGFydHNSZXZlcnNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiByZWFkKSB8fCByZWFkW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiB3cml0ZSkgfHwgd3JpdGVba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZFtrZXldID09PSBcIm9iamVjdFwiICYmIHJlYWRba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVtrZXldID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZWFkW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVtrZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhZCA9IHJlYWRba2V5XTtcbiAgICAgICAgICAgICAgICB3cml0ZSA9IHdyaXRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdCBpbiByZWFkICYmIHJlYWRbbGFzdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHdyaXRlW2xhc3RdID0gd3JpdGVbbGFzdF0gfHwgcmVhZFtsYXN0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwiY29uc3RydWN0b3JcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmxjX2lkLFxuICAgICAgICAgICAga3dhcmdzOiBtYXBLZXlzKE9iamVjdC5rZXlzKHNlY3JldHMpLmxlbmd0aCA/IHJlcGxhY2VTZWNyZXRzKGt3YXJncywgc2VjcmV0cykgOiBrd2FyZ3MsIGtleVRvSnNvbiwgYWxpYXNlcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvSlNPTk5vdEltcGxlbWVudGVkKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcIm5vdF9pbXBsZW1lbnRlZFwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMubGNfaWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImtleVRvSnNvbiIsIm1hcEtleXMiLCJzaGFsbG93Q29weSIsIm9iaiIsIkFycmF5IiwiaXNBcnJheSIsInJlcGxhY2VTZWNyZXRzIiwicm9vdCIsInNlY3JldHNNYXAiLCJyZXN1bHQiLCJwYXRoIiwic2VjcmV0SWQiLCJPYmplY3QiLCJlbnRyaWVzIiwibGFzdCIsInBhcnRzUmV2ZXJzZSIsInNwbGl0IiwicmV2ZXJzZSIsImN1cnJlbnQiLCJwYXJ0IiwidW5kZWZpbmVkIiwibGMiLCJ0eXBlIiwiaWQiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJzZXJpYWxpemFibGVDbGFzcyIsInBhcmVudENsYXNzIiwiZ2V0UHJvdG90eXBlT2YiLCJsY05hbWVJc1N1YmNsYXNzZWQiLCJsY19uYW1lIiwibmFtZSIsIlNlcmlhbGl6YWJsZSIsImxjX2lkIiwibGNfbmFtZXNwYWNlIiwiY29uc3RydWN0b3IiLCJsY19zZWNyZXRzIiwibGNfYXR0cmlidXRlcyIsImxjX2FsaWFzZXMiLCJsY19zZXJpYWxpemFibGVfa2V5cyIsImt3YXJncyIsIl9hcmdzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsImZyb21FbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJ0b0pTT04iLCJsY19zZXJpYWxpemFibGUiLCJ0b0pTT05Ob3RJbXBsZW1lbnRlZCIsImFsaWFzZXMiLCJzZWNyZXRzIiwia2V5cyIsInJlZHVjZSIsImFjYyIsImFzc2lnbiIsIlJlZmxlY3QiLCJnZXQiLCJmb3JFYWNoIiwia2V5UGF0aCIsInJlYWQiLCJ3cml0ZSIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/ai.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/ai.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* binding */ isAIMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (!(rawToolCalls == null) && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\nfunction isAIMessageChunk(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined) {\n            initParams = {\n                ...fields,\n                tool_calls: fields.tool_calls ?? [],\n                invalid_tool_calls: [],\n                tool_call_chunks: [],\n                usage_metadata: fields.usage_metadata !== undefined ? fields.usage_metadata : undefined\n            };\n        } else {\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const toolCallChunk of fields.tool_call_chunks){\n                let parsedArgs = {};\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(toolCallChunk.args || \"{}\");\n                    if (parsedArgs === null || typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name: toolCallChunk.name ?? \"\",\n                        args: parsedArgs,\n                        id: toolCallChunk.id,\n                        type: \"tool_call\"\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name: toolCallChunk.name,\n                        args: toolCallChunk.args,\n                        id: toolCallChunk.id,\n                        error: \"Malformed args.\",\n                        type: \"invalid_tool_call\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls,\n                usage_metadata: fields.usage_metadata !== undefined ? fields.usage_metadata : undefined\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_chunks = initParams.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            tool_call_chunks: this.tool_call_chunks,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: [],\n            id: this.id ?? chunk.id\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        if (this.usage_metadata !== undefined || chunk.usage_metadata !== undefined) {\n            const inputTokenDetails = {\n                ...(this.usage_metadata?.input_token_details?.audio !== undefined || chunk.usage_metadata?.input_token_details?.audio !== undefined) && {\n                    audio: (this.usage_metadata?.input_token_details?.audio ?? 0) + (chunk.usage_metadata?.input_token_details?.audio ?? 0)\n                },\n                ...(this.usage_metadata?.input_token_details?.cache_read !== undefined || chunk.usage_metadata?.input_token_details?.cache_read !== undefined) && {\n                    cache_read: (this.usage_metadata?.input_token_details?.cache_read ?? 0) + (chunk.usage_metadata?.input_token_details?.cache_read ?? 0)\n                },\n                ...(this.usage_metadata?.input_token_details?.cache_creation !== undefined || chunk.usage_metadata?.input_token_details?.cache_creation !== undefined) && {\n                    cache_creation: (this.usage_metadata?.input_token_details?.cache_creation ?? 0) + (chunk.usage_metadata?.input_token_details?.cache_creation ?? 0)\n                }\n            };\n            const outputTokenDetails = {\n                ...(this.usage_metadata?.output_token_details?.audio !== undefined || chunk.usage_metadata?.output_token_details?.audio !== undefined) && {\n                    audio: (this.usage_metadata?.output_token_details?.audio ?? 0) + (chunk.usage_metadata?.output_token_details?.audio ?? 0)\n                },\n                ...(this.usage_metadata?.output_token_details?.reasoning !== undefined || chunk.usage_metadata?.output_token_details?.reasoning !== undefined) && {\n                    reasoning: (this.usage_metadata?.output_token_details?.reasoning ?? 0) + (chunk.usage_metadata?.output_token_details?.reasoning ?? 0)\n                }\n            };\n            const left = this.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const right = chunk.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const usage_metadata = {\n                input_tokens: left.input_tokens + right.input_tokens,\n                output_tokens: left.output_tokens + right.output_tokens,\n                total_tokens: left.total_tokens + right.total_tokens,\n                // Do not include `input_token_details` / `output_token_details` keys in combined fields\n                // unless their values are defined.\n                ...Object.keys(inputTokenDetails).length > 0 && {\n                    input_token_details: inputTokenDetails\n                },\n                ...Object.keys(outputTokenDetails).length > 0 && {\n                    output_token_details: outputTokenDetails\n                }\n            };\n            combinedFields.usage_metadata = usage_metadata;\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUMrQztBQUNoRDtBQUNuRDs7Q0FFQyxHQUNNLE1BQU1PLGtCQUFrQk4saURBQVdBO0lBQ3RDLElBQUlPLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxZQUFZO1lBQ1pDLG9CQUFvQjtRQUN4QjtJQUNKO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixJQUFJQztRQUNKLElBQUksT0FBT0YsV0FBVyxVQUFVO1lBQzVCRSxhQUFhO2dCQUNUQyxTQUFTSDtnQkFDVEgsWUFBWSxFQUFFO2dCQUNkQyxvQkFBb0IsRUFBRTtnQkFDdEJNLG1CQUFtQkgsVUFBVSxDQUFDO1lBQ2xDO1FBQ0osT0FDSztZQUNEQyxhQUFhRjtZQUNiLE1BQU1LLGVBQWVILFdBQVdFLGlCQUFpQixFQUFFUDtZQUNuRCxNQUFNUyxZQUFZSixXQUFXTCxVQUFVO1lBQ3ZDLElBQUksQ0FBRVEsQ0FBQUEsZ0JBQWdCLElBQUcsS0FDckJBLGFBQWFFLE1BQU0sR0FBRyxLQUNyQkQsQ0FBQUEsY0FBY0UsYUFBYUYsVUFBVUMsTUFBTSxLQUFLLElBQUk7Z0JBQ3JERSxRQUFRQyxJQUFJLENBQUM7b0JBQ1Q7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0gsQ0FBQ0MsSUFBSSxDQUFDO1lBQ1g7WUFDQSxJQUFJO2dCQUNBLElBQUksQ0FBRU4sQ0FBQUEsZ0JBQWdCLElBQUcsS0FBTUMsY0FBY0UsV0FBVztvQkFDcEQsTUFBTSxDQUFDRixXQUFXTSxpQkFBaUIsR0FBR2xCLCtEQUFxQkEsQ0FBQ1c7b0JBQzVESCxXQUFXTCxVQUFVLEdBQUdTLGFBQWEsRUFBRTtvQkFDdkNKLFdBQVdKLGtCQUFrQixHQUFHYyxvQkFBb0IsRUFBRTtnQkFDMUQsT0FD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TUFBTSxHQUFHLEtBQUs7b0JBQzdDc0MscUJBQXFCRDtnQkFDekIsQ0FBQztnQkFDRCxHQUFJOUIsT0FBTzJDLElBQUksQ0FBQ1Isb0JBQW9CMUMsTUFBTSxHQUFHLEtBQUs7b0JBQzlDMkMsc0JBQXNCRDtnQkFDMUIsQ0FBQztZQUNMO1lBQ0FQLGVBQWV0QixjQUFjLEdBQUdBO1FBQ3BDO1FBQ0EsT0FBTyxJQUFJTyxlQUFlZTtJQUM5QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2FpLmpzPzljYWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VQYXJ0aWFsSnNvbiB9IGZyb20gXCIuLi91dGlscy9qc29uLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgX21lcmdlTGlzdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFRvb2xDYWxsUGFyc2VyLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIubGNfYWxpYXNlcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IFwidG9vbF9jYWxsc1wiLFxuICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBcImludmFsaWRfdG9vbF9jYWxsc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBsZXQgaW5pdFBhcmFtcztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyA/PyB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0gZmllbGRzO1xuICAgICAgICAgICAgY29uc3QgcmF3VG9vbENhbGxzID0gaW5pdFBhcmFtcy5hZGRpdGlvbmFsX2t3YXJncz8udG9vbF9jYWxscztcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscztcbiAgICAgICAgICAgIGlmICghKHJhd1Rvb2xDYWxscyA9PSBudWxsKSAmJlxuICAgICAgICAgICAgICAgIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgKHRvb2xDYWxscyA9PT0gdW5kZWZpbmVkIHx8IHRvb2xDYWxscy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFtcbiAgICAgICAgICAgICAgICAgICAgXCJOZXcgTGFuZ0NoYWluIHBhY2thZ2VzIGFyZSBhdmFpbGFibGUgdGhhdCBtb3JlIGVmZmljaWVudGx5IGhhbmRsZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRvb2wgY2FsbGluZy5cXG5cXG5QbGVhc2UgdXBncmFkZSB5b3VyIHBhY2thZ2VzIHRvIHZlcnNpb25zIHRoYXQgc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZSB0b29sIGNhbGxzLiBlLmcuLCBgeWFybiBhZGQgQGxhbmdjaGFpbi9hbnRocm9waWNgLFwiLFxuICAgICAgICAgICAgICAgICAgICBcInlhcm4gYWRkIEBsYW5nY2hhaW4vb3BlbmFpYCwgZXRjLlwiLFxuICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiYgdG9vbENhbGxzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3Rvb2xDYWxscywgaW52YWxpZFRvb2xDYWxsc10gPSBkZWZhdWx0VG9vbENhbGxQYXJzZXIocmF3VG9vbENhbGxzKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxzID0gdG9vbENhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IGludmFsaWRUb29sQ2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNhZGx5LCBUeXBlU2NyaXB0IG9ubHkgYWxsb3dzIHN1cGVyKCkgY2FsbHMgYXQgcm9vdCBpZiB0aGUgY2xhc3MgaGFzXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aCBpbml0aWFsaXplcnMsIHNvIHdlIGhhdmUgdG8gY2hlY2sgdHlwZXMgdHdpY2UuXG4gICAgICAgIHN1cGVyKGluaXRQYXJhbXMpO1xuICAgICAgICAvLyBUaGVzZSBhcmUgdHlwZWQgYXMgb3B0aW9uYWwgdG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcyBhbmQgYWxsb3cgZm9yIGNhc3RpbmdcbiAgICAgICAgLy8gZnJvbSBCYXNlTWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludmFsaWRfdG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBwcm92aWRlZCwgdG9rZW4gdXNhZ2UgaW5mb3JtYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNhZ2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbml0UGFyYW1zICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID8/IHRoaXMuaW52YWxpZF90b29sX2NhbGxzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXNhZ2VfbWV0YWRhdGEgPSBpbml0UGFyYW1zLnVzYWdlX21ldGFkYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiB0aGlzLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IHRoaXMuaW52YWxpZF90b29sX2NhbGxzLFxuICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IHRoaXMudXNhZ2VfbWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQUlNZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImFpXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBSU1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJhaVwiO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYW4gQUkgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGxldCBpbml0UGFyYW1zO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmllbGRzLnRvb2xfY2FsbF9jaHVua3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogZmllbGRzLnRvb2xfY2FsbHMgPz8gW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogZmllbGRzLnVzYWdlX21ldGFkYXRhICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBmaWVsZHMudXNhZ2VfbWV0YWRhdGFcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsQ2h1bmsgb2YgZmllbGRzLnRvb2xfY2FsbF9jaHVua3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBwYXJzZVBhcnRpYWxKc29uKHRvb2xDYWxsQ2h1bmsuYXJncyB8fCBcInt9XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQXJncyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHBhcnNlZEFyZ3MgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocGFyc2VkQXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCB0b29sIGNhbGwgY2h1bmsgYXJncy5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGxDaHVuay5uYW1lID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBwYXJzZWRBcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsQ2h1bmsuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsQ2h1bmsubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IHRvb2xDYWxsQ2h1bmsuYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbENodW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImludmFsaWRfdG9vbF9jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IGludmFsaWRUb29sQ2FsbHMsXG4gICAgICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IGZpZWxkcy51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gZmllbGRzLnVzYWdlX21ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYWRseSwgVHlwZVNjcmlwdCBvbmx5IGFsbG93cyBzdXBlcigpIGNhbGxzIGF0IHJvb3QgaWYgdGhlIGNsYXNzIGhhc1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggaW5pdGlhbGl6ZXJzLCBzbyB3ZSBoYXZlIHRvIGNoZWNrIHR5cGVzIHR3aWNlLlxuICAgICAgICBzdXBlcihpbml0UGFyYW1zKTtcbiAgICAgICAgLy8gTXVzdCByZWRlY2xhcmUgdG9vbCBjYWxsIGZpZWxkcyBzaW5jZSB0aGVyZSBpcyBubyBtdWx0aXBsZSBpbmhlcml0YW5jZSBpbiBKUy5cbiAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGVkIGFzIG9wdGlvbmFsIHRvIGF2b2lkIGJyZWFraW5nIGNoYW5nZXMgYW5kIGFsbG93IGZvciBjYXN0aW5nXG4gICAgICAgIC8vIGZyb20gQmFzZU1lc3NhZ2UuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfY2h1bmtzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByb3ZpZGVkLCB0b2tlbiB1c2FnZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2FnZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9jaHVua3MgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxfY2h1bmtzID8/IHRoaXMudG9vbF9jYWxsX2NodW5rcztcbiAgICAgICAgdGhpcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IHRoaXMudG9vbF9jYWxscztcbiAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgICAgIHRoaXMudXNhZ2VfbWV0YWRhdGEgPSBpbml0UGFyYW1zLnVzYWdlX21ldGFkYXRhO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFwidG9vbF9jYWxsX2NodW5rc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRoaXMudG9vbF9jYWxscyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IHRoaXMudG9vbF9jYWxsX2NodW5rcyxcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdGhpcy51c2FnZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkRmllbGRzID0ge1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnRvb2xfY2FsbF9jaHVua3MgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY2h1bmsudG9vbF9jYWxsX2NodW5rcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBfbWVyZ2VMaXN0cyh0aGlzLnRvb2xfY2FsbF9jaHVua3MsIGNodW5rLnRvb2xfY2FsbF9jaHVua3MpO1xuICAgICAgICAgICAgaWYgKHJhd1Rvb2xDYWxscyAhPT0gdW5kZWZpbmVkICYmIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9IHJhd1Rvb2xDYWxscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjaHVuay51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VuRGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAuLi4oKHRoaXMudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5hdWRpbyA/PyAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvID8/IDApLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIC4uLigodGhpcy51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfcmVhZCAhPT1cbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9yZWFkICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlX3JlYWQ6ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9yZWFkID8/IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChjaHVuay51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfcmVhZCA/PyAwKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAuLi4oKHRoaXMudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmNhY2hlX2NyZWF0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/LmlucHV0X3Rva2VuX2RldGFpbHM/LmNhY2hlX2NyZWF0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlX2NyZWF0aW9uOiAodGhpcy51c2FnZV9tZXRhZGF0YT8uaW5wdXRfdG9rZW5fZGV0YWlscz8uY2FjaGVfY3JlYXRpb24gPz8gMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNodW5rLnVzYWdlX21ldGFkYXRhPy5pbnB1dF90b2tlbl9kZXRhaWxzPy5jYWNoZV9jcmVhdGlvbiA/PyAwKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbkRldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uKCh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICBjaHVuay51c2FnZV9tZXRhZGF0YT8ub3V0cHV0X3Rva2VuX2RldGFpbHM/LmF1ZGlvICE9PSB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW86ICh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gPz8gMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGNodW5rLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8uYXVkaW8gPz8gMCksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKCh0aGlzLnVzYWdlX21ldGFkYXRhPy5vdXRwdXRfdG9rZW5fZGV0YWlscz8ucmVhc29uaW5nICE9PVxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudXNhZ2VfbWV0YWRhdGE/Lm91dHB1dF90b2tlbl9kZXRhaWxzPy5yZWFzb25pbmcgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nOiAodGhpcy51c2FnZV9tZXRhZGF0YT8ub3V0cHV0X3Rva2VuX2RldGFpbHM/LnJlYXNvbmluZyA/PyAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2h1bmsudXNhZ2VfbWV0YWRhdGE/Lm91dHB1dF90b2tlbl9kZXRhaWxzPy5yZWFzb25pbmcgPz8gMCksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMudXNhZ2VfbWV0YWRhdGEgPz8ge1xuICAgICAgICAgICAgICAgIGlucHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGNodW5rLnVzYWdlX21ldGFkYXRhID8/IHtcbiAgICAgICAgICAgICAgICBpbnB1dF90b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgb3V0cHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICB0b3RhbF90b2tlbnM6IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgdXNhZ2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5zOiBsZWZ0LmlucHV0X3Rva2VucyArIHJpZ2h0LmlucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiBsZWZ0Lm91dHB1dF90b2tlbnMgKyByaWdodC5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogbGVmdC50b3RhbF90b2tlbnMgKyByaWdodC50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgLy8gRG8gbm90IGluY2x1ZGUgYGlucHV0X3Rva2VuX2RldGFpbHNgIC8gYG91dHB1dF90b2tlbl9kZXRhaWxzYCBrZXlzIGluIGNvbWJpbmVkIGZpZWxkc1xuICAgICAgICAgICAgICAgIC8vIHVubGVzcyB0aGVpciB2YWx1ZXMgYXJlIGRlZmluZWQuXG4gICAgICAgICAgICAgICAgLi4uKE9iamVjdC5rZXlzKGlucHV0VG9rZW5EZXRhaWxzKS5sZW5ndGggPiAwICYmIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogaW5wdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKE9iamVjdC5rZXlzKG91dHB1dFRva2VuRGV0YWlscykubGVuZ3RoID4gMCAmJiB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbl9kZXRhaWxzOiBvdXRwdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudXNhZ2VfbWV0YWRhdGEgPSB1c2FnZV9tZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKGNvbWJpbmVkRmllbGRzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicGFyc2VQYXJ0aWFsSnNvbiIsIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiX21lcmdlTGlzdHMiLCJkZWZhdWx0VG9vbENhbGxQYXJzZXIiLCJBSU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwidG9vbF9jYWxscyIsImludmFsaWRfdG9vbF9jYWxscyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiaW5pdFBhcmFtcyIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJ3YXJuIiwiam9pbiIsImludmFsaWRUb29sQ2FsbHMiLCJlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInVzYWdlX21ldGFkYXRhIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiX3ByaW50YWJsZUZpZWxkcyIsImlzQUlNZXNzYWdlIiwieCIsImlzQUlNZXNzYWdlQ2h1bmsiLCJBSU1lc3NhZ2VDaHVuayIsInRvb2xfY2FsbF9jaHVua3MiLCJ0b29sQ2FsbENodW5rIiwicGFyc2VkQXJncyIsImFyZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsInB1c2giLCJuYW1lIiwiaWQiLCJ0eXBlIiwiZXJyb3IiLCJjb25jYXQiLCJjaHVuayIsImNvbWJpbmVkRmllbGRzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpbnB1dFRva2VuRGV0YWlscyIsImlucHV0X3Rva2VuX2RldGFpbHMiLCJhdWRpbyIsImNhY2hlX3JlYWQiLCJjYWNoZV9jcmVhdGlvbiIsIm91dHB1dFRva2VuRGV0YWlscyIsIm91dHB1dF90b2tlbl9kZXRhaWxzIiwicmVhc29uaW5nIiwibGVmdCIsImlucHV0X3Rva2VucyIsIm91dHB1dF90b2tlbnMiLCJ0b3RhbF90b2tlbnMiLCJyaWdodCIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/base.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/base.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* binding */ _isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   _mergeObj: () => (/* binding */ _mergeObj),\n/* harmony export */   _mergeStatus: () => (/* binding */ _mergeStatus),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (firstContent === \"\") {\n            return secondContent;\n        }\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return _mergeLists(firstContent, secondContent) ?? [\n            ...firstContent,\n            ...secondContent\n        ];\n    } else {\n        if (secondContent === \"\") {\n            return firstContent;\n        }\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * 'Merge' two statuses. If either value passed is 'error', it will return 'error'. Else\n * it will return 'success'.\n *\n * @param {\"success\" | \"error\" | undefined} left The existing value to 'merge' with the new value.\n * @param {\"success\" | \"error\" | undefined} right The new value to 'merge' with the existing value\n * @returns {\"success\" | \"error\"} The 'merged' value.\n */ function _mergeStatus(left, right) {\n    if (left === \"error\" || right === \"error\") {\n        return \"error\";\n    }\n    return \"success\";\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction stringifyWithDepthLimit(obj, depthLimit) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function helper(obj, currentDepth) {\n        if (typeof obj !== \"object\" || obj === null || obj === undefined) {\n            return obj;\n        }\n        if (currentDepth >= depthLimit) {\n            if (Array.isArray(obj)) {\n                return \"[Array]\";\n            }\n            return \"[Object]\";\n        }\n        if (Array.isArray(obj)) {\n            return obj.map((item)=>helper(item, currentDepth + 1));\n        }\n        const result = {};\n        for (const key of Object.keys(obj)){\n            result[key] = helper(obj[key], currentDepth + 1);\n        }\n        return result;\n    }\n    return JSON.stringify(helper(obj, 0), null, 2);\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * Get text content of the message.\n     */ get text() {\n        if (typeof this.content === \"string\") {\n            return this.content;\n        }\n        if (!Array.isArray(this.content)) return \"\";\n        return this.content.map((c)=>{\n            if (typeof c === \"string\") return c;\n            if (c.type === \"text\") return c.text;\n            return \"\";\n        }).join(\"\");\n    }\n    /** The type of the message. */ getType() {\n        return this._getType();\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * An optional unique identifier for the message. This should ideally be\n         * provided by the provider/model which created the message.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n        this.id = fields.id;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n    static lc_name() {\n        return \"BaseMessage\";\n    }\n    // Can't be protected for silly reasons\n    get _printableFields() {\n        return {\n            id: this.id,\n            content: this.content,\n            name: this.name,\n            additional_kwargs: this.additional_kwargs,\n            response_metadata: this.response_metadata\n        };\n    }\n    // this private method is used to update the ID for the runtime\n    // value as well as in lc_kwargs for serialisation\n    _updateId(value) {\n        this.id = value;\n        // lc_attributes wouldn't work here, because jest compares the\n        // whole object\n        this.lc_kwargs.id = value;\n    }\n    get [Symbol.toStringTag]() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.constructor.lc_name();\n    }\n    // Override the default behavior of console.log\n    [Symbol.for(\"nodejs.util.inspect.custom\")](depth) {\n        if (depth === null) {\n            return this;\n        }\n        const printable = stringifyWithDepthLimit(this._printableFields, Math.max(4, depth));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return `${this.constructor.lc_name()} ${printable}`;\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            if (key === \"type\") {\n                continue;\n            }\n            merged[key] += value;\n        } else if (typeof merged[key] === \"object\" && !Array.isArray(merged[key])) {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>leftItem.index === item.index);\n                if (toMerge !== -1) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else if (typeof item === \"object\" && \"text\" in item && item.text === \"\") {\n                continue;\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeObj(left, right) {\n    if (!left && !right) {\n        throw new Error(\"Cannot merge two undefined objects.\");\n    }\n    if (!left || !right) {\n        return left || right;\n    } else if (typeof left !== typeof right) {\n        throw new Error(`Cannot merge objects of different types.\\nLeft ${typeof left}\\nRight ${typeof right}`);\n    } else if (typeof left === \"string\" && typeof right === \"string\") {\n        return left + right;\n    } else if (Array.isArray(left) && Array.isArray(right)) {\n        return _mergeLists(left, right);\n    } else if (typeof left === \"object\" && typeof right === \"object\") {\n        return _mergeDicts(left, right);\n    } else if (left === right) {\n        return left;\n    } else {\n        throw new Error(`Can not merge objects of different types.\\nLeft ${left}\\nRight ${right}`);\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction _isMessageFieldWithRole(x) {\n    return typeof x.role === \"string\";\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDaEQsU0FBU0MsYUFBYUMsWUFBWSxFQUFFQyxhQUFhO0lBQ3BELCtCQUErQjtJQUMvQixJQUFJLE9BQU9ELGlCQUFpQixVQUFVO1FBQ2xDLElBQUlBLGlCQUFpQixJQUFJO1lBQ3JCLE9BQU9DO1FBQ1g7UUFDQSxJQUFJLE9BQU9BLGtCQUFrQixVQUFVO1lBQ25DLE9BQU9ELGVBQWVDO1FBQzFCLE9BQ0s7WUFDRCxPQUFPO2dCQUFDO29CQUFFQyxNQUFNO29CQUFRQyxNQUFNSDtnQkFBYTttQkFBTUM7YUFBYztRQUNuRTtJQUNBLHFCQUFxQjtJQUN6QixPQUNLLElBQUlHLE1BQU1DLE9BQU8sQ0FBQ0osZ0JBQWdCO1FBQ25DLE9BQVFLLFlBQVlOLGNBQWNDLGtCQUFrQjtlQUM3Q0Q7ZUFDQUM7U0FDTjtJQUNMLE9BQ0s7UUFDRCxJQUFJQSxrQkFBa0IsSUFBSTtZQUN0QixPQUFPRDtRQUNYO1FBQ0EsaUVBQWlFO1FBQ2pFLE9BQU87ZUFBSUE7WUFBYztnQkFBRUUsTUFBTTtnQkFBUUMsTUFBTUY7WUFBYztTQUFFO0lBQ25FO0FBQ0o7QUFDQTs7Ozs7OztDQU9DLEdBQ00sU0FBU00sYUFBYUMsSUFBSSxFQUFFQyxLQUFLO0lBQ3BDLElBQUlELFNBQVMsV0FBV0MsVUFBVSxTQUFTO1FBQ3ZDLE9BQU87SUFDWDtJQUNBLE9BQU87QUFDWDtBQUNBLDhEQUE4RDtBQUM5RCxTQUFTQyx3QkFBd0JDLEdBQUcsRUFBRUMsVUFBVTtJQUM1Qyw4REFBOEQ7SUFDOUQsU0FBU0MsT0FBT0YsR0FBRyxFQUFFRyxZQUFZO1FBQzdCLElBQUksT0FBT0gsUUFBUSxZQUFZQSxRQUFRLFFBQVFBLFFBQVFJLFdBQVc7WUFDOUQsT0FBT0o7UUFDWDtRQUNBLElBQUlHLGdCQUFnQkYsWUFBWTtZQUM1QixJQUFJUixNQUFN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TSxNQUFNK0QseUJBQXlCaEQ7QUFDdEM7QUFDTyxTQUFTaUQsd0JBQXdCQyxDQUFDO0lBQ3JDLE9BQU8sT0FBT0EsRUFBRUMsSUFBSSxLQUFLO0FBQzdCO0FBQ08sU0FBU0MsY0FBY0MsV0FBVztJQUNyQyxPQUFPLE9BQU9BLGFBQWE3QyxhQUFhO0FBQzVDO0FBQ08sU0FBUzhDLG1CQUFtQkQsV0FBVztJQUMxQyxPQUFRRCxjQUFjQyxnQkFDbEIsT0FBT0EsWUFBWUUsTUFBTSxLQUFLO0FBQ3RDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jhc2UuanM/MDNjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbnRlbnQoZmlyc3RDb250ZW50LCBzZWNvbmRDb250ZW50KSB7XG4gICAgLy8gSWYgZmlyc3QgY29udGVudCBpcyBhIHN0cmluZ1xuICAgIGlmICh0eXBlb2YgZmlyc3RDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChmaXJzdENvbnRlbnQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWNvbmRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc2Vjb25kQ29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q29udGVudCArIHNlY29uZENvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGZpcnN0Q29udGVudCB9LCAuLi5zZWNvbmRDb250ZW50XTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBib3RoIGFyZSBhcnJheXNcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZWNvbmRDb250ZW50KSkge1xuICAgICAgICByZXR1cm4gKF9tZXJnZUxpc3RzKGZpcnN0Q29udGVudCwgc2Vjb25kQ29udGVudCkgPz8gW1xuICAgICAgICAgICAgLi4uZmlyc3RDb250ZW50LFxuICAgICAgICAgICAgLi4uc2Vjb25kQ29udGVudCxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoc2Vjb25kQ29udGVudCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q29udGVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIGFkZCB0aGUgc2Vjb25kIGNvbnRlbnQgYXMgYSBuZXcgZWxlbWVudCBvZiB0aGUgbGlzdFxuICAgICAgICByZXR1cm4gWy4uLmZpcnN0Q29udGVudCwgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogc2Vjb25kQ29udGVudCB9XTtcbiAgICB9XG59XG4vKipcbiAqICdNZXJnZScgdHdvIHN0YXR1c2VzLiBJZiBlaXRoZXIgdmFsdWUgcGFzc2VkIGlzICdlcnJvcicsIGl0IHdpbGwgcmV0dXJuICdlcnJvcicuIEVsc2VcbiAqIGl0IHdpbGwgcmV0dXJuICdzdWNjZXNzJy5cbiAqXG4gKiBAcGFyYW0ge1wic3VjY2Vzc1wiIHwgXCJlcnJvclwiIHwgdW5kZWZpbmVkfSBsZWZ0IFRoZSBleGlzdGluZyB2YWx1ZSB0byAnbWVyZ2UnIHdpdGggdGhlIG5ldyB2YWx1ZS5cbiAqIEBwYXJhbSB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCIgfCB1bmRlZmluZWR9IHJpZ2h0IFRoZSBuZXcgdmFsdWUgdG8gJ21lcmdlJyB3aXRoIHRoZSBleGlzdGluZyB2YWx1ZVxuICogQHJldHVybnMge1wic3VjY2Vzc1wiIHwgXCJlcnJvclwifSBUaGUgJ21lcmdlZCcgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VTdGF0dXMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA9PT0gXCJlcnJvclwiIHx8IHJpZ2h0ID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcbiAgICB9XG4gICAgcmV0dXJuIFwic3VjY2Vzc1wiO1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIHN0cmluZ2lmeVdpdGhEZXB0aExpbWl0KG9iaiwgZGVwdGhMaW1pdCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZnVuY3Rpb24gaGVscGVyKG9iaiwgY3VycmVudERlcHRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiIHx8IG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudERlcHRoID49IGRlcHRoTGltaXQpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJbQXJyYXldXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJbT2JqZWN0XVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoubWFwKChpdGVtKSA9PiBoZWxwZXIoaXRlbSwgY3VycmVudERlcHRoICsgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmopKSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IGhlbHBlcihvYmpba2V5XSwgY3VycmVudERlcHRoICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGhlbHBlcihvYmosIDApLCBudWxsLCAyKTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIHR5cGVzIG9mIG1lc3NhZ2VzIGluIGEgY29udmVyc2F0aW9uLiBJdCBpbmNsdWRlc1xuICogcHJvcGVydGllcyBsaWtlIGBjb250ZW50YCwgYG5hbWVgLCBhbmQgYGFkZGl0aW9uYWxfa3dhcmdzYC4gSXQgYWxzb1xuICogaW5jbHVkZXMgbWV0aG9kcyBsaWtlIGB0b0RpY3QoKWAgYW5kIGBfZ2V0VHlwZSgpYC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBcImFkZGl0aW9uYWxfa3dhcmdzXCIsXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogXCJyZXNwb25zZV9tZXRhZGF0YVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGV4dCBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jb250ZW50KSlcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50XG4gICAgICAgICAgICAubWFwKChjKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgICBpZiAoYy50eXBlID09PSBcInRleHRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gYy50ZXh0O1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9XG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgIGdldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRUeXBlKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YToge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYWRkaXRpb25hbF9rd2FyZ3MgaXMgcGFzc2VkIGludG8gc3VwZXIoKSBmb3Igc2VyaWFsaXphdGlvblxuICAgICAgICBpZiAoIWZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwibWVzc2FnZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBzZW5kZXIgaW4gYSBtdWx0aS11c2VyIGNoYXQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRkaXRpb25hbF9rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFJlc3BvbnNlIG1ldGFkYXRhLiBGb3IgZXhhbXBsZTogcmVzcG9uc2UgaGVhZGVycywgbG9ncHJvYnMsIHRva2VuIGNvdW50cy4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVzcG9uc2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbmFsIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgbWVzc2FnZS4gVGhpcyBzaG91bGQgaWRlYWxseSBiZVxuICAgICAgICAgKiBwcm92aWRlZCBieSB0aGUgcHJvdmlkZXIvbW9kZWwgd2hpY2ggY3JlYXRlZCB0aGUgbWVzc2FnZS5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBmaWVsZHMuY29udGVudDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsX2t3YXJncyA9IGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncztcbiAgICAgICAgdGhpcy5yZXNwb25zZV9tZXRhZGF0YSA9IGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YTtcbiAgICAgICAgdGhpcy5pZCA9IGZpZWxkcy5pZDtcbiAgICB9XG4gICAgdG9EaWN0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5fZ2V0VHlwZSgpLFxuICAgICAgICAgICAgZGF0YTogdGhpcy50b0pTT04oKVxuICAgICAgICAgICAgICAgIC5rd2FyZ3MsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJCYXNlTWVzc2FnZVwiO1xuICAgIH1cbiAgICAvLyBDYW4ndCBiZSBwcm90ZWN0ZWQgZm9yIHNpbGx5IHJlYXNvbnNcbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogdGhpcy5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gdGhpcyBwcml2YXRlIG1ldGhvZCBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgSUQgZm9yIHRoZSBydW50aW1lXG4gICAgLy8gdmFsdWUgYXMgd2VsbCBhcyBpbiBsY19rd2FyZ3MgZm9yIHNlcmlhbGlzYXRpb25cbiAgICBfdXBkYXRlSWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pZCA9IHZhbHVlO1xuICAgICAgICAvLyBsY19hdHRyaWJ1dGVzIHdvdWxkbid0IHdvcmsgaGVyZSwgYmVjYXVzZSBqZXN0IGNvbXBhcmVzIHRoZVxuICAgICAgICAvLyB3aG9sZSBvYmplY3RcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MuaWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCk7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIGNvbnNvbGUubG9nXG4gICAgW1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oZGVwdGgpIHtcbiAgICAgICAgaWYgKGRlcHRoID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmludGFibGUgPSBzdHJpbmdpZnlXaXRoRGVwdGhMaW1pdCh0aGlzLl9wcmludGFibGVGaWVsZHMsIE1hdGgubWF4KDQsIGRlcHRoKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLmxjX25hbWUoKX0gJHtwcmludGFibGV9YDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuQUlUb29sQ2FsbEFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZS5ldmVyeSgodikgPT4gdHlwZW9mIHYuaW5kZXggPT09IFwibnVtYmVyXCIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VEaWN0cyhcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5sZWZ0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yaWdodFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4ubGVmdCB9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJpZ2h0KSkge1xuICAgICAgICBpZiAobWVyZ2VkW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gIT09IHR5cGVvZiB2YWx1ZSB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgIT09IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpZWxkWyR7a2V5fV0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIG1lc3NhZ2UgY2h1bmssIGJ1dCB3aXRoIGEgZGlmZmVyZW50IHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcInR5cGVcIikge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBtZXJnZSAndHlwZScgZmllbGRzXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRba2V5XSArPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZURpY3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gX21lcmdlTGlzdHMobWVyZ2VkW2tleV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXJnZWRba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuayBhbmQgdmFsdWUgaGFzIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlTGlzdHMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA9PT0gdW5kZWZpbmVkICYmIHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVmdCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQgfHwgcmlnaHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBbLi4ubGVmdF07XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByaWdodCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgXCJpbmRleFwiIGluIGl0ZW0gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbS5pbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvTWVyZ2UgPSBtZXJnZWQuZmluZEluZGV4KChsZWZ0SXRlbSkgPT4gbGVmdEl0ZW0uaW5kZXggPT09IGl0ZW0uaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0b01lcmdlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRbdG9NZXJnZV0gPSBfbWVyZ2VEaWN0cyhtZXJnZWRbdG9NZXJnZV0sIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBcInRleHRcIiBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS50ZXh0ID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8tb3AgLSBza2lwIGVtcHR5IHRleHQgYmxvY2tzXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXJnZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlT2JqKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKCFsZWZ0ICYmICFyaWdodCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbWVyZ2UgdHdvIHVuZGVmaW5lZCBvYmplY3RzLlwiKTtcbiAgICB9XG4gICAgaWYgKCFsZWZ0IHx8ICFyaWdodCkge1xuICAgICAgICByZXR1cm4gbGVmdCB8fCByaWdodDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxlZnQgIT09IHR5cGVvZiByaWdodCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtZXJnZSBvYmplY3RzIG9mIGRpZmZlcmVudCB0eXBlcy5cXG5MZWZ0ICR7dHlwZW9mIGxlZnR9XFxuUmlnaHQgJHt0eXBlb2YgcmlnaHR9YCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsZWZ0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiByaWdodCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKGxlZnQgKyByaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobGVmdCkgJiYgQXJyYXkuaXNBcnJheShyaWdodCkpIHtcbiAgICAgICAgcmV0dXJuIF9tZXJnZUxpc3RzKGxlZnQsIHJpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxlZnQgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJpZ2h0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBfbWVyZ2VEaWN0cyhsZWZ0LCByaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IG1lcmdlIG9iamVjdHMgb2YgZGlmZmVyZW50IHR5cGVzLlxcbkxlZnQgJHtsZWZ0fVxcblJpZ2h0ICR7cmlnaHR9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbiAqIG1lc3NhZ2UgY2h1bmtzLiBJdCBpbmNsdWRlcyBhIG1ldGhvZCBgX21lcmdlX2t3YXJnc19kaWN0KClgIGZvciBtZXJnaW5nXG4gKiBhZGRpdGlvbmFsIGtleXdvcmQgYXJndW1lbnRzIGZyb20gYW5vdGhlciBgQmFzZU1lc3NhZ2VDaHVua2AgaW50byB0aGlzXG4gKiBvbmUuIEl0IGFsc28gb3ZlcnJpZGVzIHRoZSBgX19hZGRfXygpYCBtZXRob2QgdG8gc3VwcG9ydCBjb25jYXRlbmF0aW9uXG4gKiBvZiBgQmFzZU1lc3NhZ2VDaHVua2AgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfaXNNZXNzYWdlRmllbGRXaXRoUm9sZSh4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4LnJvbGUgPT09IFwic3RyaW5nXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZUxpa2U/Ll9nZXRUeXBlID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSAmJlxuICAgICAgICB0eXBlb2YgbWVzc2FnZUxpa2UuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpO1xufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIm1lcmdlQ29udGVudCIsImZpcnN0Q29udGVudCIsInNlY29uZENvbnRlbnQiLCJ0eXBlIiwidGV4dCIsIkFycmF5IiwiaXNBcnJheSIsIl9tZXJnZUxpc3RzIiwiX21lcmdlU3RhdHVzIiwibGVmdCIsInJpZ2h0Iiwic3RyaW5naWZ5V2l0aERlcHRoTGltaXQiLCJvYmoiLCJkZXB0aExpbWl0IiwiaGVscGVyIiwiY3VycmVudERlcHRoIiwidW5kZWZpbmVkIiwibWFwIiwiaXRlbSIsInJlc3VsdCIsImtleSIsIk9iamVjdCIsImtleXMiLCJKU09OIiwic3RyaW5naWZ5IiwiQmFzZU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImNvbnRlbnQiLCJjIiwiam9pbiIsImdldFR5cGUiLCJfZ2V0VHlwZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm5hbWUiLCJpZCIsInRvRGljdCIsImRhdGEiLCJ0b0pTT04iLCJsY19uYW1lIiwiX3ByaW50YWJsZUZpZWxkcyIsIl91cGRhdGVJZCIsImxjX2t3YXJncyIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiZm9yIiwiZGVwdGgiLCJwcmludGFibGUiLCJNYXRoIiwibWF4IiwiaXNPcGVuQUlUb29sQ2FsbEFycmF5IiwiZXZlcnkiLCJ2IiwiaW5kZXgiLCJfbWVyZ2VEaWN0cyIsIm1lcmdlZCIsImVudHJpZXMiLCJFcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwidG9NZXJnZSIsImZpbmRJbmRleCIsImxlZnRJdGVtIiwicHVzaCIsIl9tZXJnZU9iaiIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJfaXNNZXNzYWdlRmllbGRXaXRoUm9sZSIsIngiLCJyb2xlIiwiaXNCYXNlTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwiaXNCYXNlTWVzc2FnZUNodW5rIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/chat.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/chat.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk),\n/* harmony export */   isChatMessage: () => (/* binding */ isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* binding */ isChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role,\n            id: this.id ?? chunk.id\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\nfunction isChatMessage(x) {\n    return x._getType() === \"generic\";\n}\nfunction isChatMessageChunk(x) {\n    return x._getType() === \"generic\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLG9CQUFvQkosaURBQVdBO0lBQ3hDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQSxPQUFPQyxvQkFBb0I7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBRyxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1AsSUFBSSxHQUFHRCxPQUFPQyxJQUFJO0lBQzNCO0lBQ0FRLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxPQUFPQyxXQUFXQyxPQUFPLEVBQUU7UUFDdkIsT0FBT0EsUUFBUUYsUUFBUSxPQUFPO0lBQ2xDO0lBQ0EsSUFBSUcsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCWCxNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUNuQjtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNWSx5QkFBeUJwQixzREFBZ0JBO0lBQ2xELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUUsWUFBWUMsTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFDdEIsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNQLElBQUksR0FBR0QsT0FBT0MsSUFBSTtJQUMzQjtJQUNBUSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FLLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsaUJBQWlCO1lBQ3hCWCxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRWEsTUFBTWIsT0FBTztZQUNqRGMsbUJBQW1CckIscURBQVdBLENBQUMsSUFBSSxDQUFDcUIsaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CdEIscURBQVdBLENBQUMsSUFBSSxDQUFDc0IsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RWhCLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZpQixJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSCxNQUFNRyxFQUFFO1FBQzNCO0lBQ0o7SUFDQSxJQUFJTixtQkFBbUI7UUFDbkIsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxnQkFBZ0I7WUFDekJYLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1FBQ25CO0lBQ0o7QUFDSjtBQUNPLFNBQVNrQixjQUFjQyxDQUFDO0lBQzNCLE9BQU9BLEVBQUVYLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVNZLG1CQUFtQkQsQ0FBQztJQUNoQyxPQUFPQSxFQUFFWCxRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcz9jMTc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYXQgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NoYXRNZXNzYWdlQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBDaGF0TWVzc2FnZTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgc3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgZ2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgY2hhdCBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICByb2xlOiB0aGlzLnJvbGUsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhdE1lc3NhZ2UoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhdE1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCI7XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJDaGF0TWVzc2FnZSIsImxjX25hbWUiLCJfY2hhdE1lc3NhZ2VDbGFzcyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwicm9sZSIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiX2dldFR5cGUiLCJpc0luc3RhbmNlIiwibWVzc2FnZSIsIl9wcmludGFibGVGaWVsZHMiLCJDaGF0TWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiaWQiLCJpc0NoYXRNZXNzYWdlIiwieCIsImlzQ2hhdE1lc3NhZ2VDaHVuayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/function.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/function.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk),\n/* harmony export */   isFunctionMessage: () => (/* binding */ isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* binding */ isFunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\",\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isFunctionMessage(x) {\n    return x._getType() === \"function\";\n}\nfunction isFunctionMessageChunk(x) {\n    return x._getType() === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSx3QkFBd0JKLGlEQUFXQTtJQUM1QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxJQUFJLENBQUU7UUFDRixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtJQUNWO0lBQ0FHLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDZCQUE2QlYsc0RBQWdCQTtJQUN0RCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FLLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixxQkFBcUI7WUFDNUJGLFNBQVNQLHNEQUFZQSxDQUFDLElBQUksQ0FBQ08sT0FBTyxFQUFFSSxNQUFNSixPQUFPO1lBQ2pESyxtQkFBbUJYLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1csaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVQLE1BQU0sSUFBSSxDQUFDQSxJQUFJLElBQUk7WUFDbkJRLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlILE1BQU1HLEVBQUU7UUFDM0I7SUFDSjtBQUNKO0FBQ08sU0FBU0Msa0JBQWtCQyxDQUFDO0lBQy9CLE9BQU9BLEVBQUVSLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVNTLHVCQUF1QkQsQ0FBQztJQUNwQyxPQUFPQSxFQUFFUixRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanM/ODlhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBmdW5jdGlvbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lOiBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBmdW5jdGlvbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkXG4gKiB3aXRoIG90aGVyIGZ1bmN0aW9uIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgPz8gXCJcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbk1lc3NhZ2UoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uTWVzc2FnZUNodW5rKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImZ1bmN0aW9uXCI7XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJGdW5jdGlvbk1lc3NhZ2UiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJuYW1lIiwiY29udGVudCIsIl9nZXRUeXBlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCIsImlzRnVuY3Rpb25NZXNzYWdlIiwieCIsImlzRnVuY3Rpb25NZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/human.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/human.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* binding */ isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* binding */ isHumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isHumanMessage(x) {\n    return x.getType() === \"human\";\n}\nfunction isHumanMessageChunk(x) {\n    return x.getType() === \"human\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaHVtYW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUJKLGlEQUFXQTtJQUN6QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDBCQUEwQk4sc0RBQWdCQTtJQUNuRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixrQkFBa0I7WUFDekJHLFNBQVNSLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1EsT0FBTyxFQUFFRCxNQUFNQyxPQUFPO1lBQ2pEQyxtQkFBbUJSLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1EsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RUMsbUJBQW1CVCxxREFBV0EsQ0FBQyxJQUFJLENBQUNTLGlCQUFpQixFQUFFSCxNQUFNRyxpQkFBaUI7WUFDOUVDLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlKLE1BQU1JLEVBQUU7UUFDM0I7SUFDSjtBQUNKO0FBQ08sU0FBU0MsZUFBZUMsQ0FBQztJQUM1QixPQUFPQSxFQUFFQyxPQUFPLE9BQU87QUFDM0I7QUFDTyxTQUFTQyxvQkFBb0JGLENBQUM7SUFDakMsT0FBT0EsRUFBRUMsT0FBTyxPQUFPO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2h1bWFuLmpzPzcyMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgaHVtYW4gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSHVtYW5NZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgaHVtYW4gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBodW1hbiBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0h1bWFuTWVzc2FnZSh4KSB7XG4gICAgcmV0dXJuIHguZ2V0VHlwZSgpID09PSBcImh1bWFuXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNIdW1hbk1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguZ2V0VHlwZSgpID09PSBcImh1bWFuXCI7XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJIdW1hbk1lc3NhZ2UiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJIdW1hbk1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCIsImlzSHVtYW5NZXNzYWdlIiwieCIsImdldFR5cGUiLCJpc0h1bWFuTWVzc2FnZUNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk),\n/* harmony export */   RemoveMessage: () => (/* reexport safe */ _modifier_js__WEBPACK_IMPORTED_MODULE_8__.RemoveMessage),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.ToolMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists),\n/* harmony export */   _mergeObj: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeObj),\n/* harmony export */   _mergeStatus: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeStatus),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.convertToChunk),\n/* harmony export */   defaultTextSplitter: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.filterMessages),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk),\n/* harmony export */   isChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.isChatMessageChunk),\n/* harmony export */   isFunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.isFunctionMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.isHumanMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIToolCallArray),\n/* harmony export */   isSystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.isSystemMessageChunk),\n/* harmony export */   isToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_9__.isToolMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent),\n/* harmony export */   mergeMessageRuns: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.mergeMessageRuns),\n/* harmony export */   trimMessages: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_7__.trimMessages)\n/* harmony export */ });\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modifier.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n\n\n// TODO: Use a star export when we deprecate the\n// existing \"ToolCall\" type in \"base.js\".\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDRTtBQUNBO0FBQ0k7QUFDSDtBQUNDO0FBQ0Q7QUFDTztBQUNKO0FBQzlCLGdEQUFnRDtBQUNoRCx5Q0FBeUM7QUFDcUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanM/YjFjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9haS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2hhdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2h1bWFuLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3V0aWxzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFuc2Zvcm1lcnMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZGlmaWVyLmpzXCI7XG4vLyBUT0RPOiBVc2UgYSBzdGFyIGV4cG9ydCB3aGVuIHdlIGRlcHJlY2F0ZSB0aGVcbi8vIGV4aXN0aW5nIFwiVG9vbENhbGxcIiB0eXBlIGluIFwiYmFzZS5qc1wiLlxuZXhwb3J0IHsgVG9vbE1lc3NhZ2UsIFRvb2xNZXNzYWdlQ2h1bmssIGlzVG9vbE1lc3NhZ2UsIGlzVG9vbE1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi90b29sLmpzXCI7XG4iXSwibmFtZXMiOlsiVG9vbE1lc3NhZ2UiLCJUb29sTWVzc2FnZUNodW5rIiwiaXNUb29sTWVzc2FnZSIsImlzVG9vbE1lc3NhZ2VDaHVuayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/modifier.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoveMessage: () => (/* binding */ RemoveMessage)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Message responsible for deleting other messages.\n */ class RemoveMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    constructor(fields){\n        super({\n            ...fields,\n            content: \"\"\n        });\n        /**\n         * The ID of the message to remove.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.id = fields.id;\n    }\n    _getType() {\n        return \"remove\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            id: this.id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvbW9kaWZpZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7O0NBRUMsR0FDTSxNQUFNQyxzQkFBc0JELGlEQUFXQTtJQUMxQ0UsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQztZQUNGLEdBQUdBLE1BQU07WUFDVEMsU0FBUztRQUNiO1FBQ0E7O1NBRUMsR0FDREMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNO1lBQzlCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLEVBQUUsR0FBR1IsT0FBT1EsRUFBRTtJQUN2QjtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0EsSUFBSUMsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCRixJQUFJLElBQUksQ0FBQ0EsRUFBRTtRQUNmO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9tb2RpZmllci5qcz8xZTg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBNZXNzYWdlIHJlc3BvbnNpYmxlIGZvciBkZWxldGluZyBvdGhlciBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlbW92ZU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSBtZXNzYWdlIHRvIHJlbW92ZS5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaWQgPSBmaWVsZHMuaWQ7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZW1vdmVcIjtcbiAgICB9XG4gICAgZ2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiUmVtb3ZlTWVzc2FnZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiY29udGVudCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpZCIsIl9nZXRUeXBlIiwiX3ByaW50YWJsZUZpZWxkcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/system.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/system.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk),\n/* harmony export */   isSystemMessage: () => (/* binding */ isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* binding */ isSystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\nfunction isSystemMessage(x) {\n    return x._getType() === \"system\";\n}\nfunction isSystemMessageChunk(x) {\n    return x._getType() === \"system\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksc0JBQXNCSixpREFBV0E7SUFDMUMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJOLHNEQUFnQkE7SUFDcEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsbUJBQW1CO1lBQzFCRyxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRUQsTUFBTUMsT0FBTztZQUNqREMsbUJBQW1CUixxREFBV0EsQ0FBQyxJQUFJLENBQUNRLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVDLG1CQUFtQlQscURBQVdBLENBQUMsSUFBSSxDQUFDUyxpQkFBaUIsRUFBRUgsTUFBTUcsaUJBQWlCO1lBQzlFQyxJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSixNQUFNSSxFQUFFO1FBQzNCO0lBQ0o7QUFDSjtBQUNPLFNBQVNDLGdCQUFnQkMsQ0FBQztJQUM3QixPQUFPQSxFQUFFVCxRQUFRLE9BQU87QUFDNUI7QUFDTyxTQUFTVSxxQkFBcUJELENBQUM7SUFDbEMsT0FBT0EsRUFBRVQsUUFBUSxPQUFPO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3N5c3RlbS5qcz9lNWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIHN5c3RlbSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3lzdGVtTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBzeXN0ZW0gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBzeXN0ZW0gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3lzdGVtTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBpZDogdGhpcy5pZCA/PyBjaHVuay5pZCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU3lzdGVtTWVzc2FnZSh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N5c3RlbU1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIjtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIlN5c3RlbU1lc3NhZ2UiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiaWQiLCJpc1N5c3RlbU1lc3NhZ2UiLCJ4IiwiaXNTeXN0ZW1NZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/tool.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/tool.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser),\n/* harmony export */   isDirectToolOutput: () => (/* binding */ isDirectToolOutput),\n/* harmony export */   isToolMessage: () => (/* binding */ isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* binding */ isToolMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\nfunction isDirectToolOutput(x) {\n    return x != null && typeof x === \"object\" && \"lc_direct_tool_output\" in x && x.lc_direct_tool_output === true;\n}\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_direct_tool_output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            artifact: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeObj)(this.artifact, chunk.artifact),\n            tool_call_id: this.tool_call_id,\n            id: this.id ?? chunk.id,\n            status: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeStatus)(this.status, chunk.status)\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\nfunction isToolMessage(x) {\n    return x._getType() === \"tool\";\n}\nfunction isToolMessageChunk(x) {\n    return x._getType() === \"tool\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStHO0FBQ3hHLFNBQVNNLG1CQUFtQkMsQ0FBQztJQUNoQyxPQUFRQSxLQUFLLFFBQ1QsT0FBT0EsTUFBTSxZQUNiLDJCQUEyQkEsS0FDM0JBLEVBQUVDLHFCQUFxQixLQUFLO0FBQ3BDO0FBQ0E7O0NBRUMsR0FDTSxNQUFNQyxvQkFBb0JULGlEQUFXQTtJQUN4QyxPQUFPVSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQUVDLGNBQWM7UUFBZTtJQUMxQztJQUNBQyxZQUFZQyxNQUFNLEVBQUVGLFlBQVksRUFBRUcsSUFBSSxDQUFFO1FBQ3BDLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDO2dCQUFNSCxjQUFjQTtZQUFhO1FBQ2pFO1FBQ0EsS0FBSyxDQUFDRTtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QjtZQUNqREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0E7OztTQUdDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQTs7Ozs7O1NBTUMsR0FDRCw4REFBOEQ7UUFDOURMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVixZQUFZLEdBQUdFLE9BQU9GLFlBQVk7UUFDdkMsSUFBSSxDQUFDVyxRQUFRLEdBQUdULE9BQU9TLFFBQVE7UUFDL0IsSUFBSSxDQUFDQyxNQUFNLEdBQUdWLE9BQU9VLE1BQU07SUFDL0I7SUFDQUMsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLE9BQU9DLFdBQVdDLE9BQU8sRUFBRTtRQUN2QixPQUFPQSxRQUFRRixRQUFRLE9BQU87SUFDbEM7SUFDQSxJQUFJRyxtQkFBbUI7UUFDbkIsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxnQkFBZ0I7WUFDekJoQixjQUFjLElBQUksQ0FBQ0EsWUFBWTtZQUMvQlcsVUFBVSxJQUFJLENBQUNBLFFBQVE7UUFDM0I7SUFDSjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTU0seUJBQXlCNUIsc0RBQWdCQTtJQUNsRFksWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBOzs7U0FHQyxHQUNETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBOzs7Ozs7U0FNQyxHQUNELDhEQUE4RDtRQUM5REwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNWLFlBQVksR0FBR0UsT0FBT0YsWUFBWTtRQUN2QyxJQUFJLENBQUNXLFFBQVEsR0FBR1QsT0FBT1MsUUFBUTtRQUMvQixJQUFJLENBQUNDLE1BQU0sR0FBR1YsT0FBT1UsTUFBTTtJQUMvQjtJQUNBLE9BQU9kLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQWUsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBSyxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLGlCQUFpQjtZQUN4QmIsU0FBU2Qsc0RBQVlBLENBQUMsSUFBSSxDQUFDYyxPQUFPLEVBQUVlLE1BQU1mLE9BQU87WUFDakRnQixtQkFBbUI3QixxREFBV0EsQ0FBQyxJQUFJLENBQUM2QixpQkFBaUIsRUFBRUQsTUFBTUMsaUJBQWlCO1lBQzlFQyxtQkFBbUI5QixxREFBV0EsQ0FBQyxJQUFJLENBQUM4QixpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFVixVQUFVbkIsbURBQVNBLENBQUMsSUFBSSxDQUFDbUIsUUFBUSxFQUFFUSxNQUFNUixRQUFRO1lBQ2pEWCxjQUFjLElBQUksQ0FBQ0EsWUFBWTtZQUMvQnNCLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlILE1BQU1HLEVBQUU7WUFDdkJWLFFBQVFuQixzREFBWUEsQ0FBQyxJQUFJLENBQUNtQixNQUFNLEVBQUVPLE1BQU1QLE1BQU07UUFDbEQ7SUFDSjtJQUNBLElBQUlJLG1CQUFtQjtRQUNuQixPQUFPO1lBQ0gsR0FBRyxLQUFLLENBQUNBLGdCQUFnQjtZQUN6QmhCLGNBQWMsSUFBSSxDQUFDQSxZQUFZO1lBQy9CVyxVQUFVLElBQUksQ0FBQ0EsUUFBUTtRQUMzQjtJQUNKO0FBQ0o7QUFDTyxTQUFTWSxzQkFDaEIsOERBQThEO0FBQzlEQyxZQUFZO0lBQ1IsTUFBTUMsWUFBWSxFQUFFO0lBQ3BCLE1BQU1DLG1CQUFtQixFQUFFO0lBQzNCLEtBQUssTUFBTUMsWUFBWUgsYUFBYztRQUNqQyxJQUFJLENBQUNHLFNBQVNDLFFBQVEsRUFBRTtZQUNwQjtRQUNKLE9BQ0s7WUFDRCxNQUFNQyxlQUFlRixTQUFTQyxRQUFRLENBQUN6QixJQUFJO1lBQzNDLElBQUk7Z0JBQ0EsTUFBTTJCLGVBQWVDLEtBQUtDLEtBQUssQ0FBQ0wsU0FBU0MsUUFBUSxDQUFDSyxTQUFTO2dCQUMzRCxNQUFNQyxTQUFTO29CQUNYL0IsTUFBTTBCLGdCQUFnQjtvQkFDdEJNLE1BQU1MLGdCQUFnQixDQUFDO29CQUN2QlIsSUFBSUssU0FBU0wsRUFBRTtnQkFDbkI7Z0JBQ0FHLFVBQVVXLElBQUksQ0FBQ0Y7WUFDbkIsRUFDQSxPQUFPRyxPQUFPO2dCQUNWWCxpQkFBaUJVLElBQUksQ0FBQztvQkFDbEJqQyxNQUFNMEI7b0JBQ05NLE1BQU1SLFNBQVNDLFFBQVEsQ0FBQ0ssU0FBUztvQkFDakNYLElBQUlLLFNBQVNMLEVBQUU7b0JBQ2ZlLE9BQU87Z0JBQ1g7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO1FBQUNaO1FBQVdDO0tBQWlCO0FBQ3hDO0FBQ08sU0FBU1ksY0FBYzNDLENBQUM7SUFDM0IsT0FBT0EsRUFBRWtCLFFBQVEsT0FBTztBQUM1QjtBQUNPLFNBQVMwQixtQkFBbUI1QyxDQUFDO0lBQ2hDLE9BQU9BLEVBQUVrQixRQUFRLE9BQU87QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcz8zMDE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCBfbWVyZ2VPYmosIF9tZXJnZVN0YXR1cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNEaXJlY3RUb29sT3V0cHV0KHgpIHtcbiAgICByZXR1cm4gKHggIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcImxjX2RpcmVjdF90b29sX291dHB1dFwiIGluIHggJiZcbiAgICAgICAgeC5sY19kaXJlY3RfdG9vbF9vdXRwdXQgPT09IHRydWUpO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdG9vbCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xNZXNzYWdlXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4geyB0b29sX2NhbGxfaWQ6IFwidG9vbF9jYWxsX2lkXCIgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCB0b29sX2NhbGxfaWQsIG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIG5hbWUsIHRvb2xfY2FsbF9pZDogdG9vbF9jYWxsX2lkIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfZGlyZWN0X3Rvb2xfb3V0cHV0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RhdHVzIG9mIHRoZSB0b29sIGludm9jYXRpb24uXG4gICAgICAgICAqIEB2ZXJzaW9uIDAuMi4xOVxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXJ0aWZhY3Qgb2YgdGhlIFRvb2wgZXhlY3V0aW9uIHdoaWNoIGlzIG5vdCBtZWFudCB0byBiZSBzZW50IHRvIHRoZSBtb2RlbC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBtZXNzYWdlIGNvbnRlbnQsIGUuZy4gaWYgb25seVxuICAgICAgICAgKiBhIHN1YnNldCBvZiB0aGUgZnVsbCB0b29sIG91dHB1dCBpcyBiZWluZyBwYXNzZWQgYXMgbWVzc2FnZSBjb250ZW50IGJ1dCB0aGUgZnVsbFxuICAgICAgICAgKiBvdXRwdXQgaXMgbmVlZGVkIGluIG90aGVyIHBhcnRzIG9mIHRoZSBjb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJ0aWZhY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgICAgICB0aGlzLmFydGlmYWN0ID0gZmllbGRzLmFydGlmYWN0O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IGZpZWxkcy5zdGF0dXM7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdGhpcy50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICBhcnRpZmFjdDogdGhpcy5hcnRpZmFjdCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHRvb2wgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciB0b29sIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXR1cyBvZiB0aGUgdG9vbCBpbnZvY2F0aW9uLlxuICAgICAgICAgKiBAdmVyc2lvbiAwLjIuMTlcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXJ0aWZhY3Qgb2YgdGhlIFRvb2wgZXhlY3V0aW9uIHdoaWNoIGlzIG5vdCBtZWFudCB0byBiZSBzZW50IHRvIHRoZSBtb2RlbC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBtZXNzYWdlIGNvbnRlbnQsIGUuZy4gaWYgb25seVxuICAgICAgICAgKiBhIHN1YnNldCBvZiB0aGUgZnVsbCB0b29sIG91dHB1dCBpcyBiZWluZyBwYXNzZWQgYXMgbWVzc2FnZSBjb250ZW50IGJ1dCB0aGUgZnVsbFxuICAgICAgICAgKiBvdXRwdXQgaXMgbmVlZGVkIGluIG90aGVyIHBhcnRzIG9mIHRoZSBjb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJ0aWZhY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgICAgICB0aGlzLmFydGlmYWN0ID0gZmllbGRzLmFydGlmYWN0O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IGZpZWxkcy5zdGF0dXM7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIGFydGlmYWN0OiBfbWVyZ2VPYmoodGhpcy5hcnRpZmFjdCwgY2h1bmsuYXJ0aWZhY3QpLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICAgICAgc3RhdHVzOiBfbWVyZ2VTdGF0dXModGhpcy5zdGF0dXMsIGNodW5rLnN0YXR1cyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuICAgICAgICAgICAgYXJ0aWZhY3Q6IHRoaXMuYXJ0aWZhY3QsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRUb29sQ2FsbFBhcnNlcihcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yYXdUb29sQ2FsbHMpIHtcbiAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiByYXdUb29sQ2FsbHMpIHtcbiAgICAgICAgaWYgKCF0b29sQ2FsbC5mdW5jdGlvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbkFyZ3MgPSBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgYXJnczogZnVuY3Rpb25BcmdzIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaChwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFt0b29sQ2FsbHMsIGludmFsaWRUb29sQ2FsbHNdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVG9vbE1lc3NhZ2UoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwidG9vbFwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVG9vbE1lc3NhZ2VDaHVuayh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJfbWVyZ2VPYmoiLCJfbWVyZ2VTdGF0dXMiLCJpc0RpcmVjdFRvb2xPdXRwdXQiLCJ4IiwibGNfZGlyZWN0X3Rvb2xfb3V0cHV0IiwiVG9vbE1lc3NhZ2UiLCJsY19uYW1lIiwibGNfYWxpYXNlcyIsInRvb2xfY2FsbF9pZCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwibmFtZSIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJ0aWZhY3QiLCJzdGF0dXMiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJtZXNzYWdlIiwiX3ByaW50YWJsZUZpZWxkcyIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImludmFsaWRUb29sQ2FsbHMiLCJ0b29sQ2FsbCIsImZ1bmN0aW9uIiwiZnVuY3Rpb25OYW1lIiwiZnVuY3Rpb25BcmdzIiwiSlNPTiIsInBhcnNlIiwiYXJndW1lbnRzIiwicGFyc2VkIiwiYXJncyIsInB1c2giLCJlcnJvciIsImlzVG9vbE1lc3NhZ2UiLCJpc1Rvb2xNZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/transformers.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultTextSplitter: () => (/* binding */ defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* binding */ filterMessages),\n/* harmony export */   mergeMessageRuns: () => (/* binding */ mergeMessageRuns),\n/* harmony export */   trimMessages: () => (/* binding */ trimMessages)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _modifier_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./modifier.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/modifier.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n\n\n\n\n\n\n\nconst _isMessageType = (msg, types)=>{\n    const typesAsStrings = [\n        ...new Set(types?.map((t)=>{\n            if (typeof t === \"string\") {\n                return t;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const instantiatedMsgClass = new t({});\n            if (!(\"getType\" in instantiatedMsgClass) || typeof instantiatedMsgClass.getType !== \"function\") {\n                throw new Error(\"Invalid type provided.\");\n            }\n            return instantiatedMsgClass.getType();\n        }))\n    ];\n    const msgType = msg.getType();\n    return typesAsStrings.some((t)=>t === msgType);\n};\nfunction filterMessages(messagesOrOptions, options) {\n    if (Array.isArray(messagesOrOptions)) {\n        return _filterMessages(messagesOrOptions, options);\n    }\n    return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from((input)=>{\n        return _filterMessages(input, messagesOrOptions);\n    });\n}\nfunction _filterMessages(messages, options = {}) {\n    const { includeNames, excludeNames, includeTypes, excludeTypes, includeIds, excludeIds } = options;\n    const filtered = [];\n    for (const msg of messages){\n        if (excludeNames && msg.name && excludeNames.includes(msg.name)) {\n            continue;\n        } else if (excludeTypes && _isMessageType(msg, excludeTypes)) {\n            continue;\n        } else if (excludeIds && msg.id && excludeIds.includes(msg.id)) {\n            continue;\n        }\n        // default to inclusion when no inclusion criteria given.\n        if (!(includeTypes || includeIds || includeNames)) {\n            filtered.push(msg);\n        } else if (includeNames && msg.name && includeNames.some((iName)=>iName === msg.name)) {\n            filtered.push(msg);\n        } else if (includeTypes && _isMessageType(msg, includeTypes)) {\n            filtered.push(msg);\n        } else if (includeIds && msg.id && includeIds.some((id)=>id === msg.id)) {\n            filtered.push(msg);\n        }\n    }\n    return filtered;\n}\nfunction mergeMessageRuns(messages) {\n    if (Array.isArray(messages)) {\n        return _mergeMessageRuns(messages);\n    }\n    return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from(_mergeMessageRuns);\n}\nfunction _mergeMessageRuns(messages) {\n    if (!messages.length) {\n        return [];\n    }\n    const merged = [];\n    for (const msg of messages){\n        const curr = msg;\n        const last = merged.pop();\n        if (!last) {\n            merged.push(curr);\n        } else if (curr.getType() === \"tool\" || !(curr.getType() === last.getType())) {\n            merged.push(last, curr);\n        } else {\n            const lastChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_9__.convertToChunk)(last);\n            const currChunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_9__.convertToChunk)(curr);\n            const mergedChunks = lastChunk.concat(currChunk);\n            if (typeof lastChunk.content === \"string\" && typeof currChunk.content === \"string\") {\n                mergedChunks.content = `${lastChunk.content}\\n${currChunk.content}`;\n            }\n            merged.push(_chunkToMsg(mergedChunks));\n        }\n    }\n    return merged;\n}\nfunction trimMessages(messagesOrOptions, options) {\n    if (Array.isArray(messagesOrOptions)) {\n        const messages = messagesOrOptions;\n        if (!options) {\n            throw new Error(\"Options parameter is required when providing messages.\");\n        }\n        return _trimMessagesHelper(messages, options);\n    } else {\n        const trimmerOptions = messagesOrOptions;\n        return _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda.from((input)=>_trimMessagesHelper(input, trimmerOptions)).withConfig({\n            runName: \"trim_messages\"\n        });\n    }\n}\nasync function _trimMessagesHelper(messages, options) {\n    const { maxTokens, tokenCounter, strategy = \"last\", allowPartial = false, endOn, startOn, includeSystem = false, textSplitter } = options;\n    if (startOn && strategy === \"first\") {\n        throw new Error(\"`startOn` should only be specified if `strategy` is 'last'.\");\n    }\n    if (includeSystem && strategy === \"first\") {\n        throw new Error(\"`includeSystem` should only be specified if `strategy` is 'last'.\");\n    }\n    let listTokenCounter;\n    if (\"getNumTokens\" in tokenCounter) {\n        listTokenCounter = async (msgs)=>{\n            const tokenCounts = await Promise.all(msgs.map((msg)=>tokenCounter.getNumTokens(msg.content)));\n            return tokenCounts.reduce((sum, count)=>sum + count, 0);\n        };\n    } else {\n        listTokenCounter = async (msgs)=>tokenCounter(msgs);\n    }\n    let textSplitterFunc = defaultTextSplitter;\n    if (textSplitter) {\n        if (\"splitText\" in textSplitter) {\n            textSplitterFunc = textSplitter.splitText;\n        } else {\n            textSplitterFunc = async (text)=>textSplitter(text);\n        }\n    }\n    if (strategy === \"first\") {\n        return _firstMaxTokens(messages, {\n            maxTokens,\n            tokenCounter: listTokenCounter,\n            textSplitter: textSplitterFunc,\n            partialStrategy: allowPartial ? \"first\" : undefined,\n            endOn\n        });\n    } else if (strategy === \"last\") {\n        return _lastMaxTokens(messages, {\n            maxTokens,\n            tokenCounter: listTokenCounter,\n            textSplitter: textSplitterFunc,\n            allowPartial,\n            includeSystem,\n            startOn,\n            endOn\n        });\n    } else {\n        throw new Error(`Unrecognized strategy: '${strategy}'. Must be one of 'first' or 'last'.`);\n    }\n}\nasync function _firstMaxTokens(messages, options) {\n    const { maxTokens, tokenCounter, textSplitter, partialStrategy, endOn } = options;\n    let messagesCopy = [\n        ...messages\n    ];\n    let idx = 0;\n    for(let i = 0; i < messagesCopy.length; i += 1){\n        const remainingMessages = i > 0 ? messagesCopy.slice(0, -i) : messagesCopy;\n        if (await tokenCounter(remainingMessages) <= maxTokens) {\n            idx = messagesCopy.length - i;\n            break;\n        }\n    }\n    if (idx < messagesCopy.length - 1 && partialStrategy) {\n        let includedPartial = false;\n        if (Array.isArray(messagesCopy[idx].content)) {\n            const excluded = messagesCopy[idx];\n            if (typeof excluded.content === \"string\") {\n                throw new Error(\"Expected content to be an array.\");\n            }\n            const numBlock = excluded.content.length;\n            const reversedContent = partialStrategy === \"last\" ? [\n                ...excluded.content\n            ].reverse() : excluded.content;\n            for(let i = 1; i <= numBlock; i += 1){\n                const partialContent = partialStrategy === \"first\" ? reversedContent.slice(0, i) : reversedContent.slice(-i);\n                const fields = Object.fromEntries(Object.entries(excluded).filter(([k])=>k !== \"type\" && !k.startsWith(\"lc_\")));\n                const updatedMessage = _switchTypeToMessage(excluded.getType(), {\n                    ...fields,\n                    content: partialContent\n                });\n                const slicedMessages = [\n                    ...messagesCopy.slice(0, idx),\n                    updatedMessage\n                ];\n                if (await tokenCounter(slicedMessages) <= maxTokens) {\n                    messagesCopy = slicedMessages;\n                    idx += 1;\n                    includedPartial = true;\n                } else {\n                    break;\n                }\n            }\n            if (includedPartial && partialStrategy === \"last\") {\n                excluded.content = [\n                    ...reversedContent\n                ].reverse();\n            }\n        }\n        if (!includedPartial) {\n            const excluded = messagesCopy[idx];\n            let text;\n            if (Array.isArray(excluded.content) && excluded.content.some((block)=>typeof block === \"string\" || block.type === \"text\")) {\n                const textBlock = excluded.content.find((block)=>block.type === \"text\" && block.text);\n                text = textBlock?.text;\n            } else if (typeof excluded.content === \"string\") {\n                text = excluded.content;\n            }\n            if (text) {\n                const splitTexts = await textSplitter(text);\n                const numSplits = splitTexts.length;\n                if (partialStrategy === \"last\") {\n                    splitTexts.reverse();\n                }\n                for(let _ = 0; _ < numSplits - 1; _ += 1){\n                    splitTexts.pop();\n                    excluded.content = splitTexts.join(\"\");\n                    if (await tokenCounter([\n                        ...messagesCopy.slice(0, idx),\n                        excluded\n                    ]) <= maxTokens) {\n                        if (partialStrategy === \"last\") {\n                            excluded.content = [\n                                ...splitTexts\n                            ].reverse().join(\"\");\n                        }\n                        messagesCopy = [\n                            ...messagesCopy.slice(0, idx),\n                            excluded\n                        ];\n                        idx += 1;\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    if (endOn) {\n        const endOnArr = Array.isArray(endOn) ? endOn : [\n            endOn\n        ];\n        while(idx > 0 && !_isMessageType(messagesCopy[idx - 1], endOnArr)){\n            idx -= 1;\n        }\n    }\n    return messagesCopy.slice(0, idx);\n}\nasync function _lastMaxTokens(messages, options) {\n    const { allowPartial = false, includeSystem = false, endOn, startOn, ...rest } = options;\n    // Create a copy of messages to avoid mutation\n    let messagesCopy = messages.map((message)=>{\n        const fields = Object.fromEntries(Object.entries(message).filter(([k])=>k !== \"type\" && !k.startsWith(\"lc_\")));\n        return _switchTypeToMessage(message.getType(), fields, (0,_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(message));\n    });\n    if (endOn) {\n        const endOnArr = Array.isArray(endOn) ? endOn : [\n            endOn\n        ];\n        while(messagesCopy.length > 0 && !_isMessageType(messagesCopy[messagesCopy.length - 1], endOnArr)){\n            messagesCopy = messagesCopy.slice(0, -1);\n        }\n    }\n    const swappedSystem = includeSystem && messagesCopy[0]?.getType() === \"system\";\n    let reversed_ = swappedSystem ? messagesCopy.slice(0, 1).concat(messagesCopy.slice(1).reverse()) : messagesCopy.reverse();\n    reversed_ = await _firstMaxTokens(reversed_, {\n        ...rest,\n        partialStrategy: allowPartial ? \"last\" : undefined,\n        endOn: startOn\n    });\n    if (swappedSystem) {\n        return [\n            reversed_[0],\n            ...reversed_.slice(1).reverse()\n        ];\n    } else {\n        return reversed_.reverse();\n    }\n}\nconst _MSG_CHUNK_MAP = {\n    human: {\n        message: _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage,\n        messageChunk: _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessageChunk\n    },\n    ai: {\n        message: _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage,\n        messageChunk: _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk\n    },\n    system: {\n        message: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage,\n        messageChunk: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk\n    },\n    developer: {\n        message: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage,\n        messageChunk: _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk\n    },\n    tool: {\n        message: _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage,\n        messageChunk: _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessageChunk\n    },\n    function: {\n        message: _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessage,\n        messageChunk: _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessageChunk\n    },\n    generic: {\n        message: _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage,\n        messageChunk: _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessageChunk\n    },\n    remove: {\n        message: _modifier_js__WEBPACK_IMPORTED_MODULE_6__.RemoveMessage,\n        messageChunk: _modifier_js__WEBPACK_IMPORTED_MODULE_6__.RemoveMessage\n    }\n};\nfunction _switchTypeToMessage(messageType, fields, returnChunk) {\n    let chunk;\n    let msg;\n    switch(messageType){\n        case \"human\":\n            if (returnChunk) {\n                chunk = new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessageChunk(fields);\n            } else {\n                msg = new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(fields);\n            }\n            break;\n        case \"ai\":\n            if (returnChunk) {\n                let aiChunkFields = {\n                    ...fields\n                };\n                if (\"tool_calls\" in aiChunkFields) {\n                    aiChunkFields = {\n                        ...aiChunkFields,\n                        tool_call_chunks: aiChunkFields.tool_calls?.map((tc)=>({\n                                ...tc,\n                                type: \"tool_call_chunk\",\n                                index: undefined,\n                                args: JSON.stringify(tc.args)\n                            }))\n                    };\n                }\n                chunk = new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk(aiChunkFields);\n            } else {\n                msg = new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(fields);\n            }\n            break;\n        case \"system\":\n            if (returnChunk) {\n                chunk = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk(fields);\n            } else {\n                msg = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage(fields);\n            }\n            break;\n        case \"developer\":\n            if (returnChunk) {\n                chunk = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk({\n                    ...fields,\n                    additional_kwargs: {\n                        ...fields.additional_kwargs,\n                        __openai_role__: \"developer\"\n                    }\n                });\n            } else {\n                msg = new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage({\n                    ...fields,\n                    additional_kwargs: {\n                        ...fields.additional_kwargs,\n                        __openai_role__: \"developer\"\n                    }\n                });\n            }\n            break;\n        case \"tool\":\n            if (\"tool_call_id\" in fields) {\n                if (returnChunk) {\n                    chunk = new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessageChunk(fields);\n                } else {\n                    msg = new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage(fields);\n                }\n            } else {\n                throw new Error(\"Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.\");\n            }\n            break;\n        case \"function\":\n            if (returnChunk) {\n                chunk = new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessageChunk(fields);\n            } else {\n                if (!fields.name) {\n                    throw new Error(\"FunctionMessage must have a 'name' field\");\n                }\n                msg = new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessage(fields);\n            }\n            break;\n        case \"generic\":\n            if (\"role\" in fields) {\n                if (returnChunk) {\n                    chunk = new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessageChunk(fields);\n                } else {\n                    msg = new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage(fields);\n                }\n            } else {\n                throw new Error(\"Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.\");\n            }\n            break;\n        default:\n            throw new Error(`Unrecognized message type ${messageType}`);\n    }\n    if (returnChunk && chunk) {\n        return chunk;\n    }\n    if (msg) {\n        return msg;\n    }\n    throw new Error(`Unrecognized message type ${messageType}`);\n}\nfunction _chunkToMsg(chunk) {\n    const chunkType = chunk.getType();\n    let msg;\n    const fields = Object.fromEntries(Object.entries(chunk).filter(([k])=>![\n            \"type\",\n            \"tool_call_chunks\"\n        ].includes(k) && !k.startsWith(\"lc_\")));\n    if (chunkType in _MSG_CHUNK_MAP) {\n        msg = _switchTypeToMessage(chunkType, fields);\n    }\n    if (!msg) {\n        throw new Error(`Unrecognized message chunk class ${chunkType}. Supported classes are ${Object.keys(_MSG_CHUNK_MAP)}`);\n    }\n    return msg;\n}\n/**\n * The default text splitter function that splits text by newlines.\n *\n * @param {string} text\n * @returns A promise that resolves to an array of strings split by newlines.\n */ function defaultTextSplitter(text) {\n    const splits = text.split(\"\\n\");\n    return Promise.resolve([\n        ...splits.slice(0, -1).map((s)=>`${s}\\n`),\n        splits[splits.length - 1]\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdHJhbnNmb3JtZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNEO0FBQ0Y7QUFDSjtBQUNXO0FBQ1k7QUFDVjtBQUNmO0FBQ2tCO0FBQ0w7QUFDZjtBQUM1QyxNQUFNZ0IsaUJBQWlCLENBQUNDLEtBQUtDO0lBQ3pCLE1BQU1DLGlCQUFpQjtXQUNoQixJQUFJQyxJQUFJRixPQUFPRyxJQUFJLENBQUNDO1lBQ25CLElBQUksT0FBT0EsTUFBTSxVQUFVO2dCQUN2QixPQUFPQTtZQUNYO1lBQ0EsOERBQThEO1lBQzlELE1BQU1DLHVCQUF1QixJQUFJRCxFQUFFLENBQUM7WUFDcEMsSUFBSSxDQUFFLGNBQWFDLG9CQUFtQixLQUNsQyxPQUFPQSxxQkFBcUJDLE9BQU8sS0FBSyxZQUFZO2dCQUNwRCxNQUFNLElBQUlDLE1BQU07WUFDcEI7WUFDQSxPQUFPRixxQkFBcUJDLE9BQU87UUFDdkM7S0FDSDtJQUNELE1BQU1FLFVBQVVULElBQUlPLE9BQU87SUFDM0IsT0FBT0wsZUFBZVEsSUFBSSxDQUFDLENBQUNMLElBQU1BLE1BQU1JO0FBQzVDO0FBQ08sU0FBU0UsZUFBZUMsaUJBQWlCLEVBQUVDLE9BQU87SUFDckQsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxvQkFBb0I7UUFDbEMsT0FBT0ksZ0JBQWdCSixtQkFBbUJDO0lBQzlDO0lBQ0EsT0FBTzlCLDhEQUFjQSxDQUFDa0MsSUFBSSxDQUFDLENBQUNDO1FBQ3hCLE9BQU9GLGdCQUFnQkUsT0FBT047SUFDbEM7QUFDSjtBQUNBLFNBQVNJLGdCQUFnQkcsUUFBUSxFQUFFTixVQUFVLENBQUMsQ0FBQztJQUMzQyxNQUFNLEVBQUVPLFlBQVksRUFBRUMsWUFBWSxFQUFFQyxZQUFZLEVBQUVDLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxVQUFVLEVBQUcsR0FBR1o7SUFDNUYsTUFBTWEsV0FBVyxFQUFFO0lBQ25C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LE9BQU8sQ0FBQztXQUNoQkYsT0FBT3ZELEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRzNFLEdBQUcsQ0FBQyxDQUFDcUksSUFBTSxDQUFDLEVBQUVBLEVBQUUsRUFBRSxDQUFDO1FBQzFDSCxNQUFNLENBQUNBLE9BQU9wRyxNQUFNLEdBQUcsRUFBRTtLQUM1QjtBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3RyYW5zZm9ybWVycy5qcz8wNjMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcbmltcG9ydCB7IGlzQmFzZU1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgQ2hhdE1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbk1lc3NhZ2UsIEZ1bmN0aW9uTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIEh1bWFuTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vaHVtYW4uanNcIjtcbmltcG9ydCB7IFJlbW92ZU1lc3NhZ2UgfSBmcm9tIFwiLi9tb2RpZmllci5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBUb29sTWVzc2FnZSwgVG9vbE1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi90b29sLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9DaHVuayB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5jb25zdCBfaXNNZXNzYWdlVHlwZSA9IChtc2csIHR5cGVzKSA9PiB7XG4gICAgY29uc3QgdHlwZXNBc1N0cmluZ3MgPSBbXG4gICAgICAgIC4uLm5ldyBTZXQodHlwZXM/Lm1hcCgodCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY29uc3QgaW5zdGFudGlhdGVkTXNnQ2xhc3MgPSBuZXcgdCh7fSk7XG4gICAgICAgICAgICBpZiAoIShcImdldFR5cGVcIiBpbiBpbnN0YW50aWF0ZWRNc2dDbGFzcykgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgaW5zdGFudGlhdGVkTXNnQ2xhc3MuZ2V0VHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0eXBlIHByb3ZpZGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnN0YW50aWF0ZWRNc2dDbGFzcy5nZXRUeXBlKCk7XG4gICAgICAgIH0pKSxcbiAgICBdO1xuICAgIGNvbnN0IG1zZ1R5cGUgPSBtc2cuZ2V0VHlwZSgpO1xuICAgIHJldHVybiB0eXBlc0FzU3RyaW5ncy5zb21lKCh0KSA9PiB0ID09PSBtc2dUeXBlKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWVzc2FnZXMobWVzc2FnZXNPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlc09yT3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIF9maWx0ZXJNZXNzYWdlcyhtZXNzYWdlc09yT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBSdW5uYWJsZUxhbWJkYS5mcm9tKChpbnB1dCkgPT4ge1xuICAgICAgICByZXR1cm4gX2ZpbHRlck1lc3NhZ2VzKGlucHV0LCBtZXNzYWdlc09yT3B0aW9ucyk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBfZmlsdGVyTWVzc2FnZXMobWVzc2FnZXMsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgaW5jbHVkZU5hbWVzLCBleGNsdWRlTmFtZXMsIGluY2x1ZGVUeXBlcywgZXhjbHVkZVR5cGVzLCBpbmNsdWRlSWRzLCBleGNsdWRlSWRzLCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBmaWx0ZXJlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGlmIChleGNsdWRlTmFtZXMgJiYgbXNnLm5hbWUgJiYgZXhjbHVkZU5hbWVzLmluY2x1ZGVzKG1zZy5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhjbHVkZVR5cGVzICYmIF9pc01lc3NhZ2VUeXBlKG1zZywgZXhjbHVkZVR5cGVzKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhjbHVkZUlkcyAmJiBtc2cuaWQgJiYgZXhjbHVkZUlkcy5pbmNsdWRlcyhtc2cuaWQpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZWZhdWx0IHRvIGluY2x1c2lvbiB3aGVuIG5vIGluY2x1c2lvbiBjcml0ZXJpYSBnaXZlbi5cbiAgICAgICAgaWYgKCEoaW5jbHVkZVR5cGVzIHx8IGluY2x1ZGVJZHMgfHwgaW5jbHVkZU5hbWVzKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluY2x1ZGVOYW1lcyAmJlxuICAgICAgICAgICAgbXNnLm5hbWUgJiZcbiAgICAgICAgICAgIGluY2x1ZGVOYW1lcy5zb21lKChpTmFtZSkgPT4gaU5hbWUgPT09IG1zZy5uYW1lKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluY2x1ZGVUeXBlcyAmJiBfaXNNZXNzYWdlVHlwZShtc2csIGluY2x1ZGVUeXBlcykpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gobXNnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmNsdWRlSWRzICYmIG1zZy5pZCAmJiBpbmNsdWRlSWRzLnNvbWUoKGlkKSA9PiBpZCA9PT0gbXNnLmlkKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU1lc3NhZ2VSdW5zKG1lc3NhZ2VzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSB7XG4gICAgICAgIHJldHVybiBfbWVyZ2VNZXNzYWdlUnVucyhtZXNzYWdlcyk7XG4gICAgfVxuICAgIHJldHVybiBSdW5uYWJsZUxhbWJkYS5mcm9tKF9tZXJnZU1lc3NhZ2VSdW5zKTtcbn1cbmZ1bmN0aW9uIF9tZXJnZU1lc3NhZ2VSdW5zKG1lc3NhZ2VzKSB7XG4gICAgaWYgKCFtZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xuICAgICAgICBjb25zdCBjdXJyID0gbXNnO1xuICAgICAgICBjb25zdCBsYXN0ID0gbWVyZ2VkLnBvcCgpO1xuICAgICAgICBpZiAoIWxhc3QpIHtcbiAgICAgICAgICAgIG1lcmdlZC5wdXNoKGN1cnIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1cnIuZ2V0VHlwZSgpID09PSBcInRvb2xcIiB8fFxuICAgICAgICAgICAgIShjdXJyLmdldFR5cGUoKSA9PT0gbGFzdC5nZXRUeXBlKCkpKSB7XG4gICAgICAgICAgICBtZXJnZWQucHVzaChsYXN0LCBjdXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDaHVuayA9IGNvbnZlcnRUb0NodW5rKGxhc3QpO1xuICAgICAgICAgICAgY29uc3QgY3VyckNodW5rID0gY29udmVydFRvQ2h1bmsoY3Vycik7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWRDaHVua3MgPSBsYXN0Q2h1bmsuY29uY2F0KGN1cnJDaHVuayk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGxhc3RDaHVuay5jb250ZW50ID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJDaHVuay5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQ2h1bmtzLmNvbnRlbnQgPSBgJHtsYXN0Q2h1bmsuY29udGVudH1cXG4ke2N1cnJDaHVuay5jb250ZW50fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWQucHVzaChfY2h1bmtUb01zZyhtZXJnZWRDaHVua3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1NZXNzYWdlcyhtZXNzYWdlc09yT3B0aW9ucywgb3B0aW9ucykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VzT3JPcHRpb25zKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IG1lc3NhZ2VzT3JPcHRpb25zO1xuICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9wdGlvbnMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIHdoZW4gcHJvdmlkaW5nIG1lc3NhZ2VzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RyaW1NZXNzYWdlc0hlbHBlcihtZXNzYWdlcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB0cmltbWVyT3B0aW9ucyA9IG1lc3NhZ2VzT3JPcHRpb25zO1xuICAgICAgICByZXR1cm4gUnVubmFibGVMYW1iZGEuZnJvbSgoaW5wdXQpID0+IF90cmltTWVzc2FnZXNIZWxwZXIoaW5wdXQsIHRyaW1tZXJPcHRpb25zKSkud2l0aENvbmZpZyh7XG4gICAgICAgICAgICBydW5OYW1lOiBcInRyaW1fbWVzc2FnZXNcIixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gX3RyaW1NZXNzYWdlc0hlbHBlcihtZXNzYWdlcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgbWF4VG9rZW5zLCB0b2tlbkNvdW50ZXIsIHN0cmF0ZWd5ID0gXCJsYXN0XCIsIGFsbG93UGFydGlhbCA9IGZhbHNlLCBlbmRPbiwgc3RhcnRPbiwgaW5jbHVkZVN5c3RlbSA9IGZhbHNlLCB0ZXh0U3BsaXR0ZXIsIH0gPSBvcHRpb25zO1xuICAgIGlmIChzdGFydE9uICYmIHN0cmF0ZWd5ID09PSBcImZpcnN0XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYHN0YXJ0T25gIHNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBgc3RyYXRlZ3lgIGlzICdsYXN0Jy5cIik7XG4gICAgfVxuICAgIGlmIChpbmNsdWRlU3lzdGVtICYmIHN0cmF0ZWd5ID09PSBcImZpcnN0XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGluY2x1ZGVTeXN0ZW1gIHNob3VsZCBvbmx5IGJlIHNwZWNpZmllZCBpZiBgc3RyYXRlZ3lgIGlzICdsYXN0Jy5cIik7XG4gICAgfVxuICAgIGxldCBsaXN0VG9rZW5Db3VudGVyO1xuICAgIGlmIChcImdldE51bVRva2Vuc1wiIGluIHRva2VuQ291bnRlcikge1xuICAgICAgICBsaXN0VG9rZW5Db3VudGVyID0gYXN5bmMgKG1zZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuQ291bnRzID0gYXdhaXQgUHJvbWlzZS5hbGwobXNncy5tYXAoKG1zZykgPT4gdG9rZW5Db3VudGVyLmdldE51bVRva2Vucyhtc2cuY29udGVudCkpKTtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbkNvdW50cy5yZWR1Y2UoKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LCAwKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxpc3RUb2tlbkNvdW50ZXIgPSBhc3luYyAobXNncykgPT4gdG9rZW5Db3VudGVyKG1zZ3MpO1xuICAgIH1cbiAgICBsZXQgdGV4dFNwbGl0dGVyRnVuYyA9IGRlZmF1bHRUZXh0U3BsaXR0ZXI7XG4gICAgaWYgKHRleHRTcGxpdHRlcikge1xuICAgICAgICBpZiAoXCJzcGxpdFRleHRcIiBpbiB0ZXh0U3BsaXR0ZXIpIHtcbiAgICAgICAgICAgIHRleHRTcGxpdHRlckZ1bmMgPSB0ZXh0U3BsaXR0ZXIuc3BsaXRUZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGV4dFNwbGl0dGVyRnVuYyA9IGFzeW5jICh0ZXh0KSA9PiB0ZXh0U3BsaXR0ZXIodGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0cmF0ZWd5ID09PSBcImZpcnN0XCIpIHtcbiAgICAgICAgcmV0dXJuIF9maXJzdE1heFRva2VucyhtZXNzYWdlcywge1xuICAgICAgICAgICAgbWF4VG9rZW5zLFxuICAgICAgICAgICAgdG9rZW5Db3VudGVyOiBsaXN0VG9rZW5Db3VudGVyLFxuICAgICAgICAgICAgdGV4dFNwbGl0dGVyOiB0ZXh0U3BsaXR0ZXJGdW5jLFxuICAgICAgICAgICAgcGFydGlhbFN0cmF0ZWd5OiBhbGxvd1BhcnRpYWwgPyBcImZpcnN0XCIgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRPbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImxhc3RcIikge1xuICAgICAgICByZXR1cm4gX2xhc3RNYXhUb2tlbnMobWVzc2FnZXMsIHtcbiAgICAgICAgICAgIG1heFRva2VucyxcbiAgICAgICAgICAgIHRva2VuQ291bnRlcjogbGlzdFRva2VuQ291bnRlcixcbiAgICAgICAgICAgIHRleHRTcGxpdHRlcjogdGV4dFNwbGl0dGVyRnVuYyxcbiAgICAgICAgICAgIGFsbG93UGFydGlhbCxcbiAgICAgICAgICAgIGluY2x1ZGVTeXN0ZW0sXG4gICAgICAgICAgICBzdGFydE9uLFxuICAgICAgICAgICAgZW5kT24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgc3RyYXRlZ3k6ICcke3N0cmF0ZWd5fScuIE11c3QgYmUgb25lIG9mICdmaXJzdCcgb3IgJ2xhc3QnLmApO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIF9maXJzdE1heFRva2VucyhtZXNzYWdlcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgbWF4VG9rZW5zLCB0b2tlbkNvdW50ZXIsIHRleHRTcGxpdHRlciwgcGFydGlhbFN0cmF0ZWd5LCBlbmRPbiB9ID0gb3B0aW9ucztcbiAgICBsZXQgbWVzc2FnZXNDb3B5ID0gWy4uLm1lc3NhZ2VzXTtcbiAgICBsZXQgaWR4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2VzQ29weS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdNZXNzYWdlcyA9IGkgPiAwID8gbWVzc2FnZXNDb3B5LnNsaWNlKDAsIC1pKSA6IG1lc3NhZ2VzQ29weTtcbiAgICAgICAgaWYgKChhd2FpdCB0b2tlbkNvdW50ZXIocmVtYWluaW5nTWVzc2FnZXMpKSA8PSBtYXhUb2tlbnMpIHtcbiAgICAgICAgICAgIGlkeCA9IG1lc3NhZ2VzQ29weS5sZW5ndGggLSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkeCA8IG1lc3NhZ2VzQ29weS5sZW5ndGggLSAxICYmIHBhcnRpYWxTdHJhdGVneSkge1xuICAgICAgICBsZXQgaW5jbHVkZWRQYXJ0aWFsID0gZmFsc2U7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VzQ29weVtpZHhdLmNvbnRlbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBleGNsdWRlZCA9IG1lc3NhZ2VzQ29weVtpZHhdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdWRlZC5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgY29udGVudCB0byBiZSBhbiBhcnJheS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBudW1CbG9jayA9IGV4Y2x1ZGVkLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcmV2ZXJzZWRDb250ZW50ID0gcGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIlxuICAgICAgICAgICAgICAgID8gWy4uLmV4Y2x1ZGVkLmNvbnRlbnRdLnJldmVyc2UoKVxuICAgICAgICAgICAgICAgIDogZXhjbHVkZWQuY29udGVudDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bUJsb2NrOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsQ29udGVudCA9IHBhcnRpYWxTdHJhdGVneSA9PT0gXCJmaXJzdFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmV2ZXJzZWRDb250ZW50LnNsaWNlKDAsIGkpXG4gICAgICAgICAgICAgICAgICAgIDogcmV2ZXJzZWRDb250ZW50LnNsaWNlKC1pKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZXhjbHVkZWQpLmZpbHRlcigoW2tdKSA9PiBrICE9PSBcInR5cGVcIiAmJiAhay5zdGFydHNXaXRoKFwibGNfXCIpKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2UgPSBfc3dpdGNoVHlwZVRvTWVzc2FnZShleGNsdWRlZC5nZXRUeXBlKCksIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwYXJ0aWFsQ29udGVudCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzbGljZWRNZXNzYWdlcyA9IFsuLi5tZXNzYWdlc0NvcHkuc2xpY2UoMCwgaWR4KSwgdXBkYXRlZE1lc3NhZ2VdO1xuICAgICAgICAgICAgICAgIGlmICgoYXdhaXQgdG9rZW5Db3VudGVyKHNsaWNlZE1lc3NhZ2VzKSkgPD0gbWF4VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzQ29weSA9IHNsaWNlZE1lc3NhZ2VzO1xuICAgICAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRQYXJ0aWFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmNsdWRlZFBhcnRpYWwgJiYgcGFydGlhbFN0cmF0ZWd5ID09PSBcImxhc3RcIikge1xuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkLmNvbnRlbnQgPSBbLi4ucmV2ZXJzZWRDb250ZW50XS5yZXZlcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbmNsdWRlZFBhcnRpYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkID0gbWVzc2FnZXNDb3B5W2lkeF07XG4gICAgICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGV4Y2x1ZGVkLmNvbnRlbnQpICYmXG4gICAgICAgICAgICAgICAgZXhjbHVkZWQuY29udGVudC5zb21lKChibG9jaykgPT4gdHlwZW9mIGJsb2NrID09PSBcInN0cmluZ1wiIHx8IGJsb2NrLnR5cGUgPT09IFwidGV4dFwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRCbG9jayA9IGV4Y2x1ZGVkLmNvbnRlbnQuZmluZCgoYmxvY2spID0+IGJsb2NrLnR5cGUgPT09IFwidGV4dFwiICYmIGJsb2NrLnRleHQpO1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0QmxvY2s/LnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZXhjbHVkZWQuY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRleHQgPSBleGNsdWRlZC5jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxpdFRleHRzID0gYXdhaXQgdGV4dFNwbGl0dGVyKHRleHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bVNwbGl0cyA9IHNwbGl0VGV4dHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsU3RyYXRlZ3kgPT09IFwibGFzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwbGl0VGV4dHMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBfID0gMDsgXyA8IG51bVNwbGl0cyAtIDE7IF8gKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzcGxpdFRleHRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBleGNsdWRlZC5jb250ZW50ID0gc3BsaXRUZXh0cy5qb2luKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGF3YWl0IHRva2VuQ291bnRlcihbLi4ubWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCksIGV4Y2x1ZGVkXSkpIDw9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsU3RyYXRlZ3kgPT09IFwibGFzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQuY29udGVudCA9IFsuLi5zcGxpdFRleHRzXS5yZXZlcnNlKCkuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzQ29weSA9IFsuLi5tZXNzYWdlc0NvcHkuc2xpY2UoMCwgaWR4KSwgZXhjbHVkZWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5kT24pIHtcbiAgICAgICAgY29uc3QgZW5kT25BcnIgPSBBcnJheS5pc0FycmF5KGVuZE9uKSA/IGVuZE9uIDogW2VuZE9uXTtcbiAgICAgICAgd2hpbGUgKGlkeCA+IDAgJiYgIV9pc01lc3NhZ2VUeXBlKG1lc3NhZ2VzQ29weVtpZHggLSAxXSwgZW5kT25BcnIpKSB7XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZXNDb3B5LnNsaWNlKDAsIGlkeCk7XG59XG5hc3luYyBmdW5jdGlvbiBfbGFzdE1heFRva2VucyhtZXNzYWdlcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgYWxsb3dQYXJ0aWFsID0gZmFsc2UsIGluY2x1ZGVTeXN0ZW0gPSBmYWxzZSwgZW5kT24sIHN0YXJ0T24sIC4uLnJlc3QgfSA9IG9wdGlvbnM7XG4gICAgLy8gQ3JlYXRlIGEgY29weSBvZiBtZXNzYWdlcyB0byBhdm9pZCBtdXRhdGlvblxuICAgIGxldCBtZXNzYWdlc0NvcHkgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG1lc3NhZ2UpLmZpbHRlcigoW2tdKSA9PiBrICE9PSBcInR5cGVcIiAmJiAhay5zdGFydHNXaXRoKFwibGNfXCIpKSk7XG4gICAgICAgIHJldHVybiBfc3dpdGNoVHlwZVRvTWVzc2FnZShtZXNzYWdlLmdldFR5cGUoKSwgZmllbGRzLCBpc0Jhc2VNZXNzYWdlQ2h1bmsobWVzc2FnZSkpO1xuICAgIH0pO1xuICAgIGlmIChlbmRPbikge1xuICAgICAgICBjb25zdCBlbmRPbkFyciA9IEFycmF5LmlzQXJyYXkoZW5kT24pID8gZW5kT24gOiBbZW5kT25dO1xuICAgICAgICB3aGlsZSAobWVzc2FnZXNDb3B5Lmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICFfaXNNZXNzYWdlVHlwZShtZXNzYWdlc0NvcHlbbWVzc2FnZXNDb3B5Lmxlbmd0aCAtIDFdLCBlbmRPbkFycikpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29weSA9IG1lc3NhZ2VzQ29weS5zbGljZSgwLCAtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc3dhcHBlZFN5c3RlbSA9IGluY2x1ZGVTeXN0ZW0gJiYgbWVzc2FnZXNDb3B5WzBdPy5nZXRUeXBlKCkgPT09IFwic3lzdGVtXCI7XG4gICAgbGV0IHJldmVyc2VkXyA9IHN3YXBwZWRTeXN0ZW1cbiAgICAgICAgPyBtZXNzYWdlc0NvcHkuc2xpY2UoMCwgMSkuY29uY2F0KG1lc3NhZ2VzQ29weS5zbGljZSgxKS5yZXZlcnNlKCkpXG4gICAgICAgIDogbWVzc2FnZXNDb3B5LnJldmVyc2UoKTtcbiAgICByZXZlcnNlZF8gPSBhd2FpdCBfZmlyc3RNYXhUb2tlbnMocmV2ZXJzZWRfLCB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIHBhcnRpYWxTdHJhdGVneTogYWxsb3dQYXJ0aWFsID8gXCJsYXN0XCIgOiB1bmRlZmluZWQsXG4gICAgICAgIGVuZE9uOiBzdGFydE9uLFxuICAgIH0pO1xuICAgIGlmIChzd2FwcGVkU3lzdGVtKSB7XG4gICAgICAgIHJldHVybiBbcmV2ZXJzZWRfWzBdLCAuLi5yZXZlcnNlZF8uc2xpY2UoMSkucmV2ZXJzZSgpXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiByZXZlcnNlZF8ucmV2ZXJzZSgpO1xuICAgIH1cbn1cbmNvbnN0IF9NU0dfQ0hVTktfTUFQID0ge1xuICAgIGh1bWFuOiB7XG4gICAgICAgIG1lc3NhZ2U6IEh1bWFuTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBIdW1hbk1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIGFpOiB7XG4gICAgICAgIG1lc3NhZ2U6IEFJTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBBSU1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIHN5c3RlbToge1xuICAgICAgICBtZXNzYWdlOiBTeXN0ZW1NZXNzYWdlLFxuICAgICAgICBtZXNzYWdlQ2h1bms6IFN5c3RlbU1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIGRldmVsb3Blcjoge1xuICAgICAgICBtZXNzYWdlOiBTeXN0ZW1NZXNzYWdlLFxuICAgICAgICBtZXNzYWdlQ2h1bms6IFN5c3RlbU1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIHRvb2w6IHtcbiAgICAgICAgbWVzc2FnZTogVG9vbE1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VDaHVuazogVG9vbE1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgIG1lc3NhZ2U6IEZ1bmN0aW9uTWVzc2FnZSxcbiAgICAgICAgbWVzc2FnZUNodW5rOiBGdW5jdGlvbk1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIGdlbmVyaWM6IHtcbiAgICAgICAgbWVzc2FnZTogQ2hhdE1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VDaHVuazogQ2hhdE1lc3NhZ2VDaHVuayxcbiAgICB9LFxuICAgIHJlbW92ZToge1xuICAgICAgICBtZXNzYWdlOiBSZW1vdmVNZXNzYWdlLFxuICAgICAgICBtZXNzYWdlQ2h1bms6IFJlbW92ZU1lc3NhZ2UsIC8vIFJlbW92ZU1lc3NhZ2UgZG9lcyBub3QgaGF2ZSBhIGNodW5rIGNsYXNzLlxuICAgIH0sXG59O1xuZnVuY3Rpb24gX3N3aXRjaFR5cGVUb01lc3NhZ2UobWVzc2FnZVR5cGUsIGZpZWxkcywgcmV0dXJuQ2h1bmspIHtcbiAgICBsZXQgY2h1bms7XG4gICAgbGV0IG1zZztcbiAgICBzd2l0Y2ggKG1lc3NhZ2VUeXBlKSB7XG4gICAgICAgIGNhc2UgXCJodW1hblwiOlxuICAgICAgICAgICAgaWYgKHJldHVybkNodW5rKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgSHVtYW5NZXNzYWdlQ2h1bmsoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBIdW1hbk1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYWlcIjpcbiAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgIGxldCBhaUNodW5rRmllbGRzID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoXCJ0b29sX2NhbGxzXCIgaW4gYWlDaHVua0ZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICBhaUNodW5rRmllbGRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWlDaHVua0ZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IGFpQ2h1bmtGaWVsZHMudG9vbF9jYWxscz8ubWFwKCh0YykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50YyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfY2FsbF9jaHVua1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogSlNPTi5zdHJpbmdpZnkodGMuYXJncyksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IEFJTWVzc2FnZUNodW5rKGFpQ2h1bmtGaWVsZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEFJTWVzc2FnZShmaWVsZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayhmaWVsZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFN5c3RlbU1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZGV2ZWxvcGVyXCI6XG4gICAgICAgICAgICBpZiAocmV0dXJuQ2h1bmspIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBfX29wZW5haV9yb2xlX186IFwiZGV2ZWxvcGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fb3BlbmFpX3JvbGVfXzogXCJkZXZlbG9wZXJcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgICAgICAgaWYgKFwidG9vbF9jYWxsX2lkXCIgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldHVybkNodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBUb29sTWVzc2FnZShmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgY29udmVydCBUb29sTWVzc2FnZSB0byBUb29sTWVzc2FnZUNodW5rIGlmICd0b29sX2NhbGxfaWQnIGZpZWxkIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkcy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uTWVzc2FnZSBtdXN0IGhhdmUgYSAnbmFtZScgZmllbGRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBGdW5jdGlvbk1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZ2VuZXJpY1wiOlxuICAgICAgICAgICAgaWYgKFwicm9sZVwiIGluIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5DaHVuaykge1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBDaGF0TWVzc2FnZUNodW5rKGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2hhdE1lc3NhZ2UoZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGNvbnZlcnQgQ2hhdE1lc3NhZ2UgdG8gQ2hhdE1lc3NhZ2VDaHVuayBpZiAncm9sZScgZmllbGQgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBtZXNzYWdlIHR5cGUgJHttZXNzYWdlVHlwZX1gKTtcbiAgICB9XG4gICAgaWYgKHJldHVybkNodW5rICYmIGNodW5rKSB7XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgaWYgKG1zZykge1xuICAgICAgICByZXR1cm4gbXNnO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBtZXNzYWdlIHR5cGUgJHttZXNzYWdlVHlwZX1gKTtcbn1cbmZ1bmN0aW9uIF9jaHVua1RvTXNnKGNodW5rKSB7XG4gICAgY29uc3QgY2h1bmtUeXBlID0gY2h1bmsuZ2V0VHlwZSgpO1xuICAgIGxldCBtc2c7XG4gICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrXSkgPT4gIVtcInR5cGVcIiwgXCJ0b29sX2NhbGxfY2h1bmtzXCJdLmluY2x1ZGVzKGspICYmICFrLnN0YXJ0c1dpdGgoXCJsY19cIikpKTtcbiAgICBpZiAoY2h1bmtUeXBlIGluIF9NU0dfQ0hVTktfTUFQKSB7XG4gICAgICAgIG1zZyA9IF9zd2l0Y2hUeXBlVG9NZXNzYWdlKGNodW5rVHlwZSwgZmllbGRzKTtcbiAgICB9XG4gICAgaWYgKCFtc2cpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgbWVzc2FnZSBjaHVuayBjbGFzcyAke2NodW5rVHlwZX0uIFN1cHBvcnRlZCBjbGFzc2VzIGFyZSAke09iamVjdC5rZXlzKF9NU0dfQ0hVTktfTUFQKX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIG1zZztcbn1cbi8qKlxuICogVGhlIGRlZmF1bHQgdGV4dCBzcGxpdHRlciBmdW5jdGlvbiB0aGF0IHNwbGl0cyB0ZXh0IGJ5IG5ld2xpbmVzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiBzdHJpbmdzIHNwbGl0IGJ5IG5ld2xpbmVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFRleHRTcGxpdHRlcih0ZXh0KSB7XG4gICAgY29uc3Qgc3BsaXRzID0gdGV4dC5zcGxpdChcIlxcblwiKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcbiAgICAgICAgLi4uc3BsaXRzLnNsaWNlKDAsIC0xKS5tYXAoKHMpID0+IGAke3N9XFxuYCksXG4gICAgICAgIHNwbGl0c1tzcGxpdHMubGVuZ3RoIC0gMV0sXG4gICAgXSk7XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGVMYW1iZGEiLCJBSU1lc3NhZ2UiLCJBSU1lc3NhZ2VDaHVuayIsImlzQmFzZU1lc3NhZ2VDaHVuayIsIkNoYXRNZXNzYWdlIiwiQ2hhdE1lc3NhZ2VDaHVuayIsIkZ1bmN0aW9uTWVzc2FnZSIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiSHVtYW5NZXNzYWdlIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJSZW1vdmVNZXNzYWdlIiwiU3lzdGVtTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2VDaHVuayIsIlRvb2xNZXNzYWdlIiwiVG9vbE1lc3NhZ2VDaHVuayIsImNvbnZlcnRUb0NodW5rIiwiX2lzTWVzc2FnZVR5cGUiLCJtc2ciLCJ0eXBlcyIsInR5cGVzQXNTdHJpbmdzIiwiU2V0IiwibWFwIiwidCIsImluc3RhbnRpYXRlZE1zZ0NsYXNzIiwiZ2V0VHlwZSIsIkVycm9yIiwibXNnVHlwZSIsInNvbWUiLCJmaWx0ZXJNZXNzYWdlcyIsIm1lc3NhZ2VzT3JPcHRpb25zIiwib3B0aW9ucyIsIkFycmF5IiwiaXNBcnJheSIsIl9maWx0ZXJNZXNzYWdlcyIsImZyb20iLCJpbnB1dCIsIm1lc3NhZ2VzIiwiaW5jbHVkZU5hbWVzIiwiZXhjbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiZXhjbHVkZVR5cGVzIiwiaW5jbHVkZUlkcyIsImV4Y2x1ZGVJZHMiLCJmaWx0ZXJlZCIsIm5hbWUiLCJpbmNsdWRlcyIsImlkIiwicHVzaCIsImlOYW1lIiwibWVyZ2VNZXNzYWdlUnVucyIsIl9tZXJnZU1lc3NhZ2VSdW5zIiwibGVuZ3RoIiwibWVyZ2VkIiwiY3VyciIsImxhc3QiLCJwb3AiLCJsYXN0Q2h1bmsiLCJjdXJyQ2h1bmsiLCJtZXJnZWRDaHVua3MiLCJjb25jYXQiLCJjb250ZW50IiwiX2NodW5rVG9Nc2ciLCJ0cmltTWVzc2FnZXMiLCJfdHJpbU1lc3NhZ2VzSGVscGVyIiwidHJpbW1lck9wdGlvbnMiLCJ3aXRoQ29uZmlnIiwicnVuTmFtZSIsIm1heFRva2VucyIsInRva2VuQ291bnRlciIsInN0cmF0ZWd5IiwiYWxsb3dQYXJ0aWFsIiwiZW5kT24iLCJzdGFydE9uIiwiaW5jbHVkZVN5c3RlbSIsInRleHRTcGxpdHRlciIsImxpc3RUb2tlbkNvdW50ZXIiLCJtc2dzIiwidG9rZW5Db3VudHMiLCJQcm9taXNlIiwiYWxsIiwiZ2V0TnVtVG9rZW5zIiwicmVkdWNlIiwic3VtIiwiY291bnQiLCJ0ZXh0U3BsaXR0ZXJGdW5jIiwiZGVmYXVsdFRleHRTcGxpdHRlciIsInNwbGl0VGV4dCIsInRleHQiLCJfZmlyc3RNYXhUb2tlbnMiLCJwYXJ0aWFsU3RyYXRlZ3kiLCJ1bmRlZmluZWQiLCJfbGFzdE1heFRva2VucyIsIm1lc3NhZ2VzQ29weSIsImlkeCIsImkiLCJyZW1haW5pbmdNZXNzYWdlcyIsInNsaWNlIiwiaW5jbHVkZWRQYXJ0aWFsIiwiZXhjbHVkZWQiLCJudW1CbG9jayIsInJldmVyc2VkQ29udGVudCIsInJldmVyc2UiLCJwYXJ0aWFsQ29udGVudCIsImZpZWxkcyIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsImsiLCJzdGFydHNXaXRoIiwidXBkYXRlZE1lc3NhZ2UiLCJfc3dpdGNoVHlwZVRvTWVzc2FnZSIsInNsaWNlZE1lc3NhZ2VzIiwiYmxvY2siLCJ0eXBlIiwidGV4dEJsb2NrIiwiZmluZCIsInNwbGl0VGV4dHMiLCJudW1TcGxpdHMiLCJfIiwiam9pbiIsImVuZE9uQXJyIiwicmVzdCIsIm1lc3NhZ2UiLCJzd2FwcGVkU3lzdGVtIiwicmV2ZXJzZWRfIiwiX01TR19DSFVOS19NQVAiLCJodW1hbiIsIm1lc3NhZ2VDaHVuayIsImFpIiwic3lzdGVtIiwiZGV2ZWxvcGVyIiwidG9vbCIsImZ1bmN0aW9uIiwiZ2VuZXJpYyIsInJlbW92ZSIsIm1lc3NhZ2VUeXBlIiwicmV0dXJuQ2h1bmsiLCJjaHVuayIsImFpQ2h1bmtGaWVsZHMiLCJ0b29sX2NhbGxfY2h1bmtzIiwidG9vbF9jYWxscyIsInRjIiwiaW5kZXgiLCJhcmdzIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZGl0aW9uYWxfa3dhcmdzIiwiX19vcGVuYWlfcm9sZV9fIiwiY2h1bmtUeXBlIiwia2V5cyIsInNwbGl0cyIsInNwbGl0IiwicmVzb2x2ZSIsInMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n\n\nfunction _coerceToolCall(toolCall) {\n    if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_1__._isToolCall)(toolCall)) {\n        return toolCall;\n    } else if (typeof toolCall.id === \"string\" && toolCall.type === \"function\" && typeof toolCall.function === \"object\" && toolCall.function !== null && \"arguments\" in toolCall.function && typeof toolCall.function.arguments === \"string\" && \"name\" in toolCall.function && typeof toolCall.function.name === \"string\") {\n        // Handle OpenAI tool call format\n        return {\n            id: toolCall.id,\n            args: JSON.parse(toolCall.function.arguments),\n            name: toolCall.function.name,\n            type: \"tool_call\"\n        };\n    } else {\n        // TODO: Throw an error?\n        return toolCall;\n    }\n}\nfunction isSerializedConstructor(x) {\n    return typeof x === \"object\" && x != null && x.lc === 1 && Array.isArray(x.id) && x.kwargs != null && typeof x.kwargs === \"object\";\n}\nfunction _constructMessageFromParams(params) {\n    let type;\n    let rest;\n    // Support serialized messages\n    if (isSerializedConstructor(params)) {\n        const className = params.id.at(-1);\n        if (className === \"HumanMessage\" || className === \"HumanMessageChunk\") {\n            type = \"user\";\n        } else if (className === \"AIMessage\" || className === \"AIMessageChunk\") {\n            type = \"assistant\";\n        } else if (className === \"SystemMessage\" || className === \"SystemMessageChunk\") {\n            type = \"system\";\n        } else if (className === \"FunctionMessage\" || className === \"FunctionMessageChunk\") {\n            type = \"function\";\n        } else if (className === \"ToolMessage\" || className === \"ToolMessageChunk\") {\n            type = \"tool\";\n        } else {\n            type = \"unknown\";\n        }\n        rest = params.kwargs;\n    } else {\n        const { type: extractedType, ...otherParams } = params;\n        type = extractedType;\n        rest = otherParams;\n    }\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(rest);\n    } else if (type === \"ai\" || type === \"assistant\") {\n        const { tool_calls: rawToolCalls, ...other } = rest;\n        if (!Array.isArray(rawToolCalls)) {\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(rest);\n        }\n        const tool_calls = rawToolCalls.map(_coerceToolCall);\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage({\n            ...other,\n            tool_calls\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage(rest);\n    } else if (type === \"developer\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage({\n            ...rest,\n            additional_kwargs: {\n                ...rest.additional_kwargs,\n                __openai_role__: \"developer\"\n            }\n        });\n    } else if (type === \"tool\" && \"tool_call_id\" in rest) {\n        return new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage({\n            ...rest,\n            content: rest.content,\n            tool_call_id: rest.tool_call_id,\n            name: rest.name\n        });\n    } else {\n        const error = (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_0__.addLangChainErrorFields)(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.\\n\\nReceived: ${JSON.stringify(params, null, 2)}`), \"MESSAGE_COERCION_FAILURE\");\n        throw error;\n    }\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_3__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    if (Array.isArray(messageLike)) {\n        const [type, content] = messageLike;\n        return _constructMessageFromParams({\n            type,\n            content\n        });\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_3__._isMessageFieldWithRole)(messageLike)) {\n        const { role: type, ...rest } = messageLike;\n        return _constructMessageFromParams({\n            ...rest,\n            type\n        });\n    } else {\n        return _constructMessageFromParams(messageLike);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        const readableContent = typeof m.content === \"string\" ? m.content : JSON.stringify(m.content, null, 2);\n        string_messages.push(`${role}: ${nameStr}${readableContent}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_8__.ToolMessage(storedMessage.data);\n        case \"generic\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_6__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        let aiChunkFields = {\n            ...message\n        };\n        if (\"tool_calls\" in aiChunkFields) {\n            aiChunkFields = {\n                ...aiChunkFields,\n                tool_call_chunks: aiChunkFields.tool_calls?.map((tc)=>({\n                        ...tc,\n                        type: \"tool_call_chunk\",\n                        index: undefined,\n                        args: JSON.stringify(tc.args)\n                    }))\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n            ...aiChunkFields\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_7__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ2I7QUFDSTtBQUNnQjtBQUNUO0FBQ1k7QUFDVjtBQUNHO0FBQ3ZCO0FBQ3pDLFNBQVNlLGdCQUFnQkMsUUFBUTtJQUM3QixJQUFJZiw0REFBV0EsQ0FBQ2UsV0FBVztRQUN2QixPQUFPQTtJQUNYLE9BQ0ssSUFBSSxPQUFPQSxTQUFTQyxFQUFFLEtBQUssWUFDNUJELFNBQVNFLElBQUksS0FBSyxjQUNsQixPQUFPRixTQUFTRyxRQUFRLEtBQUssWUFDN0JILFNBQVNHLFFBQVEsS0FBSyxRQUN0QixlQUFlSCxTQUFTRyxRQUFRLElBQ2hDLE9BQU9ILFNBQVNHLFFBQVEsQ0FBQ0MsU0FBUyxLQUFLLFlBQ3ZDLFVBQVVKLFNBQVNHLFFBQVEsSUFDM0IsT0FBT0gsU0FBU0csUUFBUSxDQUFDRSxJQUFJLEtBQUssVUFBVTtRQUM1QyxpQ0FBaUM7UUFDakMsT0FBTztZQUNISixJQUFJRCxTQUFTQyxFQUFFO1lBQ2ZLLE1BQU1DLEtBQUtDLEtBQUssQ0FBQ1IsU0FBU0csUUFBUSxDQUFDQyxTQUFTO1lBQzVDQyxNQUFNTCxTQUFTRyxRQUFRLENBQUNFLElBQUk7WUFDNUJILE1BQU07UUFDVjtJQUNKLE9BQ0s7UUFDRCx3QkFBd0I7UUFDeEIsT0FBT0Y7SUFDWDtBQUNKO0FBQ0EsU0FBU1Msd0JBQXdCQyxDQUFDO0lBQzlCLE9BQVEsT0FBT0EsTUFBTSxZQUNqQkEsS0FBSyxRQUNMQSxFQUFFQyxFQUFFLEtBQUssS0FDVEMsTUFBTUMsT0FBTyxDQUFDSCxFQUFFVCxFQUFFLEtBQ2xCUyxFQUFFSSxNQUFNLElBQUksUUFDWixPQUFPSixFQUFFSSxNQUFNLEtBQUs7QUFDNUI7QUFDQSxTQUFTQyw0QkFBNEJDLE1BQU07SUFDdkMsSUFBSWQ7SUFDSixJQUFJZTtJQUNKLDhCQUE4QjtJQUM5QixJQUFJ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O1FBQUM7SUFDN0MsT0FDSztRQUNELE1BQU0sSUFBSWpCLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy91dGlscy5qcz9lOTdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZExhbmdDaGFpbkVycm9yRmllbGRzIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgX2lzVG9vbENhbGwgfSBmcm9tIFwiLi4vdG9vbHMvdXRpbHMuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9haS5qc1wiO1xuaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSwgX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ2hhdE1lc3NhZ2UsIENoYXRNZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25NZXNzYWdlLCBGdW5jdGlvbk1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi9mdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlLCBIdW1hbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2h1bWFuLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlLCBTeXN0ZW1NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmltcG9ydCB7IFRvb2xNZXNzYWdlLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmZ1bmN0aW9uIF9jb2VyY2VUb29sQ2FsbCh0b29sQ2FsbCkge1xuICAgIGlmIChfaXNUb29sQ2FsbCh0b29sQ2FsbCkpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xDYWxsO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdG9vbENhbGwuaWQgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgdG9vbENhbGwudHlwZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbiA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB0b29sQ2FsbC5mdW5jdGlvbiAhPT0gbnVsbCAmJlxuICAgICAgICBcImFyZ3VtZW50c1wiIGluIHRvb2xDYWxsLmZ1bmN0aW9uICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgXCJuYW1lXCIgaW4gdG9vbENhbGwuZnVuY3Rpb24gJiZcbiAgICAgICAgdHlwZW9mIHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgLy8gSGFuZGxlIE9wZW5BSSB0b29sIGNhbGwgZm9ybWF0XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICBhcmdzOiBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyksXG4gICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRPRE86IFRocm93IGFuIGVycm9yP1xuICAgICAgICByZXR1cm4gdG9vbENhbGw7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTZXJpYWxpemVkQ29uc3RydWN0b3IoeCkge1xuICAgIHJldHVybiAodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgeCAhPSBudWxsICYmXG4gICAgICAgIHgubGMgPT09IDEgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh4LmlkKSAmJlxuICAgICAgICB4Lmt3YXJncyAhPSBudWxsICYmXG4gICAgICAgIHR5cGVvZiB4Lmt3YXJncyA9PT0gXCJvYmplY3RcIik7XG59XG5mdW5jdGlvbiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMocGFyYW1zKSB7XG4gICAgbGV0IHR5cGU7XG4gICAgbGV0IHJlc3Q7XG4gICAgLy8gU3VwcG9ydCBzZXJpYWxpemVkIG1lc3NhZ2VzXG4gICAgaWYgKGlzU2VyaWFsaXplZENvbnN0cnVjdG9yKHBhcmFtcykpIHtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gcGFyYW1zLmlkLmF0KC0xKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJIdW1hbk1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiSHVtYW5NZXNzYWdlQ2h1bmtcIikge1xuICAgICAgICAgICAgdHlwZSA9IFwidXNlclwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJBSU1lc3NhZ2VcIiB8fCBjbGFzc05hbWUgPT09IFwiQUlNZXNzYWdlQ2h1bmtcIikge1xuICAgICAgICAgICAgdHlwZSA9IFwiYXNzaXN0YW50XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2xhc3NOYW1lID09PSBcIlN5c3RlbU1lc3NhZ2VcIiB8fFxuICAgICAgICAgICAgY2xhc3NOYW1lID09PSBcIlN5c3RlbU1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJzeXN0ZW1cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbGFzc05hbWUgPT09IFwiRnVuY3Rpb25NZXNzYWdlXCIgfHxcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9PT0gXCJGdW5jdGlvbk1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJmdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNsYXNzTmFtZSA9PT0gXCJUb29sTWVzc2FnZVwiIHx8XG4gICAgICAgICAgICBjbGFzc05hbWUgPT09IFwiVG9vbE1lc3NhZ2VDaHVua1wiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJ0b29sXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gXCJ1bmtub3duXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdCA9IHBhcmFtcy5rd2FyZ3M7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IHR5cGU6IGV4dHJhY3RlZFR5cGUsIC4uLm90aGVyUGFyYW1zIH0gPSBwYXJhbXM7XG4gICAgICAgIHR5cGUgPSBleHRyYWN0ZWRUeXBlO1xuICAgICAgICByZXN0ID0gb3RoZXJQYXJhbXM7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIgfHwgdHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UocmVzdCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIiB8fCB0eXBlID09PSBcImFzc2lzdGFudFwiKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbF9jYWxsczogcmF3VG9vbENhbGxzLCAuLi5vdGhlciB9ID0gcmVzdDtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJhd1Rvb2xDYWxscykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xfY2FsbHMgPSByYXdUb29sQ2FsbHMubWFwKF9jb2VyY2VUb29sQ2FsbCk7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHsgLi4ub3RoZXIsIHRvb2xfY2FsbHMgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHJlc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImRldmVsb3BlclwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHtcbiAgICAgICAgICAgICAgICAuLi5yZXN0LmFkZGl0aW9uYWxfa3dhcmdzLFxuICAgICAgICAgICAgICAgIF9fb3BlbmFpX3JvbGVfXzogXCJkZXZlbG9wZXJcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInRvb2xcIiAmJiBcInRvb2xfY2FsbF9pZFwiIGluIHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgY29udGVudDogcmVzdC5jb250ZW50LFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiByZXN0LnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgIG5hbWU6IHJlc3QubmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvZXJjZSBtZXNzYWdlIGZyb20gYXJyYXk6IG9ubHkgaHVtYW4sIEFJLCBzeXN0ZW0sIGRldmVsb3Blciwgb3IgdG9vbCBtZXNzYWdlIGNvZXJjaW9uIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuXFxuXFxuUmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkocGFyYW1zLCBudWxsLCAyKX1gKSwgXCJNRVNTQUdFX0NPRVJDSU9OX0ZBSUxVUkVcIik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUxpa2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobWVzc2FnZUxpa2UpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZUxpa2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICBjb25zdCBbdHlwZSwgY29udGVudF0gPSBtZXNzYWdlTGlrZTtcbiAgICAgICAgcmV0dXJuIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyh7IHR5cGUsIGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICBjb25zdCB7IHJvbGU6IHR5cGUsIC4uLnJlc3QgfSA9IG1lc3NhZ2VMaWtlO1xuICAgICAgICByZXR1cm4gX2NvbnN0cnVjdE1lc3NhZ2VGcm9tUGFyYW1zKHsgLi4ucmVzdCwgdHlwZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMobWVzc2FnZUxpa2UpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIGNoYXQgbWVzc2FnZSBoaXN0b3J5LCBiYXNlZCBvbiB0aGUgbWVzc2FnZSBjb250ZW50IGFuZCByb2xlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VzLCBodW1hblByZWZpeCA9IFwiSHVtYW5cIiwgYWlQcmVmaXggPSBcIkFJXCIpIHtcbiAgICBjb25zdCBzdHJpbmdfbWVzc2FnZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG0gb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgbGV0IHJvbGU7XG4gICAgICAgIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAgICAgcm9sZSA9IGh1bWFuUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJhaVwiKSB7XG4gICAgICAgICAgICByb2xlID0gYWlQcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJTeXN0ZW1cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiRnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJUb29sXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIikge1xuICAgICAgICAgICAgcm9sZSA9IG0ucm9sZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuc3VwcG9ydGVkIG1lc3NhZ2UgdHlwZTogJHttLl9nZXRUeXBlKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZVN0ciA9IG0ubmFtZSA/IGAke20ubmFtZX0sIGAgOiBcIlwiO1xuICAgICAgICBjb25zdCByZWFkYWJsZUNvbnRlbnQgPSB0eXBlb2YgbS5jb250ZW50ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG0uY29udGVudFxuICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShtLmNvbnRlbnQsIG51bGwsIDIpO1xuICAgICAgICBzdHJpbmdfbWVzc2FnZXMucHVzaChgJHtyb2xlfTogJHtuYW1lU3RyfSR7cmVhZGFibGVDb250ZW50fWApO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nX21lc3NhZ2VzLmpvaW4oXCJcXG5cIik7XG59XG4vKipcbiAqIE1hcHMgbWVzc2FnZXMgZnJvbSBhbiBvbGRlciBmb3JtYXQgKFYxKSB0byB0aGUgY3VycmVudCBgU3RvcmVkTWVzc2FnZWBcbiAqIGZvcm1hdC4gSWYgdGhlIG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgaXQgaXNcbiAqIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGl0IHRyYW5zZm9ybXMgdGhlIFYxIG1lc3NhZ2UgaW50byBhXG4gKiBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb24gaXMgaW1wb3J0YW50IGZvciBtYWludGFpbmluZ1xuICogY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIG1lc3NhZ2UgZm9ybWF0cy5cbiAqL1xuZnVuY3Rpb24gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBtYXBwZXIgd2hlbiB3ZSBkZXByZWNhdGUgdGhlIG9sZCBtZXNzYWdlIGZvcm1hdC5cbiAgICBpZiAobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB2MU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdjFNZXNzYWdlLnR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogdjFNZXNzYWdlLnRleHQsXG4gICAgICAgICAgICAgICAgcm9sZTogdjFNZXNzYWdlLnJvbGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IHN0b3JlZE1lc3NhZ2UgPSBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgc3dpdGNoIChzdG9yZWRNZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImh1bWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiYWlcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFtZSBtdXN0IGJlIGRlZmluZWQgZm9yIGZ1bmN0aW9uIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInRvb2xcIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEudG9vbF9jYWxsX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb29sIGNhbGwgSUQgbXVzdCBiZSBkZWZpbmVkIGZvciB0b29sIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiZ2VuZXJpY1wiOiB7XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLnJvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJvbGUgbXVzdCBiZSBkZWZpbmVkIGZvciBjaGF0IG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmV4cGVjdGVkIHR5cGU6ICR7c3RvcmVkTWVzc2FnZS50eXBlfWApO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiAqIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCB1c2VzIHRoZSBgbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlYFxuICogZnVuY3Rpb24gdG8gZW5zdXJlIGFsbCBtZXNzYWdlcyBhcmUgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIHRoZW5cbiAqIGNyZWF0ZXMgbmV3IGluc3RhbmNlcyBvZiB0aGUgYXBwcm9wcmlhdGUgYEJhc2VNZXNzYWdlYCBzdWJjbGFzcyBiYXNlZFxuICogb24gdGhlIHR5cGUgb2YgZWFjaCBtZXNzYWdlLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJlcGFyZSBzdG9yZWRcbiAqIG1lc3NhZ2VzIGZvciB1c2UgaW4gYSBjaGF0IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcChtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgb2YgYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgZG9lcyB0aGlzIGJ5IGNhbGxpbmcgdGhlIGB0b0RpY3RgIG1ldGhvZFxuICogb24gZWFjaCBgQmFzZU1lc3NhZ2VgLCB3aGljaCByZXR1cm5zIGEgYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uXG4gKiBpcyB1c2VkIHRvIHByZXBhcmUgY2hhdCBtZXNzYWdlcyBmb3Igc3RvcmFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiBtZXNzYWdlLnRvRGljdCgpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9DaHVuayhtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIikge1xuICAgICAgICBsZXQgYWlDaHVua0ZpZWxkcyA9IHtcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInRvb2xfY2FsbHNcIiBpbiBhaUNodW5rRmllbGRzKSB7XG4gICAgICAgICAgICBhaUNodW5rRmllbGRzID0ge1xuICAgICAgICAgICAgICAgIC4uLmFpQ2h1bmtGaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogYWlDaHVua0ZpZWxkcy50b29sX2NhbGxzPy5tYXAoKHRjKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi50YyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogSlNPTi5zdHJpbmdpZnkodGMuYXJncyksXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoeyAuLi5haUNodW5rRmllbGRzIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgIH1cbiAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbWVzc2FnZSB0eXBlLlwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMiLCJfaXNUb29sQ2FsbCIsIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwiaXNCYXNlTWVzc2FnZSIsIl9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlIiwiQ2hhdE1lc3NhZ2UiLCJDaGF0TWVzc2FnZUNodW5rIiwiRnVuY3Rpb25NZXNzYWdlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJIdW1hbk1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2VDaHVuayIsIlN5c3RlbU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJUb29sTWVzc2FnZSIsIl9jb2VyY2VUb29sQ2FsbCIsInRvb2xDYWxsIiwiaWQiLCJ0eXBlIiwiZnVuY3Rpb24iLCJhcmd1bWVudHMiLCJuYW1lIiwiYXJncyIsIkpTT04iLCJwYXJzZSIsImlzU2VyaWFsaXplZENvbnN0cnVjdG9yIiwieCIsImxjIiwiQXJyYXkiLCJpc0FycmF5Iiwia3dhcmdzIiwiX2NvbnN0cnVjdE1lc3NhZ2VGcm9tUGFyYW1zIiwicGFyYW1zIiwicmVzdCIsImNsYXNzTmFtZSIsImF0IiwiZXh0cmFjdGVkVHlwZSIsIm90aGVyUGFyYW1zIiwidG9vbF9jYWxscyIsInJhd1Rvb2xDYWxscyIsIm90aGVyIiwibWFwIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJfX29wZW5haV9yb2xlX18iLCJjb250ZW50IiwidG9vbF9jYWxsX2lkIiwiZXJyb3IiLCJFcnJvciIsInN0cmluZ2lmeSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwibWVzc2FnZUxpa2UiLCJyb2xlIiwiZ2V0QnVmZmVyU3RyaW5nIiwibWVzc2FnZXMiLCJodW1hblByZWZpeCIsImFpUHJlZml4Iiwic3RyaW5nX21lc3NhZ2VzIiwibSIsIl9nZXRUeXBlIiwibmFtZVN0ciIsInJlYWRhYmxlQ29udGVudCIsInB1c2giLCJqb2luIiwibWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlIiwibWVzc2FnZSIsImRhdGEiLCJ1bmRlZmluZWQiLCJ2MU1lc3NhZ2UiLCJ0ZXh0IiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJzdG9yZWRNZXNzYWdlIiwibWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyIsIm1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMiLCJ0b0RpY3QiLCJjb252ZXJ0VG9DaHVuayIsImFpQ2h1bmtGaWVsZHMiLCJ0b29sX2NhbGxfY2h1bmtzIiwidGMiLCJpbmRleCIsImlzSW5zdGFuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/base.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLMOutputParser: () => (/* binding */ BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* binding */ BaseOutputParser),\n/* harmony export */   OutputParserException: () => (/* binding */ OutputParserException)\n/* harmony export */ });\n/* harmony import */ var _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/errors/index.js\");\n\n\n/**\n * Abstract base class for parsing the output of a Large Language Model\n * (LLM) call. It provides methods for parsing the result of an LLM call\n * and invoking the parser with a given input.\n */ class BaseLLMOutputParser extends _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    /**\n     * Parses the result of an LLM call with a given prompt. By default, it\n     * simply calls `parseResult`.\n     * @param generations The generations from an LLM call.\n     * @param _prompt The prompt used in the LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parseResultWithPrompt(generations, _prompt, callbacks) {\n        return this.parseResult(generations, callbacks);\n    }\n    _baseMessageToString(message) {\n        return typeof message.content === \"string\" ? message.content : this._baseMessageContentToString(message.content);\n    }\n    _baseMessageContentToString(content) {\n        return JSON.stringify(content);\n    }\n    /**\n     * Calls the parser with a given input and optional configuration options.\n     * If the input is a string, it creates a generation with the input as\n     * text and calls `parseResult`. If the input is a `BaseMessage`, it\n     * creates a generation with the input as a message and the content of the\n     * input as text, and then calls `parseResult`.\n     * @param input The input to the parser, which can be a string or a `BaseMessage`.\n     * @param options Optional configuration options.\n     * @returns A promise of the parsed output.\n     */ async invoke(input, options) {\n        if (typeof input === \"string\") {\n            return this._callWithConfig(async (input, options)=>this.parseResult([\n                    {\n                        text: input\n                    }\n                ], options?.callbacks), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        } else {\n            return this._callWithConfig(async (input, options)=>this.parseResult([\n                    {\n                        message: input,\n                        text: this._baseMessageToString(input)\n                    }\n                ], options?.callbacks), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call.\n */ class BaseOutputParser extends BaseLLMOutputParser {\n    parseResult(generations, callbacks) {\n        return this.parse(generations[0].text, callbacks);\n    }\n    async parseWithPrompt(text, _prompt, callbacks) {\n        return this.parse(text, callbacks);\n    }\n    /**\n     * Return the string type key uniquely identifying this class of parser\n     */ _type() {\n        throw new Error(\"_type not implemented\");\n    }\n}\n/**\n * Exception that output parsers should raise to signify a parsing error.\n *\n * This exists to differentiate parsing errors from other code or execution errors\n * that also may arise inside the output parser. OutputParserExceptions will be\n * available to catch and handle in ways to fix the parsing error, while other\n * errors will be raised.\n *\n * @param message - The error that's being re-raised or an error message.\n * @param llmOutput - String model output which is error-ing.\n * @param observation - String explanation of error which can be passed to a\n *     model to try and remediate the issue.\n * @param sendToLLM - Whether to send the observation and llm_output back to an Agent\n *     after an OutputParserException has been raised. This gives the underlying\n *     model driving the agent the context that the previous output was improperly\n *     structured, in the hopes that it will update the output to the correct\n *     format.\n */ class OutputParserException extends Error {\n    constructor(message, llmOutput, observation, sendToLLM = false){\n        super(message);\n        Object.defineProperty(this, \"llmOutput\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sendToLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmOutput = llmOutput;\n        this.observation = observation;\n        this.sendToLLM = sendToLLM;\n        if (sendToLLM) {\n            if (observation === undefined || llmOutput === undefined) {\n                throw new Error(\"Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true\");\n            }\n        }\n        (0,_errors_index_js__WEBPACK_IMPORTED_MODULE_1__.addLangChainErrorFields)(this, \"OUTPUT_PARSING_FAILURE\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNZO0FBQzdEOzs7O0NBSUMsR0FDTSxNQUFNRSw0QkFBNEJGLHlEQUFRQTtJQUM3Qzs7Ozs7OztLQU9DLEdBQ0RHLHNCQUFzQkMsV0FBVyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRTtRQUNuRCxPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxhQUFhRTtJQUN6QztJQUNBRSxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPLE9BQU9BLFFBQVFDLE9BQU8sS0FBSyxXQUM1QkQsUUFBUUMsT0FBTyxHQUNmLElBQUksQ0FBQ0MsMkJBQTJCLENBQUNGLFFBQVFDLE9BQU87SUFDMUQ7SUFDQUMsNEJBQTRCRCxPQUFPLEVBQUU7UUFDakMsT0FBT0UsS0FBS0MsU0FBUyxDQUFDSDtJQUMxQjtJQUNBOzs7Ozs7Ozs7S0FTQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLElBQUksT0FBT0QsVUFBVSxVQUFVO1lBQzNCLE9BQU8sSUFBSSxDQUFDRSxlQUFlLENBQUMsT0FBT0YsT0FBT0MsVUFBWSxJQUFJLENBQUNULFdBQVcsQ0FBQztvQkFBQzt3QkFBRVcsTUFBTUg7b0JBQU07aUJBQUUsRUFBRUMsU0FBU1YsWUFBWVMsT0FBTztnQkFBRSxHQUFHQyxPQUFPO2dCQUFFRyxTQUFTO1lBQVM7UUFDMUosT0FDSztZQUNELE9BQU8sSUFBSSxDQUFDRixlQUFlLENBQUMsT0FBT0YsT0FBT0MsVUFBWSxJQUFJLENBQUNULFdBQVcsQ0FBQztvQkFDbkU7d0JBQ0lFLFNBQVNNO3dCQUNURyxNQUFNLElBQUksQ0FBQ1Ysb0JBQW9CLENBQUNPO29CQUNwQztpQkFDSCxFQUFFQyxTQUFTVixZQUFZUyxPQUFPO2dCQUFFLEdBQUdDLE9BQU87Z0JBQUVHLFNBQVM7WUFBUztRQUNuRTtJQUNKO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1DLHlCQUF5QmxCO0lBQ2xDSyxZQUFZSCxXQUFXLEVBQUVFLFNBQVMsRUFBRTtRQUNoQyxPQUFPLElBQUksQ0FBQ2UsS0FBSyxDQUFDakIsV0FBVyxDQUFDLEVBQUUsQ0FBQ2MsSUFBSSxFQUFFWjtJQUMzQztJQUNBLE1BQU1nQixnQkFBZ0JKLElBQUksRUFBRWIsT0FBTyxFQUFFQyxTQUFTLEVBQUU7UUFDNUMsT0FBTyxJQUFJLENBQUNlLEtBQUssQ0FBQ0gsTUFBTVo7SUFDNUI7SUFDQTs7S0FFQyxHQUNEaUIsUUFBUTtRQUNKLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDLEdBQ00sTUFBTUMsOEJBQThCRDtJQUN2Q0UsWUFBWWpCLE9BQU8sRUFBRWtCLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEtBQUssQ0FBRTtRQUM1RCxLQUFLLENBQUNwQjtRQUNOcUIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNSLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJQSxXQUFXO1lBQ1gsSUFBSUQsZ0JBQWdCUSxhQUFhVCxjQUFjUyxXQUFXO2dCQUN0RCxNQUFNLElBQUlaLE1BQU07WUFDcEI7UUFDSjtRQUNBdkIseUVBQXVCQSxDQUFDLElBQUksRUFBRTtJQUNsQztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2Jhc2UuanM/NWJjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGFkZExhbmdDaGFpbkVycm9yRmllbGRzIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYSBMYXJnZSBMYW5ndWFnZSBNb2RlbFxuICogKExMTSkgY2FsbC4gSXQgcHJvdmlkZXMgbWV0aG9kcyBmb3IgcGFyc2luZyB0aGUgcmVzdWx0IG9mIGFuIExMTSBjYWxsXG4gKiBhbmQgaW52b2tpbmcgdGhlIHBhcnNlciB3aXRoIGEgZ2l2ZW4gaW5wdXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTExNT3V0cHV0UGFyc2VyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgcmVzdWx0IG9mIGFuIExMTSBjYWxsIHdpdGggYSBnaXZlbiBwcm9tcHQuIEJ5IGRlZmF1bHQsIGl0XG4gICAgICogc2ltcGx5IGNhbGxzIGBwYXJzZVJlc3VsdGAuXG4gICAgICogQHBhcmFtIGdlbmVyYXRpb25zIFRoZSBnZW5lcmF0aW9ucyBmcm9tIGFuIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBfcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCBpbiB0aGUgTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBPcHRpb25hbCBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIHBhcnNlUmVzdWx0V2l0aFByb21wdChnZW5lcmF0aW9ucywgX3Byb21wdCwgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlUmVzdWx0KGdlbmVyYXRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICBfYmFzZU1lc3NhZ2VUb1N0cmluZyhtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG1lc3NhZ2UuY29udGVudFxuICAgICAgICAgICAgOiB0aGlzLl9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyhtZXNzYWdlLmNvbnRlbnQpO1xuICAgIH1cbiAgICBfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udGVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBwYXJzZXIgd2l0aCBhIGdpdmVuIGlucHV0IGFuZCBvcHRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogSWYgdGhlIGlucHV0IGlzIGEgc3RyaW5nLCBpdCBjcmVhdGVzIGEgZ2VuZXJhdGlvbiB3aXRoIHRoZSBpbnB1dCBhc1xuICAgICAqIHRleHQgYW5kIGNhbGxzIGBwYXJzZVJlc3VsdGAuIElmIHRoZSBpbnB1dCBpcyBhIGBCYXNlTWVzc2FnZWAsIGl0XG4gICAgICogY3JlYXRlcyBhIGdlbmVyYXRpb24gd2l0aCB0aGUgaW5wdXQgYXMgYSBtZXNzYWdlIGFuZCB0aGUgY29udGVudCBvZiB0aGVcbiAgICAgKiBpbnB1dCBhcyB0ZXh0LCBhbmQgdGhlbiBjYWxscyBgcGFyc2VSZXN1bHRgLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gdGhlIHBhcnNlciwgd2hpY2ggY2FuIGJlIGEgc3RyaW5nIG9yIGEgYEJhc2VNZXNzYWdlYC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcoYXN5bmMgKGlucHV0LCBvcHRpb25zKSA9PiB0aGlzLnBhcnNlUmVzdWx0KFt7IHRleHQ6IGlucHV0IH1dLCBvcHRpb25zPy5jYWxsYmFja3MpLCBpbnB1dCwgeyAuLi5vcHRpb25zLCBydW5UeXBlOiBcInBhcnNlclwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKGFzeW5jIChpbnB1dCwgb3B0aW9ucykgPT4gdGhpcy5wYXJzZVJlc3VsdChbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5fYmFzZU1lc3NhZ2VUb1N0cmluZyhpbnB1dCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sIG9wdGlvbnM/LmNhbGxiYWNrcyksIGlucHV0LCB7IC4uLm9wdGlvbnMsIHJ1blR5cGU6IFwicGFyc2VyXCIgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRvIHBhcnNlIHRoZSBvdXRwdXQgb2YgYW4gTExNIGNhbGwuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZUxMTU91dHB1dFBhcnNlciB7XG4gICAgcGFyc2VSZXN1bHQoZ2VuZXJhdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZShnZW5lcmF0aW9uc1swXS50ZXh0LCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZVdpdGhQcm9tcHQodGV4dCwgX3Byb21wdCwgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlKHRleHQsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgc3RyaW5nIHR5cGUga2V5IHVuaXF1ZWx5IGlkZW50aWZ5aW5nIHRoaXMgY2xhc3Mgb2YgcGFyc2VyXG4gICAgICovXG4gICAgX3R5cGUoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIl90eXBlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG59XG4vKipcbiAqIEV4Y2VwdGlvbiB0aGF0IG91dHB1dCBwYXJzZXJzIHNob3VsZCByYWlzZSB0byBzaWduaWZ5IGEgcGFyc2luZyBlcnJvci5cbiAqXG4gKiBUaGlzIGV4aXN0cyB0byBkaWZmZXJlbnRpYXRlIHBhcnNpbmcgZXJyb3JzIGZyb20gb3RoZXIgY29kZSBvciBleGVjdXRpb24gZXJyb3JzXG4gKiB0aGF0IGFsc28gbWF5IGFyaXNlIGluc2lkZSB0aGUgb3V0cHV0IHBhcnNlci4gT3V0cHV0UGFyc2VyRXhjZXB0aW9ucyB3aWxsIGJlXG4gKiBhdmFpbGFibGUgdG8gY2F0Y2ggYW5kIGhhbmRsZSBpbiB3YXlzIHRvIGZpeCB0aGUgcGFyc2luZyBlcnJvciwgd2hpbGUgb3RoZXJcbiAqIGVycm9ycyB3aWxsIGJlIHJhaXNlZC5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBlcnJvciB0aGF0J3MgYmVpbmcgcmUtcmFpc2VkIG9yIGFuIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0gbGxtT3V0cHV0IC0gU3RyaW5nIG1vZGVsIG91dHB1dCB3aGljaCBpcyBlcnJvci1pbmcuXG4gKiBAcGFyYW0gb2JzZXJ2YXRpb24gLSBTdHJpbmcgZXhwbGFuYXRpb24gb2YgZXJyb3Igd2hpY2ggY2FuIGJlIHBhc3NlZCB0byBhXG4gKiAgICAgbW9kZWwgdG8gdHJ5IGFuZCByZW1lZGlhdGUgdGhlIGlzc3VlLlxuICogQHBhcmFtIHNlbmRUb0xMTSAtIFdoZXRoZXIgdG8gc2VuZCB0aGUgb2JzZXJ2YXRpb24gYW5kIGxsbV9vdXRwdXQgYmFjayB0byBhbiBBZ2VudFxuICogICAgIGFmdGVyIGFuIE91dHB1dFBhcnNlckV4Y2VwdGlvbiBoYXMgYmVlbiByYWlzZWQuIFRoaXMgZ2l2ZXMgdGhlIHVuZGVybHlpbmdcbiAqICAgICBtb2RlbCBkcml2aW5nIHRoZSBhZ2VudCB0aGUgY29udGV4dCB0aGF0IHRoZSBwcmV2aW91cyBvdXRwdXQgd2FzIGltcHJvcGVybHlcbiAqICAgICBzdHJ1Y3R1cmVkLCBpbiB0aGUgaG9wZXMgdGhhdCBpdCB3aWxsIHVwZGF0ZSB0aGUgb3V0cHV0IHRvIHRoZSBjb3JyZWN0XG4gKiAgICAgZm9ybWF0LlxuICovXG5leHBvcnQgY2xhc3MgT3V0cHV0UGFyc2VyRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGxsbU91dHB1dCwgb2JzZXJ2YXRpb24sIHNlbmRUb0xMTSA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsbG1PdXRwdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2VuZFRvTExNXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGxtT3V0cHV0ID0gbGxtT3V0cHV0O1xuICAgICAgICB0aGlzLm9ic2VydmF0aW9uID0gb2JzZXJ2YXRpb247XG4gICAgICAgIHRoaXMuc2VuZFRvTExNID0gc2VuZFRvTExNO1xuICAgICAgICBpZiAoc2VuZFRvTExNKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2YXRpb24gPT09IHVuZGVmaW5lZCB8fCBsbG1PdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50cyAnb2JzZXJ2YXRpb24nICYgJ2xsbU91dHB1dCcgYXJlIHJlcXVpcmVkIGlmICdzZW5kVG9MbG0nIGlzIHRydWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHModGhpcywgXCJPVVRQVVRfUEFSU0lOR19GQUlMVVJFXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsImFkZExhbmdDaGFpbkVycm9yRmllbGRzIiwiQmFzZUxMTU91dHB1dFBhcnNlciIsInBhcnNlUmVzdWx0V2l0aFByb21wdCIsImdlbmVyYXRpb25zIiwiX3Byb21wdCIsImNhbGxiYWNrcyIsInBhcnNlUmVzdWx0IiwiX2Jhc2VNZXNzYWdlVG9TdHJpbmciLCJtZXNzYWdlIiwiY29udGVudCIsIl9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbnZva2UiLCJpbnB1dCIsIm9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJ0ZXh0IiwicnVuVHlwZSIsIkJhc2VPdXRwdXRQYXJzZXIiLCJwYXJzZSIsInBhcnNlV2l0aFByb21wdCIsIl90eXBlIiwiRXJyb3IiLCJPdXRwdXRQYXJzZXJFeGNlcHRpb24iLCJjb25zdHJ1Y3RvciIsImxsbU91dHB1dCIsIm9ic2VydmF0aW9uIiwic2VuZFRvTExNIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BytesOutputParser: () => (/* binding */ BytesOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string and\n * encodes it into bytes.\n */ class BytesOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"bytes\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"textEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new TextEncoder()\n        });\n    }\n    static lc_name() {\n        return \"BytesOutputParser\";\n    }\n    parse(text) {\n        return Promise.resolve(this.textEncoder.encode(text));\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUMsMEJBQTBCRCxvRUFBeUJBO0lBQzVERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQVE7UUFDeEQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sSUFBSUM7UUFDZjtJQUNKO0lBQ0EsT0FBT0MsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxNQUFNQyxJQUFJLEVBQUU7UUFDUixPQUFPQyxRQUFRQyxPQUFPLENBQUMsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQ0o7SUFDbkQ7SUFDQUssd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2J5dGVzLmpzPzUyZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuLyoqXG4gKiBPdXRwdXRQYXJzZXIgdGhhdCBwYXJzZXMgTExNUmVzdWx0IGludG8gdGhlIHRvcCBsaWtlbHkgc3RyaW5nIGFuZFxuICogZW5jb2RlcyBpdCBpbnRvIGJ5dGVzLlxuICovXG5leHBvcnQgY2xhc3MgQnl0ZXNPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwiYnl0ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEVuY29kZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBUZXh0RW5jb2RlcigpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXNPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudGV4dEVuY29kZXIuZW5jb2RlKHRleHQpKTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsIkJ5dGVzT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiVGV4dEVuY29kZXIiLCJsY19uYW1lIiwicGFyc2UiLCJ0ZXh0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0ZXh0RW5jb2RlciIsImVuY29kZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _bytes_js__WEBPACK_IMPORTED_MODULE_1__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_3__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bytes.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\");\n/* harmony import */ var _list_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./list.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./structured.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./json.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n/* harmony import */ var _xml_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./xml.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDQztBQUNEO0FBQ0U7QUFDSTtBQUNEO0FBQ0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9pbmRleC5qcz8zYTY2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2J5dGVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9saXN0LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0cnVjdHVyZWQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vanNvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4veG1sLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/json.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputParser: () => (/* binding */ JsonOutputParser),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parsePartialJson)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json.js\");\n\n\n\n/**\n * Class for parsing the output of an LLM into a JSON object.\n */ class JsonOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"JsonOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    // This should actually return Partial<T>, but there's no way\n    // to specify emitted chunks as instances separate from the main output type.\n    async parsePartialResult(generations) {\n        return (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown)(generations[0].text);\n    }\n    async parse(text) {\n        return (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_2__.parseJsonMarkdown)(text, JSON.parse);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUU7QUFDcEI7QUFDc0I7QUFDdkU7O0NBRUMsR0FDTSxNQUFNSSx5QkFBeUJKLDhFQUFtQ0E7SUFDckVLLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFpQjtRQUMvQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQSxPQUFPQyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLE1BQU1DLElBQUksRUFBRUMsSUFBSSxFQUFFO1FBQ2QsSUFBSSxDQUFDQSxNQUFNO1lBQ1AsT0FBT0M7UUFDWDtRQUNBLElBQUksQ0FBQ0YsTUFBTTtZQUNQLE9BQU87Z0JBQUM7b0JBQUVHLElBQUk7b0JBQVdDLE1BQU07b0JBQUlQLE9BQU9JO2dCQUFLO2FBQUU7UUFDckQ7UUFDQSxPQUFPZiw2REFBT0EsQ0FBQ2MsTUFBTUM7SUFDekI7SUFDQSw2REFBNkQ7SUFDN0QsNkVBQTZFO0lBQzdFLE1BQU1JLG1CQUFtQkMsV0FBVyxFQUFFO1FBQ2xDLE9BQU9uQixpRUFBaUJBLENBQUNtQixXQUFXLENBQUMsRUFBRSxDQUFDQyxJQUFJO0lBQ2hEO0lBQ0EsTUFBTUMsTUFBTUQsSUFBSSxFQUFFO1FBQ2QsT0FBT3BCLGlFQUFpQkEsQ0FBQ29CLE1BQU1FLEtBQUtELEtBQUs7SUFDN0M7SUFDQUUsd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtBQUNKO0FBQytDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2pzb24uanM/YWJhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUpzb25NYXJrZG93biwgcGFyc2VQYXJ0aWFsSnNvbiB9IGZyb20gXCIuLi91dGlscy9qc29uLmpzXCI7XG4vKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYW4gTExNIGludG8gYSBKU09OIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25PdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSnNvbk91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBfZGlmZihwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICghbmV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgICAgIHJldHVybiBbeyBvcDogXCJyZXBsYWNlXCIsIHBhdGg6IFwiXCIsIHZhbHVlOiBuZXh0IH1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wYXJlKHByZXYsIG5leHQpO1xuICAgIH1cbiAgICAvLyBUaGlzIHNob3VsZCBhY3R1YWxseSByZXR1cm4gUGFydGlhbDxUPiwgYnV0IHRoZXJlJ3Mgbm8gd2F5XG4gICAgLy8gdG8gc3BlY2lmeSBlbWl0dGVkIGNodW5rcyBhcyBpbnN0YW5jZXMgc2VwYXJhdGUgZnJvbSB0aGUgbWFpbiBvdXRwdXQgdHlwZS5cbiAgICBhc3luYyBwYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSnNvbk1hcmtkb3duKGdlbmVyYXRpb25zWzBdLnRleHQpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUpzb25NYXJrZG93bih0ZXh0LCBKU09OLnBhcnNlKTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG5leHBvcnQgeyBwYXJzZVBhcnRpYWxKc29uLCBwYXJzZUpzb25NYXJrZG93biB9O1xuIl0sIm5hbWVzIjpbIkJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiY29tcGFyZSIsInBhcnNlSnNvbk1hcmtkb3duIiwicGFyc2VQYXJ0aWFsSnNvbiIsIkpzb25PdXRwdXRQYXJzZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19uYW1lIiwiX2RpZmYiLCJwcmV2IiwibmV4dCIsInVuZGVmaW5lZCIsIm9wIiwicGF0aCIsInBhcnNlUGFydGlhbFJlc3VsdCIsImdlbmVyYXRpb25zIiwidGV4dCIsInBhcnNlIiwiSlNPTiIsImdldEZvcm1hdEluc3RydWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/list.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* binding */ CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* binding */ CustomListOutputParser),\n/* harmony export */   ListOutputParser: () => (/* binding */ ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* binding */ MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* binding */ NumberedListOutputParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n/**\n * Class to parse the output of an LLM call to a list.\n * @augments BaseOutputParser\n */ class ListOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_1__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async *_transform(inputGenerator) {\n        let buffer = \"\";\n        for await (const input of inputGenerator){\n            if (typeof input === \"string\") {\n                // add current chunk to buffer\n                buffer += input;\n            } else {\n                // extract message content and add to buffer\n                buffer += input.content;\n            }\n            // get parts in buffer\n            if (!this.re) {\n                const parts = await this.parse(buffer);\n                if (parts.length > 1) {\n                    // if there are multiple parts, yield all but the last one\n                    for (const part of parts.slice(0, -1)){\n                        yield [\n                            part\n                        ];\n                    }\n                    // keep the last part in the buffer\n                    buffer = parts[parts.length - 1];\n                }\n            } else {\n                // if there is a regex, get all matches\n                const matches = [\n                    ...buffer.matchAll(this.re)\n                ];\n                if (matches.length > 1) {\n                    let doneIdx = 0;\n                    // if there are multiple matches, yield all but the last one\n                    for (const match of matches.slice(0, -1)){\n                        yield [\n                            match[1]\n                        ];\n                        doneIdx += (match.index ?? 0) + match[0].length;\n                    }\n                    // keep the last match in the buffer\n                    buffer = buffer.slice(doneIdx);\n                }\n            }\n        }\n        // yield the last part\n        for (const part of (await this.parse(buffer))){\n            yield [\n                part\n            ];\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call as a comma-separated list.\n * @augments ListOutputParser\n */ class CommaSeparatedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"CommaSeparatedListOutputParser\";\n    }\n    /**\n     * Parses the given text into an array of strings, using a comma as the\n     * separator. If the parsing fails, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each comma.\n     */ async parse(text) {\n        try {\n            return text.trim().split(\",\").map((s)=>s.trim());\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`, text);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CommaSeparatedListOutputParser.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of comma separated values, eg: \\`foo, bar, baz\\``;\n    }\n}\n/**\n * Class to parse the output of an LLM call to a list with a specific length and separator.\n * @augments ListOutputParser\n */ class CustomListOutputParser extends ListOutputParser {\n    constructor({ length, separator }){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"length\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.length = length;\n        this.separator = separator || \",\";\n    }\n    /**\n     * Parses the given text into an array of strings, using the specified\n     * separator. If the parsing fails or the number of items in the list\n     * doesn't match the expected length, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each occurrence of the specified separator.\n     */ async parse(text) {\n        try {\n            const items = text.trim().split(this.separator).map((s)=>s.trim());\n            if (this.length !== undefined && items.length !== this.length) {\n                throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${items.length}.`);\n            }\n            return items;\n        } catch (e) {\n            if (Object.getPrototypeOf(e) === _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException.prototype) {\n                throw e;\n            }\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CustomListOutputParser, including the number of items and the\n     * separator.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of ${this.length === undefined ? \"\" : `${this.length} `}items separated by \"${this.separator}\" (eg: \\`foo${this.separator} bar${this.separator} baz\\`)`;\n    }\n}\nclass NumberedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /\\d+\\.\\s([^\\n]+)/g\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\nclass MarkdownListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /^\\s*[-*]\\s([^\\n]+)$/gm\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvbGlzdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1M7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUUseUJBQXlCRCxvRUFBeUJBO0lBQzNERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0EsT0FBT0MsV0FBV0MsY0FBYyxFQUFFO1FBQzlCLElBQUlDLFNBQVM7UUFDYixXQUFXLE1BQU1DLFNBQVNGLGVBQWdCO1lBQ3RDLElBQUksT0FBT0UsVUFBVSxVQUFVO2dCQUMzQiw4QkFBOEI7Z0JBQzlCRCxVQUFVQztZQUNkLE9BQ0s7Z0JBQ0QsNENBQTRDO2dCQUM1Q0QsVUFBVUMsTUFBTUMsT0FBTztZQUMzQjtZQUNBLHNCQUFzQjtZQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDQyxFQUFFLEVBQUU7Z0JBQ1YsTUFBTUMsUUFBUSxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDTDtnQkFDL0IsSUFBSUksTUFBTUUsTUFBTSxHQUFHLEdBQUc7b0JBQ2xCLDBEQUEwRDtvQkFDMUQsS0FBSyxNQUFNQyxRQUFRSCxNQUFNSSxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUk7d0JBQ25DLE1BQU07NEJBQUNEO3lCQUFLO29CQUNoQjtvQkFDQSxtQ0FBbUM7b0JBQ25DUCxTQUFTSSxLQUFLLENBQUNBLE1BQU1FLE1BQU0sR0FBRyxFQUFFO2dCQUNwQztZQUNKLE9BQ0s7Z0JBQ0QsdUNBQXVDO2dCQUN2QyxNQUFNRyxVQUFVO3VCQUFJVCxPQUFPVSxRQUFRLENBQUMsSUFBSSxDQUFDUCxFQUFFO2lCQUFFO2dCQUM3QyxJQUFJTSxRQUFRSCxNQUFNLEdBQUcsR0FBRztvQkFDcEIsSUFBSUssVUFBVTtv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QUFFLENBQUNnQixHQUFHLENBQUMsQ0FBQ1csSUFBTUEsQ0FBQyxDQUFDLEVBQUU7SUFDOUQ7QUFDSjtBQUNPLE1BQU1DLGlDQUFpQzFDO0lBQzFDQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQU87UUFDdkQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBT2tCLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQU8sd0JBQXdCO1FBQ3BCLE9BQU8sQ0FBQyxpSEFBaUgsQ0FBQztJQUM5SDtJQUNBLE1BQU1qQixNQUFNVyxJQUFJLEVBQUU7UUFDZCxPQUFPO2VBQUtBLEtBQUtOLFFBQVEsQ0FBQyxJQUFJLENBQUNQLEVBQUUsS0FBSyxFQUFFO1NBQUUsQ0FBQ2dCLEdBQUcsQ0FBQyxDQUFDVyxJQUFNQSxDQUFDLENBQUMsRUFBRTtJQUM5RDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2xpc3QuanM/YTk0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPdXRwdXRQYXJzZXJFeGNlcHRpb24gfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG4vKipcbiAqIENsYXNzIHRvIHBhcnNlIHRoZSBvdXRwdXQgb2YgYW4gTExNIGNhbGwgdG8gYSBsaXN0LlxuICogQGF1Z21lbnRzIEJhc2VPdXRwdXRQYXJzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3RPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IFwiXCI7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgaW5wdXQgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgY3VycmVudCBjaHVuayB0byBidWZmZXJcbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBleHRyYWN0IG1lc3NhZ2UgY29udGVudCBhbmQgYWRkIHRvIGJ1ZmZlclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBpbnB1dC5jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZ2V0IHBhcnRzIGluIGJ1ZmZlclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBhd2FpdCB0aGlzLnBhcnNlKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzLCB5aWVsZCBhbGwgYnV0IHRoZSBsYXN0IG9uZVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuc2xpY2UoMCwgLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbcGFydF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGUgbGFzdCBwYXJ0IGluIHRoZSBidWZmZXJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSByZWdleCwgZ2V0IGFsbCBtYXRjaGVzXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5idWZmZXIubWF0Y2hBbGwodGhpcy5yZSldO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvbmVJZHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgbWF0Y2hlcywgeWllbGQgYWxsIGJ1dCB0aGUgbGFzdCBvbmVcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzLnNsaWNlKDAsIC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgW21hdGNoWzFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVJZHggKz0gKG1hdGNoLmluZGV4ID8/IDApICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGxhc3QgbWF0Y2ggaW4gdGhlIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoZG9uZUlkeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHlpZWxkIHRoZSBsYXN0IHBhcnRcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGF3YWl0IHRoaXMucGFyc2UoYnVmZmVyKSkge1xuICAgICAgICAgICAgeWllbGQgW3BhcnRdO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIGFzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QuXG4gKiBAYXVnbWVudHMgTGlzdE91dHB1dFBhcnNlclxuICovXG5leHBvcnQgY2xhc3MgQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyIGV4dGVuZHMgTGlzdE91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcImxpc3RcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNvbW1hU2VwYXJhdGVkTGlzdE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIHRleHQgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzLCB1c2luZyBhIGNvbW1hIGFzIHRoZVxuICAgICAqIHNlcGFyYXRvci4gSWYgdGhlIHBhcnNpbmcgZmFpbHMsIHRocm93cyBhbiBPdXRwdXRQYXJzZXJFeGNlcHRpb24uXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc3RyaW5ncyBvYnRhaW5lZCBieSBzcGxpdHRpbmcgdGhlIGlucHV0IHRleHQgYXQgZWFjaCBjb21tYS5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBDb3VsZCBub3QgcGFyc2Ugb3V0cHV0OiAke3RleHR9YCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgaW5zdHJ1Y3Rpb25zIG9uIHRoZSBleHBlY3RlZCBmb3JtYXQgb2YgdGhlIHJlc3BvbnNlIGZvciB0aGVcbiAgICAgKiBDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXIuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbGlzdCBvZiBjb21tYSBzZXBhcmF0ZWQgdmFsdWVzLCBlZzogXFxgZm9vLCBiYXIsIGJhelxcYGA7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRvIGEgbGlzdCB3aXRoIGEgc3BlY2lmaWMgbGVuZ3RoIGFuZCBzZXBhcmF0b3IuXG4gKiBAYXVnbWVudHMgTGlzdE91dHB1dFBhcnNlclxuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgbGVuZ3RoLCBzZXBhcmF0b3IgfSkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZW5ndGhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2VwYXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCBcIixcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncywgdXNpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIHNlcGFyYXRvci4gSWYgdGhlIHBhcnNpbmcgZmFpbHMgb3IgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuICAgICAqIGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGxlbmd0aCwgdGhyb3dzIGFuIE91dHB1dFBhcnNlckV4Y2VwdGlvbi5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBwYXJzZS5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzdHJpbmdzIG9idGFpbmVkIGJ5IHNwbGl0dGluZyB0aGUgaW5wdXQgdGV4dCBhdCBlYWNoIG9jY3VycmVuY2Ugb2YgdGhlIHNwZWNpZmllZCBzZXBhcmF0b3IuXG4gICAgICovXG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSB0ZXh0XG4gICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAgIC5zcGxpdCh0aGlzLnNlcGFyYXRvcilcbiAgICAgICAgICAgICAgICAubWFwKChzKSA9PiBzLnRyaW0oKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggIT09IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgSW5jb3JyZWN0IG51bWJlciBvZiBpdGVtcy4gRXhwZWN0ZWQgJHt0aGlzLmxlbmd0aH0sIGdvdCAke2l0ZW1zLmxlbmd0aH0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IE91dHB1dFBhcnNlckV4Y2VwdGlvbi5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgQ291bGQgbm90IHBhcnNlIG91dHB1dDogJHt0ZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGluc3RydWN0aW9ucyBvbiB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSByZXNwb25zZSBmb3IgdGhlXG4gICAgICogQ3VzdG9tTGlzdE91dHB1dFBhcnNlciwgaW5jbHVkaW5nIHRoZSBudW1iZXIgb2YgaXRlbXMgYW5kIHRoZVxuICAgICAqIHNlcGFyYXRvci5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyBjb250YWluaW5nIGluc3RydWN0aW9ucyBvbiB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBsaXN0IG9mICR7dGhpcy5sZW5ndGggPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBgJHt0aGlzLmxlbmd0aH0gYH1pdGVtcyBzZXBhcmF0ZWQgYnkgXCIke3RoaXMuc2VwYXJhdG9yfVwiIChlZzogXFxgZm9vJHt0aGlzLnNlcGFyYXRvcn0gYmFyJHt0aGlzLnNlcGFyYXRvcn0gYmF6XFxgKWA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE51bWJlcmVkTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAvXFxkK1xcLlxccyhbXlxcbl0rKS9nXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGBZb3VyIHJlc3BvbnNlIHNob3VsZCBiZSBhIG51bWJlcmVkIGxpc3Qgd2l0aCBlYWNoIGl0ZW0gb24gYSBuZXcgbGluZS4gRm9yIGV4YW1wbGU6IFxcblxcbjEuIGZvb1xcblxcbjIuIGJhclxcblxcbjMuIGJhemA7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIFsuLi4odGV4dC5tYXRjaEFsbCh0aGlzLnJlKSA/PyBbXSldLm1hcCgobSkgPT4gbVsxXSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1hcmtkb3duTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAvXlxccypbLSpdXFxzKFteXFxuXSspJC9nbVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIk51bWJlcmVkTGlzdE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBudW1iZXJlZCBsaXN0IHdpdGggZWFjaCBpdGVtIG9uIGEgbmV3IGxpbmUuIEZvciBleGFtcGxlOiBcXG5cXG4xLiBmb29cXG5cXG4yLiBiYXJcXG5cXG4zLiBiYXpgO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBbLi4uKHRleHQubWF0Y2hBbGwodGhpcy5yZSkgPz8gW10pXS5tYXAoKG0pID0+IG1bMV0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPdXRwdXRQYXJzZXJFeGNlcHRpb24iLCJCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiTGlzdE91dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl90cmFuc2Zvcm0iLCJpbnB1dEdlbmVyYXRvciIsImJ1ZmZlciIsImlucHV0IiwiY29udGVudCIsInJlIiwicGFydHMiLCJwYXJzZSIsImxlbmd0aCIsInBhcnQiLCJzbGljZSIsIm1hdGNoZXMiLCJtYXRjaEFsbCIsImRvbmVJZHgiLCJtYXRjaCIsImluZGV4IiwiQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyIiwibGNfbmFtZSIsInRleHQiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJzIiwiZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyIsIkN1c3RvbUxpc3RPdXRwdXRQYXJzZXIiLCJzZXBhcmF0b3IiLCJpdGVtcyIsInVuZGVmaW5lZCIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyIiwibSIsIk1hcmtkb3duTGlzdE91dHB1dFBhcnNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputKeyToolsParser: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputKeyToolsParser),\n/* harmony export */   JsonOutputToolsParser: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputToolsParser),\n/* harmony export */   convertLangChainToolCallToOpenAI: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__.convertLangChainToolCallToOpenAI),\n/* harmony export */   makeInvalidToolCall: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__.makeInvalidToolCall),\n/* harmony export */   parseToolCall: () => (/* reexport safe */ _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__.parseToolCall)\n/* harmony export */ });\n/* harmony import */ var _json_output_tools_parsers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./json_output_tools_parsers.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9vcGVuYWlfdG9vbHMvaW5kZXguanM/YTk3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9qc29uX291dHB1dF90b29sc19wYXJzZXJzLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputKeyToolsParser: () => (/* binding */ JsonOutputKeyToolsParser),\n/* harmony export */   JsonOutputToolsParser: () => (/* binding */ JsonOutputToolsParser),\n/* harmony export */   convertLangChainToolCallToOpenAI: () => (/* binding */ convertLangChainToolCallToOpenAI),\n/* harmony export */   makeInvalidToolCall: () => (/* binding */ makeInvalidToolCall),\n/* harmony export */   parseToolCall: () => (/* binding */ parseToolCall)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../json.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../messages/ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n\n\n\n\nfunction parseToolCall(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCall, options) {\n    if (rawToolCall.function === undefined) {\n        return undefined;\n    }\n    let functionArgs;\n    if (options?.partial) {\n        try {\n            functionArgs = (0,_json_js__WEBPACK_IMPORTED_MODULE_1__.parsePartialJson)(rawToolCall.function.arguments ?? \"{}\");\n        } catch (e) {\n            return undefined;\n        }\n    } else {\n        try {\n            functionArgs = JSON.parse(rawToolCall.function.arguments);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException([\n                `Function \"${rawToolCall.function.name}\" arguments:`,\n                ``,\n                rawToolCall.function.arguments,\n                ``,\n                `are not valid JSON.`,\n                `Error: ${e.message}`\n            ].join(\"\\n\"));\n        }\n    }\n    const parsedToolCall = {\n        name: rawToolCall.function.name,\n        args: functionArgs,\n        type: \"tool_call\"\n    };\n    if (options?.returnId) {\n        parsedToolCall.id = rawToolCall.id;\n    }\n    return parsedToolCall;\n}\nfunction convertLangChainToolCallToOpenAI(toolCall) {\n    if (toolCall.id === undefined) {\n        throw new Error(`All OpenAI tool calls must have an \"id\" field.`);\n    }\n    return {\n        id: toolCall.id,\n        type: \"function\",\n        function: {\n            name: toolCall.name,\n            arguments: JSON.stringify(toolCall.args)\n        }\n    };\n}\nfunction makeInvalidToolCall(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCall, errorMsg) {\n    return {\n        name: rawToolCall.function?.name,\n        args: rawToolCall.function?.arguments,\n        id: rawToolCall.id,\n        error: errorMsg,\n        type: \"invalid_tool_call\"\n    };\n}\n/**\n * Class for parsing the output of a tool-calling LLM into a JSON object.\n */ class JsonOutputToolsParser extends _transform_js__WEBPACK_IMPORTED_MODULE_2__.BaseCumulativeTransformOutputParser {\n    static lc_name() {\n        return \"JsonOutputToolsParser\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"returnId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"output_parsers\",\n                \"openai_tools\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.returnId = fields?.returnId ?? this.returnId;\n    }\n    _diff() {\n        throw new Error(\"Not supported.\");\n    }\n    async parse() {\n        throw new Error(\"Not implemented.\");\n    }\n    async parseResult(generations) {\n        const result = await this.parsePartialResult(generations, false);\n        return result;\n    }\n    /**\n     * Parses the output and returns a JSON object. If `argsOnly` is true,\n     * only the arguments of the function call are returned.\n     * @param generations The output of the LLM to parse.\n     * @returns A JSON object representation of the function call or its arguments.\n     */ async parsePartialResult(generations, partial = true) {\n        const message = generations[0].message;\n        let toolCalls;\n        if ((0,_messages_ai_js__WEBPACK_IMPORTED_MODULE_3__.isAIMessage)(message) && message.tool_calls?.length) {\n            toolCalls = message.tool_calls.map((toolCall)=>{\n                const { id, ...rest } = toolCall;\n                if (!this.returnId) {\n                    return rest;\n                }\n                return {\n                    id,\n                    ...rest\n                };\n            });\n        } else if (message.additional_kwargs.tool_calls !== undefined) {\n            const rawToolCalls = JSON.parse(JSON.stringify(message.additional_kwargs.tool_calls));\n            toolCalls = rawToolCalls.map((rawToolCall)=>{\n                return parseToolCall(rawToolCall, {\n                    returnId: this.returnId,\n                    partial\n                });\n            });\n        }\n        if (!toolCalls) {\n            return [];\n        }\n        const parsedToolCalls = [];\n        for (const toolCall of toolCalls){\n            if (toolCall !== undefined) {\n                const backwardsCompatibleToolCall = {\n                    type: toolCall.name,\n                    args: toolCall.args,\n                    id: toolCall.id\n                };\n                parsedToolCalls.push(backwardsCompatibleToolCall);\n            }\n        }\n        return parsedToolCalls;\n    }\n}\n/**\n * Class for parsing the output of a tool-calling LLM into a JSON object if you are\n * expecting only a single tool to be called.\n */ class JsonOutputKeyToolsParser extends JsonOutputToolsParser {\n    static lc_name() {\n        return \"JsonOutputKeyToolsParser\";\n    }\n    constructor(params){\n        super(params);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"output_parsers\",\n                \"openai_tools\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"returnId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /** The type of tool calls to return. */ Object.defineProperty(this, \"keyName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Whether to return only the first tool call. */ Object.defineProperty(this, \"returnSingle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"zodSchema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keyName = params.keyName;\n        this.returnSingle = params.returnSingle ?? this.returnSingle;\n        this.zodSchema = params.zodSchema;\n    }\n    async _validateResult(result) {\n        if (this.zodSchema === undefined) {\n            return result;\n        }\n        const zodParsedResult = await this.zodSchema.safeParseAsync(result);\n        if (zodParsedResult.success) {\n            return zodParsedResult.data;\n        } else {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Failed to parse. Text: \"${JSON.stringify(result, null, 2)}\". Error: ${JSON.stringify(zodParsedResult.error.errors)}`, JSON.stringify(result, null, 2));\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async parsePartialResult(generations) {\n        const results = await super.parsePartialResult(generations);\n        const matchingResults = results.filter((result)=>result.type === this.keyName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let returnedValues = matchingResults;\n        if (!matchingResults.length) {\n            return undefined;\n        }\n        if (!this.returnId) {\n            returnedValues = matchingResults.map((result)=>result.args);\n        }\n        if (this.returnSingle) {\n            return returnedValues[0];\n        }\n        return returnedValues;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async parseResult(generations) {\n        const results = await super.parsePartialResult(generations, false);\n        const matchingResults = results.filter((result)=>result.type === this.keyName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let returnedValues = matchingResults;\n        if (!matchingResults.length) {\n            return undefined;\n        }\n        if (!this.returnId) {\n            returnedValues = matchingResults.map((result)=>result.args);\n        }\n        if (this.returnSingle) {\n            return this._validateResult(returnedValues[0]);\n        }\n        const toolCallResults = await Promise.all(returnedValues.map((value)=>this._validateResult(value)));\n        return toolCallResults;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2pzb25fb3V0cHV0X3Rvb2xzX3BhcnNlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW1EO0FBQ0w7QUFDeUI7QUFDcEI7QUFDNUMsU0FBU0ksY0FDaEIsOERBQThEO0FBQzlEQyxXQUFXLEVBQUVDLE9BQU87SUFDaEIsSUFBSUQsWUFBWUUsUUFBUSxLQUFLQyxXQUFXO1FBQ3BDLE9BQU9BO0lBQ1g7SUFDQSxJQUFJQztJQUNKLElBQUlILFNBQVNJLFNBQVM7UUFDbEIsSUFBSTtZQUNBRCxlQUFlUiwwREFBZ0JBLENBQUNJLFlBQVlFLFFBQVEsQ0FBQ0ksU0FBUyxJQUFJO1FBQ3RFLEVBQ0EsT0FBT0MsR0FBRztZQUNOLE9BQU9KO1FBQ1g7SUFDSixPQUNLO1FBQ0QsSUFBSTtZQUNBQyxlQUFlSSxLQUFLQyxLQUFLLENBQUNULFlBQVlFLFFBQVEsQ0FBQ0ksU0FBUztRQUN4RCw4REFBOEQ7UUFDbEUsRUFDQSxPQUFPQyxHQUFHO1lBQ04sTUFBTSxJQUFJWiwyREFBcUJBLENBQUM7Z0JBQzVCLENBQUMsVUFBVSxFQUFFSyxZQUFZRSxRQUFRLENBQUNRLElBQUksQ0FBQyxZQUFZLENBQUM7Z0JBQ3BELENBQUMsQ0FBQztnQkFDRlYsWUFBWUUsUUFBUSxDQUFDSSxTQUFTO2dCQUM5QixDQUFDLENBQUM7Z0JBQ0YsQ0FBQyxtQkFBbUIsQ0FBQztnQkFDckIsQ0FBQyxPQUFPLEVBQUVDLEVBQUVJLE9BQU8sQ0FBQyxDQUFDO2FBQ3hCLENBQUNDLElBQUksQ0FBQztRQUNYO0lBQ0o7SUFDQSxNQUFNQyxpQkFBaUI7UUFDbkJILE1BQU1WLFlBQVlFLFFBQVEsQ0FBQ1EsSUFBSTtRQUMvQkksTUFBTVY7UUFDTlcsTUFBTTtJQUNWO0lBQ0EsSUFBSWQsU0FBU2UsVUFBVTtRQUNuQkgsZUFBZUksRUFBRSxHQUFHakIsWUFBWWlCLEVBQUU7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QUksQ0FBQ3VDLFlBQVksRUFBRTtZQUNuQixPQUFPVyxjQUFjLENBQUMsRUFBRTtRQUM1QjtRQUNBLE9BQU9BO0lBQ1g7SUFDQSw4REFBOEQ7SUFDOUQsTUFBTTVCLFlBQVlDLFdBQVcsRUFBRTtRQUMzQixNQUFNd0IsVUFBVSxNQUFNLEtBQUssQ0FBQ3RCLG1CQUFtQkYsYUFBYTtRQUM1RCxNQUFNeUIsa0JBQWtCRCxRQUFRRSxNQUFNLENBQUMsQ0FBQ3pCLFNBQVdBLE9BQU92QixJQUFJLEtBQUssSUFBSSxDQUFDcUMsT0FBTztRQUMvRSw4REFBOEQ7UUFDOUQsSUFBSVksaUJBQWlCRjtRQUNyQixJQUFJLENBQUNBLGdCQUFnQnBCLE1BQU0sRUFBRTtZQUN6QixPQUFPdkM7UUFDWDtRQUNBLElBQUksQ0FBQyxJQUFJLENBQUNhLFFBQVEsRUFBRTtZQUNoQmdELGlCQUFpQkYsZ0JBQWdCbkIsR0FBRyxDQUFDLENBQUNMLFNBQVdBLE9BQU94QixJQUFJO1FBQ2hFO1FBQ0EsSUFBSSxJQUFJLENBQUN1QyxZQUFZLEVBQUU7WUFDbkIsT0FBTyxJQUFJLENBQUNFLGVBQWUsQ0FBQ1MsY0FBYyxDQUFDLEVBQUU7UUFDakQ7UUFDQSxNQUFNQyxrQkFBa0IsTUFBTUMsUUFBUUMsR0FBRyxDQUFDSCxlQUFlckIsR0FBRyxDQUFDLENBQUNULFFBQVUsSUFBSSxDQUFDcUIsZUFBZSxDQUFDckI7UUFDN0YsT0FBTytCO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9vcGVuYWlfdG9vbHMvanNvbl9vdXRwdXRfdG9vbHNfcGFyc2Vycy5qcz80ZjFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE91dHB1dFBhcnNlckV4Y2VwdGlvbiB9IGZyb20gXCIuLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL2pzb24uanNcIjtcbmltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLCB9IGZyb20gXCIuLi90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCB7IGlzQUlNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL21lc3NhZ2VzL2FpLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yYXdUb29sQ2FsbCwgb3B0aW9ucykge1xuICAgIGlmIChyYXdUb29sQ2FsbC5mdW5jdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBmdW5jdGlvbkFyZ3M7XG4gICAgaWYgKG9wdGlvbnM/LnBhcnRpYWwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZ1bmN0aW9uQXJncyA9IHBhcnNlUGFydGlhbEpzb24ocmF3VG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzID8/IFwie31cIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmdW5jdGlvbkFyZ3MgPSBKU09OLnBhcnNlKHJhd1Rvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKFtcbiAgICAgICAgICAgICAgICBgRnVuY3Rpb24gXCIke3Jhd1Rvb2xDYWxsLmZ1bmN0aW9uLm5hbWV9XCIgYXJndW1lbnRzOmAsXG4gICAgICAgICAgICAgICAgYGAsXG4gICAgICAgICAgICAgICAgcmF3VG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIGBgLFxuICAgICAgICAgICAgICAgIGBhcmUgbm90IHZhbGlkIEpTT04uYCxcbiAgICAgICAgICAgICAgICBgRXJyb3I6ICR7ZS5tZXNzYWdlfWAsXG4gICAgICAgICAgICBdLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhcnNlZFRvb2xDYWxsID0ge1xuICAgICAgICBuYW1lOiByYXdUb29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICBhcmdzOiBmdW5jdGlvbkFyZ3MsXG4gICAgICAgIHR5cGU6IFwidG9vbF9jYWxsXCIsXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucz8ucmV0dXJuSWQpIHtcbiAgICAgICAgcGFyc2VkVG9vbENhbGwuaWQgPSByYXdUb29sQ2FsbC5pZDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZFRvb2xDYWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRMYW5nQ2hhaW5Ub29sQ2FsbFRvT3BlbkFJKHRvb2xDYWxsKSB7XG4gICAgaWYgKHRvb2xDYWxsLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBbGwgT3BlbkFJIHRvb2wgY2FsbHMgbXVzdCBoYXZlIGFuIFwiaWRcIiBmaWVsZC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeSh0b29sQ2FsbC5hcmdzKSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VJbnZhbGlkVG9vbENhbGwoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucmF3VG9vbENhbGwsIGVycm9yTXNnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcmF3VG9vbENhbGwuZnVuY3Rpb24/Lm5hbWUsXG4gICAgICAgIGFyZ3M6IHJhd1Rvb2xDYWxsLmZ1bmN0aW9uPy5hcmd1bWVudHMsXG4gICAgICAgIGlkOiByYXdUb29sQ2FsbC5pZCxcbiAgICAgICAgZXJyb3I6IGVycm9yTXNnLFxuICAgICAgICB0eXBlOiBcImludmFsaWRfdG9vbF9jYWxsXCIsXG4gICAgfTtcbn1cbi8qKlxuICogQ2xhc3MgZm9yIHBhcnNpbmcgdGhlIG91dHB1dCBvZiBhIHRvb2wtY2FsbGluZyBMTE0gaW50byBhIEpTT04gb2JqZWN0LlxuICovXG5leHBvcnQgY2xhc3MgSnNvbk91dHB1dFRvb2xzUGFyc2VyIGV4dGVuZHMgQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJKc29uT3V0cHV0VG9vbHNQYXJzZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVybklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcIm9wZW5haV90b29sc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJldHVybklkID0gZmllbGRzPy5yZXR1cm5JZCA/PyB0aGlzLnJldHVybklkO1xuICAgIH1cbiAgICBfZGlmZigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IHN1cHBvcnRlZC5cIik7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucywgZmFsc2UpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIG91dHB1dCBhbmQgcmV0dXJucyBhIEpTT04gb2JqZWN0LiBJZiBgYXJnc09ubHlgIGlzIHRydWUsXG4gICAgICogb25seSB0aGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGFyZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gZ2VuZXJhdGlvbnMgVGhlIG91dHB1dCBvZiB0aGUgTExNIHRvIHBhcnNlLlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZ1bmN0aW9uIGNhbGwgb3IgaXRzIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMsIHBhcnRpYWwgPSB0cnVlXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdlbmVyYXRpb25zWzBdLm1lc3NhZ2U7XG4gICAgICAgIGxldCB0b29sQ2FsbHM7XG4gICAgICAgIGlmIChpc0FJTWVzc2FnZShtZXNzYWdlKSAmJiBtZXNzYWdlLnRvb2xfY2FsbHM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdG9vbENhbGxzID0gbWVzc2FnZS50b29sX2NhbGxzLm1hcCgodG9vbENhbGwpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlkLCAuLi5yZXN0IH0gPSB0b29sQ2FsbDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmV0dXJuSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfY2FsbHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcmF3VG9vbENhbGxzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfY2FsbHMpKTtcbiAgICAgICAgICAgIHRvb2xDYWxscyA9IHJhd1Rvb2xDYWxscy5tYXAoKHJhd1Rvb2xDYWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlVG9vbENhbGwocmF3VG9vbENhbGwsIHsgcmV0dXJuSWQ6IHRoaXMucmV0dXJuSWQsIHBhcnRpYWwgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRvb2xDYWxscykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFRvb2xDYWxscyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIHRvb2xDYWxscykge1xuICAgICAgICAgICAgaWYgKHRvb2xDYWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrd2FyZHNDb21wYXRpYmxlVG9vbENhbGwgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHRvb2xDYWxsLmFyZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHBhcnNlZFRvb2xDYWxscy5wdXNoKGJhY2t3YXJkc0NvbXBhdGlibGVUb29sQ2FsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZFRvb2xDYWxscztcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYSB0b29sLWNhbGxpbmcgTExNIGludG8gYSBKU09OIG9iamVjdCBpZiB5b3UgYXJlXG4gKiBleHBlY3Rpbmcgb25seSBhIHNpbmdsZSB0b29sIHRvIGJlIGNhbGxlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25PdXRwdXRLZXlUb29sc1BhcnNlciBleHRlbmRzIEpzb25PdXRwdXRUb29sc1BhcnNlciB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkpzb25PdXRwdXRLZXlUb29sc1BhcnNlclwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIocGFyYW1zKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcIm9wZW5haV90b29sc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXR1cm5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0b29sIGNhbGxzIHRvIHJldHVybi4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogV2hldGhlciB0byByZXR1cm4gb25seSB0aGUgZmlyc3QgdG9vbCBjYWxsLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXR1cm5TaW5nbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ6b2RTY2hlbWFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlOYW1lID0gcGFyYW1zLmtleU5hbWU7XG4gICAgICAgIHRoaXMucmV0dXJuU2luZ2xlID0gcGFyYW1zLnJldHVyblNpbmdsZSA/PyB0aGlzLnJldHVyblNpbmdsZTtcbiAgICAgICAgdGhpcy56b2RTY2hlbWEgPSBwYXJhbXMuem9kU2NoZW1hO1xuICAgIH1cbiAgICBhc3luYyBfdmFsaWRhdGVSZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGlmICh0aGlzLnpvZFNjaGVtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHpvZFBhcnNlZFJlc3VsdCA9IGF3YWl0IHRoaXMuem9kU2NoZW1hLnNhZmVQYXJzZUFzeW5jKHJlc3VsdCk7XG4gICAgICAgIGlmICh6b2RQYXJzZWRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHpvZFBhcnNlZFJlc3VsdC5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgRmFpbGVkIHRvIHBhcnNlLiBUZXh0OiBcIiR7SlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKX1cIi4gRXJyb3I6ICR7SlNPTi5zdHJpbmdpZnkoem9kUGFyc2VkUmVzdWx0LmVycm9yLmVycm9ycyl9YCwgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyBwYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLnBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucyk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKChyZXN1bHQpID0+IHJlc3VsdC50eXBlID09PSB0aGlzLmtleU5hbWUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgcmV0dXJuZWRWYWx1ZXMgPSBtYXRjaGluZ1Jlc3VsdHM7XG4gICAgICAgIGlmICghbWF0Y2hpbmdSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucmV0dXJuSWQpIHtcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWVzID0gbWF0Y2hpbmdSZXN1bHRzLm1hcCgocmVzdWx0KSA9PiByZXN1bHQuYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmV0dXJuU2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuZWRWYWx1ZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVybmVkVmFsdWVzO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIHBhcnNlUmVzdWx0KGdlbmVyYXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzdXBlci5wYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdSZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKHJlc3VsdCkgPT4gcmVzdWx0LnR5cGUgPT09IHRoaXMua2V5TmFtZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCByZXR1cm5lZFZhbHVlcyA9IG1hdGNoaW5nUmVzdWx0cztcbiAgICAgICAgaWYgKCFtYXRjaGluZ1Jlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZXR1cm5JZCkge1xuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZXMgPSBtYXRjaGluZ1Jlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdC5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXR1cm5TaW5nbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZVJlc3VsdChyZXR1cm5lZFZhbHVlc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbENhbGxSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocmV0dXJuZWRWYWx1ZXMubWFwKCh2YWx1ZSkgPT4gdGhpcy5fdmFsaWRhdGVSZXN1bHQodmFsdWUpKSk7XG4gICAgICAgIHJldHVybiB0b29sQ2FsbFJlc3VsdHM7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIk91dHB1dFBhcnNlckV4Y2VwdGlvbiIsInBhcnNlUGFydGlhbEpzb24iLCJCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsImlzQUlNZXNzYWdlIiwicGFyc2VUb29sQ2FsbCIsInJhd1Rvb2xDYWxsIiwib3B0aW9ucyIsImZ1bmN0aW9uIiwidW5kZWZpbmVkIiwiZnVuY3Rpb25BcmdzIiwicGFydGlhbCIsImFyZ3VtZW50cyIsImUiLCJKU09OIiwicGFyc2UiLCJuYW1lIiwibWVzc2FnZSIsImpvaW4iLCJwYXJzZWRUb29sQ2FsbCIsImFyZ3MiLCJ0eXBlIiwicmV0dXJuSWQiLCJpZCIsImNvbnZlcnRMYW5nQ2hhaW5Ub29sQ2FsbFRvT3BlbkFJIiwidG9vbENhbGwiLCJFcnJvciIsInN0cmluZ2lmeSIsIm1ha2VJbnZhbGlkVG9vbENhbGwiLCJlcnJvck1zZyIsImVycm9yIiwiSnNvbk91dHB1dFRvb2xzUGFyc2VyIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9kaWZmIiwicGFyc2VSZXN1bHQiLCJnZW5lcmF0aW9ucyIsInJlc3VsdCIsInBhcnNlUGFydGlhbFJlc3VsdCIsInRvb2xDYWxscyIsInRvb2xfY2FsbHMiLCJsZW5ndGgiLCJtYXAiLCJyZXN0IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyYXdUb29sQ2FsbHMiLCJwYXJzZWRUb29sQ2FsbHMiLCJiYWNrd2FyZHNDb21wYXRpYmxlVG9vbENhbGwiLCJwdXNoIiwiSnNvbk91dHB1dEtleVRvb2xzUGFyc2VyIiwicGFyYW1zIiwia2V5TmFtZSIsInJldHVyblNpbmdsZSIsInpvZFNjaGVtYSIsIl92YWxpZGF0ZVJlc3VsdCIsInpvZFBhcnNlZFJlc3VsdCIsInNhZmVQYXJzZUFzeW5jIiwic3VjY2VzcyIsImRhdGEiLCJlcnJvcnMiLCJyZXN1bHRzIiwibWF0Y2hpbmdSZXN1bHRzIiwiZmlsdGVyIiwicmV0dXJuZWRWYWx1ZXMiLCJ0b29sQ2FsbFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/json_output_tools_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/string.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StringOutputParser: () => (/* binding */ StringOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n *\n * const chain = RunnableSequence.from([\n *   promptTemplate,\n *   new ChatOpenAI({}),\n *   new StringOutputParser(),\n * ]);\n *\n * const result = await chain.invoke({ topic: \"bears\" });\n * console.log(\"What do you call a bear with no teeth? A gummy bear!\");\n * ```\n */ class StringOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"string\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"StrOutputParser\";\n    }\n    /**\n     * Parses a string output from an LLM call. This method is meant to be\n     * implemented by subclasses to define how a string output from an LLM\n     * should be parsed.\n     * @param text The string output from an LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parse(text) {\n        return Promise.resolve(text);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n    _textContentToString(content) {\n        return content.text;\n    }\n    _imageUrlContentToString(_content) {\n        throw new Error(`Cannot coerce a multimodal \"image_url\" message part into a string.`);\n    }\n    _messageContentComplexToString(content) {\n        switch(content.type){\n            case \"text\":\n            case \"text_delta\":\n                if (\"text\" in content) {\n                    // Type guard for MessageContentText\n                    return this._textContentToString(content);\n                }\n                break;\n            case \"image_url\":\n                if (\"image_url\" in content) {\n                    // Type guard for MessageContentImageUrl\n                    return this._imageUrlContentToString(content);\n                }\n                break;\n            default:\n                throw new Error(`Cannot coerce \"${content.type}\" message part into a string.`);\n        }\n        throw new Error(`Invalid content type: ${content.type}`);\n    }\n    _baseMessageContentToString(content) {\n        return content.reduce((acc, item)=>acc + this._messageContentComplexToString(item), \"\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEO0FBQzNEOzs7Ozs7Ozs7Ozs7Ozs7OztDQWlCQyxHQUNNLE1BQU1DLDJCQUEyQkQsb0VBQXlCQTtJQUM3REUsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFrQjthQUFTO1FBQ3pEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBLE9BQU9DLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQTs7Ozs7OztLQU9DLEdBQ0RDLE1BQU1DLElBQUksRUFBRTtRQUNSLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQ0Y7SUFDM0I7SUFDQUcsd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtJQUNBQyxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPQSxRQUFRTCxJQUFJO0lBQ3ZCO0lBQ0FNLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGtFQUFrRSxDQUFDO0lBQ3hGO0lBQ0FDLCtCQUErQkosT0FBTyxFQUFFO1FBQ3BDLE9BQVFBLFFBQVFLLElBQUk7WUFDaEIsS0FBSztZQUNMLEtBQUs7Z0JBQ0QsSUFBSSxVQUFVTCxTQUFTO29CQUNuQixvQ0FBb0M7b0JBQ3BDLE9BQU8sSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQ0M7Z0JBQ3JDO2dCQUNBO1lBQ0osS0FBSztnQkFDRCxJQUFJLGVBQWVBLFNBQVM7b0JBQ3hCLHdDQUF3QztvQkFDeEMsT0FBTyxJQUFJLENBQUNDLHdCQUF3QixDQUFDRDtnQkFDekM7Z0JBQ0E7WUFDSjtnQkFDSSxNQUFNLElBQUlHLE1BQU0sQ0FBQyxlQUFlLEVBQUVILFFBQVFLLElBQUksQ0FBQyw2QkFBNkIsQ0FBQztRQUNyRjtRQUNBLE1BQU0sSUFBSUYsTUFBTSxDQUFDLHNCQUFzQixFQUFFSCxRQUFRSyxJQUFJLENBQUMsQ0FBQztJQUMzRDtJQUNBQyw0QkFBNEJOLE9BQU8sRUFBRTtRQUNqQyxPQUFPQSxRQUFRTyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsT0FBU0QsTUFBTSxJQUFJLENBQUNKLDhCQUE4QixDQUFDSyxPQUFPO0lBQzFGO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RyaW5nLmpzPzZiMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuLyoqXG4gKiBPdXRwdXRQYXJzZXIgdGhhdCBwYXJzZXMgTExNUmVzdWx0IGludG8gdGhlIHRvcCBsaWtlbHkgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKlxuICogY29uc3QgY2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICogICBwcm9tcHRUZW1wbGF0ZSxcbiAqICAgbmV3IENoYXRPcGVuQUkoe30pLFxuICogICBuZXcgU3RyaW5nT3V0cHV0UGFyc2VyKCksXG4gKiBdKTtcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyc1wiIH0pO1xuICogY29uc29sZS5sb2coXCJXaGF0IGRvIHlvdSBjYWxsIGEgYmVhciB3aXRoIG5vIHRlZXRoPyBBIGd1bW15IGJlYXIhXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwic3RyaW5nXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgc3RyaW5nIG91dHB1dCBmcm9tIGFuIExMTSBjYWxsLiBUaGlzIG1ldGhvZCBpcyBtZWFudCB0byBiZVxuICAgICAqIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMgdG8gZGVmaW5lIGhvdyBhIHN0cmluZyBvdXRwdXQgZnJvbSBhbiBMTE1cbiAgICAgKiBzaG91bGQgYmUgcGFyc2VkLlxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSBzdHJpbmcgb3V0cHV0IGZyb20gYW4gTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBPcHRpb25hbCBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIHBhcnNlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0ZXh0KTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgX3RleHRDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC50ZXh0O1xuICAgIH1cbiAgICBfaW1hZ2VVcmxDb250ZW50VG9TdHJpbmcoX2NvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29lcmNlIGEgbXVsdGltb2RhbCBcImltYWdlX3VybFwiIG1lc3NhZ2UgcGFydCBpbnRvIGEgc3RyaW5nLmApO1xuICAgIH1cbiAgICBfbWVzc2FnZUNvbnRlbnRDb21wbGV4VG9TdHJpbmcoY29udGVudCkge1xuICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0X2RlbHRhXCI6XG4gICAgICAgICAgICAgICAgaWYgKFwidGV4dFwiIGluIGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHlwZSBndWFyZCBmb3IgTWVzc2FnZUNvbnRlbnRUZXh0XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXh0Q29udGVudFRvU3RyaW5nKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJpbWFnZV91cmxcIjpcbiAgICAgICAgICAgICAgICBpZiAoXCJpbWFnZV91cmxcIiBpbiBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFR5cGUgZ3VhcmQgZm9yIE1lc3NhZ2VDb250ZW50SW1hZ2VVcmxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29lcmNlIFwiJHtjb250ZW50LnR5cGV9XCIgbWVzc2FnZSBwYXJ0IGludG8gYSBzdHJpbmcuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNvbnRlbnQgdHlwZTogJHtjb250ZW50LnR5cGV9YCk7XG4gICAgfVxuICAgIF9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyhjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBjb250ZW50LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MgKyB0aGlzLl9tZXNzYWdlQ29udGVudENvbXBsZXhUb1N0cmluZyhpdGVtKSwgXCJcIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIiLCJTdHJpbmdPdXRwdXRQYXJzZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19uYW1lIiwicGFyc2UiLCJ0ZXh0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRGb3JtYXRJbnN0cnVjdGlvbnMiLCJfdGV4dENvbnRlbnRUb1N0cmluZyIsImNvbnRlbnQiLCJfaW1hZ2VVcmxDb250ZW50VG9TdHJpbmciLCJfY29udGVudCIsIkVycm9yIiwiX21lc3NhZ2VDb250ZW50Q29tcGxleFRvU3RyaW5nIiwidHlwZSIsIl9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyIsInJlZHVjZSIsImFjYyIsIml0ZW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/structured.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* binding */ AsymmetricStructuredOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* binding */ JsonMarkdownStructuredOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* binding */ StructuredOutputParser)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n\n\n\nclass StructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    static lc_name() {\n        return \"StructuredOutputParser\";\n    }\n    toJSON() {\n        return this.toJSONNotImplemented();\n    }\n    constructor(schema){\n        super(schema);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"output_parsers\",\n                \"structured\"\n            ]\n        });\n    }\n    /**\n     * Creates a new StructuredOutputParser from a Zod schema.\n     * @param schema The Zod schema which the output should match\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    /**\n     * Creates a new StructuredOutputParser from a set of names and\n     * descriptions.\n     * @param schemas An object where each key is a name and each value is a description\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n    /**\n     * Returns a markdown code snippet with a JSON object formatted according\n     * to the schema.\n     * @param options Optional. The options for formatting the instructions\n     * @returns A markdown code snippet with a JSON object formatted according to the schema.\n     */ getFormatInstructions() {\n        return `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify((0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(this.schema))}\n\\`\\`\\`\n`;\n    }\n    /**\n     * Parses the given text according to the schema.\n     * @param text The text to parse\n     * @returns The parsed output.\n     */ async parse(text) {\n        try {\n            const json = text.includes(\"```\") ? text.trim().split(/```(?:json)?/)[1] : text.trim();\n            const escapedJson = json.replace(/\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, (_match, capturedGroup)=>{\n                const escapedInsideQuotes = capturedGroup.replace(/\\n/g, \"\\\\n\");\n                return `\"${escapedInsideQuotes}\"`;\n            }).replace(/\\n/g, \"\");\n            return await this.schema.parseAsync(JSON.parse(escapedJson));\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_1__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n    }\n}\n/**\n * A specific type of `StructuredOutputParser` that parses JSON data\n * formatted as a markdown code snippet.\n */ class JsonMarkdownStructuredOutputParser extends StructuredOutputParser {\n    static lc_name() {\n        return \"JsonMarkdownStructuredOutputParser\";\n    }\n    getFormatInstructions(options) {\n        const interpolationDepth = options?.interpolationDepth ?? 1;\n        if (interpolationDepth < 1) {\n            throw new Error(\"f string interpolation depth must be at least 1\");\n        }\n        return `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction((0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(this.schema)).replaceAll(\"{\", \"{\".repeat(interpolationDepth)).replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n    }\n    _schemaToInstruction(schemaInput, indent = 2) {\n        const schema = schemaInput;\n        if (\"type\" in schema) {\n            let nullable = false;\n            let type;\n            if (Array.isArray(schema.type)) {\n                const nullIdx = schema.type.findIndex((type)=>type === \"null\");\n                if (nullIdx !== -1) {\n                    nullable = true;\n                    schema.type.splice(nullIdx, 1);\n                }\n                type = schema.type.join(\" | \");\n            } else {\n                type = schema.type;\n            }\n            if (schema.type === \"object\" && schema.properties) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                const properties = Object.entries(schema.properties).map(([key, value])=>{\n                    const isOptional = schema.required?.includes(key) ? \"\" : \" (optional)\";\n                    return `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n                }).join(\"\\n\");\n                return `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description}`;\n            }\n            if (schema.type === \"array\" && schema.items) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                return `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description}`;\n            }\n            const isNullable = nullable ? \" (nullable)\" : \"\";\n            const description = schema.description ? ` // ${schema.description}` : \"\";\n            return `${type}${description}${isNullable}`;\n        }\n        if (\"anyOf\" in schema) {\n            return schema.anyOf.map((s)=>this._schemaToInstruction(s, indent)).join(`\\n${\" \".repeat(indent - 2)}`);\n        }\n        throw new Error(\"unsupported schema type\");\n    }\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n}\n/**\n * A type of `StructuredOutputParser` that handles asymmetric input and\n * output schemas.\n */ class AsymmetricStructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    constructor({ inputSchema }){\n        super(...arguments);\n        Object.defineProperty(this, \"structuredInputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n    }\n    async parse(text) {\n        let parsedInput;\n        try {\n            parsedInput = await this.structuredInputParser.parse(text);\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_1__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n        return this.outputProcessor(parsedInput);\n    }\n    getFormatInstructions() {\n        return this.structuredInputParser.getFormatInstructions();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFDOEI7QUFDZTtBQUM5RCxNQUFNSSwrQkFBK0JGLHNEQUFnQkE7SUFDeEQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxTQUFTO1FBQ0wsT0FBTyxJQUFJLENBQUNDLG9CQUFvQjtJQUNwQztJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9OO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQWtCO2FBQWE7UUFDeEQ7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPQyxjQUFjUCxNQUFNLEVBQUU7UUFDekIsT0FBTyxJQUFJLElBQUksQ0FBQ0E7SUFDcEI7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9RLHlCQUF5QkMsT0FBTyxFQUFFO1FBQ3JDLE1BQU1DLFlBQVluQixrQ0FBQ0EsQ0FBQ29CLE1BQU0sQ0FBQ1YsT0FBT1csV0FBVyxDQUFDWCxPQUFPWSxPQUFPLENBQUNKLFNBQVNLLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU1DLFlBQVksR0FBSztnQkFBQ0Q7Z0JBQU14QixrQ0FBQ0EsQ0FBQzBCLE1BQU0sR0FBR0MsUUFBUSxDQUFDRjthQUFhO1FBQzNJLE9BQU8sSUFBSSxJQUFJLENBQUNOO0lBQ3BCO0lBQ0E7Ozs7O0tBS0MsR0FDRFMsd0JBQXdCO1FBQ3BCLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7O0FBWWhCLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQzdCLG1FQUFlQSxD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LENBQUMsQ0FBQyxDQUFDQyxNQUFNQyxZQUFZLEdBQUs7Z0JBQUNEO2dCQUFNeEIsa0NBQUNBLENBQUMwQixNQUFNLEdBQUdDLFFBQVEsQ0FBQ0Y7YUFBYTtRQUMzSSxPQUFPLElBQUksSUFBSSxDQUFDTjtJQUNwQjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTWtELHlDQUF5Q25FLHNEQUFnQkE7SUFDbEVNLFlBQVksRUFBRThELFdBQVcsRUFBRSxDQUFFO1FBQ3pCLEtBQUssSUFBSUM7UUFDVDdELE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUseUJBQXlCO1lBQ2pEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUN5RCxxQkFBcUIsR0FBRyxJQUFJNUIsbUNBQW1DMEI7SUFDeEU7SUFDQSxNQUFNdkMsTUFBTUMsSUFBSSxFQUFFO1FBQ2QsSUFBSXlDO1FBQ0osSUFBSTtZQUNBQSxjQUFjLE1BQU0sSUFBSSxDQUFDRCxxQkFBcUIsQ0FBQ3pDLEtBQUssQ0FBQ0M7UUFDekQsRUFDQSxPQUFPVyxHQUFHO1lBQ04sTUFBTSxJQUFJeEMsMkRBQXFCQSxDQUFDLENBQUMsd0JBQXdCLEVBQUU2QixLQUFLLFVBQVUsRUFBRVcsRUFBRSxDQUFDLEVBQUVYO1FBQ3JGO1FBQ0EsT0FBTyxJQUFJLENBQUMwQyxlQUFlLENBQUNEO0lBQ2hDO0lBQ0E3Qyx3QkFBd0I7UUFDcEIsT0FBTyxJQUFJLENBQUM0QyxxQkFBcUIsQ0FBQzVDLHFCQUFxQjtJQUMzRDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3N0cnVjdHVyZWQuanM/NGY1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hLCB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IEJhc2VPdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgU3RydWN0dXJlZE91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VPdXRwdXRQYXJzZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc2NoZW1hKSB7XG4gICAgICAgIHN1cGVyKHNjaGVtYSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogc2NoZW1hXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpblwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwic3RydWN0dXJlZFwiXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGZyb20gYSBab2Qgc2NoZW1hLlxuICAgICAqIEBwYXJhbSBzY2hlbWEgVGhlIFpvZCBzY2hlbWEgd2hpY2ggdGhlIG91dHB1dCBzaG91bGQgbWF0Y2hcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tWm9kU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoc2NoZW1hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGZyb20gYSBzZXQgb2YgbmFtZXMgYW5kXG4gICAgICogZGVzY3JpcHRpb25zLlxuICAgICAqIEBwYXJhbSBzY2hlbWFzIEFuIG9iamVjdCB3aGVyZSBlYWNoIGtleSBpcyBhIG5hbWUgYW5kIGVhY2ggdmFsdWUgaXMgYSBkZXNjcmlwdGlvblxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21OYW1lc0FuZERlc2NyaXB0aW9ucyhzY2hlbWFzKSB7XG4gICAgICAgIGNvbnN0IHpvZFNjaGVtYSA9IHoub2JqZWN0KE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWFzKS5tYXAoKFtuYW1lLCBkZXNjcmlwdGlvbl0pID0+IFtuYW1lLCB6LnN0cmluZygpLmRlc2NyaWJlKGRlc2NyaXB0aW9uKV0pKSk7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh6b2RTY2hlbWEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbWFya2Rvd24gY29kZSBzbmlwcGV0IHdpdGggYSBKU09OIG9iamVjdCBmb3JtYXR0ZWQgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbC4gVGhlIG9wdGlvbnMgZm9yIGZvcm1hdHRpbmcgdGhlIGluc3RydWN0aW9uc1xuICAgICAqIEByZXR1cm5zIEEgbWFya2Rvd24gY29kZSBzbmlwcGV0IHdpdGggYSBKU09OIG9iamVjdCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzY2hlbWEuXG4gICAgICovXG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdSBtdXN0IGZvcm1hdCB5b3VyIG91dHB1dCBhcyBhIEpTT04gdmFsdWUgdGhhdCBhZGhlcmVzIHRvIGEgZ2l2ZW4gXCJKU09OIFNjaGVtYVwiIGluc3RhbmNlLlxuXG5cIkpTT04gU2NoZW1hXCIgaXMgYSBkZWNsYXJhdGl2ZSBsYW5ndWFnZSB0aGF0IGFsbG93cyB5b3UgdG8gYW5ub3RhdGUgYW5kIHZhbGlkYXRlIEpTT04gZG9jdW1lbnRzLlxuXG5Gb3IgZXhhbXBsZSwgdGhlIGV4YW1wbGUgXCJKU09OIFNjaGVtYVwiIGluc3RhbmNlIHt7XCJwcm9wZXJ0aWVzXCI6IHt7XCJmb29cIjoge3tcImRlc2NyaXB0aW9uXCI6IFwiYSBsaXN0IG9mIHRlc3Qgd29yZHNcIiwgXCJ0eXBlXCI6IFwiYXJyYXlcIiwgXCJpdGVtc1wiOiB7e1widHlwZVwiOiBcInN0cmluZ1wifX19fX19LCBcInJlcXVpcmVkXCI6IFtcImZvb1wiXX19fX1cbndvdWxkIG1hdGNoIGFuIG9iamVjdCB3aXRoIG9uZSByZXF1aXJlZCBwcm9wZXJ0eSwgXCJmb29cIi4gVGhlIFwidHlwZVwiIHByb3BlcnR5IHNwZWNpZmllcyBcImZvb1wiIG11c3QgYmUgYW4gXCJhcnJheVwiLCBhbmQgdGhlIFwiZGVzY3JpcHRpb25cIiBwcm9wZXJ0eSBzZW1hbnRpY2FsbHkgZGVzY3JpYmVzIGl0IGFzIFwiYSBsaXN0IG9mIHRlc3Qgd29yZHNcIi4gVGhlIGl0ZW1zIHdpdGhpbiBcImZvb1wiIG11c3QgYmUgc3RyaW5ncy5cblRodXMsIHRoZSBvYmplY3Qge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fSBpcyBhIHdlbGwtZm9ybWF0dGVkIGluc3RhbmNlIG9mIHRoaXMgZXhhbXBsZSBcIkpTT04gU2NoZW1hXCIuIFRoZSBvYmplY3Qge3tcInByb3BlcnRpZXNcIjoge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fX19IGlzIG5vdCB3ZWxsLWZvcm1hdHRlZC5cblxuWW91ciBvdXRwdXQgd2lsbCBiZSBwYXJzZWQgYW5kIHR5cGUtY2hlY2tlZCBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIHNjaGVtYSBpbnN0YW5jZSwgc28gbWFrZSBzdXJlIGFsbCBmaWVsZHMgaW4geW91ciBvdXRwdXQgbWF0Y2ggdGhlIHNjaGVtYSBleGFjdGx5IGFuZCB0aGVyZSBhcmUgbm8gdHJhaWxpbmcgY29tbWFzIVxuXG5IZXJlIGlzIHRoZSBKU09OIFNjaGVtYSBpbnN0YW5jZSB5b3VyIG91dHB1dCBtdXN0IGFkaGVyZSB0by4gSW5jbHVkZSB0aGUgZW5jbG9zaW5nIG1hcmtkb3duIGNvZGVibG9jazpcblxcYFxcYFxcYGpzb25cbiR7SlNPTi5zdHJpbmdpZnkoem9kVG9Kc29uU2NoZW1hKHRoaXMuc2NoZW1hKSl9XG5cXGBcXGBcXGBcbmA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gdGV4dCBhY2NvcmRpbmcgdG8gdGhlIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBwYXJzZVxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb24gPSB0ZXh0LmluY2x1ZGVzKFwiYGBgXCIpXG4gICAgICAgICAgICAgICAgPyB0ZXh0LnRyaW0oKS5zcGxpdCgvYGBgKD86anNvbik/LylbMV1cbiAgICAgICAgICAgICAgICA6IHRleHQudHJpbSgpO1xuICAgICAgICAgICAgY29uc3QgZXNjYXBlZEpzb24gPSBqc29uXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wiKFteXCJcXFxcXSooXFxcXC5bXlwiXFxcXF0qKSopXCIvZywgKF9tYXRjaCwgY2FwdHVyZWRHcm91cCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRJbnNpZGVRdW90ZXMgPSBjYXB0dXJlZEdyb3VwLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgXCIke2VzY2FwZWRJbnNpZGVRdW90ZXN9XCJgO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxuL2csIFwiXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2NoZW1hLnBhcnNlQXN5bmMoSlNPTi5wYXJzZShlc2NhcGVkSnNvbikpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBGYWlsZWQgdG8gcGFyc2UuIFRleHQ6IFwiJHt0ZXh0fVwiLiBFcnJvcjogJHtlfWAsIHRleHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIHNwZWNpZmljIHR5cGUgb2YgYFN0cnVjdHVyZWRPdXRwdXRQYXJzZXJgIHRoYXQgcGFyc2VzIEpTT04gZGF0YVxuICogZm9ybWF0dGVkIGFzIGEgbWFya2Rvd24gY29kZSBzbmlwcGV0LlxuICovXG5leHBvcnQgY2xhc3MgSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlciBleHRlbmRzIFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGludGVycG9sYXRpb25EZXB0aCA9IG9wdGlvbnM/LmludGVycG9sYXRpb25EZXB0aCA/PyAxO1xuICAgICAgICBpZiAoaW50ZXJwb2xhdGlvbkRlcHRoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZiBzdHJpbmcgaW50ZXJwb2xhdGlvbiBkZXB0aCBtdXN0IGJlIGF0IGxlYXN0IDFcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBSZXR1cm4gYSBtYXJrZG93biBjb2RlIHNuaXBwZXQgd2l0aCBhIEpTT04gb2JqZWN0IGZvcm1hdHRlZCB0byBsb29rIGxpa2U6XFxuXFxgXFxgXFxganNvblxcbiR7dGhpcy5fc2NoZW1hVG9JbnN0cnVjdGlvbih6b2RUb0pzb25TY2hlbWEodGhpcy5zY2hlbWEpKVxuICAgICAgICAgICAgLnJlcGxhY2VBbGwoXCJ7XCIsIFwie1wiLnJlcGVhdChpbnRlcnBvbGF0aW9uRGVwdGgpKVxuICAgICAgICAgICAgLnJlcGxhY2VBbGwoXCJ9XCIsIFwifVwiLnJlcGVhdChpbnRlcnBvbGF0aW9uRGVwdGgpKX1cXG5cXGBcXGBcXGBgO1xuICAgIH1cbiAgICBfc2NoZW1hVG9JbnN0cnVjdGlvbihzY2hlbWFJbnB1dCwgaW5kZW50ID0gMikge1xuICAgICAgICBjb25zdCBzY2hlbWEgPSBzY2hlbWFJbnB1dDtcbiAgICAgICAgaWYgKFwidHlwZVwiIGluIHNjaGVtYSkge1xuICAgICAgICAgICAgbGV0IG51bGxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgdHlwZTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNjaGVtYS50eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bGxJZHggPSBzY2hlbWEudHlwZS5maW5kSW5kZXgoKHR5cGUpID0+IHR5cGUgPT09IFwibnVsbFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbElkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVsbGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWEudHlwZS5zcGxpY2UobnVsbElkeCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHR5cGUgPSBzY2hlbWEudHlwZS5qb2luKFwiIHwgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHlwZSA9IHNjaGVtYS50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjaGVtYS50eXBlID09PSBcIm9iamVjdFwiICYmIHNjaGVtYS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzY2hlbWEuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgPyBgIC8vICR7c2NoZW1hLmRlc2NyaXB0aW9ufWBcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBPYmplY3QuZW50cmllcyhzY2hlbWEucHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzT3B0aW9uYWwgPSBzY2hlbWEucmVxdWlyZWQ/LmluY2x1ZGVzKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIiAob3B0aW9uYWwpXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtcIiBcIi5yZXBlYXQoaW5kZW50KX1cIiR7a2V5fVwiOiAke3RoaXMuX3NjaGVtYVRvSW5zdHJ1Y3Rpb24odmFsdWUsIGluZGVudCArIDIpfSR7aXNPcHRpb25hbH1gO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBge1xcbiR7cHJvcGVydGllc31cXG4ke1wiIFwiLnJlcGVhdChpbmRlbnQgLSAyKX19JHtkZXNjcmlwdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjaGVtYS50eXBlID09PSBcImFycmF5XCIgJiYgc2NoZW1hLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzY2hlbWEuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgPyBgIC8vICR7c2NoZW1hLmRlc2NyaXB0aW9ufWBcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBgYXJyYXlbXFxuJHtcIiBcIi5yZXBlYXQoaW5kZW50KX0ke3RoaXMuX3NjaGVtYVRvSW5zdHJ1Y3Rpb24oc2NoZW1hLml0ZW1zLCBpbmRlbnQgKyAyKX1cXG4ke1wiIFwiLnJlcGVhdChpbmRlbnQgLSAyKX1dICR7ZGVzY3JpcHRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlzTnVsbGFibGUgPSBudWxsYWJsZSA/IFwiIChudWxsYWJsZSlcIiA6IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHNjaGVtYS5kZXNjcmlwdGlvbiA/IGAgLy8gJHtzY2hlbWEuZGVzY3JpcHRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICByZXR1cm4gYCR7dHlwZX0ke2Rlc2NyaXB0aW9ufSR7aXNOdWxsYWJsZX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImFueU9mXCIgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLmFueU9mXG4gICAgICAgICAgICAgICAgLm1hcCgocykgPT4gdGhpcy5fc2NoZW1hVG9JbnN0cnVjdGlvbihzLCBpbmRlbnQpKVxuICAgICAgICAgICAgICAgIC5qb2luKGBcXG4ke1wiIFwiLnJlcGVhdChpbmRlbnQgLSAyKX1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBzY2hlbWEgdHlwZVwiKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21ab2RTY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhzY2hlbWEpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWVzQW5kRGVzY3JpcHRpb25zKHNjaGVtYXMpIHtcbiAgICAgICAgY29uc3Qgem9kU2NoZW1hID0gei5vYmplY3QoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHNjaGVtYXMpLm1hcCgoW25hbWUsIGRlc2NyaXB0aW9uXSkgPT4gW25hbWUsIHouc3RyaW5nKCkuZGVzY3JpYmUoZGVzY3JpcHRpb24pXSkpKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHpvZFNjaGVtYSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHR5cGUgb2YgYFN0cnVjdHVyZWRPdXRwdXRQYXJzZXJgIHRoYXQgaGFuZGxlcyBhc3ltbWV0cmljIGlucHV0IGFuZFxuICogb3V0cHV0IHNjaGVtYXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBc3ltbWV0cmljU3RydWN0dXJlZE91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgaW5wdXRTY2hlbWEgfSkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJ1Y3R1cmVkSW5wdXRQYXJzZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmVkSW5wdXRQYXJzZXIgPSBuZXcgSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlcihpbnB1dFNjaGVtYSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgbGV0IHBhcnNlZElucHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkSW5wdXQgPSBhd2FpdCB0aGlzLnN0cnVjdHVyZWRJbnB1dFBhcnNlci5wYXJzZSh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgRmFpbGVkIHRvIHBhcnNlLiBUZXh0OiBcIiR7dGV4dH1cIi4gRXJyb3I6ICR7ZX1gLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRQcm9jZXNzb3IocGFyc2VkSW5wdXQpO1xuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cnVjdHVyZWRJbnB1dFBhcnNlci5nZXRGb3JtYXRJbnN0cnVjdGlvbnMoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsieiIsInpvZFRvSnNvblNjaGVtYSIsIkJhc2VPdXRwdXRQYXJzZXIiLCJPdXRwdXRQYXJzZXJFeGNlcHRpb24iLCJTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIiwibGNfbmFtZSIsInRvSlNPTiIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiY29uc3RydWN0b3IiLCJzY2hlbWEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZnJvbVpvZFNjaGVtYSIsImZyb21OYW1lc0FuZERlc2NyaXB0aW9ucyIsInNjaGVtYXMiLCJ6b2RTY2hlbWEiLCJvYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJtYXAiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJzdHJpbmciLCJkZXNjcmliZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsInRleHQiLCJqc29uIiwiaW5jbHVkZXMiLCJ0cmltIiwic3BsaXQiLCJlc2NhcGVkSnNvbiIsInJlcGxhY2UiLCJfbWF0Y2giLCJjYXB0dXJlZEdyb3VwIiwiZXNjYXBlZEluc2lkZVF1b3RlcyIsInBhcnNlQXN5bmMiLCJlIiwiSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlciIsIm9wdGlvbnMiLCJpbnRlcnBvbGF0aW9uRGVwdGgiLCJFcnJvciIsIl9zY2hlbWFUb0luc3RydWN0aW9uIiwicmVwbGFjZUFsbCIsInJlcGVhdCIsInNjaGVtYUlucHV0IiwiaW5kZW50IiwibnVsbGFibGUiLCJ0eXBlIiwiQXJyYXkiLCJpc0FycmF5IiwibnVsbElkeCIsImZpbmRJbmRleCIsInNwbGljZSIsImpvaW4iLCJwcm9wZXJ0aWVzIiwia2V5IiwiaXNPcHRpb25hbCIsInJlcXVpcmVkIiwiaXRlbXMiLCJpc051bGxhYmxlIiwiYW55T2YiLCJzIiwiQXN5bW1ldHJpY1N0cnVjdHVyZWRPdXRwdXRQYXJzZXIiLCJpbnB1dFNjaGVtYSIsImFyZ3VtZW50cyIsInN0cnVjdHVyZWRJbnB1dFBhcnNlciIsInBhcnNlZElucHV0Iiwib3V0cHV0UHJvY2Vzc29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/transform.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* binding */ BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* binding */ BaseTransformOutputParser)\n/* harmony export */ });\n/* harmony import */ var _cfworker_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cfworker/json-schema */ \"(rsc)/./node_modules/@cfworker/json-schema/dist/esm/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _messages_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\n\n/**\n * Class to parse the output of an LLM call that also allows streaming inputs.\n */ class BaseTransformOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    async *_transform(inputGenerator) {\n        for await (const chunk of inputGenerator){\n            if (typeof chunk === \"string\") {\n                yield this.parseResult([\n                    {\n                        text: chunk\n                    }\n                ]);\n            } else {\n                yield this.parseResult([\n                    {\n                        message: chunk,\n                        text: this._baseMessageToString(chunk)\n                    }\n                ]);\n            }\n        }\n    }\n    /**\n     * Transforms an asynchronous generator of input into an asynchronous\n     * generator of parsed output.\n     * @param inputGenerator An asynchronous generator of input.\n     * @param options A configuration object.\n     * @returns An asynchronous generator of parsed output.\n     */ async *transform(inputGenerator, options) {\n        yield* this._transformStreamWithConfig(inputGenerator, this._transform.bind(this), {\n            ...options,\n            runType: \"parser\"\n        });\n    }\n}\n/**\n * A base class for output parsers that can handle streaming input. It\n * extends the `BaseTransformOutputParser` class and provides a method for\n * converting parsed outputs into a diff format.\n */ class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"diff\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.diff = fields?.diff ?? this.diff;\n    }\n    async *_transform(inputGenerator) {\n        let prevParsed;\n        let accGen;\n        for await (const chunk of inputGenerator){\n            if (typeof chunk !== \"string\" && typeof chunk.content !== \"string\") {\n                throw new Error(\"Cannot handle non-string output.\");\n            }\n            let chunkGen;\n            if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessageChunk)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.ChatGenerationChunk({\n                    message: chunk,\n                    text: chunk.content\n                });\n            } else if ((0,_messages_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.ChatGenerationChunk({\n                    message: (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertToChunk)(chunk),\n                    text: chunk.content\n                });\n            } else {\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_4__.GenerationChunk({\n                    text: chunk\n                });\n            }\n            if (accGen === undefined) {\n                accGen = chunkGen;\n            } else {\n                accGen = accGen.concat(chunkGen);\n            }\n            const parsed = await this.parsePartialResult([\n                accGen\n            ]);\n            if (parsed !== undefined && parsed !== null && !(0,_cfworker_json_schema__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict)(parsed, prevParsed)) {\n                if (this.diff) {\n                    yield this._diff(prevParsed, parsed);\n                } else {\n                    yield parsed;\n                }\n                prevParsed = parsed;\n            }\n        }\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEQ7QUFDYjtBQUM0QjtBQUNuQjtBQUNnQjtBQUN0RTs7Q0FFQyxHQUNNLE1BQU1PLGtDQUFrQ04sc0RBQWdCQTtJQUMzRCxPQUFPTyxXQUFXQyxjQUFjLEVBQUU7UUFDOUIsV0FBVyxNQUFNQyxTQUFTRCxlQUFnQjtZQUN0QyxJQUFJLE9BQU9DLFVBQVUsVUFBVTtnQkFDM0IsTUFBTSxJQUFJLENBQUNDLFdBQVcsQ0FBQztvQkFBQzt3QkFBRUMsTUFBTUY7b0JBQU07aUJBQUU7WUFDNUMsT0FDSztnQkFDRCxNQUFNLElBQUksQ0FBQ0MsV0FBVyxDQUFDO29CQUNuQjt3QkFDSUUsU0FBU0g7d0JBQ1RFLE1BQU0sSUFBSSxDQUFDRSxvQkFBb0IsQ0FBQ0o7b0JBQ3BDO2lCQUNIO1lBQ0w7UUFDSjtJQUNKO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsT0FBT0ssVUFBVU4sY0FBYyxFQUFFTyxPQUFPLEVBQUU7UUFDdEMsT0FBTyxJQUFJLENBQUNDLDBCQUEwQixDQUFDUixnQkFBZ0IsSUFBSSxDQUFDRCxVQUFVLENBQUNVLElBQUksQ0FBQyxJQUFJLEdBQUc7WUFDL0UsR0FBR0YsT0FBTztZQUNWRyxTQUFTO1FBQ2I7SUFDSjtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLE1BQU1DLDRDQUE0Q2I7SUFDckRjLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLFFBQVFPLFFBQVEsSUFBSSxDQUFDQSxJQUFJO0lBQ3pDO0lBQ0EsT0FBT3JCLFdBQVdDLGNBQWMsRUFBRTtRQUM5QixJQUFJcUI7UUFDSixJQUFJQztRQUNKLFdBQVcsTUFBTXJCLFNBQVNELGVBQWdCO1lBQ3RDLElBQUksT0FBT0MsVUFBVSxZQUFZLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtnQkFDaEUsTUFBTSxJQUFJQyxNQUFNO1lBQ3BCO1lBQ0EsSUFBSUM7WUFDSixJQUFJL0IscUVBQWtCQSxDQUFDTyxRQUFRO2dCQUMzQixJQUFJLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtvQkFDbkMsTUFBTSxJQUFJQyxNQUFNO2dCQUNwQjtnQkFDQUMsV0FBVyxJQUFJNUIsNERBQW1CQSxDQUFDO29CQUMvQk8sU0FBU0g7b0JBQ1RFLE1BQU1GLE1BQU1zQixPQUFPO2dCQUN2QjtZQUNKLE9BQ0ssSUFBSTlCLGdFQUFhQSxDQUFDUSxRQUFRO2dCQUMzQixJQUFJLE9BQU9BLE1BQU1zQixPQUFPLEtBQUssVUFBVTtvQkFDbkMsTUFBTSxJQUFJQyxNQUFNO2dCQUNwQjtnQkFDQUMsV0FBVyxJQUFJNUIsNERBQW1CQSxDQUFDO29CQUMvQk8sU0FBU1Qsa0VBQWNBLENBQUNNO29CQUN4QkUsTUFBTUYsTUFBTXNCLE9BQU87Z0JBQ3ZCO1lBQ0osT0FDSztnQkFDREUsV0FBVyxJQUFJN0Isd0RBQWVBLENBQUM7b0JBQUVPLE1BQU1GO2dCQUFNO1lBQ2pEO1lBQ0EsSUFBSXFCLFdBQVdJLFdBQVc7Z0JBQ3RCSixTQUFTRztZQUNiLE9BQ0s7Z0JBQ0RILFNBQVNBLE9BQU9LLE1BQU0sQ0FBQ0Y7WUFDM0I7WUFDQSxNQUFNRyxTQUFTLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQztnQkFBQ1A7YUFBTztZQUNyRCxJQUFJTSxXQUFXRixhQUNYRSxXQUFXLFFBQ1gsQ0FBQ3JDLHdFQUFpQkEsQ0FBQ3FDLFFBQVFQLGFBQWE7Z0JBQ3hDLElBQUksSUFBSSxDQUFDRCxJQUFJLEVBQUU7b0JBQ1gsTUFBTSxJQUFJLENBQUNVLEtBQUssQ0FBQ1QsWUFBWU87Z0JBQ2pDLE9BQ0s7b0JBQ0QsTUFBTUE7Z0JBQ1Y7Z0JBQ0FQLGFBQWFPO1lBQ2pCO1FBQ0o7SUFDSjtJQUNBRyx3QkFBd0I7UUFDcEIsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzP2YxNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVlcENvbXBhcmVTdHJpY3QgfSBmcm9tIFwiQGNmd29ya2VyL2pzb24tc2NoZW1hXCI7XG5pbXBvcnQgeyBCYXNlT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSwgaXNCYXNlTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9DaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgR2VuZXJhdGlvbkNodW5rLCBDaGF0R2VuZXJhdGlvbkNodW5rLCB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG4vKipcbiAqIENsYXNzIHRvIHBhcnNlIHRoZSBvdXRwdXQgb2YgYW4gTExNIGNhbGwgdGhhdCBhbHNvIGFsbG93cyBzdHJlYW1pbmcgaW5wdXRzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VPdXRwdXRQYXJzZXIge1xuICAgIGFzeW5jICpfdHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnBhcnNlUmVzdWx0KFt7IHRleHQ6IGNodW5rIH1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucGFyc2VSZXN1bHQoW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuX2Jhc2VNZXNzYWdlVG9TdHJpbmcoY2h1bmspLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybXMgYW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvciBvZiBpbnB1dCBpbnRvIGFuIGFzeW5jaHJvbm91c1xuICAgICAqIGdlbmVyYXRvciBvZiBwYXJzZWQgb3V0cHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dEdlbmVyYXRvciBBbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yIG9mIGlucHV0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEEgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICogQHJldHVybnMgQW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvciBvZiBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoaW5wdXRHZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgcnVuVHlwZTogXCJwYXJzZXJcIixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgZm9yIG91dHB1dCBwYXJzZXJzIHRoYXQgY2FuIGhhbmRsZSBzdHJlYW1pbmcgaW5wdXQuIEl0XG4gKiBleHRlbmRzIHRoZSBgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlcmAgY2xhc3MgYW5kIHByb3ZpZGVzIGEgbWV0aG9kIGZvclxuICogY29udmVydGluZyBwYXJzZWQgb3V0cHV0cyBpbnRvIGEgZGlmZiBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaWZmXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kaWZmID0gZmllbGRzPy5kaWZmID8/IHRoaXMuZGlmZjtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgbGV0IHByZXZQYXJzZWQ7XG4gICAgICAgIGxldCBhY2NHZW47XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGFuZGxlIG5vbi1zdHJpbmcgb3V0cHV0LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaHVua0dlbjtcbiAgICAgICAgICAgIGlmIChpc0Jhc2VNZXNzYWdlQ2h1bmsoY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuay5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYW5kbGUgbm9uLXN0cmluZyBtZXNzYWdlIG91dHB1dC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNodW5rR2VuID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY2h1bmsuY29udGVudCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UoY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuay5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYW5kbGUgbm9uLXN0cmluZyBtZXNzYWdlIG91dHB1dC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNodW5rR2VuID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb252ZXJ0VG9DaHVuayhjaHVuayksXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNodW5rLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVua0dlbiA9IG5ldyBHZW5lcmF0aW9uQ2h1bmsoeyB0ZXh0OiBjaHVuayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhY2NHZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFjY0dlbiA9IGNodW5rR2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWNjR2VuID0gYWNjR2VuLmNvbmNhdChjaHVua0dlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCB0aGlzLnBhcnNlUGFydGlhbFJlc3VsdChbYWNjR2VuXSk7XG4gICAgICAgICAgICBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBwYXJzZWQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAhZGVlcENvbXBhcmVTdHJpY3QocGFyc2VkLCBwcmV2UGFyc2VkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5fZGlmZihwcmV2UGFyc2VkLCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcGFyc2VkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2UGFyc2VkID0gcGFyc2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImRlZXBDb21wYXJlU3RyaWN0IiwiQmFzZU91dHB1dFBhcnNlciIsImlzQmFzZU1lc3NhZ2UiLCJpc0Jhc2VNZXNzYWdlQ2h1bmsiLCJjb252ZXJ0VG9DaHVuayIsIkdlbmVyYXRpb25DaHVuayIsIkNoYXRHZW5lcmF0aW9uQ2h1bmsiLCJCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiX3RyYW5zZm9ybSIsImlucHV0R2VuZXJhdG9yIiwiY2h1bmsiLCJwYXJzZVJlc3VsdCIsInRleHQiLCJtZXNzYWdlIiwiX2Jhc2VNZXNzYWdlVG9TdHJpbmciLCJ0cmFuc2Zvcm0iLCJvcHRpb25zIiwiX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWciLCJiaW5kIiwicnVuVHlwZSIsIkJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZGlmZiIsInByZXZQYXJzZWQiLCJhY2NHZW4iLCJjb250ZW50IiwiRXJyb3IiLCJjaHVua0dlbiIsInVuZGVmaW5lZCIsImNvbmNhdCIsInBhcnNlZCIsInBhcnNlUGFydGlhbFJlc3VsdCIsIl9kaWZmIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/xml.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLOutputParser: () => (/* binding */ XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* binding */ XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseXMLMarkdown: () => (/* binding */ parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/sax-js/sax.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\");\n\n\n\nconst XML_FORMAT_INSTRUCTIONS = `The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags [\"foo\", \"bar\", \"baz\"]:\n1. String \"<foo>\\n   <bar>\\n      <baz></baz>\\n   </bar>\\n</foo>\" is a well-formatted instance of the schema. \n2. String \"<foo>\\n   <bar>\\n   </foo>\" is a badly-formatted instance.\n3. String \"<foo>\\n   <tag>\\n   </tag>\\n</foo>\" is a badly-formatted instance.\n\nHere are the output tags:\n\\`\\`\\`\n{tags}\n\\`\\`\\``;\nclass XMLOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.tags = fields?.tags;\n    }\n    static lc_name() {\n        return \"XMLOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    async parsePartialResult(generations) {\n        return parseXMLMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseXMLMarkdown(text);\n    }\n    getFormatInstructions() {\n        const withTags = !!(this.tags && this.tags.length > 0);\n        return withTags ? XML_FORMAT_INSTRUCTIONS.replace(\"{tags}\", this.tags?.join(\", \") ?? \"\") : XML_FORMAT_INSTRUCTIONS;\n    }\n}\nconst strip = (text)=>text.split(\"\\n\").map((line)=>line.replace(/^\\s+/, \"\")).join(\"\\n\").trim();\nconst parseParsedResult = (input)=>{\n    if (Object.keys(input).length === 0) {\n        return {};\n    }\n    const result = {};\n    if (input.children.length > 0) {\n        result[input.name] = input.children.map(parseParsedResult);\n        return result;\n    } else {\n        result[input.name] = input.text ?? undefined;\n        return result;\n    }\n};\nfunction parseXMLMarkdown(s) {\n    const cleanedString = strip(s);\n    const parser = _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__.sax.parser(true);\n    let parsedResult = {};\n    const elementStack = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onopentag = (node)=>{\n        const element = {\n            name: node.name,\n            attributes: node.attributes,\n            children: [],\n            text: \"\",\n            isSelfClosing: node.isSelfClosing\n        };\n        if (elementStack.length > 0) {\n            const parentElement = elementStack[elementStack.length - 1];\n            parentElement.children.push(element);\n        } else {\n            parsedResult = element;\n        }\n        if (!node.isSelfClosing) {\n            elementStack.push(element);\n        }\n    };\n    parser.onclosetag = ()=>{\n        if (elementStack.length > 0) {\n            const lastElement = elementStack.pop();\n            if (elementStack.length === 0 && lastElement) {\n                parsedResult = lastElement;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.ontext = (text)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.text += text;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onattribute = (attr)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.attributes[attr.name] = attr.value;\n        }\n    };\n    // Try to find XML string within triple backticks.\n    const match = /```(xml)?(.*)```/s.exec(cleanedString);\n    const xmlString = match ? match[2] : cleanedString;\n    parser.write(xmlString).close();\n    // Remove the XML declaration if present\n    if (parsedResult && parsedResult.name === \"?xml\") {\n        parsedResult = parsedResult.children[0];\n    }\n    return parseParsedResult(parsedResult);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMveG1sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzRTtBQUNyQjtBQUNKO0FBQ3RDLE1BQU1HLDBCQUEwQixDQUFDOzs7Ozs7Ozs7Ozs7O01BYWxDLENBQUMsQ0FBQztBQUNELE1BQU1DLHdCQUF3QkosOEVBQW1DQTtJQUNwRUssWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWlCO1FBQy9DO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBR1AsUUFBUU87SUFDeEI7SUFDQSxPQUFPQyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLE1BQU1DLElBQUksRUFBRUMsSUFBSSxFQUFFO1FBQ2QsSUFBSSxDQUFDQSxNQUFNO1lBQ1AsT0FBT0M7UUFDWDtRQUNBLElBQUksQ0FBQ0YsTUFBTTtZQUNQLE9BQU87Z0JBQUM7b0JBQUVHLElBQUk7b0JBQVdDLE1BQU07b0JBQUlSLE9BQU9LO2dCQUFLO2FBQUU7UUFDckQ7UUFDQSxPQUFPaEIsNkRBQU9BLENBQUNlLE1BQU1DO0lBQ3pCO0lBQ0EsTUFBTUksbUJBQW1CQyxXQUFXLEVBQUU7UUFDbEMsT0FBT0MsaUJBQWlCRCxXQUFXLENBQUMsRUFBRSxDQUFDRSxJQUFJO0lBQy9DO0lBQ0EsTUFBTUMsTUFBTUQs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S0FBSyxDQUFDLEVBQUUsR0FBR2xCO0lBQ3JDQyxPQUFPb0IsS0FBSyxDQUFDRCxXQUFXRSxLQUFLO0lBQzdCLHdDQUF3QztJQUN4QyxJQUFJcEIsZ0JBQWdCQSxhQUFhSixJQUFJLEtBQUssUUFBUTtRQUM5Q0ksZUFBZUEsYUFBYUwsUUFBUSxDQUFDLEVBQUU7SUFDM0M7SUFDQSxPQUFPSixrQkFBa0JTO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3htbC5qcz9kZDQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLCB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgeyBzYXggfSBmcm9tIFwiLi4vdXRpbHMvc2F4LWpzL3NheC5qc1wiO1xuZXhwb3J0IGNvbnN0IFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TID0gYFRoZSBvdXRwdXQgc2hvdWxkIGJlIGZvcm1hdHRlZCBhcyBhIFhNTCBmaWxlLlxuMS4gT3V0cHV0IHNob3VsZCBjb25mb3JtIHRvIHRoZSB0YWdzIGJlbG93LiBcbjIuIElmIHRhZ3MgYXJlIG5vdCBnaXZlbiwgbWFrZSB0aGVtIG9uIHlvdXIgb3duLlxuMy4gUmVtZW1iZXIgdG8gYWx3YXlzIG9wZW4gYW5kIGNsb3NlIGFsbCB0aGUgdGFncy5cblxuQXMgYW4gZXhhbXBsZSwgZm9yIHRoZSB0YWdzIFtcImZvb1wiLCBcImJhclwiLCBcImJhelwiXTpcbjEuIFN0cmluZyBcIjxmb28+XFxuICAgPGJhcj5cXG4gICAgICA8YmF6PjwvYmF6PlxcbiAgIDwvYmFyPlxcbjwvZm9vPlwiIGlzIGEgd2VsbC1mb3JtYXR0ZWQgaW5zdGFuY2Ugb2YgdGhlIHNjaGVtYS4gXG4yLiBTdHJpbmcgXCI8Zm9vPlxcbiAgIDxiYXI+XFxuICAgPC9mb28+XCIgaXMgYSBiYWRseS1mb3JtYXR0ZWQgaW5zdGFuY2UuXG4zLiBTdHJpbmcgXCI8Zm9vPlxcbiAgIDx0YWc+XFxuICAgPC90YWc+XFxuPC9mb28+XCIgaXMgYSBiYWRseS1mb3JtYXR0ZWQgaW5zdGFuY2UuXG5cbkhlcmUgYXJlIHRoZSBvdXRwdXQgdGFnczpcblxcYFxcYFxcYFxue3RhZ3N9XG5cXGBcXGBcXGBgO1xuZXhwb3J0IGNsYXNzIFhNTE91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50YWdzID0gZmllbGRzPy50YWdzO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiWE1MT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIF9kaWZmKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKCFuZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJldikge1xuICAgICAgICAgICAgcmV0dXJuIFt7IG9wOiBcInJlcGxhY2VcIiwgcGF0aDogXCJcIiwgdmFsdWU6IG5leHQgfV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBhcmUocHJldiwgbmV4dCk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFyc2VYTUxNYXJrZG93bihnZW5lcmF0aW9uc1swXS50ZXh0KTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gcGFyc2VYTUxNYXJrZG93bih0ZXh0KTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICBjb25zdCB3aXRoVGFncyA9ICEhKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MubGVuZ3RoID4gMCk7XG4gICAgICAgIHJldHVybiB3aXRoVGFnc1xuICAgICAgICAgICAgPyBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUy5yZXBsYWNlKFwie3RhZ3N9XCIsIHRoaXMudGFncz8uam9pbihcIiwgXCIpID8/IFwiXCIpXG4gICAgICAgICAgICA6IFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TO1xuICAgIH1cbn1cbmNvbnN0IHN0cmlwID0gKHRleHQpID0+IHRleHRcbiAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXHMrLywgXCJcIikpXG4gICAgLmpvaW4oXCJcXG5cIilcbiAgICAudHJpbSgpO1xuY29uc3QgcGFyc2VQYXJzZWRSZXN1bHQgPSAoaW5wdXQpID0+IHtcbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChpbnB1dC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdFtpbnB1dC5uYW1lXSA9IGlucHV0LmNoaWxkcmVuLm1hcChwYXJzZVBhcnNlZFJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHRbaW5wdXQubmFtZV0gPSBpbnB1dC50ZXh0ID8/IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlWE1MTWFya2Rvd24ocykge1xuICAgIGNvbnN0IGNsZWFuZWRTdHJpbmcgPSBzdHJpcChzKTtcbiAgICBjb25zdCBwYXJzZXIgPSBzYXgucGFyc2VyKHRydWUpO1xuICAgIGxldCBwYXJzZWRSZXN1bHQgPSB7fTtcbiAgICBjb25zdCBlbGVtZW50U3RhY2sgPSBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHBhcnNlci5vbm9wZW50YWcgPSAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0ge1xuICAgICAgICAgICAgbmFtZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgYXR0cmlidXRlczogbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIGlzU2VsZkNsb3Npbmc6IG5vZGUuaXNTZWxmQ2xvc2luZyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZFJlc3VsdCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub2RlLmlzU2VsZkNsb3NpbmcpIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGFjay5wdXNoKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwYXJzZXIub25jbG9zZXRhZyA9ICgpID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0RWxlbWVudCA9IGVsZW1lbnRTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID09PSAwICYmIGxhc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkUmVzdWx0ID0gbGFzdEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcGFyc2VyLm9udGV4dCA9ICh0ZXh0KSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50U3RhY2tbZWxlbWVudFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQudGV4dCArPSB0ZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHBhcnNlci5vbmF0dHJpYnV0ZSA9IChhdHRyKSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50U3RhY2tbZWxlbWVudFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuYXR0cmlidXRlc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gVHJ5IHRvIGZpbmQgWE1MIHN0cmluZyB3aXRoaW4gdHJpcGxlIGJhY2t0aWNrcy5cbiAgICBjb25zdCBtYXRjaCA9IC9gYGAoeG1sKT8oLiopYGBgL3MuZXhlYyhjbGVhbmVkU3RyaW5nKTtcbiAgICBjb25zdCB4bWxTdHJpbmcgPSBtYXRjaCA/IG1hdGNoWzJdIDogY2xlYW5lZFN0cmluZztcbiAgICBwYXJzZXIud3JpdGUoeG1sU3RyaW5nKS5jbG9zZSgpO1xuICAgIC8vIFJlbW92ZSB0aGUgWE1MIGRlY2xhcmF0aW9uIGlmIHByZXNlbnRcbiAgICBpZiAocGFyc2VkUmVzdWx0ICYmIHBhcnNlZFJlc3VsdC5uYW1lID09PSBcIj94bWxcIikge1xuICAgICAgICBwYXJzZWRSZXN1bHQgPSBwYXJzZWRSZXN1bHQuY2hpbGRyZW5bMF07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZVBhcnNlZFJlc3VsdChwYXJzZWRSZXN1bHQpO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiY29tcGFyZSIsInNheCIsIlhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TIiwiWE1MT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsImxjX25hbWUiLCJfZGlmZiIsInByZXYiLCJuZXh0IiwidW5kZWZpbmVkIiwib3AiLCJwYXRoIiwicGFyc2VQYXJ0aWFsUmVzdWx0IiwiZ2VuZXJhdGlvbnMiLCJwYXJzZVhNTE1hcmtkb3duIiwidGV4dCIsInBhcnNlIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIiwid2l0aFRhZ3MiLCJsZW5ndGgiLCJyZXBsYWNlIiwiam9pbiIsInN0cmlwIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwidHJpbSIsInBhcnNlUGFyc2VkUmVzdWx0IiwiaW5wdXQiLCJrZXlzIiwicmVzdWx0IiwiY2hpbGRyZW4iLCJuYW1lIiwicyIsImNsZWFuZWRTdHJpbmciLCJwYXJzZXIiLCJwYXJzZWRSZXN1bHQiLCJlbGVtZW50U3RhY2siLCJvbm9wZW50YWciLCJub2RlIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJpc1NlbGZDbG9zaW5nIiwicGFyZW50RWxlbWVudCIsInB1c2giLCJvbmNsb3NldGFnIiwibGFzdEVsZW1lbnQiLCJwb3AiLCJvbnRleHQiLCJjdXJyZW50RWxlbWVudCIsIm9uYXR0cmlidXRlIiwiYXR0ciIsIm1hdGNoIiwiZXhlYyIsInhtbFN0cmluZyIsIndyaXRlIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/outputs.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/dist/outputs.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxVQUFVLFFBQVE7QUFDL0I7O0NBRUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsOERBQThEO1FBQzlETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLE9BQU9PLElBQUk7UUFDdkIsSUFBSSxDQUFDQyxjQUFjLEdBQUdSLE9BQU9RLGNBQWM7SUFDL0M7SUFDQUMsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJWixnQkFBZ0I7WUFDdkJTLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtRQUNKO0lBQ0o7QUFDSjtBQUNPLE1BQU1HLDRCQUE0QmI7SUFDckNDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxPQUFPLEdBQUdaLE9BQU9ZLE9BQU87SUFDakM7SUFDQUgsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJQyxvQkFBb0I7WUFDM0JKLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtZQUNBSSxTQUFTLElBQUksQ0FBQ0EsT0FBTyxDQUFDSCxNQUFNLENBQUNDLE1BQU1FLE9BQU87UUFDOUM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dHMuanM/ZDc4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUlVOX0tFWSA9IFwiX19ydW5cIjtcbi8qKlxuICogQ2h1bmsgb2YgYSBzaW5nbGUgZ2VuZXJhdGlvbi4gVXNlZCBmb3Igc3RyZWFtaW5nLlxuICovXG5leHBvcnQgY2xhc3MgR2VuZXJhdGlvbkNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0aW9uSW5mb1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSBmaWVsZHMudGV4dDtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uSW5mbyA9IGZpZWxkcy5nZW5lcmF0aW9uSW5mbztcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCArIGNodW5rLnRleHQsXG4gICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2hhdEdlbmVyYXRpb25DaHVuayBleHRlbmRzIEdlbmVyYXRpb25DaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZmllbGRzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0ICsgY2h1bmsudGV4dCxcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UuY29uY2F0KGNodW5rLm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUlVOX0tFWSIsIkdlbmVyYXRpb25DaHVuayIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRleHQiLCJnZW5lcmF0aW9uSW5mbyIsImNvbmNhdCIsImNodW5rIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./messages/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNEO0FBQ0g7QUFDRztBQUN0RDs7Q0FFQyxHQUNNLE1BQU1HLHdCQUF3QkgsK0RBQVlBO0FBQ2pEO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUksMEJBQTBCRDtJQUNuQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQztZQUFFQTtRQUFNO1FBQ2RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0FNLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ04sS0FBSztJQUNyQjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO1lBQUMsSUFBSWIsNERBQVlBLENBQUMsSUFBSSxDQUFDTSxLQUFLO1NBQUU7SUFDekM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1RLHdCQUF3Qlo7SUFDakMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixTQUFTO1lBQ3ZCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRUcsVUFBVUg7WUFBTztRQUNoQztRQUNBLEtBQUssQ0FBQ0E7UUFDTlIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWdCO1FBQzlDO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNZLFFBQVEsR0FBR0gsT0FBT0csUUFBUTtJQUNuQztJQUNBTixXQUFXO1FBQ1AsT0FBT1gsbUVBQWVBLENBQUMsSUFBSSxDQUFDaUIsUUFBUTtJQUN4QztJQUNBTCxpQkFBaUI7UUFDYixPQUFPLElBQUksQ0FBQ0ssUUFBUTtJQUN4QjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMseUJBQXlCakI7SUFDbEMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFFLGVBQWNBLE1BQUssR0FBSTtZQUN6Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVLLFVBQVVMO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsWUFBWSxHQUNaQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2MsUUFBUSxHQUFHTCxPQUFPSyxRQUFRO0lBQ25DO0lBQ0FSLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxHQUFHO0lBQzVCO0lBQ0FSLGlCQUFpQjtRQUNiLE9BQU87WUFDSCxJQUFJYiw0REFBWUEsQ0FBQztnQkFDYnNCLFNBQVM7b0JBQ0w7d0JBQ0lDLE1BQU07d0JBQ05DLFdBQVc7NEJBQ1BDLFFBQVEsSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU07NEJBQzVCSixLQUFLLElBQUksQ0FBQ0QsUUFBUSxDQUFDQyxHQUFHO3dCQUMxQjtvQkFDSjtpQkFDSDtZQUNMO1NBQ0g7SUFDTDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdF92YWx1ZXMuanM/MDMyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSBcIi4vbWVzc2FnZXMvaHVtYW4uanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuL21lc3NhZ2VzL3V0aWxzLmpzXCI7XG4vKipcbiAqIEJhc2UgUHJvbXB0VmFsdWUgY2xhc3MuIEFsbCBwcm9tcHQgdmFsdWVzIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VQcm9tcHRWYWx1ZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBwcm9tcHQgdmFsdWUgYXMgYSBzdHJpbmcuIEl0IGV4dGVuZHMgdGhlIEJhc2VQcm9tcHRWYWx1ZVxuICogY2xhc3MgYW5kIG92ZXJyaWRlcyB0aGUgdG9TdHJpbmcgYW5kIHRvQ2hhdE1lc3NhZ2VzIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdQcm9tcHRWYWx1ZSBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN0cmluZ1Byb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHN1cGVyKHsgdmFsdWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtuZXcgSHVtYW5NZXNzYWdlKHRoaXMudmFsdWUpXTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGNoYXQgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0UHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0UHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBtZXNzYWdlczogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWVzc2FnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IGZpZWxkcy5tZXNzYWdlcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBnZXRCdWZmZXJTdHJpbmcodGhpcy5tZXNzYWdlcyk7XG4gICAgfVxuICAgIHRvQ2hhdE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhbiBpbWFnZSBwcm9tcHQgdmFsdWUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlUHJvbXB0VmFsdWUgYW5kIGluY2x1ZGVzIGFuIEltYWdlVVJMIGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgSW1hZ2VQcm9tcHRWYWx1ZSBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkltYWdlUHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICghKFwiaW1hZ2VVcmxcIiBpbiBmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgaW1hZ2VVcmw6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImltYWdlVXJsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBAaWdub3JlICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBmaWVsZHMuaW1hZ2VVcmw7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZVVybC51cmw7XG4gICAgfVxuICAgIHRvQ2hhdE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3IEh1bWFuTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB0aGlzLmltYWdlVXJsLmRldGFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW1hZ2VVcmwudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIkh1bWFuTWVzc2FnZSIsImdldEJ1ZmZlclN0cmluZyIsIkJhc2VQcm9tcHRWYWx1ZSIsIlN0cmluZ1Byb21wdFZhbHVlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInRvU3RyaW5nIiwidG9DaGF0TWVzc2FnZXMiLCJDaGF0UHJvbXB0VmFsdWUiLCJmaWVsZHMiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsIkltYWdlUHJvbXB0VmFsdWUiLCJpbWFnZVVybCIsInVybCIsImNvbnRlbnQiLCJ0eXBlIiwiaW1hZ2VfdXJsIiwiZGV0YWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* binding */ RunnableToolLike),\n/* harmony export */   RunnableTraceable: () => (/* binding */ RunnableTraceable),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable),\n/* harmony export */   convertRunnableToTool: () => (/* binding */ convertRunnableToTool)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tracers/event_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/signal.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _wrappers_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./wrappers.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\");\n/* harmony import */ var _iter_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./iter.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        const fallbacks = Array.isArray(fields) ? fields : fields.fallbacks;\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this._streamIterator(input, config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId,\n                timeout: options.timeout,\n                signal: options.signal\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        delete callOptions.timeout;\n        delete callOptions.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            const promise = func.call(this, input, config, runManager);\n            output = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            const promise = func.call(this, inputs, optionsList, runManagers, batchOptions);\n            outputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, optionsList?.[0]?.signal);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), options?.signal, config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const streamEventsHandler = runManager?.handlers.find(_tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.isStreamEventsHandler);\n            let iterator = pipe.output;\n            if (streamEventsHandler !== undefined && runManager !== undefined) {\n                iterator = streamEventsHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            const streamLogHandler = runManager?.handlers.find(_tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.isLogStreamHandler);\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = streamLogHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(logStreamCallbackHandler, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    streamEvents(input, options, streamOptions) {\n        let stream;\n        if (options.version === \"v1\") {\n            stream = this._streamEventsV1(input, options, streamOptions);\n        } else if (options.version === \"v2\") {\n            stream = this._streamEventsV2(input, options, streamOptions);\n        } else {\n            throw new Error(`Only versions \"v1\" and \"v2\" of the schema are currently supported.`);\n        }\n        if (options.encoding === \"text/event-stream\") {\n            return (0,_wrappers_js__WEBPACK_IMPORTED_MODULE_13__.convertToHttpEventStream)(stream);\n        } else {\n            return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(stream);\n        }\n    }\n    async *_streamEventsV2(input, options, streamOptions) {\n        const eventStreamer = new _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.EventStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const runId = config.runId ?? (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n        config.runId = runId;\n        const callbacks = config.callbacks;\n        if (callbacks === undefined) {\n            config.callbacks = [\n                eventStreamer\n            ];\n        } else if (Array.isArray(callbacks)) {\n            config.callbacks = callbacks.concat(eventStreamer);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(eventStreamer, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const abortController = new AbortController();\n        // Call the runnable in streaming mode,\n        // add each chunk to the output stream\n        const outerThis = this;\n        async function consumeRunnableStream() {\n            try {\n                let signal;\n                if (options?.signal) {\n                    if (\"any\" in AbortSignal) {\n                        // Use native AbortSignal.any() if available (Node 19+)\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        signal = AbortSignal.any([\n                            abortController.signal,\n                            options.signal\n                        ]);\n                    } else {\n                        // Fallback for Node 18 and below - just use the provided signal\n                        signal = options.signal;\n                        // Ensure we still abort our controller when the parent signal aborts\n                        options.signal.addEventListener(\"abort\", ()=>{\n                            abortController.abort();\n                        }, {\n                            once: true\n                        });\n                    }\n                } else {\n                    signal = abortController.signal;\n                }\n                const runnableStream = await outerThis.stream(input, {\n                    ...config,\n                    signal\n                });\n                const tappedStream = eventStreamer.tapOutputIterable(runId, runnableStream);\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                for await (const _ of tappedStream){\n                    // Just iterate so that the callback handler picks up events\n                    if (abortController.signal.aborted) break;\n                }\n            } finally{\n                await eventStreamer.finish();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        let firstEventSent = false;\n        let firstEventRunId;\n        try {\n            for await (const event of eventStreamer){\n                // This is a work-around an issue where the inputs into the\n                // chain are not available until the entire input is consumed.\n                // As a temporary solution, we'll modify the input to be the input\n                // that was passed into the chain.\n                if (!firstEventSent) {\n                    event.data.input = input;\n                    firstEventSent = true;\n                    firstEventRunId = event.run_id;\n                    yield event;\n                    continue;\n                }\n                if (event.run_id === firstEventRunId && event.event.endsWith(\"_end\")) {\n                    // If it's the end event corresponding to the root runnable\n                    // we dont include the input in the event since it's guaranteed\n                    // to be included in the first event.\n                    if (event.data?.input) {\n                        delete event.data.input;\n                    }\n                }\n                yield event;\n            }\n        } finally{\n            abortController.abort();\n            await runnableStreamConsumePromise;\n        }\n    }\n    async *_streamEventsV1(input, options, streamOptions) {\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_10__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_10__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n    /**\n     * Convert a runnable to a tool. Return a new instance of `RunnableToolLike`\n     * which contains the runnable, name, description and schema.\n     *\n     * @template {T extends RunInput = RunInput} RunInput - The input type of the runnable. Should be the same as the `RunInput` type of the runnable.\n     *\n     * @param fields\n     * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n     * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n     * @param {z.ZodType<T>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n     * @returns {RunnableToolLike<z.ZodType<T>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n     */ asTool(fields) {\n        return convertRunnableToTool(this, fields);\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n * @example\n * ```typescript\n * import {\n *   type RunnableConfig,\n *   RunnableLambda,\n * } from \"@langchain/core/runnables\";\n *\n * const enhanceProfile = (\n *   profile: Record<string, any>,\n *   config?: RunnableConfig\n * ) => {\n *   if (config?.configurable?.role) {\n *     return { ...profile, role: config.configurable.role };\n *   }\n *   return profile;\n * };\n *\n * const runnable = RunnableLambda.from(enhanceProfile);\n *\n * // Bind configuration to the runnable to set the user's role dynamically\n * const adminRunnable = runnable.bind({ configurable: { role: \"Admin\" } });\n * const userRunnable = runnable.bind({ configurable: { role: \"User\" } });\n *\n * const result1 = await adminRunnable.invoke({\n *   name: \"Alice\",\n *   email: \"alice@example.com\"\n * });\n *\n * // { name: \"Alice\", email: \"alice@example.com\", role: \"Admin\" }\n *\n * const result2 = await userRunnable.invoke({\n *   name: \"Bob\",\n *   email: \"bob@example.com\"\n * });\n *\n * // { name: \"Bob\", email: \"bob@example.com\", role: \"User\" }\n * ```\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    streamEvents(input, options, streamOptions) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const outerThis = this;\n        const generator = async function*() {\n            yield* outerThis.bound.streamEvents(input, {\n                ...await outerThis._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), outerThis.kwargs),\n                version: options.version\n            }, streamOptions);\n        };\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(generator());\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n * @example\n * ```typescript\n * import { RunnableEach, RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const toUpperCase = (input: string): string => input.toUpperCase();\n * const addGreeting = (input: string): string => `Hello, ${input}!`;\n *\n * const upperCaseLambda = RunnableLambda.from(toUpperCase);\n * const greetingLambda = RunnableLambda.from(addGreeting);\n *\n * const chain = new RunnableEach({\n *   bound: upperCaseLambda.pipe(greetingLambda),\n * });\n *\n * const result = await chain.invoke([\"alice\", \"bob\", \"carol\"])\n *\n * // [\"Hello, ALICE!\", \"Hello, BOB!\", \"Hello, CAROL!\"]\n * ```\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke.bind(this), inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableRetry,\n * } from \"@langchain/core/runnables\";\n *\n * // Simulate an API call that fails\n * const simulateApiCall = (input: string): string => {\n *   console.log(`Attempting API call with input: ${input}`);\n *   throw new Error(\"API call failed due to network issue\");\n * };\n *\n * const apiCallLambda = RunnableLambda.from(simulateApiCall);\n *\n * // Apply retry logic using the .withRetry() method\n * const apiCallWithRetry = apiCallLambda.withRetry({ stopAfterAttempt: 3 });\n *\n * // Alternatively, create a RunnableRetry instance manually\n * const manualRetry = new RunnableRetry({\n *   bound: apiCallLambda,\n *   maxAttemptNumber: 3,\n *   config: {},\n * });\n *\n * // Example invocation using the .withRetry() method\n * const res = await apiCallWithRetry\n *   .invoke(\"Request 1\")\n *   .catch((error) => {\n *     console.error(\"Failed after multiple retries:\", error.message);\n *   });\n *\n * // Example invocation using the manual retry instance\n * const res2 = await manualRetry\n *   .invoke(\"Request 2\")\n *   .catch((error) => {\n *     console.error(\"Failed after multiple retries:\", error.message);\n *   });\n * ```\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            onFailedAttempt: (error)=>this.onFailedAttempt(error, input),\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke.bind(this), input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            firstException.input = remainingInputs[i];\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onFailedAttempt: (error)=>this.onFailedAttempt(error, error.input),\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"omitSequenceTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n        this.omitSequenceTags = fields.omitSequenceTags ?? this.omitSequenceTags;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                const promise = step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`)\n                }));\n                nextStepInput = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            if (options?.signal?.aborted) {\n                throw new Error(\"Aborted\");\n            }\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                const promise = step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n                nextStepInputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, configList[0]?.signal);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(this.omitSequenceTags ? undefined : `seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                options?.signal?.throwIfAborted();\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], nameOrFields) {\n        let extra = {};\n        if (typeof nameOrFields === \"string\") {\n            extra.name = nameOrFields;\n        } else if (nameOrFields !== undefined) {\n            extra = nameOrFields;\n        }\n        return new RunnableSequence({\n            ...extra,\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1])\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            const promises = Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            });\n            await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(Promise.all(promises), options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const promise = Promise.race(tasks.values());\n            const { key, result, gen } = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that wraps a traced LangSmith function.\n */ class RunnableTraceable extends Runnable {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (!(0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            throw new Error(\"RunnableTraceable requires a function that is wrapped in traceable higher-order function\");\n        }\n        this.func = fields.func;\n    }\n    async invoke(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const callbacks = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const promise = this.func((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks\n        }), input);\n        return (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, config?.signal);\n    }\n    async *_streamIterator(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const result = await this.invoke(input, options);\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(result)) {\n            for await (const item of result){\n                config?.signal?.throwIfAborted();\n                yield item;\n            }\n            return;\n        }\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterator)(result)) {\n            while(true){\n                config?.signal?.throwIfAborted();\n                const state = result.next();\n                if (state.done) break;\n                yield state.value;\n            }\n            return;\n        }\n        yield result;\n    }\n    static from(func) {\n        return new RunnableTraceable({\n            func\n        });\n    }\n}\nfunction assertNonTraceableFunction(func) {\n    if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(func)) {\n        throw new Error(\"RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.\");\n    }\n}\n/**\n * A runnable that wraps an arbitrary function that takes a single argument.\n * @example\n * ```typescript\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const add = (input: { x: number; y: number }) => input.x + input.y;\n *\n * const multiply = (input: { value: number; multiplier: number }) =>\n *   input.value * input.multiplier;\n *\n * // Create runnables for the functions\n * const addLambda = RunnableLambda.from(add);\n * const multiplyLambda = RunnableLambda.from(multiply);\n *\n * // Chain the lambdas for a mathematical operation\n * const chainedLambda = addLambda.pipe((result) =>\n *   multiplyLambda.invoke({ value: result, multiplier: 2 })\n * );\n *\n * // Example invocation of the chainedLambda\n * const result = await chainedLambda.invoke({ x: 2, y: 3 });\n *\n * // Will log \"10\" (since (2 + 3) * 2 = 10)\n * ```\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            // eslint-disable-next-line no-constructor-return\n            return RunnableTraceable.from(fields.func);\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        assertNonTraceableFunction(fields.func);\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n                        let finalOutput;\n                        for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n                        let finalOutput;\n                        for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke.bind(this), input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(),\n            recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n        });\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, childConfig);\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n            for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n            for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableParallel,\n * } from \"@langchain/core/runnables\";\n *\n * const addYears = (age: number): number => age + 5;\n * const yearsToFifty = (age: number): number => 50 - age;\n * const yearsToHundred = (age: number): number => 100 - age;\n *\n * const addYearsLambda = RunnableLambda.from(addYears);\n * const milestoneFiftyLambda = RunnableLambda.from(yearsToFifty);\n * const milestoneHundredLambda = RunnableLambda.from(yearsToHundred);\n *\n * // Pipe will coerce objects into RunnableParallel by default, but we\n * // explicitly instantiate one here to demonstrate\n * const sequence = addYearsLambda.pipe(\n *   RunnableParallel.from({\n *     years_to_fifty: milestoneFiftyLambda,\n *     years_to_hundred: milestoneHundredLambda,\n *   })\n * );\n *\n * // Invoke the sequence with a single age input\n * const res = sequence.invoke(25);\n *\n * // { years_to_fifty: 25, years_to_hundred: 75 }\n * ```\n */ class RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n * External APIs (e.g., APIs for a language model) may at times experience\n * degraded performance or even downtime.\n *\n * In these cases, it can be useful to have a fallback Runnable that can be\n * used in place of the original Runnable (e.g., fallback to another LLM provider).\n *\n * Fallbacks can be defined at the level of a single Runnable, or at the level\n * of a chain of Runnables. Fallbacks are tried in order until one succeeds or\n * all fail.\n *\n * While you can instantiate a `RunnableWithFallbacks` directly, it is usually\n * more convenient to use the `withFallbacks` method on an existing Runnable.\n *\n * When streaming, fallbacks will only be called on failures during the initial\n * stream creation. Errors that occur after a stream starts will not fallback\n * to the next Runnable.\n *\n * @example\n * ```typescript\n * import {\n *   RunnableLambda,\n *   RunnableWithFallbacks,\n * } from \"@langchain/core/runnables\";\n *\n * const primaryOperation = (input: string): string => {\n *   if (input !== \"safe\") {\n *     throw new Error(\"Primary operation failed due to unsafe input\");\n *   }\n *   return `Processed: ${input}`;\n * };\n *\n * // Define a fallback operation that processes the input differently\n * const fallbackOperation = (input: string): string =>\n *   `Fallback processed: ${input}`;\n *\n * const primaryRunnable = RunnableLambda.from(primaryOperation);\n * const fallbackRunnable = RunnableLambda.from(fallbackOperation);\n *\n * // Apply the fallback logic using the .withFallbacks() method\n * const runnableWithFallback = primaryRunnable.withFallbacks([fallbackRunnable]);\n *\n * // Alternatively, create a RunnableWithFallbacks instance manually\n * const manualFallbackChain = new RunnableWithFallbacks({\n *   runnable: primaryRunnable,\n *   fallbacks: [fallbackRunnable],\n * });\n *\n * // Example invocation using .withFallbacks()\n * const res = await runnableWithFallback\n *   .invoke(\"unsafe input\")\n *   .catch((error) => {\n *     console.error(\"Failed after all attempts:\", error.message);\n *   });\n *\n * // \"Fallback processed: unsafe input\"\n *\n * // Example invocation using manual instantiation\n * const res = await manualFallbackChain\n *   .invoke(\"safe\")\n *   .catch((error) => {\n *     console.error(\"Failed after all attempts:\", error.message);\n *   });\n *\n * // \"Processed: safe\"\n * ```\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n            callbacks: runManager?.getChild()\n        });\n        const res = await _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async ()=>{\n            let firstError;\n            for (const runnable of this.runnables()){\n                config?.signal?.throwIfAborted();\n                try {\n                    const output = await runnable.invoke(input, childConfig);\n                    await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                    return output;\n                } catch (e) {\n                    if (firstError === undefined) {\n                        firstError = e;\n                    }\n                }\n            }\n            if (firstError === undefined) {\n                throw new Error(\"No error stored at end of fallback.\");\n            }\n            await runManager?.handleChainError(firstError);\n            throw firstError;\n        });\n        return res;\n    }\n    async *_streamIterator(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        let firstError;\n        let stream;\n        for (const runnable of this.runnables()){\n            config?.signal?.throwIfAborted();\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n                callbacks: runManager?.getChild()\n            });\n            try {\n                const originalStream = await runnable.stream(input, childConfig);\n                stream = (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, originalStream);\n                break;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (stream === undefined) {\n            const error = firstError ?? new Error(\"No error stored at end of fallback.\");\n            await runManager?.handleChainError(error);\n            throw error;\n        }\n        let output;\n        try {\n            for await (const chunk of stream){\n                yield chunk;\n                try {\n                    output = output === undefined ? output : (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(output, chunk);\n                } catch (e) {\n                    output = undefined;\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            configList[0].signal?.throwIfAborted();\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n * @example\n * ```typescript\n * import {\n *   RunnableAssign,\n *   RunnableLambda,\n *   RunnableParallel,\n * } from \"@langchain/core/runnables\";\n *\n * const calculateAge = (x: { birthYear: number }): { age: number } => {\n *   const currentYear = new Date().getFullYear();\n *   return { age: currentYear - x.birthYear };\n * };\n *\n * const createGreeting = (x: { name: string }): { greeting: string } => {\n *   return { greeting: `Hello, ${x.name}!` };\n * };\n *\n * const mapper = RunnableParallel.from({\n *   age_step: RunnableLambda.from(calculateAge),\n *   greeting_step: RunnableLambda.from(createGreeting),\n * });\n *\n * const runnableAssign = new RunnableAssign({ mapper });\n *\n * const res = await runnableAssign.invoke({ name: \"Alice\", birthYear: 1990 });\n *\n * // { name: \"Alice\", birthYear: 1990, age_step: { age: 34 }, greeting_step: { greeting: \"Hello, Alice!\" } }\n * ```\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n * Useful for streaming, can be automatically created and chained by calling `runnable.pick();`.\n * @example\n * ```typescript\n * import { RunnablePick } from \"@langchain/core/runnables\";\n *\n * const inputData = {\n *   name: \"John\",\n *   age: 30,\n *   city: \"New York\",\n *   country: \"USA\",\n *   email: \"john.doe@example.com\",\n *   phone: \"+1234567890\",\n * };\n *\n * const basicInfoRunnable = new RunnablePick([\"name\", \"city\"]);\n *\n * // Example invocation\n * const res = await basicInfoRunnable.invoke(inputData);\n *\n * // { name: 'John', city: 'New York' }\n * ```\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableToolLike extends RunnableBinding {\n    constructor(fields){\n        const sequence = RunnableSequence.from([\n            RunnableLambda.from(async (input)=>{\n                let toolInput;\n                if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_15__._isToolCall)(input)) {\n                    try {\n                        toolInput = await this.schema.parseAsync(input.args);\n                    } catch (e) {\n                        throw new _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__.ToolInputParsingException(`Received tool input did not match expected schema`, JSON.stringify(input.args));\n                    }\n                } else {\n                    toolInput = input;\n                }\n                return toolInput;\n            }).withConfig({\n                runName: `${fields.name}:parse_input`\n            }),\n            fields.bound\n        ]).withConfig({\n            runName: fields.name\n        });\n        super({\n            bound: sequence,\n            config: fields.config ?? {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.schema = fields.schema;\n    }\n    static lc_name() {\n        return \"RunnableToolLike\";\n    }\n}\n/**\n * Given a runnable and a Zod schema, convert the runnable to a tool.\n *\n * @template RunInput The input type for the runnable.\n * @template RunOutput The output type for the runnable.\n *\n * @param {Runnable<RunInput, RunOutput>} runnable The runnable to convert to a tool.\n * @param fields\n * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n * @param {z.ZodType<RunInput>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n * @returns {RunnableToolLike<z.ZodType<RunInput>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n */ function convertRunnableToTool(runnable, fields) {\n    const name = fields.name ?? runnable.getName();\n    const description = fields.description ?? fields.schema?.description;\n    if (fields.schema.constructor === zod__WEBPACK_IMPORTED_MODULE_16__.z.ZodString) {\n        return new RunnableToolLike({\n            name,\n            description,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n                input: zod__WEBPACK_IMPORTED_MODULE_16__.z.string()\n            }).transform((input)=>input.input),\n            bound: runnable\n        });\n    }\n    return new RunnableToolLike({\n        name,\n        description,\n        schema: fields.schema,\n        bound: runnable\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNLO0FBQ087QUFDa0M7QUFDd0M7QUFDZDtBQUN6QztBQUNxRTtBQUN4RTtBQUNpRztBQUM5RjtBQUNXO0FBQ0M7QUFDUztBQUN6QztBQUNzQjtBQUM2RTtBQUMzRDtBQUMzRSw4REFBOEQ7QUFDdkQsU0FBU3NDLGNBQWNDLEtBQUssRUFBRUMsVUFBVTtJQUMzQyxPQUFPRCxTQUNILENBQUNFLE1BQU1DLE9BQU8sQ0FBQ0gsVUFDZix1REFBdUQ7SUFDdkQsQ0FBRUEsQ0FBQUEsaUJBQWlCSSxJQUFHLEtBQ3RCLE9BQU9KLFVBQVUsV0FDZkEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBOzs7Q0FHQyxHQUNNLE1BQU1LLGlCQUFpQmpDLCtEQUFZQTtJQUN0Q2tDLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTztRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTyxLQUFLO1FBQ2hCO0lBQ0o7SUFDQWEsUUFBUUMsTUFBTSxFQUFFO1FBQ1osTUFBTUMsT0FDTiw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDQSxJQUFJLElBQUksSUFBSSxDQUFDVCxXQUFXLENBQUNVLE9BQU8sTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQ1MsSUFBSTtRQUNoRSxPQUFPRCxTQUFTLENBQUMsRUFBRUMsS0FBSyxFQUFFRCxPQUFPLENBQUMsR0FBR0M7SUFDekM7SUFDQTs7OztLQUlDLEdBQ0RFLEtBQUtDLE1BQU0s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WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9iYXNlLmpzPzQ1NjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBpc1RyYWNlYWJsZUZ1bmN0aW9uLCB9IGZyb20gXCJsYW5nc21pdGgvc2luZ2xldG9ucy90cmFjZWFibGVcIjtcbmltcG9ydCB7IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgUnVuTG9nLCBSdW5Mb2dQYXRjaCwgaXNMb2dTdHJlYW1IYW5kbGVyLCB9IGZyb20gXCIuLi90cmFjZXJzL2xvZ19zdHJlYW0uanNcIjtcbmltcG9ydCB7IEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBpc1N0cmVhbUV2ZW50c0hhbmRsZXIsIH0gZnJvbSBcIi4uL3RyYWNlcnMvZXZlbnRfc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sIGNvbmNhdCwgYXRlZSwgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCwgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgcmFjZVdpdGhTaWduYWwgfSBmcm9tIFwiLi4vdXRpbHMvc2lnbmFsLmpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCwgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMsIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IFJvb3RMaXN0ZW5lcnNUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzXCI7XG5pbXBvcnQgeyBfUm9vdEV2ZW50RmlsdGVyLCBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvSHR0cEV2ZW50U3RyZWFtIH0gZnJvbSBcIi4vd3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0LCBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQsIGlzQXN5bmNJdGVyYWJsZSwgaXNJdGVyYWJsZUl0ZXJhdG9yLCBpc0l0ZXJhdG9yLCB9IGZyb20gXCIuL2l0ZXIuanNcIjtcbmltcG9ydCB7IF9pc1Rvb2xDYWxsLCBUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiZcbiAgICAgICAgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vKipcbiAqIEEgUnVubmFibGUgaXMgYSBnZW5lcmljIHVuaXQgb2Ygd29yayB0aGF0IGNhbiBiZSBpbnZva2VkLCBiYXRjaGVkLCBzdHJlYW1lZCwgYW5kL29yXG4gKiB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aGlzLm5hbWUgPz8gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPz8gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICByZXR1cm4gc3VmZml4ID8gYCR7bmFtZX0ke3N1ZmZpeH1gIDogbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBhcmd1bWVudHMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIGFwcGx5IHRoZSBib3VuZCBhcmdzLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoeyBib3VuZDogdGhpcywga3dhcmdzLCBjb25maWc6IHt9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgUnVubmFibGUgdGhhdCBtYXBzIGEgbGlzdCBvZiBpbnB1dHMgdG8gYSBsaXN0IG9mIG91dHB1dHMsXG4gICAgICogYnkgY2FsbGluZyBpbnZva2UoKSB3aXRoIGVhY2ggaW5wdXQuXG4gICAgICovXG4gICAgbWFwKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHsgYm91bmQ6IHRoaXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCByZXRyeSBsb2dpYyB0byBhbiBleGlzdGluZyBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVSZXRyeSB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgcmV0cnkgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgY29uZmlnIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE5ldyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdG8gYXR0YWNoIHRvIHRoZSBuZXcgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHdpdGggYSBjb25maWcgbWF0Y2hpbmcgd2hhdCdzIHBhc3NlZC5cbiAgICAgKi9cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBydW5uYWJsZSBmcm9tIHRoZSBjdXJyZW50IG9uZSB0aGF0IHdpbGwgdHJ5IGludm9raW5nXG4gICAgICogb3RoZXIgcGFzc2VkIGZhbGxiYWNrIHJ1bm5hYmxlcyBpZiB0aGUgaW5pdGlhbCBpbnZvY2F0aW9uIGZhaWxzLlxuICAgICAqIEBwYXJhbSBmaWVsZHMuZmFsbGJhY2tzIE90aGVyIHJ1bm5hYmxlcyB0byBjYWxsIGlmIHRoZSBydW5uYWJsZSBlcnJvcnMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzLlxuICAgICAqL1xuICAgIHdpdGhGYWxsYmFja3MoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrcyA9IEFycmF5LmlzQXJyYXkoZmllbGRzKSA/IGZpZWxkcyA6IGZpZWxkcy5mYWxsYmFja3M7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgcnVubmFibGU6IHRoaXMsXG4gICAgICAgICAgICBmYWxsYmFja3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucywgbGVuZ3RoID0gMCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcIm9wdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBpbnB1dHMsIGJ1dCBnb3QgJHtvcHRpb25zLmxlbmd0aH0gb3B0aW9ucyBmb3IgJHtsZW5ndGh9IGlucHV0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID4gMSAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLnJ1bklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJQcm92aWRlZCBydW5JZCB3aWxsIGJlIHVzZWQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJhdGNoLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNlcXVlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSBcInJ1bklkXCIpKTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBlbnN1cmVDb25maWcoaSA9PT0gMCA/IG9wdGlvbnMgOiBzdWJzZXF1ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBtYXhDb25jdXJyZW5jeSA9IGNvbmZpZ0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhdGNoQ2FsbHMgPSBpbnB1dHMubWFwKChpbnB1dCwgaSkgPT4gY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmludm9rZShpbnB1dCwgY29uZmlnTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYmF0Y2hDYWxscyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc3RyZWFtaW5nIGltcGxlbWVudGF0aW9uLlxuICAgICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGlmIHRoZXkgc3VwcG9ydCBzdHJlYW1pbmcgb3V0cHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBvdXRwdXQgaW4gY2h1bmtzLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBpcyBhbHNvIGFuIGl0ZXJhYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBCdWZmZXIgdGhlIGZpcnN0IHN0cmVhbWVkIGNodW5rIHRvIGFsbG93IGZvciBpbml0aWFsIGVycm9yc1xuICAgICAgICAvLyB0byBzdXJmYWNlIGltbWVkaWF0ZWx5LlxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBsZXQgcnVubmFibGVDb25maWc7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlQ29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcnVubmFibGVDb25maWcgPSBlbnN1cmVDb25maWcoe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogb3B0aW9ucy5jYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBvcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHJ1bk5hbWU6IG9wdGlvbnMucnVuTmFtZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IG9wdGlvbnMuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiBvcHRpb25zLnJlY3Vyc2lvbkxpbWl0LFxuICAgICAgICAgICAgICAgIG1heENvbmN1cnJlbmN5OiBvcHRpb25zLm1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIHJ1bklkOiBvcHRpb25zLnJ1bklkLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCxcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLmNhbGxiYWNrcztcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnRhZ3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tZXRhZGF0YTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJ1bk5hbWU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jb25maWd1cmFibGU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5yZWN1cnNpb25MaW1pdDtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLm1heENvbmN1cnJlbmN5O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucnVuSWQ7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy50aW1lb3V0O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuc2lnbmFsO1xuICAgICAgICByZXR1cm4gW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc107XG4gICAgfVxuICAgIGFzeW5jIF9jYWxsV2l0aENvbmZpZyhmdW5jLCBpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCBjb25maWc/LnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IGhhbmRsZXMgYmF0Y2hpbmcgYW5kIGNvbmZpZ3VyYXRpb24gZm9yIGEgcnVubmFibGVcbiAgICAgKiBJdCB0YWtlcyBhIGZ1bmN0aW9uLCBpbnB1dCB2YWx1ZXMsIGFuZCBvcHRpb25hbCBjb25maWd1cmF0aW9uLCBhbmRcbiAgICAgKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBmb3IgZWFjaCBpbnB1dCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHZhbHVlcyB0byBiZSBwcm9jZXNzZWQuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqL1xuICAgIGFzeW5jIF9iYXRjaFdpdGhDb25maWcoZnVuYywgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnNMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgb3B0aW9uc0xpc3RbaV0ucnVuSWQsIG9wdGlvbnNMaXN0W2ldLnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zTGlzdFtpXS5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgb3V0cHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBmdW5jLmNhbGwodGhpcywgaW5wdXRzLCBvcHRpb25zTGlzdCwgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICBvdXRwdXRzID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgb3B0aW9uc0xpc3Q/LlswXT8uc2lnbmFsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gdHJhbnNmb3JtIGFuIEl0ZXJhdG9yIG9mIElucHV0IHZhbHVlcyBpbnRvIGFuIEl0ZXJhdG9yIG9mXG4gICAgICogT3V0cHV0IHZhbHVlcywgd2l0aCBjYWxsYmFja3MuXG4gICAgICogVXNlIHRoaXMgdG8gaW1wbGVtZW50IGBzdHJlYW0oKWAgb3IgYHRyYW5zZm9ybSgpYCBpbiBSdW5uYWJsZSBzdWJjbGFzc2VzLlxuICAgICAqL1xuICAgIGFzeW5jICpfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdHJhbnNmb3JtZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSBjb25jYXQoZmluYWxJbnB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBydW5NYW5hZ2VyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGlwZSA9IGF3YWl0IHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodHJhbnNmb3JtZXIuYmluZCh0aGlzKSwgd3JhcElucHV0Rm9yVHJhY2luZygpLCBhc3luYyAoKSA9PiBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHsgaW5wdXQ6IFwiXCIgfSwgY29uZmlnLnJ1bklkLCBjb25maWcucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKSwgb3B0aW9ucz8uc2lnbmFsLCBjb25maWcpO1xuICAgICAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgICAgIHJ1bk1hbmFnZXIgPSBwaXBlLnNldHVwO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtRXZlbnRzSGFuZGxlciA9IHJ1bk1hbmFnZXI/LmhhbmRsZXJzLmZpbmQoaXNTdHJlYW1FdmVudHNIYW5kbGVyKTtcbiAgICAgICAgICAgIGxldCBpdGVyYXRvciA9IHBpcGUub3V0cHV0O1xuICAgICAgICAgICAgaWYgKHN0cmVhbUV2ZW50c0hhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiBydW5NYW5hZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvciA9IHN0cmVhbUV2ZW50c0hhbmRsZXIudGFwT3V0cHV0SXRlcmFibGUocnVuTWFuYWdlci5ydW5JZCwgaXRlcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9nSGFuZGxlciA9IHJ1bk1hbmFnZXI/LmhhbmRsZXJzLmZpbmQoaXNMb2dTdHJlYW1IYW5kbGVyKTtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIGl0ZXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgZ2V0R3JhcGgoXykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgaW5wdXQgc2NoZW1hIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3QgaW5wdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1JbnB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBydW5uYWJsZU5vZGUgPSBncmFwaC5hZGROb2RlKHRoaXMpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgb3V0cHV0IHNjaGVtYXMgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBvdXRwdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1PdXRwdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShpbnB1dE5vZGUsIHJ1bm5hYmxlTm9kZSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgc2VxdWVuY2UgdGhhdCBydW5zIGVhY2ggaW5kaXZpZHVhbCBydW5uYWJsZSBpbiBzZXJpZXMsXG4gICAgICogcGlwaW5nIHRoZSBvdXRwdXQgb2Ygb25lIHJ1bm5hYmxlIGludG8gYW5vdGhlciBydW5uYWJsZSBvciBydW5uYWJsZS1saWtlLlxuICAgICAqIEBwYXJhbSBjb2VyY2VhYmxlIEEgcnVubmFibGUsIGZ1bmN0aW9uLCBvciBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBmdW5jdGlvbnMgb3IgcnVubmFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICBmaXJzdDogdGhpcyxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGljayBrZXlzIGZyb20gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgcGljayhrZXlzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBuZXcgZmllbGRzIHRvIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzc2lnbihtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlQXNzaWduKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNmb3JtLCB3aGljaCBidWZmZXJzIGlucHV0IGFuZCB0aGVuIGNhbGxzIHN0cmVhbS5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IGNhbiBzdGFydCBwcm9kdWNpbmcgb3V0cHV0IHdoaWxlXG4gICAgICogaW5wdXQgaXMgc3RpbGwgYmVpbmcgZ2VuZXJhdGVkLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbENodW5rO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgZ2F0aGVyaW5nIGZhaWxzLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBhbGwgb3V0cHV0IGZyb20gYSBydW5uYWJsZSwgYXMgcmVwb3J0ZWQgdG8gdGhlIGNhbGxiYWNrIHN5c3RlbS5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBpbm5lciBydW5zIG9mIExMTXMsIFJldHJpZXZlcnMsIFRvb2xzLCBldGMuXG4gICAgICogT3V0cHV0IGlzIHN0cmVhbWVkIGFzIExvZyBvYmplY3RzLCB3aGljaCBpbmNsdWRlIGEgbGlzdCBvZlxuICAgICAqIGpzb25wYXRjaCBvcHMgdGhhdCBkZXNjcmliZSBob3cgdGhlIHN0YXRlIG9mIHRoZSBydW4gaGFzIGNoYW5nZWQgaW4gZWFjaFxuICAgICAqIHN0ZXAsIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIHJ1bi5cbiAgICAgKiBUaGUganNvbnBhdGNoIG9wcyBjYW4gYmUgYXBwbGllZCBpbiBvcmRlciB0byBjb25zdHJ1Y3Qgc3RhdGUuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gc3RyZWFtT3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwib3JpZ2luYWxcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKGNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjb3BpZWRDYWxsYmFja3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Qcm9taXNlID0gdGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW0gPSBhd2FpdCBydW5uYWJsZVN0cmVhbVByb21pc2U7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBydW5uYWJsZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9zdHJlYW1lZF9vdXRwdXQvLVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbG9nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgYXdhaXQgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgaWYgKG9wdGlvbnMudmVyc2lvbiA9PT0gXCJ2MVwiKSB7XG4gICAgICAgICAgICBzdHJlYW0gPSB0aGlzLl9zdHJlYW1FdmVudHNWMShpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy52ZXJzaW9uID09PSBcInYyXCIpIHtcbiAgICAgICAgICAgIHN0cmVhbSA9IHRoaXMuX3N0cmVhbUV2ZW50c1YyKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25seSB2ZXJzaW9ucyBcInYxXCIgYW5kIFwidjJcIiBvZiB0aGUgc2NoZW1hIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuY29kaW5nID09PSBcInRleHQvZXZlbnQtc3RyZWFtXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtRXZlbnRzVjIoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZXZlbnRTdHJlYW1lciA9IG5ldyBFdmVudFN0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcnVuSWQgPSBjb25maWcucnVuSWQgPz8gdXVpZHY0KCk7XG4gICAgICAgIGNvbmZpZy5ydW5JZCA9IHJ1bklkO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBjb25maWcuY2FsbGJhY2tzO1xuICAgICAgICBpZiAoY2FsbGJhY2tzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbZXZlbnRTdHJlYW1lcl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFja3MpKSB7XG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvbmNhdChldmVudFN0cmVhbWVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcGllZENhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICBjb3BpZWRDYWxsYmFja3MuYWRkSGFuZGxlcihldmVudFN0cmVhbWVyLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIC8vIENhbGwgdGhlIHJ1bm5hYmxlIGluIHN0cmVhbWluZyBtb2RlLFxuICAgICAgICAvLyBhZGQgZWFjaCBjaHVuayB0byB0aGUgb3V0cHV0IHN0cmVhbVxuICAgICAgICBjb25zdCBvdXRlclRoaXMgPSB0aGlzO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBjb25zdW1lUnVubmFibGVTdHJlYW0oKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBzaWduYWw7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnNpZ25hbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJhbnlcIiBpbiBBYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIG5hdGl2ZSBBYm9ydFNpZ25hbC5hbnkoKSBpZiBhdmFpbGFibGUgKE5vZGUgMTkrKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbCA9IEFib3J0U2lnbmFsLmFueShbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgZm9yIE5vZGUgMTggYW5kIGJlbG93IC0ganVzdCB1c2UgdGhlIHByb3ZpZGVkIHNpZ25hbFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsID0gb3B0aW9ucy5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgd2Ugc3RpbGwgYWJvcnQgb3VyIGNvbnRyb2xsZXIgd2hlbiB0aGUgcGFyZW50IHNpZ25hbCBhYm9ydHNcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bm5hYmxlU3RyZWFtID0gYXdhaXQgb3V0ZXJUaGlzLnN0cmVhbShpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXBwZWRTdHJlYW0gPSBldmVudFN0cmVhbWVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bklkLCBydW5uYWJsZVN0cmVhbSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgXyBvZiB0YXBwZWRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBpdGVyYXRlIHNvIHRoYXQgdGhlIGNhbGxiYWNrIGhhbmRsZXIgcGlja3MgdXAgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudFN0cmVhbWVyLmZpbmlzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UgPSBjb25zdW1lUnVubmFibGVTdHJlYW0oKTtcbiAgICAgICAgbGV0IGZpcnN0RXZlbnRTZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBmaXJzdEV2ZW50UnVuSWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIGV2ZW50U3RyZWFtZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29yay1hcm91bmQgYW4gaXNzdWUgd2hlcmUgdGhlIGlucHV0cyBpbnRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoYWluIGFyZSBub3QgYXZhaWxhYmxlIHVudGlsIHRoZSBlbnRpcmUgaW5wdXQgaXMgY29uc3VtZWQuXG4gICAgICAgICAgICAgICAgLy8gQXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24sIHdlJ2xsIG1vZGlmeSB0aGUgaW5wdXQgdG8gYmUgdGhlIGlucHV0XG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3YXMgcGFzc2VkIGludG8gdGhlIGNoYWluLlxuICAgICAgICAgICAgICAgIGlmICghZmlyc3RFdmVudFNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbnB1dCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEV2ZW50U2VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXZlbnRSdW5JZCA9IGV2ZW50LnJ1bl9pZDtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQucnVuX2lkID09PSBmaXJzdEV2ZW50UnVuSWQgJiYgZXZlbnQuZXZlbnQuZW5kc1dpdGgoXCJfZW5kXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgdGhlIGVuZCBldmVudCBjb3JyZXNwb25kaW5nIHRvIHRoZSByb290IHJ1bm5hYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvbnQgaW5jbHVkZSB0aGUgaW5wdXQgaW4gdGhlIGV2ZW50IHNpbmNlIGl0J3MgZ3VhcmFudGVlZFxuICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgZmlyc3QgZXZlbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhPy5pbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGV2ZW50LmRhdGEuaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgIGF3YWl0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1FdmVudHNWMShpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBsZXQgcnVuTG9nO1xuICAgICAgICBsZXQgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcbiAgICAgICAgY29uc3Qgcm9vdE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBjb25zdCByb290TmFtZSA9IGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbG9nIG9mIGxvZ1N0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFydW5Mb2cpIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBSdW5Mb2cuZnJvbVJ1bkxvZ1BhdGNoKGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVuTG9nLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIGVycm9yOiBcInN0cmVhbUV2ZW50c1wiIHN0YXRlIGlzIG1pc3NpbmcuIFBsZWFzZSBvcGVuIGEgYnVnIHJlcG9ydC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFlpZWxkIHRoZSBzdGFydCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUgaWYgaXQgaGFzbid0IGJlZW4gc2Vlbi5cbiAgICAgICAgICAgIC8vIFRoZSByb290IHJ1biBpcyBuZXZlciBmaWx0ZXJlZCBvdXRcbiAgICAgICAgICAgIGlmICghaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdGFydGAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0aHMgPSBsb2cub3BzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSlcbiAgICAgICAgICAgICAgICAubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuICAgICAgICAgICAgY29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUeXBlO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuZW5kX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RyZWFtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBpbnB1dHMgd2l0aCB0aGUgc3RhcnQgZXZlbnQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IHRoZXkgd2lsbCBOT1QgYmUgYXZhaWxhYmxlIGZvciBjb21wb25lbnRzIHRoYXQgb3BlcmF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBzdHJlYW1zLCBzaW5jZSB0aG9zZSBjb21wb25lbnRzIHN0cmVhbSB0aGUgaW5wdXQgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtub3cgaXRzIGZpbmFsIHZhbHVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5vdXRwdXQgPSBsb2dFbnRyeS5maW5hbF9vdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke2xvZ0VudHJ5Lm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geyBjaHVuazogbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHRoaXMgYXZvaWRzIGR1cGxpY2F0ZXMgYXMgd2VsbCFcbiAgICAgICAgICAgICAgICAgICAgbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ0VudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogbG9nRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBsb2dFbnRyeS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgd2UgdGFrZSBjYXJlIG9mIHRoZSBzdHJlYW1pbmcgb3V0cHV0IGZyb20gdGhlIHJvb3QgY2hhaW5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueS5cbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IHJ1bkxvZztcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke3N0YXRlLm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlLnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0cmVhbWAsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBydW5Mb2c/LnN0YXRlO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgeWllbGQgdGhlIGVuZCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fZW5kYCxcbiAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHN0YXRlLmZpbmFsX291dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSlcbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG4gICAgICAgIHJldHVybiBpc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHJ1bm5hYmxlIHRvIGEgdG9vbC4gUmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYFxuICAgICAqIHdoaWNoIGNvbnRhaW5zIHRoZSBydW5uYWJsZSwgbmFtZSwgZGVzY3JpcHRpb24gYW5kIHNjaGVtYS5cbiAgICAgKlxuICAgICAqIEB0ZW1wbGF0ZSB7VCBleHRlbmRzIFJ1bklucHV0ID0gUnVuSW5wdXR9IFJ1bklucHV0IC0gVGhlIGlucHV0IHR5cGUgb2YgdGhlIHJ1bm5hYmxlLiBTaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIGBSdW5JbnB1dGAgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRzXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gW2ZpZWxkcy5kZXNjcmlwdGlvbl0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLiBGYWxscyBiYWNrIHRvIHRoZSBkZXNjcmlwdGlvbiBvbiB0aGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWQsIG9yIHVuZGVmaW5lZCBpZiBuZWl0aGVyIGFyZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3ouWm9kVHlwZTxUPn0gW2ZpZWxkcy5zY2hlbWFdIFRoZSBab2Qgc2NoZW1hIGZvciB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuIEluZmVycyB0aGUgWm9kIHR5cGUgZnJvbSB0aGUgaW5wdXQgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8ei5ab2RUeXBlPFQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiAgICAgKi9cbiAgICBhc1Rvb2woZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0UnVubmFibGVUb1Rvb2wodGhpcywgZmllbGRzKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZSB3aXRoIGEgc2V0IG9mIGt3YXJncy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQge1xuICogICB0eXBlIFJ1bm5hYmxlQ29uZmlnLFxuICogICBSdW5uYWJsZUxhbWJkYSxcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBlbmhhbmNlUHJvZmlsZSA9IChcbiAqICAgcHJvZmlsZTogUmVjb3JkPHN0cmluZywgYW55PixcbiAqICAgY29uZmlnPzogUnVubmFibGVDb25maWdcbiAqICkgPT4ge1xuICogICBpZiAoY29uZmlnPy5jb25maWd1cmFibGU/LnJvbGUpIHtcbiAqICAgICByZXR1cm4geyAuLi5wcm9maWxlLCByb2xlOiBjb25maWcuY29uZmlndXJhYmxlLnJvbGUgfTtcbiAqICAgfVxuICogICByZXR1cm4gcHJvZmlsZTtcbiAqIH07XG4gKlxuICogY29uc3QgcnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGVuaGFuY2VQcm9maWxlKTtcbiAqXG4gKiAvLyBCaW5kIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHJ1bm5hYmxlIHRvIHNldCB0aGUgdXNlcidzIHJvbGUgZHluYW1pY2FsbHlcbiAqIGNvbnN0IGFkbWluUnVubmFibGUgPSBydW5uYWJsZS5iaW5kKHsgY29uZmlndXJhYmxlOiB7IHJvbGU6IFwiQWRtaW5cIiB9IH0pO1xuICogY29uc3QgdXNlclJ1bm5hYmxlID0gcnVubmFibGUuYmluZCh7IGNvbmZpZ3VyYWJsZTogeyByb2xlOiBcIlVzZXJcIiB9IH0pO1xuICpcbiAqIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBhZG1pblJ1bm5hYmxlLmludm9rZSh7XG4gKiAgIG5hbWU6IFwiQWxpY2VcIixcbiAqICAgZW1haWw6IFwiYWxpY2VAZXhhbXBsZS5jb21cIlxuICogfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkFsaWNlXCIsIGVtYWlsOiBcImFsaWNlQGV4YW1wbGUuY29tXCIsIHJvbGU6IFwiQWRtaW5cIiB9XG4gKlxuICogY29uc3QgcmVzdWx0MiA9IGF3YWl0IHVzZXJSdW5uYWJsZS5pbnZva2Uoe1xuICogICBuYW1lOiBcIkJvYlwiLFxuICogICBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIlxuICogfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkJvYlwiLCBlbWFpbDogXCJib2JAZXhhbXBsZS5jb21cIiwgcm9sZTogXCJVc2VyXCIgfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUJpbmRpbmcgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQmluZGluZ1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ0ZhY3Rvcmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgICAgICB0aGlzLmt3YXJncyA9IGZpZWxkcy5rd2FyZ3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZmllbGRzLmNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWdGYWN0b3JpZXMgPSBmaWVsZHMuY29uZmlnRmFjdG9yaWVzO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5nZXROYW1lKHN1ZmZpeCk7XG4gICAgfVxuICAgIGFzeW5jIF9tZXJnZUNvbmZpZyguLi5vcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgLi4ub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBtZXJnZUNvbmZpZ3MoY29uZmlnLCAuLi4odGhpcy5jb25maWdGYWN0b3JpZXNcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jb25maWdGYWN0b3JpZXMubWFwKGFzeW5jIChjb25maWdGYWN0b3J5KSA9PiBhd2FpdCBjb25maWdGYWN0b3J5KGNvbmZpZykpKVxuICAgICAgICAgICAgOiBbXSkpO1xuICAgIH1cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHsgLi4udGhpcy5rd2FyZ3MsIC4uLmt3YXJncyB9LFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aFJldHJ5KGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQud2l0aFJldHJ5KGZpZWxkcyksXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5pbnZva2UoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucylcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKGluZGl2aWR1YWxPcHRpb24pID0+IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhpbmRpdmlkdWFsT3B0aW9uKSwgdGhpcy5rd2FyZ3MpKSlcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgbWVyZ2VkT3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLnN0cmVhbShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC50cmFuc2Zvcm0oZ2VuZXJhdG9yLCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIHN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgY29uc3Qgb3V0ZXJUaGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgZ2VuZXJhdG9yID0gYXN5bmMgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkKiBvdXRlclRoaXMuYm91bmQuc3RyZWFtRXZlbnRzKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgLi4uKGF3YWl0IG91dGVyVGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCBvdXRlclRoaXMua3dhcmdzKSksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogb3B0aW9ucy52ZXJzaW9uLFxuICAgICAgICAgICAgfSwgc3RyZWFtT3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcihnZW5lcmF0b3IoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlQmluZGluZyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRoaW5nXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaW5nLmJvdW5kICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcuYm91bmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGVcbiAqIHdpdGggZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBSdW5uYWJsZUVhY2gsIFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCB0b1VwcGVyQ2FzZSA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IGlucHV0LnRvVXBwZXJDYXNlKCk7XG4gKiBjb25zdCBhZGRHcmVldGluZyA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IGBIZWxsbywgJHtpbnB1dH0hYDtcbiAqXG4gKiBjb25zdCB1cHBlckNhc2VMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHRvVXBwZXJDYXNlKTtcbiAqIGNvbnN0IGdyZWV0aW5nTGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbShhZGRHcmVldGluZyk7XG4gKlxuICogY29uc3QgY2hhaW4gPSBuZXcgUnVubmFibGVFYWNoKHtcbiAqICAgYm91bmQ6IHVwcGVyQ2FzZUxhbWJkYS5waXBlKGdyZWV0aW5nTGFtYmRhKSxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYWluLmludm9rZShbXCJhbGljZVwiLCBcImJvYlwiLCBcImNhcm9sXCJdKVxuICpcbiAqIC8vIFtcIkhlbGxvLCBBTElDRSFcIiwgXCJIZWxsbywgQk9CIVwiLCBcIkhlbGxvLCBDQVJPTCFcIl1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVFYWNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUVhY2hcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZHMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIGt3YXJncyBUaGUgYXJndW1lbnRzIHRvIGJpbmQgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBSdW5uYWJsZUVhY2hgIGNsYXNzIHRoYXQgaXMgYm91bmQgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC5iaW5kKGt3YXJncyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0cywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UuYmluZCh0aGlzKSwgaW5wdXRzLCBjb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIF9pbnZva2UoaW5wdXRzLCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuYmF0Y2goaW5wdXRzLCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQud2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHJ1bm5hYmxlcyB0aGF0IGNhbiBiZSByZXRyaWVkIGFcbiAqIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtcbiAqICAgUnVubmFibGVMYW1iZGEsXG4gKiAgIFJ1bm5hYmxlUmV0cnksXG4gKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gKlxuICogLy8gU2ltdWxhdGUgYW4gQVBJIGNhbGwgdGhhdCBmYWlsc1xuICogY29uc3Qgc2ltdWxhdGVBcGlDYWxsID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICogICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyBBUEkgY2FsbCB3aXRoIGlucHV0OiAke2lucHV0fWApO1xuICogICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY2FsbCBmYWlsZWQgZHVlIHRvIG5ldHdvcmsgaXNzdWVcIik7XG4gKiB9O1xuICpcbiAqIGNvbnN0IGFwaUNhbGxMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKHNpbXVsYXRlQXBpQ2FsbCk7XG4gKlxuICogLy8gQXBwbHkgcmV0cnkgbG9naWMgdXNpbmcgdGhlIC53aXRoUmV0cnkoKSBtZXRob2RcbiAqIGNvbnN0IGFwaUNhbGxXaXRoUmV0cnkgPSBhcGlDYWxsTGFtYmRhLndpdGhSZXRyeSh7IHN0b3BBZnRlckF0dGVtcHQ6IDMgfSk7XG4gKlxuICogLy8gQWx0ZXJuYXRpdmVseSwgY3JlYXRlIGEgUnVubmFibGVSZXRyeSBpbnN0YW5jZSBtYW51YWxseVxuICogY29uc3QgbWFudWFsUmV0cnkgPSBuZXcgUnVubmFibGVSZXRyeSh7XG4gKiAgIGJvdW5kOiBhcGlDYWxsTGFtYmRhLFxuICogICBtYXhBdHRlbXB0TnVtYmVyOiAzLFxuICogICBjb25maWc6IHt9LFxuICogfSk7XG4gKlxuICogLy8gRXhhbXBsZSBpbnZvY2F0aW9uIHVzaW5nIHRoZSAud2l0aFJldHJ5KCkgbWV0aG9kXG4gKiBjb25zdCByZXMgPSBhd2FpdCBhcGlDYWxsV2l0aFJldHJ5XG4gKiAgIC5pbnZva2UoXCJSZXF1ZXN0IDFcIilcbiAqICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICogICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgYWZ0ZXIgbXVsdGlwbGUgcmV0cmllczpcIiwgZXJyb3IubWVzc2FnZSk7XG4gKiAgIH0pO1xuICpcbiAqIC8vIEV4YW1wbGUgaW52b2NhdGlvbiB1c2luZyB0aGUgbWFudWFsIHJldHJ5IGluc3RhbmNlXG4gKiBjb25zdCByZXMyID0gYXdhaXQgbWFudWFsUmV0cnlcbiAqICAgLmludm9rZShcIlJlcXVlc3QgMlwiKVxuICogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBtdWx0aXBsZSByZXRyaWVzOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUmV0cnkgZXh0ZW5kcyBSdW5uYWJsZUJpbmRpbmcge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVJldHJ5XCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhBdHRlbXB0TnVtYmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAzXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkZhaWxlZEF0dGVtcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICgpID0+IHsgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXhBdHRlbXB0TnVtYmVyID0gZmllbGRzLm1heEF0dGVtcHROdW1iZXIgPz8gdGhpcy5tYXhBdHRlbXB0TnVtYmVyO1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9IGZpZWxkcy5vbkZhaWxlZEF0dGVtcHQgPz8gdGhpcy5vbkZhaWxlZEF0dGVtcHQ7XG4gICAgfVxuICAgIF9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0YWcgPSBhdHRlbXB0ID4gMSA/IGByZXRyeTphdHRlbXB0OiR7YXR0ZW1wdH1gIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGFnKSB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBwUmV0cnkoKGF0dGVtcHROdW1iZXIpID0+IHN1cGVyLmludm9rZShpbnB1dCwgdGhpcy5fcGF0Y2hDb25maWdGb3JSZXRyeShhdHRlbXB0TnVtYmVyLCBjb25maWcsIHJ1bk1hbmFnZXIpKSwge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogKGVycm9yKSA9PiB0aGlzLm9uRmFpbGVkQXR0ZW1wdChlcnJvciwgaW5wdXQpLFxuICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdGhhdCBpbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQsIHJ1biBtYW5hZ2VyLFxuICAgICAqIGFuZCBjb25maWcuIEl0IGhhbmRsZXMgdGhlIHJldHJ5IGxvZ2ljIGJ5IGNhdGNoaW5nIGFueSBlcnJvcnMgYW5kXG4gICAgICogcmVjdXJzaXZlbHkgaW52b2tpbmcgaXRzZWxmIHdpdGggdGhlIHVwZGF0ZWQgY29uZmlnIGZvciB0aGUgbmV4dCByZXRyeVxuICAgICAqIGF0dGVtcHQuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBydW5NYW5hZ2VyIFRoZSBydW4gbWFuYWdlciBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZyBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UuYmluZCh0aGlzKSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jIF9iYXRjaChpbnB1dHMsIGNvbmZpZ3MsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0c01hcCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcFJldHJ5KGFzeW5jIChhdHRlbXB0TnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nSW5kZXhlcyA9IGlucHV0c1xuICAgICAgICAgICAgICAgICAgICAubWFwKChfLCBpKSA9PiBpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpKSA9PiByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSBpbnN0YW5jZW9mIEVycm9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbnB1dHMgPSByZW1haW5pbmdJbmRleGVzLm1hcCgoaSkgPT4gaW5wdXRzW2ldKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaGVkQ29uZmlncyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZ3M/LltpXSwgcnVuTWFuYWdlcnM/LltpXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzdXBlci5iYXRjaChyZW1haW5pbmdJbnB1dHMsIHBhdGNoZWRDb25maWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmJhdGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRXhjZXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdE1hcEluZGV4ID0gcmVtYWluaW5nSW5kZXhlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RFeGNlcHRpb24gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbi5pbnB1dCA9IHJlbWFpbmluZ0lucHV0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBlcnJvci5pbnB1dCksXG4gICAgICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKSlcbiAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gcmVzdWx0c01hcFtwYXJzZUludChrZXksIDEwKV0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEEgc2VxdWVuY2Ugb2YgcnVubmFibGVzLCB3aGVyZSB0aGUgb3V0cHV0IG9mIGVhY2ggaXMgdGhlIGlucHV0IG9mIHRoZSBuZXh0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbcHJvbXB0VGVtcGxhdGUsIG5ldyBDaGF0T3BlbkFJKHt9KV0pO1xuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVTZXF1ZW5jZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVTZXF1ZW5jZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWlkZGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbWl0U2VxdWVuY2VUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZpcnN0ID0gZmllbGRzLmZpcnN0O1xuICAgICAgICB0aGlzLm1pZGRsZSA9IGZpZWxkcy5taWRkbGUgPz8gdGhpcy5taWRkbGU7XG4gICAgICAgIHRoaXMubGFzdCA9IGZpZWxkcy5sYXN0O1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcbiAgICAgICAgdGhpcy5vbWl0U2VxdWVuY2VUYWdzID0gZmllbGRzLm9taXRTZXF1ZW5jZVRhZ3MgPz8gdGhpcy5vbWl0U2VxdWVuY2VUYWdzO1xuICAgIH1cbiAgICBnZXQgc3RlcHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsU3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGVdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsU3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gaW5pdGlhbFN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0aGlzLm9taXRTZXF1ZW5jZVRhZ3MgPyB1bmRlZmluZWQgOiBgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dCA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGNhbid0IGRldGVjdCB0aGF0IHRoZSBsYXN0IG91dHB1dCBvZiB0aGUgc2VxdWVuY2UgcmV0dXJucyBSdW5PdXRwdXQsIHNvIGNhbGwgaXQgb3V0IG9mIHRoZSBsb29wIGhlcmVcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBYm9ydGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBhd2FpdCB0aGlzLmxhc3QuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGhpcy5vbWl0U2VxdWVuY2VUYWdzID8gdW5kZWZpbmVkIDogYHNlcTpzdGVwOiR7dGhpcy5zdGVwcy5sZW5ndGh9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QoZmluYWxPdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgY29uZmlnTGlzdFtpXS5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnTGlzdFtpXS5ydW5OYW1lKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWdMaXN0W2ldLnJ1bklkO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0cyA9IGlucHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLnN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBzdGVwLmJhdGNoKG5leHRTdGVwSW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRSdW5NYW5hZ2VyID0gcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGhpcy5vbWl0U2VxdWVuY2VUYWdzID8gdW5kZWZpbmVkIDogYHNlcTpzdGVwOiR7aSArIDF9YCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7IGNhbGxiYWNrczogY2hpbGRSdW5NYW5hZ2VyIH0pO1xuICAgICAgICAgICAgICAgIH0pLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXRzID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgY29uZmlnTGlzdFswXT8uc2lnbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChuZXh0U3RlcElucHV0cywgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgIHJldHVybiBuZXh0U3RlcElucHV0cztcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBjb25zdCBzdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICAgICAgbGV0IGNvbmNhdFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGlucHV0R2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBmaW5hbEdlbmVyYXRvciA9IHN0ZXBzWzBdLnRyYW5zZm9ybShpbnB1dEdlbmVyYXRvcigpLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHVuZGVmaW5lZCA6IGBzZXE6c3RlcDoxYCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRoaXMub21pdFNlcXVlbmNlVGFncyA/IHVuZGVmaW5lZCA6IGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWVPckZpZWxkcykge1xuICAgICAgICBsZXQgZXh0cmEgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lT3JGaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGV4dHJhLm5hbWUgPSBuYW1lT3JGaWVsZHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmFtZU9yRmllbGRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4dHJhID0gbmFtZU9yRmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICAuLi5leHRyYSxcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgbWFwcGluZyBvZiBydW5uYWJsZXMgaW4gcGFyYWxsZWwsXG4gKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtYXBDaGFpbiA9IFJ1bm5hYmxlTWFwLmZyb20oe1xuICogICBqb2tlOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogICBwb2VtOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ3cml0ZSBhIDItbGluZSBwb2VtIGFib3V0IHt0b3BpY31cIikucGlwZShcbiAqICAgICBuZXcgQ2hhdEFudGhyb3BpYyh7fSksXG4gKiAgICksXG4gKiB9KTtcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hcENoYWluLmludm9rZSh7IHRvcGljOiBcImJlYXJcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVNYXAgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTWFwXCI7XG4gICAgfVxuICAgIGdldFN0ZXBzS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RlcHMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGVwc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0ZXBzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcy5zdGVwcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcHNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbShzdGVwcykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwge1xuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgIH0sIGNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuc3RlcHMpLm1hcChhc3luYyAoW2tleSwgcnVubmFibGVdKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBhd2FpdCBydW5uYWJsZS5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBtYXA6a2V5OiR7a2V5fWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcmFjZVdpdGhTaWduYWwoUHJvbWlzZS5hbGwocHJvbWlzZXMpLCBvcHRpb25zPy5zaWduYWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gc2hhbGxvdyBjb3B5IHN0ZXBzIHRvIGlnbm9yZSBjaGFuZ2VzIHdoaWxlIGl0ZXJhdGluZ1xuICAgICAgICBjb25zdCBzdGVwcyA9IHsgLi4udGhpcy5zdGVwcyB9O1xuICAgICAgICAvLyBlYWNoIHN0ZXAgZ2V0cyBhIGNvcHkgb2YgdGhlIGlucHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IGlucHV0Q29waWVzID0gYXRlZShnZW5lcmF0b3IsIE9iamVjdC5rZXlzKHN0ZXBzKS5sZW5ndGgpO1xuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIGVhY2ggb3V0cHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IHRhc2tzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhzdGVwcykubWFwKChba2V5LCBydW5uYWJsZV0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbiA9IHJ1bm5hYmxlLnRyYW5zZm9ybShpbnB1dENvcGllc1tpXSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyB5aWVsZCBjaHVua3MgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLFxuICAgICAgICAvLyBzdGFydGluZyBuZXcgaXRlcmF0aW9ucyBhcyBuZWVkZWQsXG4gICAgICAgIC8vIHVudGlsIGFsbCBpdGVyYXRvcnMgYXJlIGRvbmVcbiAgICAgICAgd2hpbGUgKHRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJhY2UodGFza3MudmFsdWVzKCkpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHJlc3VsdCwgZ2VuIH0gPSBhd2FpdCByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBvcHRpb25zPy5zaWduYWwpO1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgeyBba2V5XTogcmVzdWx0LnZhbHVlIH07XG4gICAgICAgICAgICAgICAgdGFza3Muc2V0KGtleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgICAgICBnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHdyYXBzIGEgdHJhY2VkIExhbmdTbWl0aCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlVHJhY2VhYmxlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaXNUcmFjZWFibGVGdW5jdGlvbihmaWVsZHMuZnVuYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlVHJhY2VhYmxlIHJlcXVpcmVzIGEgZnVuY3Rpb24gdGhhdCBpcyB3cmFwcGVkIGluIHRyYWNlYWJsZSBoaWdoZXItb3JkZXIgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBbY29uZmlnXSA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIDEpO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuZnVuYyhwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzIH0pLCBpbnB1dCk7XG4gICAgICAgIHJldHVybiByYWNlV2l0aFNpZ25hbChwcm9taXNlLCBjb25maWc/LnNpZ25hbCk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW2NvbmZpZ10gPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCAxKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoaXNBc3luY0l0ZXJhYmxlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0l0ZXJhdG9yKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSByZXN1bHQubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB5aWVsZCBzdGF0ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB5aWVsZCByZXN1bHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVRyYWNlYWJsZSh7IGZ1bmMgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm9uVHJhY2VhYmxlRnVuY3Rpb24oZnVuYykge1xuICAgIGlmIChpc1RyYWNlYWJsZUZ1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJ1bm5hYmxlTGFtYmRhIHJlcXVpcmVzIGEgZnVuY3Rpb24gdGhhdCBpcyBub3Qgd3JhcHBlZCBpbiB0cmFjZWFibGUgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uLiBUaGlzIHNob3VsZG4ndCBoYXBwZW4uXCIpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHdyYXBzIGFuIGFyYml0cmFyeSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBhZGQgPSAoaW5wdXQ6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSkgPT4gaW5wdXQueCArIGlucHV0Lnk7XG4gKlxuICogY29uc3QgbXVsdGlwbHkgPSAoaW5wdXQ6IHsgdmFsdWU6IG51bWJlcjsgbXVsdGlwbGllcjogbnVtYmVyIH0pID0+XG4gKiAgIGlucHV0LnZhbHVlICogaW5wdXQubXVsdGlwbGllcjtcbiAqXG4gKiAvLyBDcmVhdGUgcnVubmFibGVzIGZvciB0aGUgZnVuY3Rpb25zXG4gKiBjb25zdCBhZGRMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFkZCk7XG4gKiBjb25zdCBtdWx0aXBseUxhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20obXVsdGlwbHkpO1xuICpcbiAqIC8vIENoYWluIHRoZSBsYW1iZGFzIGZvciBhIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25cbiAqIGNvbnN0IGNoYWluZWRMYW1iZGEgPSBhZGRMYW1iZGEucGlwZSgocmVzdWx0KSA9PlxuICogICBtdWx0aXBseUxhbWJkYS5pbnZva2UoeyB2YWx1ZTogcmVzdWx0LCBtdWx0aXBsaWVyOiAyIH0pXG4gKiApO1xuICpcbiAqIC8vIEV4YW1wbGUgaW52b2NhdGlvbiBvZiB0aGUgY2hhaW5lZExhbWJkYVxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW5lZExhbWJkYS5pbnZva2UoeyB4OiAyLCB5OiAzIH0pO1xuICpcbiAqIC8vIFdpbGwgbG9nIFwiMTBcIiAoc2luY2UgKDIgKyAzKSAqIDIgPSAxMClcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVMYW1iZGEgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTGFtYmRhXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoaXNUcmFjZWFibGVGdW5jdGlvbihmaWVsZHMuZnVuYykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm5cbiAgICAgICAgICAgIHJldHVybiBSdW5uYWJsZVRyYWNlYWJsZS5mcm9tKGZpZWxkcy5mdW5jKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGFzc2VydE5vblRyYWNlYWJsZUZ1bmN0aW9uKGZpZWxkcy5mdW5jKTtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjaGlsZENvbmZpZyksIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY3Vyc2lvbiBsaW1pdCByZWFjaGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IG91dHB1dC5pbnZva2UoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNoaWxkQ29uZmlnLnJlY3Vyc2lvbkxpbWl0ID8/IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FzeW5jSXRlcmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjaGlsZENvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSXRlcmFibGVJdGVyYXRvcihvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dChjaGlsZENvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UuYmluZCh0aGlzKSwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjaGlsZENvbmZpZyksIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmZ1bmMoZmluYWxDaHVuaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBvdXRwdXQuc3RyZWFtKGZpbmFsQ2h1bmssIGNoaWxkQ29uZmlnKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNBc3luY0l0ZXJhYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY2hpbGRDb25maWcsIG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0l0ZXJhYmxlSXRlcmF0b3Iob3V0cHV0KSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQoY2hpbGRDb25maWcsIG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIG91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgICAgICBnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHJ1bnMgYSBtYXBwaW5nIG9mIHJ1bm5hYmxlcyBpbiBwYXJhbGxlbCxcbiAqIGFuZCByZXR1cm5zIGEgbWFwcGluZyBvZiB0aGVpciBvdXRwdXRzLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7XG4gKiAgIFJ1bm5hYmxlTGFtYmRhLFxuICogICBSdW5uYWJsZVBhcmFsbGVsLFxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICpcbiAqIGNvbnN0IGFkZFllYXJzID0gKGFnZTogbnVtYmVyKTogbnVtYmVyID0+IGFnZSArIDU7XG4gKiBjb25zdCB5ZWFyc1RvRmlmdHkgPSAoYWdlOiBudW1iZXIpOiBudW1iZXIgPT4gNTAgLSBhZ2U7XG4gKiBjb25zdCB5ZWFyc1RvSHVuZHJlZCA9IChhZ2U6IG51bWJlcik6IG51bWJlciA9PiAxMDAgLSBhZ2U7XG4gKlxuICogY29uc3QgYWRkWWVhcnNMYW1iZGEgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFkZFllYXJzKTtcbiAqIGNvbnN0IG1pbGVzdG9uZUZpZnR5TGFtYmRhID0gUnVubmFibGVMYW1iZGEuZnJvbSh5ZWFyc1RvRmlmdHkpO1xuICogY29uc3QgbWlsZXN0b25lSHVuZHJlZExhbWJkYSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oeWVhcnNUb0h1bmRyZWQpO1xuICpcbiAqIC8vIFBpcGUgd2lsbCBjb2VyY2Ugb2JqZWN0cyBpbnRvIFJ1bm5hYmxlUGFyYWxsZWwgYnkgZGVmYXVsdCwgYnV0IHdlXG4gKiAvLyBleHBsaWNpdGx5IGluc3RhbnRpYXRlIG9uZSBoZXJlIHRvIGRlbW9uc3RyYXRlXG4gKiBjb25zdCBzZXF1ZW5jZSA9IGFkZFllYXJzTGFtYmRhLnBpcGUoXG4gKiAgIFJ1bm5hYmxlUGFyYWxsZWwuZnJvbSh7XG4gKiAgICAgeWVhcnNfdG9fZmlmdHk6IG1pbGVzdG9uZUZpZnR5TGFtYmRhLFxuICogICAgIHllYXJzX3RvX2h1bmRyZWQ6IG1pbGVzdG9uZUh1bmRyZWRMYW1iZGEsXG4gKiAgIH0pXG4gKiApO1xuICpcbiAqIC8vIEludm9rZSB0aGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSBhZ2UgaW5wdXRcbiAqIGNvbnN0IHJlcyA9IHNlcXVlbmNlLmludm9rZSgyNSk7XG4gKlxuICogLy8geyB5ZWFyc190b19maWZ0eTogMjUsIHllYXJzX3RvX2h1bmRyZWQ6IDc1IH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVQYXJhbGxlbCBleHRlbmRzIFJ1bm5hYmxlTWFwIHtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSB0aGF0IGNhbiBmYWxsYmFjayB0byBvdGhlciBSdW5uYWJsZXMgaWYgaXQgZmFpbHMuXG4gKiBFeHRlcm5hbCBBUElzIChlLmcuLCBBUElzIGZvciBhIGxhbmd1YWdlIG1vZGVsKSBtYXkgYXQgdGltZXMgZXhwZXJpZW5jZVxuICogZGVncmFkZWQgcGVyZm9ybWFuY2Ugb3IgZXZlbiBkb3dudGltZS5cbiAqXG4gKiBJbiB0aGVzZSBjYXNlcywgaXQgY2FuIGJlIHVzZWZ1bCB0byBoYXZlIGEgZmFsbGJhY2sgUnVubmFibGUgdGhhdCBjYW4gYmVcbiAqIHVzZWQgaW4gcGxhY2Ugb2YgdGhlIG9yaWdpbmFsIFJ1bm5hYmxlIChlLmcuLCBmYWxsYmFjayB0byBhbm90aGVyIExMTSBwcm92aWRlcikuXG4gKlxuICogRmFsbGJhY2tzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBsZXZlbCBvZiBhIHNpbmdsZSBSdW5uYWJsZSwgb3IgYXQgdGhlIGxldmVsXG4gKiBvZiBhIGNoYWluIG9mIFJ1bm5hYmxlcy4gRmFsbGJhY2tzIGFyZSB0cmllZCBpbiBvcmRlciB1bnRpbCBvbmUgc3VjY2VlZHMgb3JcbiAqIGFsbCBmYWlsLlxuICpcbiAqIFdoaWxlIHlvdSBjYW4gaW5zdGFudGlhdGUgYSBgUnVubmFibGVXaXRoRmFsbGJhY2tzYCBkaXJlY3RseSwgaXQgaXMgdXN1YWxseVxuICogbW9yZSBjb252ZW5pZW50IHRvIHVzZSB0aGUgYHdpdGhGYWxsYmFja3NgIG1ldGhvZCBvbiBhbiBleGlzdGluZyBSdW5uYWJsZS5cbiAqXG4gKiBXaGVuIHN0cmVhbWluZywgZmFsbGJhY2tzIHdpbGwgb25seSBiZSBjYWxsZWQgb24gZmFpbHVyZXMgZHVyaW5nIHRoZSBpbml0aWFsXG4gKiBzdHJlYW0gY3JlYXRpb24uIEVycm9ycyB0aGF0IG9jY3VyIGFmdGVyIGEgc3RyZWFtIHN0YXJ0cyB3aWxsIG5vdCBmYWxsYmFja1xuICogdG8gdGhlIG5leHQgUnVubmFibGUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7XG4gKiAgIFJ1bm5hYmxlTGFtYmRhLFxuICogICBSdW5uYWJsZVdpdGhGYWxsYmFja3MsXG4gKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gKlxuICogY29uc3QgcHJpbWFyeU9wZXJhdGlvbiA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAqICAgaWYgKGlucHV0ICE9PSBcInNhZmVcIikge1xuICogICAgIHRocm93IG5ldyBFcnJvcihcIlByaW1hcnkgb3BlcmF0aW9uIGZhaWxlZCBkdWUgdG8gdW5zYWZlIGlucHV0XCIpO1xuICogICB9XG4gKiAgIHJldHVybiBgUHJvY2Vzc2VkOiAke2lucHV0fWA7XG4gKiB9O1xuICpcbiAqIC8vIERlZmluZSBhIGZhbGxiYWNrIG9wZXJhdGlvbiB0aGF0IHByb2Nlc3NlcyB0aGUgaW5wdXQgZGlmZmVyZW50bHlcbiAqIGNvbnN0IGZhbGxiYWNrT3BlcmF0aW9uID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAqICAgYEZhbGxiYWNrIHByb2Nlc3NlZDogJHtpbnB1dH1gO1xuICpcbiAqIGNvbnN0IHByaW1hcnlSdW5uYWJsZSA9IFJ1bm5hYmxlTGFtYmRhLmZyb20ocHJpbWFyeU9wZXJhdGlvbik7XG4gKiBjb25zdCBmYWxsYmFja1J1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShmYWxsYmFja09wZXJhdGlvbik7XG4gKlxuICogLy8gQXBwbHkgdGhlIGZhbGxiYWNrIGxvZ2ljIHVzaW5nIHRoZSAud2l0aEZhbGxiYWNrcygpIG1ldGhvZFxuICogY29uc3QgcnVubmFibGVXaXRoRmFsbGJhY2sgPSBwcmltYXJ5UnVubmFibGUud2l0aEZhbGxiYWNrcyhbZmFsbGJhY2tSdW5uYWJsZV0pO1xuICpcbiAqIC8vIEFsdGVybmF0aXZlbHksIGNyZWF0ZSBhIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcyBpbnN0YW5jZSBtYW51YWxseVxuICogY29uc3QgbWFudWFsRmFsbGJhY2tDaGFpbiA9IG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuICogICBydW5uYWJsZTogcHJpbWFyeVJ1bm5hYmxlLFxuICogICBmYWxsYmFja3M6IFtmYWxsYmFja1J1bm5hYmxlXSxcbiAqIH0pO1xuICpcbiAqIC8vIEV4YW1wbGUgaW52b2NhdGlvbiB1c2luZyAud2l0aEZhbGxiYWNrcygpXG4gKiBjb25zdCByZXMgPSBhd2FpdCBydW5uYWJsZVdpdGhGYWxsYmFja1xuICogICAuaW52b2tlKFwidW5zYWZlIGlucHV0XCIpXG4gKiAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAqICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIGFmdGVyIGFsbCBhdHRlbXB0czpcIiwgZXJyb3IubWVzc2FnZSk7XG4gKiAgIH0pO1xuICpcbiAqIC8vIFwiRmFsbGJhY2sgcHJvY2Vzc2VkOiB1bnNhZmUgaW5wdXRcIlxuICpcbiAqIC8vIEV4YW1wbGUgaW52b2NhdGlvbiB1c2luZyBtYW51YWwgaW5zdGFudGlhdGlvblxuICogY29uc3QgcmVzID0gYXdhaXQgbWFudWFsRmFsbGJhY2tDaGFpblxuICogICAuaW52b2tlKFwic2FmZVwiKVxuICogICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gKiAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBhZnRlciBhbGwgYXR0ZW1wdHM6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICogICB9KTtcbiAqXG4gKiAvLyBcIlByb2Nlc3NlZDogc2FmZVwiXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcyBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVXaXRoRmFsbGJhY2tzXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bm5hYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bm5hYmxlID0gZmllbGRzLnJ1bm5hYmxlO1xuICAgICAgICB0aGlzLmZhbGxiYWNrcyA9IGZpZWxkcy5mYWxsYmFja3M7XG4gICAgfVxuICAgICpydW5uYWJsZXMoKSB7XG4gICAgICAgIHlpZWxkIHRoaXMucnVubmFibGU7XG4gICAgICAgIGZvciAoY29uc3QgZmFsbGJhY2sgb2YgdGhpcy5mYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHlpZWxkIGZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgeyBydW5JZCwgLi4ub3RoZXJDb25maWdGaWVsZHMgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgcnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG90aGVyQ29uZmlnRmllbGRzPy5ydW5OYW1lKTtcbiAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhvdGhlckNvbmZpZ0ZpZWxkcywge1xuICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgY2hpbGRDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaXJzdEVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZmlyc3RFcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgeyBydW5JZCwgLi4ub3RoZXJDb25maWdGaWVsZHMgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgcnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG90aGVyQ29uZmlnRmllbGRzPy5ydW5OYW1lKTtcbiAgICAgICAgbGV0IGZpcnN0RXJyb3I7XG4gICAgICAgIGxldCBzdHJlYW07XG4gICAgICAgIGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKG90aGVyQ29uZmlnRmllbGRzLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU3RyZWFtID0gYXdhaXQgcnVubmFibGUuc3RyZWFtKGlucHV0LCBjaGlsZENvbmZpZyk7XG4gICAgICAgICAgICAgICAgc3RyZWFtID0gY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY2hpbGRDb25maWcsIG9yaWdpbmFsU3RyZWFtKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGZpcnN0RXJyb3IgPz8gbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCA9PT0gdW5kZWZpbmVkID8gb3V0cHV0IDogY29uY2F0KG91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICBjb25maWdMaXN0WzBdLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IHJ1bm5hYmxlLmJhdGNoKGlucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICB9KSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHNbaV0sIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGVycm9yIHN0b3JlZCBhdCBlbmQgb2YgZmFsbGJhY2tzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZmlyc3RFcnJvcikpKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG59XG4vLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSB0aGUgY29tcGlsZXIgbmVlZHMgaGVscCBlbGltaW5hdGluZyBFcnJvciBhcyBhIFJ1bk91dHB1dCB0eXBlXG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSkge1xuICAgIGlmICh0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVMYW1iZGEoeyBmdW5jOiBjb2VyY2VhYmxlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2VhYmxlO1xuICAgIH1cbiAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShjb2VyY2VhYmxlKSAmJiB0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBydW5uYWJsZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlc1trZXldID0gX2NvZXJjZVRvUnVubmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVNYXAoe1xuICAgICAgICAgICAgc3RlcHM6IHJ1bm5hYmxlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgUnVubmFibGUsIGZ1bmN0aW9uIG9yIG9iamVjdC5cXG5JbnN0ZWFkIGdvdCBhbiB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtcbiAqICAgUnVubmFibGVBc3NpZ24sXG4gKiAgIFJ1bm5hYmxlTGFtYmRhLFxuICogICBSdW5uYWJsZVBhcmFsbGVsLFxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuICpcbiAqIGNvbnN0IGNhbGN1bGF0ZUFnZSA9ICh4OiB7IGJpcnRoWWVhcjogbnVtYmVyIH0pOiB7IGFnZTogbnVtYmVyIH0gPT4ge1xuICogICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAqICAgcmV0dXJuIHsgYWdlOiBjdXJyZW50WWVhciAtIHguYmlydGhZZWFyIH07XG4gKiB9O1xuICpcbiAqIGNvbnN0IGNyZWF0ZUdyZWV0aW5nID0gKHg6IHsgbmFtZTogc3RyaW5nIH0pOiB7IGdyZWV0aW5nOiBzdHJpbmcgfSA9PiB7XG4gKiAgIHJldHVybiB7IGdyZWV0aW5nOiBgSGVsbG8sICR7eC5uYW1lfSFgIH07XG4gKiB9O1xuICpcbiAqIGNvbnN0IG1hcHBlciA9IFJ1bm5hYmxlUGFyYWxsZWwuZnJvbSh7XG4gKiAgIGFnZV9zdGVwOiBSdW5uYWJsZUxhbWJkYS5mcm9tKGNhbGN1bGF0ZUFnZSksXG4gKiAgIGdyZWV0aW5nX3N0ZXA6IFJ1bm5hYmxlTGFtYmRhLmZyb20oY3JlYXRlR3JlZXRpbmcpLFxuICogfSk7XG4gKlxuICogY29uc3QgcnVubmFibGVBc3NpZ24gPSBuZXcgUnVubmFibGVBc3NpZ24oeyBtYXBwZXIgfSk7XG4gKlxuICogY29uc3QgcmVzID0gYXdhaXQgcnVubmFibGVBc3NpZ24uaW52b2tlKHsgbmFtZTogXCJBbGljZVwiLCBiaXJ0aFllYXI6IDE5OTAgfSk7XG4gKlxuICogLy8geyBuYW1lOiBcIkFsaWNlXCIsIGJpcnRoWWVhcjogMTk5MCwgYWdlX3N0ZXA6IHsgYWdlOiAzNCB9LCBncmVldGluZ19zdGVwOiB7IGdyZWV0aW5nOiBcIkhlbGxvLCBBbGljZSFcIiB9IH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVBc3NpZ24gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQXNzaWduXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChmaWVsZHMgaW5zdGFuY2VvZiBSdW5uYWJsZU1hcCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IG1hcHBlcjogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXBwZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBmaWVsZHMubWFwcGVyO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyUmVzdWx0ID0gYXdhaXQgdGhpcy5tYXBwZXIuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgLi4ubWFwcGVyUmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gY29sbGVjdCBtYXBwZXIga2V5c1xuICAgICAgICBjb25zdCBtYXBwZXJLZXlzID0gdGhpcy5tYXBwZXIuZ2V0U3RlcHNLZXlzKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB0d28gaW5wdXQgZ2Vucywgb25lIGZvciB0aGUgbWFwcGVyLCBvbmUgZm9yIHRoZSBpbnB1dFxuICAgICAgICBjb25zdCBbZm9yUGFzc3Rocm91Z2gsIGZvck1hcHBlcl0gPSBhdGVlKGdlbmVyYXRvcik7XG4gICAgICAgIC8vIGNyZWF0ZSBtYXBwZXIgb3V0cHV0IGdlblxuICAgICAgICBjb25zdCBtYXBwZXJPdXRwdXQgPSB0aGlzLm1hcHBlci50cmFuc2Zvcm0oZm9yTWFwcGVyLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBtYXBwZXJcbiAgICAgICAgY29uc3QgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UgPSBtYXBwZXJPdXRwdXQubmV4dCgpO1xuICAgICAgICAvLyB5aWVsZCB0aGUgcGFzc3Rocm91Z2hcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBmb3JQYXNzdGhyb3VnaCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGNodW5rKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGVBc3NpZ24gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIG9iamVjdHMgYXMgaW5wdXQsIGdvdCAke3R5cGVvZiBjaHVua31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrZXldKSA9PiAhbWFwcGVyS2V5cy5pbmNsdWRlcyhrZXkpKSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVyZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB5aWVsZCB0aGUgbWFwcGVyIG91dHB1dFxuICAgICAgICB5aWVsZCAoYXdhaXQgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UpLnZhbHVlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG1hcHBlck91dHB1dCkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICogVXNlZnVsIGZvciBzdHJlYW1pbmcsIGNhbiBiZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIGNoYWluZWQgYnkgY2FsbGluZyBgcnVubmFibGUucGljaygpO2AuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgUnVubmFibGVQaWNrIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqXG4gKiBjb25zdCBpbnB1dERhdGEgPSB7XG4gKiAgIG5hbWU6IFwiSm9oblwiLFxuICogICBhZ2U6IDMwLFxuICogICBjaXR5OiBcIk5ldyBZb3JrXCIsXG4gKiAgIGNvdW50cnk6IFwiVVNBXCIsXG4gKiAgIGVtYWlsOiBcImpvaG4uZG9lQGV4YW1wbGUuY29tXCIsXG4gKiAgIHBob25lOiBcIisxMjM0NTY3ODkwXCIsXG4gKiB9O1xuICpcbiAqIGNvbnN0IGJhc2ljSW5mb1J1bm5hYmxlID0gbmV3IFJ1bm5hYmxlUGljayhbXCJuYW1lXCIsIFwiY2l0eVwiXSk7XG4gKlxuICogLy8gRXhhbXBsZSBpbnZvY2F0aW9uXG4gKiBjb25zdCByZXMgPSBhd2FpdCBiYXNpY0luZm9SdW5uYWJsZS5pbnZva2UoaW5wdXREYXRhKTtcbiAqXG4gKiAvLyB7IG5hbWU6ICdKb2huJywgY2l0eTogJ05ldyBZb3JrJyB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGljayBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVQaWNrXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBrZXlzOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlzID0gZmllbGRzLmtleXM7XG4gICAgfVxuICAgIGFzeW5jIF9waWNrKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRbdGhpcy5rZXlzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IHRoaXMua2V5c1xuICAgICAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gW2tleSwgaW5wdXRba2V5XV0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdlsxXSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybiBwaWNrZWQubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogT2JqZWN0LmZyb21FbnRyaWVzKHBpY2tlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9waWNrLmJpbmQodGhpcyksIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBwaWNrZWQgPSBhd2FpdCB0aGlzLl9waWNrKGNodW5rKTtcbiAgICAgICAgICAgIGlmIChwaWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHBpY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgICAgICBnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVRvb2xMaWtlIGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICAgICAgICAgICAgUnVubmFibGVMYW1iZGEuZnJvbShhc3luYyAoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdG9vbElucHV0O1xuICAgICAgICAgICAgICAgIGlmIChfaXNUb29sQ2FsbChpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xJbnB1dCA9IGF3YWl0IHRoaXMuc2NoZW1hLnBhcnNlQXN5bmMoaW5wdXQuYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uKGBSZWNlaXZlZCB0b29sIGlucHV0IGRpZCBub3QgbWF0Y2ggZXhwZWN0ZWQgc2NoZW1hYCwgSlNPTi5zdHJpbmdpZnkoaW5wdXQuYXJncykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b29sSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvb2xJbnB1dDtcbiAgICAgICAgICAgIH0pLndpdGhDb25maWcoeyBydW5OYW1lOiBgJHtmaWVsZHMubmFtZX06cGFyc2VfaW5wdXRgIH0pLFxuICAgICAgICAgICAgZmllbGRzLmJvdW5kLFxuICAgICAgICBdKS53aXRoQ29uZmlnKHsgcnVuTmFtZTogZmllbGRzLm5hbWUgfSk7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGJvdW5kOiBzZXF1ZW5jZSxcbiAgICAgICAgICAgIGNvbmZpZzogZmllbGRzLmNvbmZpZyA/PyB7fSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGVzY3JpcHRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IGZpZWxkcy5zY2hlbWE7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVRvb2xMaWtlXCI7XG4gICAgfVxufVxuLyoqXG4gKiBHaXZlbiBhIHJ1bm5hYmxlIGFuZCBhIFpvZCBzY2hlbWEsIGNvbnZlcnQgdGhlIHJ1bm5hYmxlIHRvIGEgdG9vbC5cbiAqXG4gKiBAdGVtcGxhdGUgUnVuSW5wdXQgVGhlIGlucHV0IHR5cGUgZm9yIHRoZSBydW5uYWJsZS5cbiAqIEB0ZW1wbGF0ZSBSdW5PdXRwdXQgVGhlIG91dHB1dCB0eXBlIGZvciB0aGUgcnVubmFibGUuXG4gKlxuICogQHBhcmFtIHtSdW5uYWJsZTxSdW5JbnB1dCwgUnVuT3V0cHV0Pn0gcnVubmFibGUgVGhlIHJ1bm5hYmxlIHRvIGNvbnZlcnQgdG8gYSB0b29sLlxuICogQHBhcmFtIGZpZWxkc1xuICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBbZmllbGRzLmRlc2NyaXB0aW9uXSBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuIEZhbGxzIGJhY2sgdG8gdGhlIGRlc2NyaXB0aW9uIG9uIHRoZSBab2Qgc2NoZW1hIGlmIG5vdCBwcm92aWRlZCwgb3IgdW5kZWZpbmVkIGlmIG5laXRoZXIgYXJlIHByb3ZpZGVkLlxuICogQHBhcmFtIHt6LlpvZFR5cGU8UnVuSW5wdXQ+fSBbZmllbGRzLnNjaGVtYV0gVGhlIFpvZCBzY2hlbWEgZm9yIHRoZSBpbnB1dCBvZiB0aGUgdG9vbC4gSW5mZXJzIHRoZSBab2QgdHlwZSBmcm9tIHRoZSBpbnB1dCB0eXBlIG9mIHRoZSBydW5uYWJsZS5cbiAqIEByZXR1cm5zIHtSdW5uYWJsZVRvb2xMaWtlPHouWm9kVHlwZTxSdW5JbnB1dD4sIFJ1bk91dHB1dD59IEFuIGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYCB3aGljaCBpcyBhIHJ1bm5hYmxlIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB0b29sLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFJ1bm5hYmxlVG9Ub29sKHJ1bm5hYmxlLCBmaWVsZHMpIHtcbiAgICBjb25zdCBuYW1lID0gZmllbGRzLm5hbWUgPz8gcnVubmFibGUuZ2V0TmFtZSgpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uID8/IGZpZWxkcy5zY2hlbWE/LmRlc2NyaXB0aW9uO1xuICAgIGlmIChmaWVsZHMuc2NoZW1hLmNvbnN0cnVjdG9yID09PSB6LlpvZFN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlVG9vbExpa2Uoe1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgc2NoZW1hOiB6XG4gICAgICAgICAgICAgICAgLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHouc3RyaW5nKCksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50cmFuc2Zvcm0oKGlucHV0KSA9PiBpbnB1dC5pbnB1dCksXG4gICAgICAgICAgICBib3VuZDogcnVubmFibGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJ1bm5hYmxlVG9vbExpa2Uoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgc2NoZW1hOiBmaWVsZHMuc2NoZW1hLFxuICAgICAgICBib3VuZDogcnVubmFibGUsXG4gICAgfSk7XG59XG4iXSwibmFtZXMiOlsieiIsInBSZXRyeSIsInY0IiwidXVpZHY0IiwiaXNUcmFjZWFibGVGdW5jdGlvbiIsIkxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsIlJ1bkxvZyIsIlJ1bkxvZ1BhdGNoIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJpc1N0cmVhbUV2ZW50c0hhbmRsZXIiLCJTZXJpYWxpemFibGUiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiY29uY2F0IiwiYXRlZSIsInBpcGVHZW5lcmF0b3JXaXRoU2V0dXAiLCJBc3luY0dlbmVyYXRvcldpdGhTZXR1cCIsInJhY2VXaXRoU2lnbmFsIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJlbnN1cmVDb25maWciLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwYXRjaENvbmZpZyIsInBpY2tSdW5uYWJsZUNvbmZpZ0tleXMiLCJBc3luY0NhbGxlciIsIlJvb3RMaXN0ZW5lcnNUcmFjZXIiLCJfUm9vdEV2ZW50RmlsdGVyIiwiaXNSdW5uYWJsZUludGVyZmFjZSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJHcmFwaCIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsImNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0IiwiY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0IiwiaXNBc3luY0l0ZXJhYmxlIiwiaXNJdGVyYWJsZUl0ZXJhdG9yIiwiaXNJdGVyYXRvciIsIl9pc1Rvb2xDYWxsIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJEYXRlIiwiUnVubmFibGUiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2V0TmFtZSIsInN1ZmZpeCIsIm5hbWUiLCJsY19uYW1lIiwiYmluZCIsImt3YXJncyIsIlJ1bm5hYmxlQmluZGluZyIsImJvdW5kIiwiY29uZmlnIiwibWFwIiwiUnVubmFibGVFYWNoIiwid2l0aFJldHJ5IiwiZmllbGRzIiwiUnVubmFibGVSZXRyeSIsIm1heEF0dGVtcHROdW1iZXIiLCJzdG9wQWZ0ZXJBdHRlbXB0Iiwid2l0aENvbmZpZyIsIndpdGhGYWxsYmFja3MiLCJmYWxsYmFja3MiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJydW5uYWJsZSIsIl9nZXRPcHRpb25zTGlzdCIsIm9wdGlvbnMiLCJsZW5ndGgiLCJFcnJvciIsInJ1bklkIiwiY29uc29sZSIsIndhcm4iLCJzdWJzZXF1ZW50IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiZnJvbSIsIl8iLCJpIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJjb25maWdMaXN0IiwibWF4Q29uY3VycmVuY3kiLCJjYWxsZXIiLCJvbkZhaWxlZEF0dGVtcHQiLCJlIiwiYmF0Y2hDYWxscyIsImlucHV0IiwiY2FsbCIsInJlc3VsdCIsImludm9rZSIsInJldHVybkV4Y2VwdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwiX3N0cmVhbUl0ZXJhdG9yIiwic3RyZWFtIiwid3JhcHBlZEdlbmVyYXRvciIsImdlbmVyYXRvciIsInNldHVwIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsInVuZGVmaW5lZCIsImNhbGxiYWNrcyIsInRhZ3MiLCJtZXRhZGF0YSIsInJ1bk5hbWUiLCJyZWN1cnNpb25MaW1pdCIsInRpbWVvdXQiLCJzaWduYWwiLCJjYWxsT3B0aW9ucyIsIl9jYWxsV2l0aENvbmZpZyIsImZ1bmMiLCJjYWxsYmFja01hbmFnZXJfIiwicnVuTWFuYWdlciIsImhhbmRsZUNoYWluU3RhcnQiLCJ0b0pTT04iLCJydW5UeXBlIiwib3V0cHV0IiwicHJvbWlzZSIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsImhhbmRsZVN0YXJ0UmVzIiwib3V0cHV0cyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJzdHJlYW1FdmVudHNIYW5kbGVyIiwiaGFuZGxlcnMiLCJmaW5kIiwiaXRlcmF0b3IiLCJ0YXBPdXRwdXRJdGVyYWJsZSIsInN0cmVhbUxvZ0hhbmRsZXIiLCJnZXRHcmFwaCIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJmaXJzdCIsImxhc3QiLCJfY29lcmNlVG9SdW5uYWJsZSIsInBpY2siLCJrZXlzIiwiUnVubmFibGVQaWNrIiwiYXNzaWduIiwibWFwcGluZyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVNYXAiLCJzdGVwcyIsInRyYW5zZm9ybSIsImZpbmFsQ2h1bmsiLCJzdHJlYW1Mb2ciLCJzdHJlYW1PcHRpb25zIiwibG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiX3NjaGVtYUZvcm1hdCIsIl9zdHJlYW1Mb2ciLCJjb3BpZWRDYWxsYmFja3MiLCJjb3B5IiwiYWRkSGFuZGxlciIsInJ1bm5hYmxlU3RyZWFtUHJvbWlzZSIsImNvbnN1bWVSdW5uYWJsZVN0cmVhbSIsInJ1bm5hYmxlU3RyZWFtIiwicGF0Y2giLCJvcHMiLCJvcCIsInBhdGgiLCJ3cml0ZXIiLCJ3cml0ZSIsImNsb3NlIiwicnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSIsImxvZyIsInN0cmVhbUV2ZW50cyIsInZlcnNpb24iLCJfc3RyZWFtRXZlbnRzVjEiLCJfc3RyZWFtRXZlbnRzVjIiLCJlbmNvZGluZyIsImV2ZW50U3RyZWFtZXIiLCJhYm9ydENvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJvdXRlclRoaXMiLCJBYm9ydFNpZ25hbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhYm9ydCIsIm9uY2UiLCJ0YXBwZWRTdHJlYW0iLCJhYm9ydGVkIiwiZmluaXNoIiwiZmlyc3RFdmVudFNlbnQiLCJmaXJzdEV2ZW50UnVuSWQiLCJldmVudCIsImRhdGEiLCJydW5faWQiLCJlbmRzV2l0aCIsInJ1bkxvZyIsImhhc0VuY291bnRlcmVkU3RhcnRFdmVudCIsInJvb3RUYWdzIiwicm9vdE1ldGFkYXRhIiwicm9vdE5hbWUiLCJyb290RXZlbnRGaWx0ZXIiLCJsb2dTdHJlYW0iLCJmcm9tUnVuTG9nUGF0Y2giLCJzdGF0ZSIsImlkIiwidHlwZSIsImluY2x1ZGVFdmVudCIsInBhdGhzIiwic3RhcnRzV2l0aCIsInNwbGl0IiwiZGVkdXBlZFBhdGhzIiwiU2V0IiwiZXZlbnRUeXBlIiwibG9nRW50cnkiLCJsb2dzIiwiZW5kX3RpbWUiLCJzdHJlYW1lZF9vdXRwdXQiLCJmaW5hbF9vdXRwdXQiLCJjaHVua0NvdW50IiwiaXNSdW5uYWJsZSIsInRoaW5nIiwid2l0aExpc3RlbmVycyIsIm9uU3RhcnQiLCJvbkVuZCIsIm9uRXJyb3IiLCJjb25maWdGYWN0b3JpZXMiLCJhc1Rvb2wiLCJjb252ZXJ0UnVubmFibGVUb1Rvb2wiLCJfbWVyZ2VDb25maWciLCJjb25maWdGYWN0b3J5IiwibWVyZ2VkT3B0aW9ucyIsImluZGl2aWR1YWxPcHRpb24iLCJpc1J1bm5hYmxlQmluZGluZyIsIl9pbnZva2UiLCJnZXRDaGlsZCIsIl9wYXRjaENvbmZpZ0ZvclJldHJ5IiwiYXR0ZW1wdCIsInRhZyIsImF0dGVtcHROdW1iZXIiLCJlcnJvciIsInJldHJpZXMiLCJNYXRoIiwibWF4IiwicmFuZG9taXplIiwiX2JhdGNoIiwiY29uZmlncyIsInJlc3VsdHNNYXAiLCJyZW1haW5pbmdJbmRleGVzIiwidG9TdHJpbmciLCJyZW1haW5pbmdJbnB1dHMiLCJwYXRjaGVkQ29uZmlncyIsInJlc3VsdHMiLCJmaXJzdEV4Y2VwdGlvbiIsInJlc3VsdE1hcEluZGV4Iiwic29ydCIsImEiLCJiIiwicGFyc2VJbnQiLCJtaWRkbGUiLCJvbWl0U2VxdWVuY2VUYWdzIiwibmV4dFN0ZXBJbnB1dCIsImluaXRpYWxTdGVwcyIsInN0ZXAiLCJuZXh0U3RlcElucHV0cyIsImoiLCJjaGlsZFJ1bk1hbmFnZXIiLCJvdGhlck9wdGlvbnMiLCJjb25jYXRTdXBwb3J0ZWQiLCJmaW5hbEdlbmVyYXRvciIsInRocm93SWZBYm9ydGVkIiwiY3VycmVudExhc3ROb2RlIiwiZm9yRWFjaCIsImluZGV4Iiwic3RlcEdyYXBoIiwidHJpbUZpcnN0Tm9kZSIsInRyaW1MYXN0Tm9kZSIsImV4dGVuZCIsInN0ZXBGaXJzdE5vZGUiLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsImlzUnVubmFibGVTZXF1ZW5jZSIsInJ1bm5hYmxlcyIsIm5hbWVPckZpZWxkcyIsImV4dHJhIiwic2xpY2UiLCJnZXRTdGVwc0tleXMiLCJwcm9taXNlcyIsIl90cmFuc2Zvcm0iLCJpbnB1dENvcGllcyIsInRhc2tzIiwiTWFwIiwiZ2VuIiwibmV4dCIsInRoZW4iLCJzaXplIiwicmFjZSIsInZhbHVlcyIsImRlbGV0ZSIsImRvbmUiLCJzZXQiLCJSdW5uYWJsZVRyYWNlYWJsZSIsIml0ZW0iLCJhc3NlcnROb25UcmFjZWFibGVGdW5jdGlvbiIsIlJ1bm5hYmxlTGFtYmRhIiwicmVzb2x2ZSIsInJlamVjdCIsImNoaWxkQ29uZmlnIiwicnVuV2l0aENvbmZpZyIsInJlcyIsIlJ1bm5hYmxlUGFyYWxsZWwiLCJmYWxsYmFjayIsIm90aGVyQ29uZmlnRmllbGRzIiwiZmlyc3RFcnJvciIsIm9yaWdpbmFsU3RyZWFtIiwibWFwcGVyIiwibWFwcGVyUmVzdWx0IiwibWFwcGVyS2V5cyIsImZvclBhc3N0aHJvdWdoIiwiZm9yTWFwcGVyIiwibWFwcGVyT3V0cHV0IiwiZmlyc3RNYXBwZXJDaHVua1Byb21pc2UiLCJmaWx0ZXJlZCIsImluY2x1ZGVzIiwiX3BpY2siLCJwaWNrZWQiLCJ2IiwiUnVubmFibGVUb29sTGlrZSIsInNlcXVlbmNlIiwidG9vbElucHV0IiwicGFyc2VBc3luYyIsImFyZ3MiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVzY3JpcHRpb24iLCJab2RTdHJpbmciLCJvYmplY3QiLCJzdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/branch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableBranch: () => (/* binding */ RunnableBranch)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n\n/**\n * Class that represents a runnable branch. The RunnableBranch is\n * initialized with an array of branches and a default branch. When invoked,\n * it evaluates the condition of each branch in order and executes the\n * corresponding branch if the condition is true. If none of the conditions\n * are true, it executes the default branch.\n * @example\n * ```typescript\n * const branch = RunnableBranch.from([\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"anthropic\"),\n *     anthropicChain,\n *   ],\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"langchain\"),\n *     langChainChain,\n *   ],\n *   generalChain,\n * ]);\n *\n * const fullChain = RunnableSequence.from([\n *   {\n *     topic: classificationChain,\n *     question: (input: { question: string }) => input.question,\n *   },\n *   branch,\n * ]);\n *\n * const result = await fullChain.invoke({\n *   question: \"how do I use LangChain?\",\n * });\n * ```\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass RunnableBranch extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RunnableBranch\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"default\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"branches\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.branches = fields.branches;\n        this.default = fields.default;\n    }\n    /**\n     * Convenience method for instantiating a RunnableBranch from\n     * RunnableLikes (objects, functions, or Runnables).\n     *\n     * Each item in the input except for the last one should be a\n     * tuple with two items. The first is a \"condition\" RunnableLike that\n     * returns \"true\" if the second RunnableLike in the tuple should run.\n     *\n     * The final item in the input should be a RunnableLike that acts as a\n     * default branch if no other branches match.\n     *\n     * @example\n     * ```ts\n     * import { RunnableBranch } from \"@langchain/core/runnables\";\n     *\n     * const branch = RunnableBranch.from([\n     *   [(x: number) => x > 0, (x: number) => x + 1],\n     *   [(x: number) => x < 0, (x: number) => x - 1],\n     *   (x: number) => x\n     * ]);\n     * ```\n     * @param branches An array where the every item except the last is a tuple of [condition, runnable]\n     *   pairs. The last item is a default runnable which is invoked if no other condition matches.\n     * @returns A new RunnableBranch.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(branches) {\n        if (branches.length < 1) {\n            throw new Error(\"RunnableBranch requires at least one branch\");\n        }\n        const branchLikes = branches.slice(0, -1);\n        const coercedBranches = branchLikes.map(([condition, runnable])=>[\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(condition),\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(runnable)\n            ]);\n        const defaultBranch = (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(branches[branches.length - 1]);\n        return new this({\n            branches: coercedBranches,\n            default: defaultBranch\n        });\n    }\n    async _invoke(input, config, runManager) {\n        let result;\n        for(let i = 0; i < this.branches.length; i += 1){\n            const [condition, branchRunnable] = this.branches[i];\n            const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`condition:${i + 1}`)\n            }));\n            if (conditionValue) {\n                result = await branchRunnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`branch:${i + 1}`)\n                }));\n                break;\n            }\n        }\n        if (!result) {\n            result = await this.default.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(\"branch:default\")\n            }));\n        }\n        return result;\n    }\n    async invoke(input, config = {}) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async *_streamIterator(input, config) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToDict)(input, \"input\"), config?.runId, undefined, undefined, undefined, config?.runName);\n        let finalOutput;\n        let finalOutputSupported = true;\n        let stream;\n        try {\n            for(let i = 0; i < this.branches.length; i += 1){\n                const [condition, branchRunnable] = this.branches[i];\n                const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`condition:${i + 1}`)\n                }));\n                if (conditionValue) {\n                    stream = await branchRunnable.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                        callbacks: runManager?.getChild(`branch:${i + 1}`)\n                    }));\n                    for await (const chunk of stream){\n                        yield chunk;\n                        if (finalOutputSupported) {\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                try {\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = undefined;\n                                    finalOutputSupported = false;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            if (stream === undefined) {\n                stream = await this.default.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(\"branch:default\")\n                }));\n                for await (const chunk of stream){\n                    yield chunk;\n                    if (finalOutputSupported) {\n                        if (finalOutput === undefined) {\n                            finalOutput = chunk;\n                        } else {\n                            try {\n                                finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                            } catch (e) {\n                                finalOutput = undefined;\n                                finalOutputSupported = false;\n                            }\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdFO0FBQ0E7QUFDNUI7QUFDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FrQ0MsR0FDRCw4REFBOEQ7QUFDdkQsTUFBTU0sdUJBQXVCTiw4Q0FBUUE7SUFDeEMsT0FBT08sVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUdQLE9BQU9PLFFBQVE7UUFDL0IsSUFBSSxDQUFDQyxPQUFPLEdBQUdSLE9BQU9RLE9BQU87SUFDakM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBd0JDLEdBQ0QsOERBQThEO0lBQzlELE9BQU9DLEtBQUtGLFFBQVEsRUFBRTtRQUNsQixJQUFJQSxTQUFTRyxNQUFNLEdBQUcsR0FBRztZQUNyQixNQUFNLElBQUlDLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxjQUFjTCxTQUFTTSxL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Q0FDRCxJQUFJO29DQUNBSCxjQUFjMUMsd0RBQU1BLENBQUMwQyxhQUFhRztnQ0FDdEMsRUFDQSxPQUFPQyxHQUFHO29DQUNOSixjQUFjRjtvQ0FDZEcsdUJBQXVCO2dDQUMzQjs0QkFDSjt3QkFDSjtvQkFDSjtvQkFDQTtnQkFDSjtZQUNKO1lBQ0EsSUFBSUMsV0FBV0osV0FBVztnQkFDdEJJLFNBQVMsTUFBTSxJQUFJLENBQUNoQyxPQUFPLENBQUNnQyxNQUFNLENBQUNwQixPQUFPekIsdURBQVdBLENBQUMwQixRQUFRO29CQUMxRE8sV0FBV04sWUFBWU8sU0FBUztnQkFDcEM7Z0JBQ0EsV0FBVyxNQUFNWSxTQUFTRCxPQUFRO29CQUM5QixNQUFNQztvQkFDTixJQUFJRixzQkFBc0I7d0JBQ3RCLElBQUlELGdCQUFnQkYsV0FBVzs0QkFDM0JFLGNBQWNHO3dCQUNsQixPQUNLOzRCQUNELElBQUk7Z0NBQ0FILGNBQWMxQyx3REFBTUEsQ0FBQzBDLGFBQWFHOzRCQUN0QyxFQUNBLE9BQU9DLEdBQUc7Z0NBQ05KLGNBQWNGO2dDQUNkRyx1QkFBdUI7NEJBQzNCO3dCQUNKO29CQUNKO2dCQUNKO1lBQ0o7UUFDSixFQUNBLE9BQU9HLEdBQUc7WUFDTixNQUFNcEIsWUFBWXFCLGlCQUFpQkQ7WUFDbkMsTUFBTUE7UUFDVjtRQUNBLE1BQU1wQixZQUFZc0IsZUFBZU4sZUFBZSxDQUFDO0lBQ3JEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcz80NGEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlLCBfY29lcmNlVG9EaWN0LCBfY29lcmNlVG9SdW5uYWJsZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIHBhdGNoQ29uZmlnLCB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBydW5uYWJsZSBicmFuY2guIFRoZSBSdW5uYWJsZUJyYW5jaCBpc1xuICogaW5pdGlhbGl6ZWQgd2l0aCBhbiBhcnJheSBvZiBicmFuY2hlcyBhbmQgYSBkZWZhdWx0IGJyYW5jaC4gV2hlbiBpbnZva2VkLFxuICogaXQgZXZhbHVhdGVzIHRoZSBjb25kaXRpb24gb2YgZWFjaCBicmFuY2ggaW4gb3JkZXIgYW5kIGV4ZWN1dGVzIHRoZVxuICogY29ycmVzcG9uZGluZyBicmFuY2ggaWYgdGhlIGNvbmRpdGlvbiBpcyB0cnVlLiBJZiBub25lIG9mIHRoZSBjb25kaXRpb25zXG4gKiBhcmUgdHJ1ZSwgaXQgZXhlY3V0ZXMgdGhlIGRlZmF1bHQgYnJhbmNoLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGJyYW5jaCA9IFJ1bm5hYmxlQnJhbmNoLmZyb20oW1xuICogICBbXG4gKiAgICAgKHg6IHsgdG9waWM6IHN0cmluZzsgcXVlc3Rpb246IHN0cmluZyB9KSA9PlxuICogICAgICAgeC50b3BpYy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYW50aHJvcGljXCIpLFxuICogICAgIGFudGhyb3BpY0NoYWluLFxuICogICBdLFxuICogICBbXG4gKiAgICAgKHg6IHsgdG9waWM6IHN0cmluZzsgcXVlc3Rpb246IHN0cmluZyB9KSA9PlxuICogICAgICAgeC50b3BpYy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibGFuZ2NoYWluXCIpLFxuICogICAgIGxhbmdDaGFpbkNoYWluLFxuICogICBdLFxuICogICBnZW5lcmFsQ2hhaW4sXG4gKiBdKTtcbiAqXG4gKiBjb25zdCBmdWxsQ2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICogICB7XG4gKiAgICAgdG9waWM6IGNsYXNzaWZpY2F0aW9uQ2hhaW4sXG4gKiAgICAgcXVlc3Rpb246IChpbnB1dDogeyBxdWVzdGlvbjogc3RyaW5nIH0pID0+IGlucHV0LnF1ZXN0aW9uLFxuICogICB9LFxuICogICBicmFuY2gsXG4gKiBdKTtcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBmdWxsQ2hhaW4uaW52b2tlKHtcbiAqICAgcXVlc3Rpb246IFwiaG93IGRvIEkgdXNlIExhbmdDaGFpbj9cIixcbiAqIH0pO1xuICogYGBgXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgY2xhc3MgUnVubmFibGVCcmFuY2ggZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQnJhbmNoXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlZmF1bHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYnJhbmNoZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5icmFuY2hlcyA9IGZpZWxkcy5icmFuY2hlcztcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gZmllbGRzLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgaW5zdGFudGlhdGluZyBhIFJ1bm5hYmxlQnJhbmNoIGZyb21cbiAgICAgKiBSdW5uYWJsZUxpa2VzIChvYmplY3RzLCBmdW5jdGlvbnMsIG9yIFJ1bm5hYmxlcykuXG4gICAgICpcbiAgICAgKiBFYWNoIGl0ZW0gaW4gdGhlIGlucHV0IGV4Y2VwdCBmb3IgdGhlIGxhc3Qgb25lIHNob3VsZCBiZSBhXG4gICAgICogdHVwbGUgd2l0aCB0d28gaXRlbXMuIFRoZSBmaXJzdCBpcyBhIFwiY29uZGl0aW9uXCIgUnVubmFibGVMaWtlIHRoYXRcbiAgICAgKiByZXR1cm5zIFwidHJ1ZVwiIGlmIHRoZSBzZWNvbmQgUnVubmFibGVMaWtlIGluIHRoZSB0dXBsZSBzaG91bGQgcnVuLlxuICAgICAqXG4gICAgICogVGhlIGZpbmFsIGl0ZW0gaW4gdGhlIGlucHV0IHNob3VsZCBiZSBhIFJ1bm5hYmxlTGlrZSB0aGF0IGFjdHMgYXMgYVxuICAgICAqIGRlZmF1bHQgYnJhbmNoIGlmIG5vIG90aGVyIGJyYW5jaGVzIG1hdGNoLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGltcG9ydCB7IFJ1bm5hYmxlQnJhbmNoIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAgICAgKlxuICAgICAqIGNvbnN0IGJyYW5jaCA9IFJ1bm5hYmxlQnJhbmNoLmZyb20oW1xuICAgICAqICAgWyh4OiBudW1iZXIpID0+IHggPiAwLCAoeDogbnVtYmVyKSA9PiB4ICsgMV0sXG4gICAgICogICBbKHg6IG51bWJlcikgPT4geCA8IDAsICh4OiBudW1iZXIpID0+IHggLSAxXSxcbiAgICAgKiAgICh4OiBudW1iZXIpID0+IHhcbiAgICAgKiBdKTtcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0gYnJhbmNoZXMgQW4gYXJyYXkgd2hlcmUgdGhlIGV2ZXJ5IGl0ZW0gZXhjZXB0IHRoZSBsYXN0IGlzIGEgdHVwbGUgb2YgW2NvbmRpdGlvbiwgcnVubmFibGVdXG4gICAgICogICBwYWlycy4gVGhlIGxhc3QgaXRlbSBpcyBhIGRlZmF1bHQgcnVubmFibGUgd2hpY2ggaXMgaW52b2tlZCBpZiBubyBvdGhlciBjb25kaXRpb24gbWF0Y2hlcy5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJyYW5jaC5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBmcm9tKGJyYW5jaGVzKSB7XG4gICAgICAgIGlmIChicmFuY2hlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSdW5uYWJsZUJyYW5jaCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYnJhbmNoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJyYW5jaExpa2VzID0gYnJhbmNoZXMuc2xpY2UoMCwgLTEpO1xuICAgICAgICBjb25zdCBjb2VyY2VkQnJhbmNoZXMgPSBicmFuY2hMaWtlcy5tYXAoKFtjb25kaXRpb24sIHJ1bm5hYmxlXSkgPT4gW1xuICAgICAgICAgICAgX2NvZXJjZVRvUnVubmFibGUoY29uZGl0aW9uKSxcbiAgICAgICAgICAgIF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlKSxcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRCcmFuY2ggPSBfY29lcmNlVG9SdW5uYWJsZShicmFuY2hlc1ticmFuY2hlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh7XG4gICAgICAgICAgICBicmFuY2hlczogY29lcmNlZEJyYW5jaGVzLFxuICAgICAgICAgICAgZGVmYXVsdDogZGVmYXVsdEJyYW5jaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIF9pbnZva2UoaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnJhbmNoZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IFtjb25kaXRpb24sIGJyYW5jaFJ1bm5hYmxlXSA9IHRoaXMuYnJhbmNoZXNbaV07XG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IGF3YWl0IGNvbmRpdGlvbi5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYGNvbmRpdGlvbjoke2kgKyAxfWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGNvbmRpdGlvblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYnJhbmNoUnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgYnJhbmNoOiR7aSArIDF9YCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmRlZmF1bHQuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKFwiYnJhbmNoOmRlZmF1bHRcIiksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcgPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnPy5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJyYW5jaGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NvbmRpdGlvbiwgYnJhbmNoUnVubmFibGVdID0gdGhpcy5icmFuY2hlc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IGF3YWl0IGNvbmRpdGlvbi5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBjb25kaXRpb246JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IGF3YWl0IGJyYW5jaFJ1bm5hYmxlLnN0cmVhbShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBicmFuY2g6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCB0aGlzLmRlZmF1bHQuc3RyZWFtKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChcImJyYW5jaDpkZWZhdWx0XCIpLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKGZpbmFsT3V0cHV0ID8/IHt9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJfY29lcmNlVG9EaWN0IiwiX2NvZXJjZVRvUnVubmFibGUiLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJwYXRjaENvbmZpZyIsImNvbmNhdCIsIlJ1bm5hYmxlQnJhbmNoIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImJyYW5jaGVzIiwiZGVmYXVsdCIsImZyb20iLCJsZW5ndGgiLCJFcnJvciIsImJyYW5jaExpa2VzIiwic2xpY2UiLCJjb2VyY2VkQnJhbmNoZXMiLCJtYXAiLCJjb25kaXRpb24iLCJydW5uYWJsZSIsImRlZmF1bHRCcmFuY2giLCJfaW52b2tlIiwiaW5wdXQiLCJjb25maWciLCJydW5NYW5hZ2VyIiwicmVzdWx0IiwiaSIsImJyYW5jaFJ1bm5hYmxlIiwiY29uZGl0aW9uVmFsdWUiLCJpbnZva2UiLCJjYWxsYmFja3MiLCJnZXRDaGlsZCIsIl9jYWxsV2l0aENvbmZpZyIsIl9zdHJlYW1JdGVyYXRvciIsImNhbGxiYWNrTWFuYWdlcl8iLCJoYW5kbGVDaGFpblN0YXJ0IiwidG9KU09OIiwicnVuSWQiLCJ1bmRlZmluZWQiLCJydW5OYW1lIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsInN0cmVhbSIsImNodW5rIiwiZSIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* binding */ pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"timeout\") {\n                if (copy.timeout === undefined) {\n                    copy.timeout = options.timeout;\n                } else if (options.timeout !== undefined) {\n                    copy.timeout = Math.min(copy.timeout, options.timeout);\n                }\n            } else if (key === \"signal\") {\n                if (copy.signal === undefined) {\n                    copy.signal = options.signal;\n                } else if (options.signal !== undefined) {\n                    if (\"any\" in AbortSignal) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        copy.signal = AbortSignal.any([\n                            copy.signal,\n                            options.signal\n                        ]);\n                    } else {\n                        copy.signal = options.signal;\n                    }\n                }\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n */ function ensureConfig(config) {\n    const implicitConfig = _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    let empty = {\n        tags: [],\n        metadata: {},\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (implicitConfig) {\n        // Don't allow runId and runName to be loaded implicitly, as this can cause\n        // child runs to improperly inherit their parents' run ids.\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { runId, runName, ...rest } = implicitConfig;\n        empty = Object.entries(rest).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (config) {\n        empty = Object.entries(config).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (empty?.configurable) {\n        for (const key of Object.keys(empty.configurable)){\n            if (PRIMITIVES.has(typeof empty.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = empty.configurable[key];\n            }\n        }\n    }\n    if (empty.timeout !== undefined) {\n        if (empty.timeout <= 0) {\n            throw new Error(\"Timeout must be a positive number\");\n        }\n        const timeoutSignal = AbortSignal.timeout(empty.timeout);\n        if (empty.signal !== undefined) {\n            if (\"any\" in AbortSignal) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                empty.signal = AbortSignal.any([\n                    empty.signal,\n                    timeoutSignal\n                ]);\n            }\n        } else {\n            empty.signal = timeoutSignal;\n        }\n        delete empty.timeout;\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction pickRunnableConfigKeys(config) {\n    return config ? {\n        configurable: config.configurable,\n        recursionLimit: config.recursionLimit,\n        callbacks: config.callbacks,\n        tags: config.tags,\n        metadata: config.metadata,\n        maxConcurrency: config.maxConcurrency,\n        timeout: config.timeout,\n        signal: config.signal\n    } : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF5RTtBQUNHO0FBQ3JFLE1BQU1HLDBCQUEwQixHQUFHO0FBQ25DLGVBQWVDLDRCQUE0QkMsTUFBTTtJQUNwRCxPQUFPTCxrRUFBZUEsQ0FBQ00sY0FBYyxDQUFDRCxRQUFRRSxXQUFXQyxXQUFXSCxRQUFRSSxNQUFNRCxXQUFXSCxRQUFRSztBQUN6RztBQUNPLFNBQVNDLGFBQWEsR0FBR0MsT0FBTztJQUNuQyxnRkFBZ0Y7SUFDaEYsb0VBQW9FO0lBQ3BFLE1BQU1DLE9BQU8sQ0FBQztJQUNkLEtBQUssTUFBTUMsV0FBV0YsUUFBUUcsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQSxHQUFJO1FBQzlDLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxTQUFVO1lBQ3BDLElBQUlHLFFBQVEsWUFBWTtnQkFDcEJKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFFBQVE7Z0JBQ3JCLE1BQU1HLFdBQVdQLElBQUksQ0FBQ0ksSUFBSSxJQUFJLEVBQUU7Z0JBQ2hDSixJQUFJLENBQUNJLElBQUksR0FBRzt1QkFBSSxJQUFJSSxJQUFJRCxTQUFTRSxNQUFNLENBQUNSLE9BQU8sQ0FBQ0csSUFBSSxJQUFJLEVBQUU7aUJBQUc7WUFDakUsT0FDSyxJQUFJQSxRQUFRLGdCQUFnQjtnQkFDN0JKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFdBQVc7Z0JBQ3hCLElBQUlKLEtBQUtVLE9BQU8sS0FBS2YsV0FBVztv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QUlhLG1CQUFtQnBELFdBQVc7UUFDOUJxRCxVQUFVRCxjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSVgsWUFBWXpDLFdBQVc7UUFDdkJxRCxVQUFVWixPQUFPLEdBQUdBO0lBQ3hCO0lBQ0EsSUFBSU0saUJBQWlCL0MsV0FBVztRQUM1QnFELFVBQVVOLFlBQVksR0FBRztZQUFFLEdBQUdNLFVBQVVOLFlBQVk7WUFBRSxHQUFHQSxZQUFZO1FBQUM7SUFDMUU7SUFDQSxJQUFJUCxVQUFVeEMsV0FBVztRQUNyQixPQUFPcUQsVUFBVWIsS0FBSztJQUMxQjtJQUNBLE9BQU9hO0FBQ1g7QUFDQSw4REFBOEQ7QUFDdkQsU0FBU0MsdUJBQXVCekQsTUFBTTtJQUN6QyxPQUFPQSxTQUNEO1FBQ0VrRCxjQUFjbEQsT0FBT2tELFlBQVk7UUFDakNSLGdCQUFnQjFDLE9BQU8wQyxjQUFjO1FBQ3JDeEMsV0FBV0YsT0FBT0UsU0FBUztRQUMzQkUsTUFBTUosT0FBT0ksSUFBSTtRQUNqQkMsVUFBVUwsT0FBT0ssUUFBUTtRQUN6QmtELGdCQUFnQnZELE9BQU91RCxjQUFjO1FBQ3JDckMsU0FBU2xCLE9BQU9rQixPQUFPO1FBQ3ZCRyxRQUFRckIsT0FBT3FCLE1BQU07SUFDekIsSUFDRWxCO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcz8yN2VhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgZW5zdXJlSGFuZGxlciB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9SRUNVUlNJT05fTElNSVQgPSAyNTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIENhbGxiYWNrTWFuYWdlci5fY29uZmlndXJlU3luYyhjb25maWc/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBjb25maWc/LnRhZ3MsIHVuZGVmaW5lZCwgY29uZmlnPy5tZXRhZGF0YSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VDb25maWdzKC4uLmNvbmZpZ3MpIHtcbiAgICAvLyBXZSBkbyBub3Qgd2FudCB0byBjYWxsIGVuc3VyZUNvbmZpZyBvbiB0aGUgZW1wdHkgc3RhdGUgaGVyZSBhcyB0aGlzIG1heSBjYXVzZVxuICAgIC8vIGRvdWJsZSBsb2FkaW5nIG9mIGNhbGxiYWNrcyBpZiBhc3luYyBsb2NhbCBzdG9yYWdlIGlzIGJlaW5nIHVzZWQuXG4gICAgY29uc3QgY29weSA9IHt9O1xuICAgIGZvciAoY29uc3Qgb3B0aW9ucyBvZiBjb25maWdzLmZpbHRlcigoYykgPT4gISFjKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJtZXRhZGF0YVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInRhZ3NcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VLZXlzID0gY29weVtrZXldID8/IFtdO1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IFsuLi5uZXcgU2V0KGJhc2VLZXlzLmNvbmNhdChvcHRpb25zW2tleV0gPz8gW10pKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiY29uZmlndXJhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSB7IC4uLmNvcHlba2V5XSwgLi4ub3B0aW9uc1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwidGltZW91dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvcHkudGltZW91dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcHkudGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29weS50aW1lb3V0ID0gTWF0aC5taW4oY29weS50aW1lb3V0LCBvcHRpb25zLnRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJzaWduYWxcIikge1xuICAgICAgICAgICAgICAgIGlmIChjb3B5LnNpZ25hbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcHkuc2lnbmFsID0gb3B0aW9ucy5zaWduYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuc2lnbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiYW55XCIgaW4gQWJvcnRTaWduYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LnNpZ25hbCA9IEFib3J0U2lnbmFsLmFueShbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weS5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuc2lnbmFsID0gb3B0aW9ucy5zaWduYWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiY2FsbGJhY2tzXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlQ2FsbGJhY2tzID0gY29weS5jYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZWRDYWxsYmFja3MgPSBvcHRpb25zLmNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAvLyBjYWxsYmFja3MgY2FuIGJlIGVpdGhlciB1bmRlZmluZWQsIEFycmF5PGhhbmRsZXI+IG9yIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAvLyBzbyBtZXJnaW5nIHR3byBjYWxsYmFja3MgdmFsdWVzIGhhcyA2IGNhc2VzXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvdmlkZWRDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IGJhc2VDYWxsYmFja3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VDYWxsYmFja3MgaXMgYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gYmFzZUNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHByb3ZpZGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm92aWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcm92aWRlZENhbGxiYWNrcyBpcyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSBwcm92aWRlZENhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZUNhbGxiYWNrcyBpcyBhbHNvIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHByb3ZpZGVkQ2FsbGJhY2tzLl9wYXJlbnRSdW5JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzOiBiYXNlQ2FsbGJhY2tzLmhhbmRsZXJzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5oYW5kbGVycyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFibGVIYW5kbGVyczogYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzOiBBcnJheS5mcm9tKG5ldyBTZXQoYmFzZUNhbGxiYWNrcy50YWdzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy50YWdzKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhYmxlVGFnczogQXJyYXkuZnJvbShuZXcgU2V0KGJhc2VDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5pbmhlcml0YWJsZVRhZ3MpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmFzZUNhbGxiYWNrcy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvdmlkZWRDYWxsYmFja3MubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRLZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgY29weVt0eXBlZEtleV0gPSBvcHRpb25zW3R5cGVkS2V5XSA/PyBjb3B5W3R5cGVkS2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29weTtcbn1cbmNvbnN0IFBSSU1JVElWRVMgPSBuZXcgU2V0KFtcInN0cmluZ1wiLCBcIm51bWJlclwiLCBcImJvb2xlYW5cIl0pO1xuLyoqXG4gKiBFbnN1cmUgdGhhdCBhIHBhc3NlZCBjb25maWcgaXMgYW4gb2JqZWN0IHdpdGggYWxsIHJlcXVpcmVkIGtleXMgcHJlc2VudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUNvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBpbXBsaWNpdENvbmZpZyA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0UnVubmFibGVDb25maWcoKTtcbiAgICBsZXQgZW1wdHkgPSB7XG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAyNSxcbiAgICAgICAgcnVuSWQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgIGlmIChpbXBsaWNpdENvbmZpZykge1xuICAgICAgICAvLyBEb24ndCBhbGxvdyBydW5JZCBhbmQgcnVuTmFtZSB0byBiZSBsb2FkZWQgaW1wbGljaXRseSwgYXMgdGhpcyBjYW4gY2F1c2VcbiAgICAgICAgLy8gY2hpbGQgcnVucyB0byBpbXByb3Blcmx5IGluaGVyaXQgdGhlaXIgcGFyZW50cycgcnVuIGlkcy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBjb25zdCB7IHJ1bklkLCBydW5OYW1lLCAuLi5yZXN0IH0gPSBpbXBsaWNpdENvbmZpZztcbiAgICAgICAgZW1wdHkgPSBPYmplY3QuZW50cmllcyhyZXN0KS5yZWR1Y2UoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIChjdXJyZW50Q29uZmlnLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgY3VycmVudENvbmZpZ1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudENvbmZpZztcbiAgICAgICAgfSwgZW1wdHkpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgIGVtcHR5ID0gT2JqZWN0LmVudHJpZXMoY29uZmlnKS5yZWR1Y2UoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIChjdXJyZW50Q29uZmlnLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICAgICAgY3VycmVudENvbmZpZ1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudENvbmZpZztcbiAgICAgICAgfSwgZW1wdHkpO1xuICAgIH1cbiAgICBpZiAoZW1wdHk/LmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhlbXB0eS5jb25maWd1cmFibGUpKSB7XG4gICAgICAgICAgICBpZiAoUFJJTUlUSVZFUy5oYXModHlwZW9mIGVtcHR5LmNvbmZpZ3VyYWJsZVtrZXldKSAmJlxuICAgICAgICAgICAgICAgICFlbXB0eS5tZXRhZGF0YT8uW2tleV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5Lm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Lm1ldGFkYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVtcHR5Lm1ldGFkYXRhW2tleV0gPSBlbXB0eS5jb25maWd1cmFibGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW1wdHkudGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChlbXB0eS50aW1lb3V0IDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRpbWVvdXQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aW1lb3V0U2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChlbXB0eS50aW1lb3V0KTtcbiAgICAgICAgaWYgKGVtcHR5LnNpZ25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoXCJhbnlcIiBpbiBBYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZW1wdHkuc2lnbmFsID0gQWJvcnRTaWduYWwuYW55KFtlbXB0eS5zaWduYWwsIHRpbWVvdXRTaWduYWxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVtcHR5LnNpZ25hbCA9IHRpbWVvdXRTaWduYWw7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGVtcHR5LnRpbWVvdXQ7XG4gICAgfVxuICAgIHJldHVybiBlbXB0eTtcbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgcGF0Y2hlcyBydW5uYWJsZSBjb25maWdzIHdpdGggdXBkYXRlZCBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hDb25maWcoY29uZmlnID0ge30sIHsgY2FsbGJhY2tzLCBtYXhDb25jdXJyZW5jeSwgcmVjdXJzaW9uTGltaXQsIHJ1bk5hbWUsIGNvbmZpZ3VyYWJsZSwgcnVuSWQsIH0gPSB7fSkge1xuICAgIGNvbnN0IG5ld0NvbmZpZyA9IGVuc3VyZUNvbmZpZyhjb25maWcpO1xuICAgIGlmIChjYWxsYmFja3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UncmUgcmVwbGFjaW5nIGNhbGxiYWNrcyB3ZSBuZWVkIHRvIHVuc2V0IHJ1bk5hbWVcbiAgICAgICAgICogc2luY2UgdGhhdCBzaG91bGQgYXBwbHkgb25seSB0byB0aGUgc2FtZSBydW4gYXMgdGhlIG9yaWdpbmFsIGNhbGxiYWNrc1xuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlIG5ld0NvbmZpZy5ydW5OYW1lO1xuICAgICAgICBuZXdDb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgIH1cbiAgICBpZiAocmVjdXJzaW9uTGltaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucmVjdXJzaW9uTGltaXQgPSByZWN1cnNpb25MaW1pdDtcbiAgICB9XG4gICAgaWYgKG1heENvbmN1cnJlbmN5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVuY3k7XG4gICAgfVxuICAgIGlmIChydW5OYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLnJ1bk5hbWUgPSBydW5OYW1lO1xuICAgIH1cbiAgICBpZiAoY29uZmlndXJhYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSA9IHsgLi4ubmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSwgLi4uY29uZmlndXJhYmxlIH07XG4gICAgfVxuICAgIGlmIChydW5JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSBuZXdDb25maWcucnVuSWQ7XG4gICAgfVxuICAgIHJldHVybiBuZXdDb25maWc7XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY29uZmlnKSB7XG4gICAgcmV0dXJuIGNvbmZpZ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogY29uZmlnLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiBjb25maWcucmVjdXJzaW9uTGltaXQsXG4gICAgICAgICAgICBjYWxsYmFja3M6IGNvbmZpZy5jYWxsYmFja3MsXG4gICAgICAgICAgICB0YWdzOiBjb25maWcudGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBjb25maWcubWV0YWRhdGEsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeTogY29uZmlnLm1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgdGltZW91dDogY29uZmlnLnRpbWVvdXQsXG4gICAgICAgICAgICBzaWduYWw6IGNvbmZpZy5zaWduYWwsXG4gICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG4iXSwibmFtZXMiOlsiQ2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCIsImdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyIsImNvbmZpZyIsIl9jb25maWd1cmVTeW5jIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwidGFncyIsIm1ldGFkYXRhIiwibWVyZ2VDb25maWdzIiwiY29uZmlncyIsImNvcHkiLCJvcHRpb25zIiwiZmlsdGVyIiwiYyIsImtleSIsIk9iamVjdCIsImtleXMiLCJiYXNlS2V5cyIsIlNldCIsImNvbmNhdCIsInRpbWVvdXQiLCJNYXRoIiwibWluIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJhbnkiLCJiYXNlQ2FsbGJhY2tzIiwicHJvdmlkZWRDYWxsYmFja3MiLCJBcnJheSIsImlzQXJyYXkiLCJtYW5hZ2VyIiwiY2FsbGJhY2siLCJhZGRIYW5kbGVyIiwiX3BhcmVudFJ1bklkIiwiaGFuZGxlcnMiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwiZnJvbSIsImluaGVyaXRhYmxlVGFncyIsInR5cGVkS2V5IiwiUFJJTUlUSVZFUyIsImVuc3VyZUNvbmZpZyIsImltcGxpY2l0Q29uZmlnIiwiZ2V0UnVubmFibGVDb25maWciLCJlbXB0eSIsInJlY3Vyc2lvbkxpbWl0IiwicnVuSWQiLCJydW5OYW1lIiwicmVzdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJjdXJyZW50Q29uZmlnIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJoYXMiLCJFcnJvciIsInRpbWVvdXRTaWduYWwiLCJwYXRjaENvbmZpZyIsIm1heENvbmN1cnJlbmN5IiwibmV3Q29uZmlnIiwicGlja1J1bm5hYmxlQ29uZmlnS2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graph_mermaid.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\");\n\n\n\n\nfunction nodeDataStr(id, data) {\n    if (id !== undefined && !(0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(id)) {\n        return id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(data)) {\n        try {\n            let dataStr = data.getName();\n            dataStr = dataStr.startsWith(\"Runnable\") ? dataStr.slice(\"Runnable\".length) : dataStr;\n            return dataStr;\n        } catch (error) {\n            return data.getName();\n        }\n    } else {\n        return data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(params){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.nodes = params?.nodes ?? this.nodes;\n        this.edges = params?.edges ?? this.edges;\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>{\n                const item = {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                };\n                if (typeof edge.data !== \"undefined\") {\n                    item.data = edge.data;\n                }\n                if (typeof edge.conditional !== \"undefined\") {\n                    item.conditional = edge.conditional;\n                }\n                return item;\n            })\n        };\n    }\n    addNode(data, id, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    metadata) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id ?? (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data,\n            name: nodeDataStr(id, data),\n            metadata\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data, conditional) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data,\n            conditional\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        return _firstNode(this);\n    }\n    lastNode() {\n        return _lastNode(this);\n    }\n    /**\n     * Add all nodes and edges from another graph.\n     * Note this doesn't check for duplicates, nor does it connect the graphs.\n     */ extend(graph, prefix = \"\") {\n        let finalPrefix = prefix;\n        const nodeIds = Object.values(graph.nodes).map((node)=>node.id);\n        if (nodeIds.every(uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])) {\n            finalPrefix = \"\";\n        }\n        const prefixed = (id)=>{\n            return finalPrefix ? `${finalPrefix}:${id}` : id;\n        };\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[prefixed(key)] = {\n                ...value,\n                id: prefixed(key)\n            };\n        });\n        const newEdges = graph.edges.map((edge)=>{\n            return {\n                ...edge,\n                source: prefixed(edge.source),\n                target: prefixed(edge.target)\n            };\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...newEdges\n        ];\n        const first = graph.firstNode();\n        const last = graph.lastNode();\n        return [\n            first ? {\n                id: prefixed(first.id),\n                data: first.data\n            } : undefined,\n            last ? {\n                id: prefixed(last.id),\n                data: last.data\n            } : undefined\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode && _firstNode(this, [\n            firstNode.id\n        ])) {\n            this.removeNode(firstNode);\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode && _lastNode(this, [\n            lastNode.id\n        ])) {\n            this.removeNode(lastNode);\n        }\n    }\n    /**\n     * Return a new graph with all nodes re-identified,\n     * using their unique, readable names where possible.\n     */ reid() {\n        const nodeLabels = Object.fromEntries(Object.values(this.nodes).map((node)=>[\n                node.id,\n                node.name\n            ]));\n        const nodeLabelCounts = new Map();\n        Object.values(nodeLabels).forEach((label)=>{\n            nodeLabelCounts.set(label, (nodeLabelCounts.get(label) || 0) + 1);\n        });\n        const getNodeId = (nodeId)=>{\n            const label = nodeLabels[nodeId];\n            if ((0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(nodeId) && nodeLabelCounts.get(label) === 1) {\n                return label;\n            } else {\n                return nodeId;\n            }\n        };\n        return new Graph({\n            nodes: Object.fromEntries(Object.entries(this.nodes).map(([id, node])=>[\n                    getNodeId(id),\n                    {\n                        ...node,\n                        id: getNodeId(id)\n                    }\n                ])),\n            edges: this.edges.map((edge)=>({\n                    ...edge,\n                    source: getNodeId(edge.source),\n                    target: getNodeId(edge.target)\n                }))\n        });\n    }\n    drawMermaid(params) {\n        const { withStyles, curveStyle, nodeColors = {\n            default: \"fill:#f2f0ff,line-height:1.2\",\n            first: \"fill-opacity:0\",\n            last: \"fill:#bfb6fc\"\n        }, wrapLabelNWords } = params ?? {};\n        const graph = this.reid();\n        const firstNode = graph.firstNode();\n        const lastNode = graph.lastNode();\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaid)(graph.nodes, graph.edges, {\n            firstNode: firstNode?.id,\n            lastNode: lastNode?.id,\n            withStyles,\n            curveStyle,\n            nodeColors,\n            wrapLabelNWords\n        });\n    }\n    async drawMermaidPng(params) {\n        const mermaidSyntax = this.drawMermaid(params);\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaidPng)(mermaidSyntax, {\n            backgroundColor: params?.backgroundColor\n        });\n    }\n}\n/**\n * Find the single node that is not a target of any edge.\n * Exclude nodes/sources with ids in the exclude list.\n * If there is no such node, or there are multiple, return undefined.\n * When drawing the graph, this node would be the origin.\n */ function _firstNode(graph, exclude = []) {\n    const targets = new Set(graph.edges.filter((edge)=>!exclude.includes(edge.source)).map((edge)=>edge.target));\n    const found = [];\n    for (const node of Object.values(graph.nodes)){\n        if (!exclude.includes(node.id) && !targets.has(node.id)) {\n            found.push(node);\n        }\n    }\n    return found.length === 1 ? found[0] : undefined;\n}\n/**\n * Find the single node that is not a source of any edge.\n * Exclude nodes/targets with ids in the exclude list.\n * If there is no such node, or there are multiple, return undefined.\n * When drawing the graph, this node would be the destination.\n */ function _lastNode(graph, exclude = []) {\n    const sources = new Set(graph.edges.filter((edge)=>!exclude.includes(edge.target)).map((edge)=>edge.source));\n    const found = [];\n    for (const node of Object.values(graph.nodes)){\n        if (!exclude.includes(node.id) && !sources.has(node.id)) {\n            found.push(node);\n        }\n    }\n    return found.length === 1 ? found[0] : undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRDtBQUNHO0FBQ1A7QUFDZ0I7QUFDakUsU0FBU1EsWUFBWUMsRUFBRSxFQUFFQyxJQUFJO0lBQ3pCLElBQUlELE9BQU9FLGFBQWEsQ0FBQ1AsZ0RBQU1BLENBQUNLLEtBQUs7UUFDakMsT0FBT0E7SUFDWCxPQUNLLElBQUlKLDhEQUFtQkEsQ0FBQ0ssT0FBTztRQUNoQyxJQUFJO1lBQ0EsSUFBSUUsVUFBVUYsS0FBS0csT0FBTztZQUMxQkQsVUFBVUEsUUFBUUUsVUFBVSxDQUFDLGNBQ3ZCRixRQUFRRyxLQUFLLENBQUMsV0FBV0MsTUFBTSxJQUMvQko7WUFDTixPQUFPQTtRQUNYLEVBQ0EsT0FBT0ssT0FBTztZQUNWLE9BQU9QLEtBQUtHLE9BQU87UUFDdkI7SUFDSixPQUNLO1FBQ0QsT0FBT0gsS0FBS1EsSUFBSSxJQUFJO0lBQ3hCO0FBQ0o7QUFDQSxTQUFTQyxhQUFhQyxJQUFJO0lBQ3RCLG1DQUFtQztJQUNuQyxJQUFJZiw4REFBbUJBLENBQUNlLEtBQUtWLElBQUksR0FBRztRQUNoQyxPQUFPO1lBQ0hXLE1BQU07WUFDTlgsTUFBTTtnQkFDRkQsSUFBSVcsS0FBS1YsSUFBSSxDQUFDWSxLQUFLO2dCQUNuQkosTUFBTUUsS0FBS1YsSUFBSSxDQUFDRyxPQUFPO1lBQzNCO1FBQ0o7SUFDSixPQUNLO1FBQ0QsT0FBTztZQUNIUSxNQUFNO1lBQ05YLE1BQU07Z0JBQUUsR0FBR1YsbUVBQWVBLENBQUNvQixLQUFLVixJQUFJLENBQUNhLE1BQU0sQ0FBQztnQkFBRUMsT0FBT0osS0FBS1YsSUFBSSxDQUFDUSxJQUFJO1lBQUM7UUFDeEU7SUFDSjtBQUNKO0FBQ08sTUFBTU87SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sQ0FBQztRQUNaO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQSxJQUFJLENBQUNDLEtBQUssR0FBR1AsUUFBUU8sU0FBUyxJQUFJLENBQUNBLEtBQUs7UUFDeEMsSUFBSSxDQUFDQyxLQUFLLEdBQUdSLFFBQVFRLFNBQVMsSUFBSSxDQUFDQSxLQUFLO0lBQzVDO0lBQ0EsbURBQW1EO0lBQ25ELDhEQUE4RDtJQUM5REMsU0FBUztRQUNMLE1BQU1DLGdCQUFnQixDQUFDO1FBQ3ZCVCxPQUFPVSxNQUFNLENBQUMsSUFBSSxDQUFDSixLQUFLLEVBQUVLLE9BQU8sQ0FBQyxDQUFDbkIsTUFBTW9CO1lBQ3JDSCxhQUFhLENBQUNqQixLQUFLWCxFQUFFLENBQUMsR0FBR0wsZ0RBQU1BLENBQUNnQixLQUFLWCxFQUFFLElBQUkrQixJQUFJcEIsS0FBS1gsRUFBRTtRQUMxRDtRQUNBLE9BQU87WUFDSHlCLE9BQU9OLE9BQU9VLE1BQU0sQ0FBQyxJQUFJLENBQUNKLEtBQUssRUFBRU8sR0FBRyxDQUFDLENBQUNyQixPQUFVO29CQUM1Q1gsSUFBSTRCLGFBQWEsQ0FBQ2pCLEtBQUtYLEVBQUUsQ0FBQztvQkFDMUIsR0FBR1UsYUFBYUMsS0FBSztnQkFDekI7WUFDQWUsT0FBTyxJQUFJLENBQUNBLEtBQUssQ0FBQ00sR0FBRyxDQUFDLENBQUNDO2dCQUNuQixNQUFNQyxPQUFPO29CQUNUQyxRQUFRUCxhQUFhLENBQUNLLEtBQUtFLE1BQU0sQ0FBQztvQkFDbENDLFFBQVFSLGFBQWEsQ0FBQ0ssS0FBS0csTUFBTSxDQUFDO2dCQUN0QztnQkFDQSxJQUFJLE9BQU9ILEtBQUtoQyxJQUFJLEtBQUssYUFBYTtvQkFDbENpQyxLQUFLakMsSUFBSSxHQUFHZ0MsS0FBS2hDLElBQUk7Z0JBQ3pCO2dCQUNBLElBQUksT0FBT2dDLEtBQUtJLFdBQVcsS0FBSyxhQUFhO29CQUN6Q0gsS0FBS0csV0FBVyxHQUFHSixLQUFLSSxXQUFXO2dCQUN2QztnQkFDQSxPQUFPSDtZQUNYO1FBQ0o7SUFDSjtJQUNBSSxRQUFRckMsSUFBSSxFQUFFRCxFQUFFLEVBQ2hCLDhEQUE4RDtJQUM5RHVDLFFBQVEsRUFBRTtRQUNOLElBQUl2QyxPQUFPRSxhQUFhLElBQUksQ0FBQ3VCLEtBQUssQ0FBQ3pCLEdBQUcsS0FBS0UsV0FBVztZQUNsRCxNQUFNLElBQUlzQyxNQUFNLENBQUMsYUFBYSxFQUFFeEMsR0FBRyxlQUFlLENBQUM7UUFDdkQ7UUFDQSxNQUFNeUMsU0FBU3pDLE1BQU1QLGdEQUFNQTtRQUMzQixNQUFNa0IsT0FBTztZQUNUWCxJQUFJeUM7WUFDSnhDO1lBQ0FRLE1BQU1WLFlBQVlDLElBQUlDO1lBQ3RCc0M7UUFDSjtRQUNBLElBQUksQ0FBQ2QsS0FBSyxDQUFDZ0IsT0FBTyxHQUFHOUI7UUFDckIsT0FBT0E7SUFDWDtJQUNBK0IsV0FBVy9CLElBQUksRUFBRTtRQUNiLHFDQUFxQztRQUNyQyxPQUFPLElBQUksQ0FBQ2MsS0FBSyxDQUFDZCxLQUFLWCxFQUFFLENBQUM7UUFDMUIseUNBQXlDO1FBQ3pDLElBQUksQ0FBQzBCLEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUssQ0FBQ2lCLE1BQU0sQ0FBQyxDQUFDVixPQUFTQSxLQUFLRSxNQUFNLEtBQUt4QixLQUFLWCxFQUFFLElBQUlpQyxLQUFLRyxNQUFNLEtBQUt6QixLQUFLWCxFQUFFO0lBQy9GO0lBQ0E0QyxRQUFRVCxNQUFNLEVBQUVDLE1BQU0sRUFBRW5DLElBQUksRUFBRW9DLFdBQVcsRUFBRTtRQUN2QyxJQUFJLElBQUksQ0FBQ1osS0FBSyxDQUFDVSxPQUFPbkMsRUFBRSxDQUFDLEtBQUtFLFdBQVc7WUFDckMsTUFBTSxJQUFJc0MsTUFBTSxDQUFDLFlBQVksRUFBRUwsT0FBT25DLEVBQUUsQ0FBQyxhQUFhLENBQUM7UUFDM0Q7UUFDQSxJQUFJLElBQUksQ0FBQ3lCLEtBQUssQ0FBQ1csT0FBT3BDLEVBQUUsQ0FBQyxLQUFLRSxXQUFXO1lBQ3JDLE1BQU0sSUFBSXNDLE1BQU0sQ0FBQyxZQUFZLEVBQUVKLE9BQU9wQyxFQUFFLENBQUMsYUFBYSxDQUFDO1FBQzNEO1FBQ0EsTUFBTWlDLE9BQU87WUFDVEUsUUFBUUEsT0FBT25DLEVBQUU7WUFDakJvQyxRQUFRQSxPQUFPcEMsRUFBRTtZQUNqQkM7WUFDQW9DO1FBQ0o7UUFDQSxJQUFJLENBQUNYLEtBQUssQ0FBQ21CLElBQUksQ0FBQ1o7UUFDaEIsT0FBT0E7SUFDWDtJQUNBYSxZQUFZO1FBQ1IsT0FBT0MsV0FBVyxJQUFJO0lBQzFCO0lBQ0FDLFdBQVc7UUFDUCxPQUFPQyxVQUFVLElBQUk7SUFDekI7SUFDQTs7O0tBR0MsR0FDREMsT0FBT0MsS0FBSyxFQUFFQyxTQUFTLEVBQUUsRUFBRTtRQUN2QixJQUFJQyxjQUFjRDtRQUNsQixNQUFNRSxVQUFVbkMsT0FBT1UsTUFBTSxDQUFDc0IsTUFBTTFCLEtBQUssRUFBRU8sR0FBRyxDQUFDLENBQUNyQixPQUFTQSxLQUFLWCxFQUFFO1FBQ2hFLElBQUlzRCxRQUFRQyxLQUFLLENBQUM1RCw0Q0FBTUEsR0FBRztZQUN2QjBELGNBQWM7UUFDbEI7UUFDQSxNQUFNRyxXQUFXLENBQUN4RDtZQUNkLE9BQU9xRCxjQUFjLENBQUMsRUFBRUEsWUFBWSxDQUFDLEVBQUVyRCxHQUFHLENBQUMsR0FBR0E7UUFDbEQ7UUFDQW1CLE9BQU9zQyxPQUFPLENBQUNOLE1BQU0xQixLQUFLLEVBQUVLLE9BQU8sQ0FBQyxDQUFDLENBQUM0QixLQUFLbEMsTUFBTTtZQUM3QyxJQUFJLENBQUNDLEtBQUssQ0FBQytCLFNBQVNFLEtBQUssR0FBRztnQkFBRSxHQUFHbEMsS0FBSztnQkFBRXhCLElBQUl3RCxTQUFTRTtZQUFLO1FBQzlEO1FBQ0EsTUFBTUMsV0FBV1IsTUFBTXpCLEtBQUssQ0FBQ00sR0FBRyxDQUFDLENBQUNDO1lBQzlCLE9BQU87Z0JBQ0gsR0FBR0EsSUFBSTtnQkFDUEUsUUFBUXFCLFNBQVN2QixLQUFLRSxNQUFNO2dCQUM1QkMsUUFBUW9CLFNBQVN2QixLQUFLRyxNQUFNO1lBQ2hDO1FBQ0o7UUFDQSxxQ0FBcUM7UUFDckMsSUFBSSxDQUFDVixLQUFLLEdBQUc7ZUFBSSxJQUFJLENBQUNBLEtBQUs7ZUFBS2lDO1NBQVM7UUFDekMsTUFBTUMsUUFBUVQsTUFBTUwsU0FBUztRQUM3QixNQUFNZSxPQUFPVixNQUFNSCxRQUFRO1FBQzNCLE9BQU87WUFDSFksUUFBUTtnQkFBRTVELElBQUl3RCxTQUFTSSxNQUFNNUQsRUFBRTtnQkFBR0MsTUFBTTJELE1BQU0zRCxJQUFJO1lBQUMsSUFBSUM7WUFDdkQyRCxPQUFPO2dCQUFFN0QsSUFBSXdELFNBQVNLLEtBQUs3RCxFQUFFO2dCQUFHQyxNQUFNNEQsS0FBSzVELElBQUk7WUFBQyxJQUFJQztTQUN2RDtJQUNMO0lBQ0E0RCxnQkFBZ0I7UUFDWixNQUFNaEIsWUFBWSxJQUFJLENBQUNBLFNBQVM7UUFDaEMsSUFBSUEsYUFBYUMsV0FBVyxJQUFJLEVBQUU7WUFBQ0QsVUFBVTlDLEVBQUU7U0FBQyxHQUFHO1lBQy9DLElBQUksQ0FBQzBDLFVBQVUsQ0FBQ0k7UUFDcEI7SUFDSjtJQUNBaUIsZUFBZTtRQUNYLE1BQU1mLFdBQVcsSUFBSSxDQUFDQSxRQUFRO1FBQzlCLElBQUlBLFlBQVlDLFVBQVUsSUFBSSxFQUFFO1lBQUNELFNBQVNoRCxFQUFFO1NBQUMsR0FBRztZQUM1QyxJQUFJLENBQUMwQyxVQUFVLENBQUNNO1FBQ3BCO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRGdCLE9BQU87UUFDSCxNQUFNQyxhQUFhOUMsT0FBTytDLFdBQVcsQ0FBQy9DLE9BQU9VLE1BQU0sQ0FBQyxJQUFJLENBQUNKLEtBQUssRUFBRU8sR0FBRyxDQUFDLENBQUNyQixPQUFTO2dCQUFDQSxLQUFLWCxFQUFFO2dCQUFFVyxLQUFLRixJQUFJO2FBQUM7UUFDbEcsTUFBTTBELGtCQUFrQixJQUFJQztRQUM1QmpELE9BQU9VLE1BQU0sQ0FBQ29DLFlBQVluQyxPQUFPLENBQUMsQ0FBQ3VDO1lBQy9CRixnQkFBZ0JHLEdBQUcsQ0FBQ0QsT0FBTyxDQUFDRixnQkFBZ0JJLEdBQUcsQ0FBQ0YsVUFBVSxLQUFLO1FBQ25FO1FBQ0EsTUFBTUcsWUFBWSxDQUFDL0I7WUFDZixNQUFNNEIsUUFBUUosVUFBVSxDQUFDeEIsT0FBTztZQUNoQyxJQUFJOUMsZ0RBQU1BLENBQUM4QyxXQUFXMEIsZ0JBQWdCSSxHQUFHLENBQUNGLFdBQVcsR0FBRztnQkFDcEQsT0FBT0E7WUFDWCxPQUNLO2dCQUNELE9BQU81QjtZQUNYO1FBQ0o7UUFDQSxPQUFPLElBQUl6QixNQUFNO1lBQ2JTLE9BQU9OLE9BQU8rQyxXQUFXLENBQUMvQyxPQUFPc0MsT0FBTyxDQUFDLElBQUksQ0FBQ2hDLEtBQUssRUFBRU8sR0FBRyxDQUFDLENBQUMsQ0FBQ2hDLElBQUlXLEtBQUssR0FBSztvQkFDckU2RCxVQUFVeEU7b0JBQ1Y7d0JBQUUsR0FBR1csSUFBSTt3QkFBRVgsSUFBSXdFLFVBQVV4RTtvQkFBSTtpQkFDaEM7WUFDRDBCLE9BQU8sSUFBSSxDQUFDQSxLQUFLLENBQUNNLEdBQUcsQ0FBQyxDQUFDQyxPQUFVO29CQUM3QixHQUFHQSxJQUFJO29CQUNQRSxRQUFRcUMsVUFBVXZDLEtBQUtFLE1BQU07b0JBQzdCQyxRQUFRb0MsVUFBVXZDLEtBQUtHLE1BQU07Z0JBQ2pDO1FBQ0o7SUFDSjtJQUNBdkMsWUFBWXFCLE1BQU0sRUFBRTtRQUNoQixNQUFNLEVBQUV1RCxVQUFVLEVBQUVDLFVBQVUsRUFBRUMsYUFBYTtZQUN6Q0MsU0FBUztZQUNUaEIsT0FBTztZQUNQQyxNQUFNO1FBQ1YsQ0FBQyxFQUFFZ0IsZUFBZSxFQUFHLEdBQUczRCxVQUFVLENBQUM7UUFDbkMsTUFBTWlDLFFBQVEsSUFBSSxDQUFDYSxJQUFJO1FBQ3ZCLE1BQU1sQixZQUFZSyxNQUFNTCxTQUFTO1FBQ2pDLE1BQU1FLFdBQVdHLE1BQU1ILFFBQVE7UUFDL0IsT0FBT25ELDhEQUFXQSxDQUFDc0QsTUFBTTFCLEtBQUssRUFBRTBCLE1BQU16QixLQUFLLEVBQUU7WUFDekNvQixXQUFXQSxXQUFXOUM7WUFDdEJnRCxVQUFVQSxVQUFVaEQ7WUFDcEJ5RTtZQUNBQztZQUNBQztZQUNBRTtRQUNKO0lBQ0o7SUFDQSxNQUFNL0UsZUFBZW9CLE1BQU0sRUFBRTtRQUN6QixNQUFNNEQsZ0JBQWdCLElBQUksQ0FBQ2pGLFdBQVcsQ0FBQ3FCO1FBQ3ZDLE9BQU9wQixpRUFBY0EsQ0FBQ2dGLGVBQWU7WUFDakNDLGlCQUFpQjdELFFBQVE2RDtRQUM3QjtJQUNKO0FBQ0o7QUFDQTs7Ozs7Q0FLQyxHQUNELFNBQVNoQyxXQUFXSSxLQUFLLEVBQUU2QixVQUFVLEVBQUU7SUFDbkMsTUFBTUMsVUFBVSxJQUFJQyxJQUFJL0IsTUFBTXpCLEtBQUssQ0FDOUJpQixNQUFNLENBQUMsQ0FBQ1YsT0FBUyxDQUFDK0MsUUFBUUcsUUFBUSxDQUFDbEQsS0FBS0UsTUFBTSxHQUM5Q0gsR0FBRyxDQUFDLENBQUNDLE9BQVNBLEtBQUtHLE1BQU07SUFDOUIsTUFBTWdELFFBQVEsRUFBRTtJQUNoQixLQUFLLE1BQU16RSxRQUFRUSxPQUFPVSxNQUFNLENBQUNzQixNQUFNMUIsS0FBSyxFQUFHO1FBQzNDLElBQUksQ0FBQ3VELFFBQVFHLFFBQVEsQ0FBQ3hFLEtBQUtYLEVBQUUsS0FBSyxDQUFDaUYsUUFBUUksR0FBRyxDQUFDMUUsS0FBS1gsRUFBRSxHQUFHO1lBQ3JEb0YsTUFBTXZDLElBQUksQ0FBQ2xDO1FBQ2Y7SUFDSjtJQUNBLE9BQU95RSxNQUFNN0UsTUFBTSxLQUFLLElBQUk2RSxLQUFLLENBQUMsRUFBRSxHQUFHbEY7QUFDM0M7QUFDQTs7Ozs7Q0FLQyxHQUNELFNBQVMrQyxVQUFVRSxLQUFLLEVBQUU2QixVQUFVLEVBQUU7SUFDbEMsTUFBTU0sVUFBVSxJQUFJSixJQUFJL0IsTUFBTXpCLEtBQUssQ0FDOUJpQixNQUFNLENBQUMsQ0FBQ1YsT0FBUyxDQUFDK0MsUUFBUUcsUUFBUSxDQUFDbEQsS0FBS0csTUFBTSxHQUM5Q0osR0FBRyxDQUFDLENBQUNDLE9BQVNBLEtBQUtFLE1BQU07SUFDOUIsTUFBTWlELFFBQVEsRUFBRTtJQUNoQixLQUFLLE1BQU16RSxRQUFRUSxPQUFPVSxNQUFNLENBQUNzQixNQUFNMUIsS0FBSyxFQUFHO1FBQzNDLElBQUksQ0FBQ3VELFFBQVFHLFFBQVEsQ0FBQ3hFLEtBQUtYLEVBQUUsS0FBSyxDQUFDc0YsUUFBUUQsR0FBRyxDQUFDMUUsS0FBS1gsRUFBRSxHQUFHO1lBQ3JEb0YsTUFBTXZDLElBQUksQ0FBQ2xDO1FBQ2Y7SUFDSjtJQUNBLE9BQU95RSxNQUFNN0UsTUFBTSxLQUFLLElBQUk2RSxLQUFLLENBQUMsRUFBRSxHQUFHbEY7QUFDM0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzPzM0MTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0LCB2YWxpZGF0ZSBhcyBpc1V1aWQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgaXNSdW5uYWJsZUludGVyZmFjZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBkcmF3TWVybWFpZCwgZHJhd01lcm1haWRQbmcgfSBmcm9tIFwiLi9ncmFwaF9tZXJtYWlkLmpzXCI7XG5mdW5jdGlvbiBub2RlRGF0YVN0cihpZCwgZGF0YSkge1xuICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkICYmICFpc1V1aWQoaWQpKSB7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShkYXRhKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGRhdGFTdHIgPSBkYXRhLmdldE5hbWUoKTtcbiAgICAgICAgICAgIGRhdGFTdHIgPSBkYXRhU3RyLnN0YXJ0c1dpdGgoXCJSdW5uYWJsZVwiKVxuICAgICAgICAgICAgICAgID8gZGF0YVN0ci5zbGljZShcIlJ1bm5hYmxlXCIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIDogZGF0YVN0cjtcbiAgICAgICAgICAgIHJldHVybiBkYXRhU3RyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF0YS5uYW1lID8/IFwiVW5rbm93blNjaGVtYVwiO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vZGVEYXRhSnNvbihub2RlKSB7XG4gICAgLy8gaWYgbm9kZS5kYXRhIGltcGxlbWVudHMgUnVubmFibGVcbiAgICBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShub2RlLmRhdGEpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInJ1bm5hYmxlXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6IG5vZGUuZGF0YS5sY19pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBub2RlLmRhdGEuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInNjaGVtYVwiLFxuICAgICAgICAgICAgZGF0YTogeyAuLi56b2RUb0pzb25TY2hlbWEobm9kZS5kYXRhLnNjaGVtYSksIHRpdGxlOiBub2RlLmRhdGEubmFtZSB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBHcmFwaCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5vZGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWRnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vZGVzID0gcGFyYW1zPy5ub2RlcyA/PyB0aGlzLm5vZGVzO1xuICAgICAgICB0aGlzLmVkZ2VzID0gcGFyYW1zPy5lZGdlcyA/PyB0aGlzLmVkZ2VzO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IHRoZSBncmFwaCB0byBhIEpTT04tc2VyaWFsaXphYmxlIGZvcm1hdC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgc3RhYmxlTm9kZUlkcyA9IHt9O1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUsIGkpID0+IHtcbiAgICAgICAgICAgIHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0gPSBpc1V1aWQobm9kZS5pZCkgPyBpIDogbm9kZS5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub2RlczogT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5tYXAoKG5vZGUpID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0sXG4gICAgICAgICAgICAgICAgLi4ubm9kZURhdGFKc29uKG5vZGUpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgZWRnZXM6IHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFibGVOb2RlSWRzW2VkZ2Uuc291cmNlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGFibGVOb2RlSWRzW2VkZ2UudGFyZ2V0XSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWRnZS5kYXRhICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0YSA9IGVkZ2UuZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlZGdlLmNvbmRpdGlvbmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY29uZGl0aW9uYWwgPSBlZGdlLmNvbmRpdGlvbmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGROb2RlKGRhdGEsIGlkLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIG1ldGFkYXRhKSB7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMubm9kZXNbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm9kZSB3aXRoIGlkICR7aWR9IGFscmVhZHkgZXhpc3RzYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZUlkID0gaWQgPz8gdXVpZHY0KCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB7XG4gICAgICAgICAgICBpZDogbm9kZUlkLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIG5hbWU6IG5vZGVEYXRhU3RyKGlkLCBkYXRhKSxcbiAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5vZGVzW25vZGVJZF0gPSBub2RlO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBub2RlcyBtYXBcbiAgICAgICAgZGVsZXRlIHRoaXMubm9kZXNbbm9kZS5pZF07XG4gICAgICAgIC8vIEZpbHRlciBvdXQgZWRnZXMgY29ubmVjdGVkIHRvIHRoZSBub2RlXG4gICAgICAgIHRoaXMuZWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS5zb3VyY2UgIT09IG5vZGUuaWQgJiYgZWRnZS50YXJnZXQgIT09IG5vZGUuaWQpO1xuICAgIH1cbiAgICBhZGRFZGdlKHNvdXJjZSwgdGFyZ2V0LCBkYXRhLCBjb25kaXRpb25hbCkge1xuICAgICAgICBpZiAodGhpcy5ub2Rlc1tzb3VyY2UuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU291cmNlIG5vZGUgJHtzb3VyY2UuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGVzW3RhcmdldC5pZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYXJnZXQgbm9kZSAke3RhcmdldC5pZH0gbm90IGluIGdyYXBoYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWRnZSA9IHtcbiAgICAgICAgICAgIHNvdXJjZTogc291cmNlLmlkLFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQuaWQsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29uZGl0aW9uYWwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlZGdlKTtcbiAgICAgICAgcmV0dXJuIGVkZ2U7XG4gICAgfVxuICAgIGZpcnN0Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIF9maXJzdE5vZGUodGhpcyk7XG4gICAgfVxuICAgIGxhc3ROb2RlKCkge1xuICAgICAgICByZXR1cm4gX2xhc3ROb2RlKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYWxsIG5vZGVzIGFuZCBlZGdlcyBmcm9tIGFub3RoZXIgZ3JhcGguXG4gICAgICogTm90ZSB0aGlzIGRvZXNuJ3QgY2hlY2sgZm9yIGR1cGxpY2F0ZXMsIG5vciBkb2VzIGl0IGNvbm5lY3QgdGhlIGdyYXBocy5cbiAgICAgKi9cbiAgICBleHRlbmQoZ3JhcGgsIHByZWZpeCA9IFwiXCIpIHtcbiAgICAgICAgbGV0IGZpbmFsUHJlZml4ID0gcHJlZml4O1xuICAgICAgICBjb25zdCBub2RlSWRzID0gT2JqZWN0LnZhbHVlcyhncmFwaC5ub2RlcykubWFwKChub2RlKSA9PiBub2RlLmlkKTtcbiAgICAgICAgaWYgKG5vZGVJZHMuZXZlcnkoaXNVdWlkKSkge1xuICAgICAgICAgICAgZmluYWxQcmVmaXggPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZWZpeGVkID0gKGlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmluYWxQcmVmaXggPyBgJHtmaW5hbFByZWZpeH06JHtpZH1gIDogaWQ7XG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGdyYXBoLm5vZGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbcHJlZml4ZWQoa2V5KV0gPSB7IC4uLnZhbHVlLCBpZDogcHJlZml4ZWQoa2V5KSB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV3RWRnZXMgPSBncmFwaC5lZGdlcy5tYXAoKGVkZ2UpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZWRnZSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHByZWZpeGVkKGVkZ2Uuc291cmNlKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHByZWZpeGVkKGVkZ2UudGFyZ2V0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBZGQgYWxsIGVkZ2VzIGZyb20gdGhlIG90aGVyIGdyYXBoXG4gICAgICAgIHRoaXMuZWRnZXMgPSBbLi4udGhpcy5lZGdlcywgLi4ubmV3RWRnZXNdO1xuICAgICAgICBjb25zdCBmaXJzdCA9IGdyYXBoLmZpcnN0Tm9kZSgpO1xuICAgICAgICBjb25zdCBsYXN0ID0gZ3JhcGgubGFzdE5vZGUoKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGZpcnN0ID8geyBpZDogcHJlZml4ZWQoZmlyc3QuaWQpLCBkYXRhOiBmaXJzdC5kYXRhIH0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBsYXN0ID8geyBpZDogcHJlZml4ZWQobGFzdC5pZCksIGRhdGE6IGxhc3QuZGF0YSB9IDogdW5kZWZpbmVkLFxuICAgICAgICBdO1xuICAgIH1cbiAgICB0cmltRmlyc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBmaXJzdE5vZGUgPSB0aGlzLmZpcnN0Tm9kZSgpO1xuICAgICAgICBpZiAoZmlyc3ROb2RlICYmIF9maXJzdE5vZGUodGhpcywgW2ZpcnN0Tm9kZS5pZF0pKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUoZmlyc3ROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmltTGFzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IGxhc3ROb2RlID0gdGhpcy5sYXN0Tm9kZSgpO1xuICAgICAgICBpZiAobGFzdE5vZGUgJiYgX2xhc3ROb2RlKHRoaXMsIFtsYXN0Tm9kZS5pZF0pKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUobGFzdE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIG5ldyBncmFwaCB3aXRoIGFsbCBub2RlcyByZS1pZGVudGlmaWVkLFxuICAgICAqIHVzaW5nIHRoZWlyIHVuaXF1ZSwgcmVhZGFibGUgbmFtZXMgd2hlcmUgcG9zc2libGUuXG4gICAgICovXG4gICAgcmVpZCgpIHtcbiAgICAgICAgY29uc3Qgbm9kZUxhYmVscyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLm1hcCgobm9kZSkgPT4gW25vZGUuaWQsIG5vZGUubmFtZV0pKTtcbiAgICAgICAgY29uc3Qgbm9kZUxhYmVsQ291bnRzID0gbmV3IE1hcCgpO1xuICAgICAgICBPYmplY3QudmFsdWVzKG5vZGVMYWJlbHMpLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgICAgICBub2RlTGFiZWxDb3VudHMuc2V0KGxhYmVsLCAobm9kZUxhYmVsQ291bnRzLmdldChsYWJlbCkgfHwgMCkgKyAxKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGdldE5vZGVJZCA9IChub2RlSWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gbm9kZUxhYmVsc1tub2RlSWRdO1xuICAgICAgICAgICAgaWYgKGlzVXVpZChub2RlSWQpICYmIG5vZGVMYWJlbENvdW50cy5nZXQobGFiZWwpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBHcmFwaCh7XG4gICAgICAgICAgICBub2RlczogT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRoaXMubm9kZXMpLm1hcCgoW2lkLCBub2RlXSkgPT4gW1xuICAgICAgICAgICAgICAgIGdldE5vZGVJZChpZCksXG4gICAgICAgICAgICAgICAgeyAuLi5ub2RlLCBpZDogZ2V0Tm9kZUlkKGlkKSB9LFxuICAgICAgICAgICAgXSkpLFxuICAgICAgICAgICAgZWRnZXM6IHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICAgICAgc291cmNlOiBnZXROb2RlSWQoZWRnZS5zb3VyY2UpLFxuICAgICAgICAgICAgICAgIHRhcmdldDogZ2V0Tm9kZUlkKGVkZ2UudGFyZ2V0KSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRyYXdNZXJtYWlkKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHdpdGhTdHlsZXMsIGN1cnZlU3R5bGUsIG5vZGVDb2xvcnMgPSB7XG4gICAgICAgICAgICBkZWZhdWx0OiBcImZpbGw6I2YyZjBmZixsaW5lLWhlaWdodDoxLjJcIixcbiAgICAgICAgICAgIGZpcnN0OiBcImZpbGwtb3BhY2l0eTowXCIsXG4gICAgICAgICAgICBsYXN0OiBcImZpbGw6I2JmYjZmY1wiLFxuICAgICAgICB9LCB3cmFwTGFiZWxOV29yZHMsIH0gPSBwYXJhbXMgPz8ge307XG4gICAgICAgIGNvbnN0IGdyYXBoID0gdGhpcy5yZWlkKCk7XG4gICAgICAgIGNvbnN0IGZpcnN0Tm9kZSA9IGdyYXBoLmZpcnN0Tm9kZSgpO1xuICAgICAgICBjb25zdCBsYXN0Tm9kZSA9IGdyYXBoLmxhc3ROb2RlKCk7XG4gICAgICAgIHJldHVybiBkcmF3TWVybWFpZChncmFwaC5ub2RlcywgZ3JhcGguZWRnZXMsIHtcbiAgICAgICAgICAgIGZpcnN0Tm9kZTogZmlyc3ROb2RlPy5pZCxcbiAgICAgICAgICAgIGxhc3ROb2RlOiBsYXN0Tm9kZT8uaWQsXG4gICAgICAgICAgICB3aXRoU3R5bGVzLFxuICAgICAgICAgICAgY3VydmVTdHlsZSxcbiAgICAgICAgICAgIG5vZGVDb2xvcnMsXG4gICAgICAgICAgICB3cmFwTGFiZWxOV29yZHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBkcmF3TWVybWFpZFBuZyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgbWVybWFpZFN5bnRheCA9IHRoaXMuZHJhd01lcm1haWQocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGRyYXdNZXJtYWlkUG5nKG1lcm1haWRTeW50YXgsIHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogcGFyYW1zPy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogRmluZCB0aGUgc2luZ2xlIG5vZGUgdGhhdCBpcyBub3QgYSB0YXJnZXQgb2YgYW55IGVkZ2UuXG4gKiBFeGNsdWRlIG5vZGVzL3NvdXJjZXMgd2l0aCBpZHMgaW4gdGhlIGV4Y2x1ZGUgbGlzdC5cbiAqIElmIHRoZXJlIGlzIG5vIHN1Y2ggbm9kZSwgb3IgdGhlcmUgYXJlIG11bHRpcGxlLCByZXR1cm4gdW5kZWZpbmVkLlxuICogV2hlbiBkcmF3aW5nIHRoZSBncmFwaCwgdGhpcyBub2RlIHdvdWxkIGJlIHRoZSBvcmlnaW4uXG4gKi9cbmZ1bmN0aW9uIF9maXJzdE5vZGUoZ3JhcGgsIGV4Y2x1ZGUgPSBbXSkge1xuICAgIGNvbnN0IHRhcmdldHMgPSBuZXcgU2V0KGdyYXBoLmVkZ2VzXG4gICAgICAgIC5maWx0ZXIoKGVkZ2UpID0+ICFleGNsdWRlLmluY2x1ZGVzKGVkZ2Uuc291cmNlKSlcbiAgICAgICAgLm1hcCgoZWRnZSkgPT4gZWRnZS50YXJnZXQpKTtcbiAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBPYmplY3QudmFsdWVzKGdyYXBoLm5vZGVzKSkge1xuICAgICAgICBpZiAoIWV4Y2x1ZGUuaW5jbHVkZXMobm9kZS5pZCkgJiYgIXRhcmdldHMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICAgICAgICBmb3VuZC5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZC5sZW5ndGggPT09IDEgPyBmb3VuZFswXSA6IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogRmluZCB0aGUgc2luZ2xlIG5vZGUgdGhhdCBpcyBub3QgYSBzb3VyY2Ugb2YgYW55IGVkZ2UuXG4gKiBFeGNsdWRlIG5vZGVzL3RhcmdldHMgd2l0aCBpZHMgaW4gdGhlIGV4Y2x1ZGUgbGlzdC5cbiAqIElmIHRoZXJlIGlzIG5vIHN1Y2ggbm9kZSwgb3IgdGhlcmUgYXJlIG11bHRpcGxlLCByZXR1cm4gdW5kZWZpbmVkLlxuICogV2hlbiBkcmF3aW5nIHRoZSBncmFwaCwgdGhpcyBub2RlIHdvdWxkIGJlIHRoZSBkZXN0aW5hdGlvbi5cbiAqL1xuZnVuY3Rpb24gX2xhc3ROb2RlKGdyYXBoLCBleGNsdWRlID0gW10pIHtcbiAgICBjb25zdCBzb3VyY2VzID0gbmV3IFNldChncmFwaC5lZGdlc1xuICAgICAgICAuZmlsdGVyKChlZGdlKSA9PiAhZXhjbHVkZS5pbmNsdWRlcyhlZGdlLnRhcmdldCkpXG4gICAgICAgIC5tYXAoKGVkZ2UpID0+IGVkZ2Uuc291cmNlKSk7XG4gICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgT2JqZWN0LnZhbHVlcyhncmFwaC5ub2RlcykpIHtcbiAgICAgICAgaWYgKCFleGNsdWRlLmluY2x1ZGVzKG5vZGUuaWQpICYmICFzb3VyY2VzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgZm91bmQucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQubGVuZ3RoID09PSAxID8gZm91bmRbMF0gOiB1bmRlZmluZWQ7XG59XG4iXSwibmFtZXMiOlsiem9kVG9Kc29uU2NoZW1hIiwidjQiLCJ1dWlkdjQiLCJ2YWxpZGF0ZSIsImlzVXVpZCIsImlzUnVubmFibGVJbnRlcmZhY2UiLCJkcmF3TWVybWFpZCIsImRyYXdNZXJtYWlkUG5nIiwibm9kZURhdGFTdHIiLCJpZCIsImRhdGEiLCJ1bmRlZmluZWQiLCJkYXRhU3RyIiwiZ2V0TmFtZSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImxlbmd0aCIsImVycm9yIiwibmFtZSIsIm5vZGVEYXRhSnNvbiIsIm5vZGUiLCJ0eXBlIiwibGNfaWQiLCJzY2hlbWEiLCJ0aXRsZSIsIkdyYXBoIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibm9kZXMiLCJlZGdlcyIsInRvSlNPTiIsInN0YWJsZU5vZGVJZHMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiaSIsIm1hcCIsImVkZ2UiLCJpdGVtIiwic291cmNlIiwidGFyZ2V0IiwiY29uZGl0aW9uYWwiLCJhZGROb2RlIiwibWV0YWRhdGEiLCJFcnJvciIsIm5vZGVJZCIsInJlbW92ZU5vZGUiLCJmaWx0ZXIiLCJhZGRFZGdlIiwicHVzaCIsImZpcnN0Tm9kZSIsIl9maXJzdE5vZGUiLCJsYXN0Tm9kZSIsIl9sYXN0Tm9kZSIsImV4dGVuZCIsImdyYXBoIiwicHJlZml4IiwiZmluYWxQcmVmaXgiLCJub2RlSWRzIiwiZXZlcnkiLCJwcmVmaXhlZCIsImVudHJpZXMiLCJrZXkiLCJuZXdFZGdlcyIsImZpcnN0IiwibGFzdCIsInRyaW1GaXJzdE5vZGUiLCJ0cmltTGFzdE5vZGUiLCJyZWlkIiwibm9kZUxhYmVscyIsImZyb21FbnRyaWVzIiwibm9kZUxhYmVsQ291bnRzIiwiTWFwIiwibGFiZWwiLCJzZXQiLCJnZXQiLCJnZXROb2RlSWQiLCJ3aXRoU3R5bGVzIiwiY3VydmVTdHlsZSIsIm5vZGVDb2xvcnMiLCJkZWZhdWx0Iiwid3JhcExhYmVsTldvcmRzIiwibWVybWFpZFN5bnRheCIsImJhY2tncm91bmRDb2xvciIsImV4Y2x1ZGUiLCJ0YXJnZXRzIiwiU2V0IiwiaW5jbHVkZXMiLCJmb3VuZCIsImhhcyIsInNvdXJjZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph_mermaid.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drawMermaid: () => (/* binding */ drawMermaid),\n/* harmony export */   drawMermaidPng: () => (/* binding */ drawMermaidPng)\n/* harmony export */ });\nfunction _escapeNodeLabel(nodeLabel) {\n    // Escapes the node label for Mermaid syntax.\n    return nodeLabel.replace(/[^a-zA-Z-_0-9]/g, \"_\");\n}\nconst MARKDOWN_SPECIAL_CHARS = [\n    \"*\",\n    \"_\",\n    \"`\"\n];\nfunction _generateMermaidGraphStyles(nodeColors) {\n    let styles = \"\";\n    for (const [className, color] of Object.entries(nodeColors)){\n        styles += `\\tclassDef ${className} ${color};\\n`;\n    }\n    return styles;\n}\n/**\n * Draws a Mermaid graph using the provided graph data\n */ function drawMermaid(nodes, edges, config) {\n    const { firstNode, lastNode, nodeColors, withStyles = true, curveStyle = \"linear\", wrapLabelNWords = 9 } = config ?? {};\n    // Initialize Mermaid graph configuration\n    let mermaidGraph = withStyles ? `%%{init: {'flowchart': {'curve': '${curveStyle}'}}}%%\\ngraph TD;\\n` : \"graph TD;\\n\";\n    if (withStyles) {\n        // Node formatting templates\n        const defaultClassLabel = \"default\";\n        const formatDict = {\n            [defaultClassLabel]: \"{0}({1})\"\n        };\n        if (firstNode !== undefined) {\n            formatDict[firstNode] = \"{0}([{1}]):::first\";\n        }\n        if (lastNode !== undefined) {\n            formatDict[lastNode] = \"{0}([{1}]):::last\";\n        }\n        // Add nodes to the graph\n        for (const [key, node] of Object.entries(nodes)){\n            const nodeName = node.name.split(\":\").pop() ?? \"\";\n            const label = MARKDOWN_SPECIAL_CHARS.some((char)=>nodeName.startsWith(char) && nodeName.endsWith(char)) ? `<p>${nodeName}</p>` : nodeName;\n            let finalLabel = label;\n            if (Object.keys(node.metadata ?? {}).length) {\n                finalLabel += `<hr/><small><em>${Object.entries(node.metadata ?? {}).map(([k, v])=>`${k} = ${v}`).join(\"\\n\")}</em></small>`;\n            }\n            const nodeLabel = (formatDict[key] ?? formatDict[defaultClassLabel]).replace(\"{0}\", _escapeNodeLabel(key)).replace(\"{1}\", finalLabel);\n            mermaidGraph += `\\t${nodeLabel}\\n`;\n        }\n    }\n    // Group edges by their common prefixes\n    const edgeGroups = {};\n    for (const edge of edges){\n        const srcParts = edge.source.split(\":\");\n        const tgtParts = edge.target.split(\":\");\n        const commonPrefix = srcParts.filter((src, i)=>src === tgtParts[i]).join(\":\");\n        if (!edgeGroups[commonPrefix]) {\n            edgeGroups[commonPrefix] = [];\n        }\n        edgeGroups[commonPrefix].push(edge);\n    }\n    const seenSubgraphs = new Set();\n    function addSubgraph(edges, prefix) {\n        const selfLoop = edges.length === 1 && edges[0].source === edges[0].target;\n        if (prefix && !selfLoop) {\n            const subgraph = prefix.split(\":\").pop();\n            if (seenSubgraphs.has(subgraph)) {\n                throw new Error(`Found duplicate subgraph '${subgraph}' -- this likely means that ` + \"you're reusing a subgraph node with the same name. \" + \"Please adjust your graph to have subgraph nodes with unique names.\");\n            }\n            seenSubgraphs.add(subgraph);\n            mermaidGraph += `\\tsubgraph ${subgraph}\\n`;\n        }\n        for (const edge of edges){\n            const { source, target, data, conditional } = edge;\n            let edgeLabel = \"\";\n            if (data !== undefined) {\n                let edgeData = data;\n                const words = edgeData.split(\" \");\n                if (words.length > wrapLabelNWords) {\n                    edgeData = Array.from({\n                        length: Math.ceil(words.length / wrapLabelNWords)\n                    }, (_, i)=>words.slice(i * wrapLabelNWords, (i + 1) * wrapLabelNWords).join(\" \")).join(\"&nbsp;<br>&nbsp;\");\n                }\n                edgeLabel = conditional ? ` -. &nbsp;${edgeData}&nbsp; .-> ` : ` -- &nbsp;${edgeData}&nbsp; --> `;\n            } else {\n                edgeLabel = conditional ? \" -.-> \" : \" --> \";\n            }\n            mermaidGraph += `\\t${_escapeNodeLabel(source)}${edgeLabel}${_escapeNodeLabel(target)};\\n`;\n        }\n        // Recursively add nested subgraphs\n        for(const nestedPrefix in edgeGroups){\n            if (nestedPrefix.startsWith(`${prefix}:`) && nestedPrefix !== prefix) {\n                addSubgraph(edgeGroups[nestedPrefix], nestedPrefix);\n            }\n        }\n        if (prefix && !selfLoop) {\n            mermaidGraph += \"\tend\\n\";\n        }\n    }\n    // Start with the top-level edges (no common prefix)\n    addSubgraph(edgeGroups[\"\"] ?? [], \"\");\n    // Add remaining subgraphs\n    for(const prefix in edgeGroups){\n        if (!prefix.includes(\":\") && prefix !== \"\") {\n            addSubgraph(edgeGroups[prefix], prefix);\n        }\n    }\n    // Add custom styles for nodes\n    if (withStyles) {\n        mermaidGraph += _generateMermaidGraphStyles(nodeColors ?? {});\n    }\n    return mermaidGraph;\n}\n/**\n * Renders Mermaid graph using the Mermaid.INK API.\n */ async function drawMermaidPng(mermaidSyntax, config) {\n    let { backgroundColor = \"white\" } = config ?? {};\n    // Use btoa for compatibility, assume ASCII\n    const mermaidSyntaxEncoded = btoa(mermaidSyntax);\n    // Check if the background color is a hexadecimal color code using regex\n    if (backgroundColor !== undefined) {\n        const hexColorPattern = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n        if (!hexColorPattern.test(backgroundColor)) {\n            backgroundColor = `!${backgroundColor}`;\n        }\n    }\n    const imageUrl = `https://mermaid.ink/img/${mermaidSyntaxEncoded}?bgColor=${backgroundColor}`;\n    const res = await fetch(imageUrl);\n    if (!res.ok) {\n        throw new Error([\n            `Failed to render the graph using the Mermaid.INK API.`,\n            `Status code: ${res.status}`,\n            `Status text: ${res.statusText}`\n        ].join(\"\\n\"));\n    }\n    const content = await res.blob();\n    return content;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoX21lcm1haWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxTQUFTQSxpQkFBaUJDLFNBQVM7SUFDL0IsNkNBQTZDO0lBQzdDLE9BQU9BLFVBQVVDLE9BQU8sQ0FBQyxtQkFBbUI7QUFDaEQ7QUFDQSxNQUFNQyx5QkFBeUI7SUFBQztJQUFLO0lBQUs7Q0FBSTtBQUM5QyxTQUFTQyw0QkFBNEJDLFVBQVU7SUFDM0MsSUFBSUMsU0FBUztJQUNiLEtBQUssTUFBTSxDQUFDQyxXQUFXQyxNQUFNLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ0wsWUFBYTtRQUN6REMsVUFBVSxDQUFDLFdBQVcsRUFBRUMsVUFBVSxDQUFDLEVBQUVDLE1BQU0sR0FBRyxDQUFDO0lBQ25EO0lBQ0EsT0FBT0Y7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU0ssWUFBWUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLE1BQU07SUFDNUMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRVgsVUFBVSxFQUFFWSxhQUFhLElBQUksRUFBRUMsYUFBYSxRQUFRLEVBQUVDLGtCQUFrQixDQUFDLEVBQUcsR0FBR0wsVUFBVSxDQUFDO0lBQ3ZILHlDQUF5QztJQUN6QyxJQUFJTSxlQUFlSCxhQUNiLENBQUMsa0NBQWtDLEVBQUVDLFdBQVcsbUJBQW1CLENBQUMsR0FDcEU7SUFDTixJQUFJRCxZQUFZO1FBQ1osNEJBQTRCO1FBQzVCLE1BQU1JLG9CQUFvQjtRQUMxQixNQUFNQyxhQUFhO1lBQ2YsQ0FBQ0Qsa0JBQWtCLEVBQUU7UUFDekI7UUFDQSxJQUFJTixjQUFjUSxXQUFXO1lBQ3pCRCxVQUFVLENBQUNQLFVBQVUsR0FBRztRQUM1QjtRQUNBLElBQUlDLGFBQWFPLFdBQVc7WUFDeEJELFVBQVUsQ0FBQ04sU0FBUyxHQUFHO1FBQzNCO1FBQ0EseUJBQXlCO1FBQ3pCLEtBQUssTUFBTSxDQUFDUSxLQUFLQyxL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QUFFZ0Usa0JBQWtCLE9BQU8sRUFBRSxHQUFHaEUsVUFBVSxDQUFDO0lBQy9DLDJDQUEyQztJQUMzQyxNQUFNaUUsdUJBQXVCQyxLQUFLSDtJQUNsQyx3RUFBd0U7SUFDeEUsSUFBSUMsb0JBQW9CdkQsV0FBVztRQUMvQixNQUFNMEQsa0JBQWtCO1FBQ3hCLElBQUksQ0FBQ0EsZ0JBQWdCQyxJQUFJLENBQUNKLGtCQUFrQjtZQUN4Q0Esa0JBQWtCLENBQUMsQ0FBQyxFQUFFQSxnQkFBZ0IsQ0FBQztRQUMzQztJQUNKO0lBQ0EsTUFBTUssV0FBVyxDQUFDLHdCQUF3QixFQUFFSixxQkFBcUIsU0FBUyxFQUFFRCxnQkFBZ0IsQ0FBQztJQUM3RixNQUFNTSxNQUFNLE1BQU1DLE1BQU1GO0lBQ3hCLElBQUksQ0FBQ0MsSUFBSUUsRUFBRSxFQUFFO1FBQ1QsTUFBTSxJQUFJekIsTUFBTTtZQUNaLENBQUMscURBQXFELENBQUM7WUFDdkQsQ0FBQyxhQUFhLEVBQUV1QixJQUFJRyxNQUFNLENBQUMsQ0FBQztZQUM1QixDQUFDLGFBQWEsRUFBRUgsSUFBSUksVUFBVSxDQUFDLENBQUM7U0FDbkMsQ0FBQzlDLElBQUksQ0FBQztJQUNYO0lBQ0EsTUFBTStDLFVBQVUsTUFBTUwsSUFBSU0sSUFBSTtJQUM5QixPQUFPRDtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9ncmFwaF9tZXJtYWlkLmpzPzcxMGUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2VzY2FwZU5vZGVMYWJlbChub2RlTGFiZWwpIHtcbiAgICAvLyBFc2NhcGVzIHRoZSBub2RlIGxhYmVsIGZvciBNZXJtYWlkIHN5bnRheC5cbiAgICByZXR1cm4gbm9kZUxhYmVsLnJlcGxhY2UoL1teYS16QS1aLV8wLTldL2csIFwiX1wiKTtcbn1cbmNvbnN0IE1BUktET1dOX1NQRUNJQUxfQ0hBUlMgPSBbXCIqXCIsIFwiX1wiLCBcImBcIl07XG5mdW5jdGlvbiBfZ2VuZXJhdGVNZXJtYWlkR3JhcGhTdHlsZXMobm9kZUNvbG9ycykge1xuICAgIGxldCBzdHlsZXMgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgW2NsYXNzTmFtZSwgY29sb3JdIG9mIE9iamVjdC5lbnRyaWVzKG5vZGVDb2xvcnMpKSB7XG4gICAgICAgIHN0eWxlcyArPSBgXFx0Y2xhc3NEZWYgJHtjbGFzc05hbWV9ICR7Y29sb3J9O1xcbmA7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZXM7XG59XG4vKipcbiAqIERyYXdzIGEgTWVybWFpZCBncmFwaCB1c2luZyB0aGUgcHJvdmlkZWQgZ3JhcGggZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd01lcm1haWQobm9kZXMsIGVkZ2VzLCBjb25maWcpIHtcbiAgICBjb25zdCB7IGZpcnN0Tm9kZSwgbGFzdE5vZGUsIG5vZGVDb2xvcnMsIHdpdGhTdHlsZXMgPSB0cnVlLCBjdXJ2ZVN0eWxlID0gXCJsaW5lYXJcIiwgd3JhcExhYmVsTldvcmRzID0gOSwgfSA9IGNvbmZpZyA/PyB7fTtcbiAgICAvLyBJbml0aWFsaXplIE1lcm1haWQgZ3JhcGggY29uZmlndXJhdGlvblxuICAgIGxldCBtZXJtYWlkR3JhcGggPSB3aXRoU3R5bGVzXG4gICAgICAgID8gYCUle2luaXQ6IHsnZmxvd2NoYXJ0JzogeydjdXJ2ZSc6ICcke2N1cnZlU3R5bGV9J319fSUlXFxuZ3JhcGggVEQ7XFxuYFxuICAgICAgICA6IFwiZ3JhcGggVEQ7XFxuXCI7XG4gICAgaWYgKHdpdGhTdHlsZXMpIHtcbiAgICAgICAgLy8gTm9kZSBmb3JtYXR0aW5nIHRlbXBsYXRlc1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2xhc3NMYWJlbCA9IFwiZGVmYXVsdFwiO1xuICAgICAgICBjb25zdCBmb3JtYXREaWN0ID0ge1xuICAgICAgICAgICAgW2RlZmF1bHRDbGFzc0xhYmVsXTogXCJ7MH0oezF9KVwiLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZmlyc3ROb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdERpY3RbZmlyc3ROb2RlXSA9IFwiezB9KFt7MX1dKTo6OmZpcnN0XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3ROb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdERpY3RbbGFzdE5vZGVdID0gXCJ7MH0oW3sxfV0pOjo6bGFzdFwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBub2RlcyB0byB0aGUgZ3JhcGhcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBub2RlXSBvZiBPYmplY3QuZW50cmllcyhub2RlcykpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVOYW1lID0gbm9kZS5uYW1lLnNwbGl0KFwiOlwiKS5wb3AoKSA/PyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBNQVJLRE9XTl9TUEVDSUFMX0NIQVJTLnNvbWUoKGNoYXIpID0+IG5vZGVOYW1lLnN0YXJ0c1dpdGgoY2hhcikgJiYgbm9kZU5hbWUuZW5kc1dpdGgoY2hhcikpXG4gICAgICAgICAgICAgICAgPyBgPHA+JHtub2RlTmFtZX08L3A+YFxuICAgICAgICAgICAgICAgIDogbm9kZU5hbWU7XG4gICAgICAgICAgICBsZXQgZmluYWxMYWJlbCA9IGxhYmVsO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGUubWV0YWRhdGEgPz8ge30pLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZpbmFsTGFiZWwgKz0gYDxoci8+PHNtYWxsPjxlbT4ke09iamVjdC5lbnRyaWVzKG5vZGUubWV0YWRhdGEgPz8ge30pXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtrLCB2XSkgPT4gYCR7a30gPSAke3Z9YClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIil9PC9lbT48L3NtYWxsPmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub2RlTGFiZWwgPSAoZm9ybWF0RGljdFtrZXldID8/IGZvcm1hdERpY3RbZGVmYXVsdENsYXNzTGFiZWxdKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiezB9XCIsIF9lc2NhcGVOb2RlTGFiZWwoa2V5KSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcInsxfVwiLCBmaW5hbExhYmVsKTtcbiAgICAgICAgICAgIG1lcm1haWRHcmFwaCArPSBgXFx0JHtub2RlTGFiZWx9XFxuYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBHcm91cCBlZGdlcyBieSB0aGVpciBjb21tb24gcHJlZml4ZXNcbiAgICBjb25zdCBlZGdlR3JvdXBzID0ge307XG4gICAgZm9yIChjb25zdCBlZGdlIG9mIGVkZ2VzKSB7XG4gICAgICAgIGNvbnN0IHNyY1BhcnRzID0gZWRnZS5zb3VyY2Uuc3BsaXQoXCI6XCIpO1xuICAgICAgICBjb25zdCB0Z3RQYXJ0cyA9IGVkZ2UudGFyZ2V0LnNwbGl0KFwiOlwiKTtcbiAgICAgICAgY29uc3QgY29tbW9uUHJlZml4ID0gc3JjUGFydHNcbiAgICAgICAgICAgIC5maWx0ZXIoKHNyYywgaSkgPT4gc3JjID09PSB0Z3RQYXJ0c1tpXSlcbiAgICAgICAgICAgIC5qb2luKFwiOlwiKTtcbiAgICAgICAgaWYgKCFlZGdlR3JvdXBzW2NvbW1vblByZWZpeF0pIHtcbiAgICAgICAgICAgIGVkZ2VHcm91cHNbY29tbW9uUHJlZml4XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVkZ2VHcm91cHNbY29tbW9uUHJlZml4XS5wdXNoKGVkZ2UpO1xuICAgIH1cbiAgICBjb25zdCBzZWVuU3ViZ3JhcGhzID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGFkZFN1YmdyYXBoKGVkZ2VzLCBwcmVmaXgpIHtcbiAgICAgICAgY29uc3Qgc2VsZkxvb3AgPSBlZGdlcy5sZW5ndGggPT09IDEgJiYgZWRnZXNbMF0uc291cmNlID09PSBlZGdlc1swXS50YXJnZXQ7XG4gICAgICAgIGlmIChwcmVmaXggJiYgIXNlbGZMb29wKSB7XG4gICAgICAgICAgICBjb25zdCBzdWJncmFwaCA9IHByZWZpeC5zcGxpdChcIjpcIikucG9wKCk7XG4gICAgICAgICAgICBpZiAoc2VlblN1YmdyYXBocy5oYXMoc3ViZ3JhcGgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBkdXBsaWNhdGUgc3ViZ3JhcGggJyR7c3ViZ3JhcGh9JyAtLSB0aGlzIGxpa2VseSBtZWFucyB0aGF0IGAgK1xuICAgICAgICAgICAgICAgICAgICBcInlvdSdyZSByZXVzaW5nIGEgc3ViZ3JhcGggbm9kZSB3aXRoIHRoZSBzYW1lIG5hbWUuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJQbGVhc2UgYWRqdXN0IHlvdXIgZ3JhcGggdG8gaGF2ZSBzdWJncmFwaCBub2RlcyB3aXRoIHVuaXF1ZSBuYW1lcy5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWVuU3ViZ3JhcGhzLmFkZChzdWJncmFwaCk7XG4gICAgICAgICAgICBtZXJtYWlkR3JhcGggKz0gYFxcdHN1YmdyYXBoICR7c3ViZ3JhcGh9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgZWRnZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc291cmNlLCB0YXJnZXQsIGRhdGEsIGNvbmRpdGlvbmFsIH0gPSBlZGdlO1xuICAgICAgICAgICAgbGV0IGVkZ2VMYWJlbCA9IFwiXCI7XG4gICAgICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VEYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkcyA9IGVkZ2VEYXRhLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gd3JhcExhYmVsTldvcmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VEYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTWF0aC5jZWlsKHdvcmRzLmxlbmd0aCAvIHdyYXBMYWJlbE5Xb3JkcykgfSwgKF8sIGkpID0+IHdvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoaSAqIHdyYXBMYWJlbE5Xb3JkcywgKGkgKyAxKSAqIHdyYXBMYWJlbE5Xb3JkcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiIFwiKSkuam9pbihcIiZuYnNwOzxicj4mbmJzcDtcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVkZ2VMYWJlbCA9IGNvbmRpdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgID8gYCAtLiAmbmJzcDske2VkZ2VEYXRhfSZuYnNwOyAuLT4gYFxuICAgICAgICAgICAgICAgICAgICA6IGAgLS0gJm5ic3A7JHtlZGdlRGF0YX0mbmJzcDsgLS0+IGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlZGdlTGFiZWwgPSBjb25kaXRpb25hbCA/IFwiIC0uLT4gXCIgOiBcIiAtLT4gXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJtYWlkR3JhcGggKz0gYFxcdCR7X2VzY2FwZU5vZGVMYWJlbChzb3VyY2UpfSR7ZWRnZUxhYmVsfSR7X2VzY2FwZU5vZGVMYWJlbCh0YXJnZXQpfTtcXG5gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGFkZCBuZXN0ZWQgc3ViZ3JhcGhzXG4gICAgICAgIGZvciAoY29uc3QgbmVzdGVkUHJlZml4IGluIGVkZ2VHcm91cHMpIHtcbiAgICAgICAgICAgIGlmIChuZXN0ZWRQcmVmaXguc3RhcnRzV2l0aChgJHtwcmVmaXh9OmApICYmIG5lc3RlZFByZWZpeCAhPT0gcHJlZml4KSB7XG4gICAgICAgICAgICAgICAgYWRkU3ViZ3JhcGgoZWRnZUdyb3Vwc1tuZXN0ZWRQcmVmaXhdLCBuZXN0ZWRQcmVmaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmVmaXggJiYgIXNlbGZMb29wKSB7XG4gICAgICAgICAgICBtZXJtYWlkR3JhcGggKz0gXCJcXHRlbmRcXG5cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTdGFydCB3aXRoIHRoZSB0b3AtbGV2ZWwgZWRnZXMgKG5vIGNvbW1vbiBwcmVmaXgpXG4gICAgYWRkU3ViZ3JhcGgoZWRnZUdyb3Vwc1tcIlwiXSA/PyBbXSwgXCJcIik7XG4gICAgLy8gQWRkIHJlbWFpbmluZyBzdWJncmFwaHNcbiAgICBmb3IgKGNvbnN0IHByZWZpeCBpbiBlZGdlR3JvdXBzKSB7XG4gICAgICAgIGlmICghcHJlZml4LmluY2x1ZGVzKFwiOlwiKSAmJiBwcmVmaXggIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGFkZFN1YmdyYXBoKGVkZ2VHcm91cHNbcHJlZml4XSwgcHJlZml4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBZGQgY3VzdG9tIHN0eWxlcyBmb3Igbm9kZXNcbiAgICBpZiAod2l0aFN0eWxlcykge1xuICAgICAgICBtZXJtYWlkR3JhcGggKz0gX2dlbmVyYXRlTWVybWFpZEdyYXBoU3R5bGVzKG5vZGVDb2xvcnMgPz8ge30pO1xuICAgIH1cbiAgICByZXR1cm4gbWVybWFpZEdyYXBoO1xufVxuLyoqXG4gKiBSZW5kZXJzIE1lcm1haWQgZ3JhcGggdXNpbmcgdGhlIE1lcm1haWQuSU5LIEFQSS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyYXdNZXJtYWlkUG5nKG1lcm1haWRTeW50YXgsIGNvbmZpZykge1xuICAgIGxldCB7IGJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIiB9ID0gY29uZmlnID8/IHt9O1xuICAgIC8vIFVzZSBidG9hIGZvciBjb21wYXRpYmlsaXR5LCBhc3N1bWUgQVNDSUlcbiAgICBjb25zdCBtZXJtYWlkU3ludGF4RW5jb2RlZCA9IGJ0b2EobWVybWFpZFN5bnRheCk7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJhY2tncm91bmQgY29sb3IgaXMgYSBoZXhhZGVjaW1hbCBjb2xvciBjb2RlIHVzaW5nIHJlZ2V4XG4gICAgaWYgKGJhY2tncm91bmRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGhleENvbG9yUGF0dGVybiA9IC9eIyg/OlswLTlhLWZBLUZdezN9KXsxLDJ9JC87XG4gICAgICAgIGlmICghaGV4Q29sb3JQYXR0ZXJuLnRlc3QoYmFja2dyb3VuZENvbG9yKSkge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gYCEke2JhY2tncm91bmRDb2xvcn1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGltYWdlVXJsID0gYGh0dHBzOi8vbWVybWFpZC5pbmsvaW1nLyR7bWVybWFpZFN5bnRheEVuY29kZWR9P2JnQ29sb3I9JHtiYWNrZ3JvdW5kQ29sb3J9YDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChpbWFnZVVybCk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFtcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVuZGVyIHRoZSBncmFwaCB1c2luZyB0aGUgTWVybWFpZC5JTksgQVBJLmAsXG4gICAgICAgICAgICBgU3RhdHVzIGNvZGU6ICR7cmVzLnN0YXR1c31gLFxuICAgICAgICAgICAgYFN0YXR1cyB0ZXh0OiAke3Jlcy5zdGF0dXNUZXh0fWAsXG4gICAgICAgIF0uam9pbihcIlxcblwiKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXMuYmxvYigpO1xuICAgIHJldHVybiBjb250ZW50O1xufVxuIl0sIm5hbWVzIjpbIl9lc2NhcGVOb2RlTGFiZWwiLCJub2RlTGFiZWwiLCJyZXBsYWNlIiwiTUFSS0RPV05fU1BFQ0lBTF9DSEFSUyIsIl9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyIsIm5vZGVDb2xvcnMiLCJzdHlsZXMiLCJjbGFzc05hbWUiLCJjb2xvciIsIk9iamVjdCIsImVudHJpZXMiLCJkcmF3TWVybWFpZCIsIm5vZGVzIiwiZWRnZXMiLCJjb25maWciLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsIndpdGhTdHlsZXMiLCJjdXJ2ZVN0eWxlIiwid3JhcExhYmVsTldvcmRzIiwibWVybWFpZEdyYXBoIiwiZGVmYXVsdENsYXNzTGFiZWwiLCJmb3JtYXREaWN0IiwidW5kZWZpbmVkIiwia2V5Iiwibm9kZSIsIm5vZGVOYW1lIiwibmFtZSIsInNwbGl0IiwicG9wIiwibGFiZWwiLCJzb21lIiwiY2hhciIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImZpbmFsTGFiZWwiLCJrZXlzIiwibWV0YWRhdGEiLCJsZW5ndGgiLCJtYXAiLCJrIiwidiIsImpvaW4iLCJlZGdlR3JvdXBzIiwiZWRnZSIsInNyY1BhcnRzIiwic291cmNlIiwidGd0UGFydHMiLCJ0YXJnZXQiLCJjb21tb25QcmVmaXgiLCJmaWx0ZXIiLCJzcmMiLCJpIiwicHVzaCIsInNlZW5TdWJncmFwaHMiLCJTZXQiLCJhZGRTdWJncmFwaCIsInByZWZpeCIsInNlbGZMb29wIiwic3ViZ3JhcGgiLCJoYXMiLCJFcnJvciIsImFkZCIsImRhdGEiLCJjb25kaXRpb25hbCIsImVkZ2VMYWJlbCIsImVkZ2VEYXRhIiwid29yZHMiLCJBcnJheSIsImZyb20iLCJNYXRoIiwiY2VpbCIsIl8iLCJzbGljZSIsIm5lc3RlZFByZWZpeCIsImluY2x1ZGVzIiwiZHJhd01lcm1haWRQbmciLCJtZXJtYWlkU3ludGF4IiwiYmFja2dyb3VuZENvbG9yIiwibWVybWFpZFN5bnRheEVuY29kZWQiLCJidG9hIiwiaGV4Q29sb3JQYXR0ZXJuIiwidGVzdCIsImltYWdlVXJsIiwicmVzIiwiZmV0Y2giLCJvayIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjb250ZW50IiwiYmxvYiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph_mermaid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/history.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/history.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableWithMessageHistory: () => (/* binding */ RunnableWithMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n\n\n\n/**\n * Wraps a LCEL chain and manages history. It appends input messages\n * and chain outputs as history, and adds the current history messages to\n * the chain input.\n * @example\n * ```typescript\n * // yarn add @langchain/anthropic @langchain/community @upstash/redis\n *\n * import {\n *   ChatPromptTemplate,\n *   MessagesPlaceholder,\n * } from \"@langchain/core/prompts\";\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n * import { UpstashRedisChatMessageHistory } from \"@langchain/community/stores/message/upstash_redis\";\n * // For demos, you can also use an in-memory store:\n * // import { ChatMessageHistory } from \"langchain/stores/message/in_memory\";\n *\n * const prompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", \"You're an assistant who's good at {ability}\"],\n *   new MessagesPlaceholder(\"history\"),\n *   [\"human\", \"{question}\"],\n * ]);\n *\n * const chain = prompt.pipe(new ChatAnthropic({}));\n *\n * const chainWithHistory = new RunnableWithMessageHistory({\n *   runnable: chain,\n *   getMessageHistory: (sessionId) =>\n *     new UpstashRedisChatMessageHistory({\n *       sessionId,\n *       config: {\n *         url: process.env.UPSTASH_REDIS_REST_URL!,\n *         token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n *       },\n *     }),\n *   inputMessagesKey: \"question\",\n *   historyMessagesKey: \"history\",\n * });\n *\n * const result = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What does cosine mean?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n *\n * const result2 = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What's its inverse?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n * ```\n */ class RunnableWithMessageHistory extends _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableBinding {\n    constructor(fields){\n        let historyChain = _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda.from((input, options)=>this._enterHistory(input, options ?? {})).withConfig({\n            runName: \"loadHistory\"\n        });\n        const messagesKey = fields.historyMessagesKey ?? fields.inputMessagesKey;\n        if (messagesKey) {\n            historyChain = _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough.assign({\n                [messagesKey]: historyChain\n            }).withConfig({\n                runName: \"insertHistory\"\n            });\n        }\n        const bound = historyChain.pipe(fields.runnable.withListeners({\n            onEnd: (run, config)=>this._exitHistory(run, config ?? {})\n        })).withConfig({\n            runName: \"RunnableWithMessageHistory\"\n        });\n        const config = fields.config ?? {};\n        super({\n            ...fields,\n            config,\n            bound\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"historyMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getMessageHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.getMessageHistory = fields.getMessageHistory;\n        this.inputMessagesKey = fields.inputMessagesKey;\n        this.outputMessagesKey = fields.outputMessagesKey;\n        this.historyMessagesKey = fields.historyMessagesKey;\n    }\n    _getInputMessages(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inputValue) {\n        let parsedInputValue;\n        if (typeof inputValue === \"object\" && !Array.isArray(inputValue) && !(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(inputValue)) {\n            let key;\n            if (this.inputMessagesKey) {\n                key = this.inputMessagesKey;\n            } else if (Object.keys(inputValue).length === 1) {\n                key = Object.keys(inputValue)[0];\n            } else {\n                key = \"input\";\n            }\n            if (Array.isArray(inputValue[key]) && Array.isArray(inputValue[key][0])) {\n                parsedInputValue = inputValue[key][0];\n            } else {\n                parsedInputValue = inputValue[key];\n            }\n        } else {\n            parsedInputValue = inputValue;\n        }\n        if (typeof parsedInputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(parsedInputValue)\n            ];\n        } else if (Array.isArray(parsedInputValue)) {\n            return parsedInputValue;\n        } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedInputValue)) {\n            return [\n                parsedInputValue\n            ];\n        } else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.\\nGot ${JSON.stringify(parsedInputValue, null, 2)}`);\n        }\n    }\n    _getOutputMessages(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    outputValue) {\n        let parsedOutputValue;\n        if (!Array.isArray(outputValue) && !(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(outputValue) && typeof outputValue !== \"string\") {\n            let key;\n            if (this.outputMessagesKey !== undefined) {\n                key = this.outputMessagesKey;\n            } else if (Object.keys(outputValue).length === 1) {\n                key = Object.keys(outputValue)[0];\n            } else {\n                key = \"output\";\n            }\n            // If you are wrapping a chat model directly\n            // The output is actually this weird generations object\n            if (outputValue.generations !== undefined) {\n                parsedOutputValue = outputValue.generations[0][0].message;\n            } else {\n                parsedOutputValue = outputValue[key];\n            }\n        } else {\n            parsedOutputValue = outputValue;\n        }\n        if (typeof parsedOutputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(parsedOutputValue)\n            ];\n        } else if (Array.isArray(parsedOutputValue)) {\n            return parsedOutputValue;\n        } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(parsedOutputValue)) {\n            return [\n                parsedOutputValue\n            ];\n        } else {\n            throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(parsedOutputValue, null, 2)}`);\n        }\n    }\n    async _enterHistory(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, kwargs) {\n        const history = kwargs?.configurable?.messageHistory;\n        const messages = await history.getMessages();\n        if (this.historyMessagesKey === undefined) {\n            return messages.concat(this._getInputMessages(input));\n        }\n        return messages;\n    }\n    async _exitHistory(run, config) {\n        const history = config.configurable?.messageHistory;\n        // Get input messages\n        let inputs;\n        // Chat model inputs are nested arrays\n        if (Array.isArray(run.inputs) && Array.isArray(run.inputs[0])) {\n            inputs = run.inputs[0];\n        } else {\n            inputs = run.inputs;\n        }\n        let inputMessages = this._getInputMessages(inputs);\n        // If historic messages were prepended to the input messages, remove them to\n        // avoid adding duplicate messages to history.\n        if (this.historyMessagesKey === undefined) {\n            const existingMessages = await history.getMessages();\n            inputMessages = inputMessages.slice(existingMessages.length);\n        }\n        // Get output messages\n        const outputValue = run.outputs;\n        if (!outputValue) {\n            throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(run, null, 2)}`);\n        }\n        const outputMessages = this._getOutputMessages(outputValue);\n        await history.addMessages([\n            ...inputMessages,\n            ...outputMessages\n        ]);\n    }\n    async _mergeConfig(...configs) {\n        const config = await super._mergeConfig(...configs);\n        // Extract sessionId\n        if (!config.configurable || !config.configurable.sessionId) {\n            const exampleInput = {\n                [this.inputMessagesKey ?? \"input\"]: \"foo\"\n            };\n            const exampleConfig = {\n                configurable: {\n                    sessionId: \"123\"\n                }\n            };\n            throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\\n` + `eg. chain.invoke(${JSON.stringify(exampleInput)}, ${JSON.stringify(exampleConfig)})`);\n        }\n        // attach messageHistory\n        const { sessionId } = config.configurable;\n        config.configurable.messageHistory = await this.getMessageHistory(sessionId);\n        return config;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUNsQjtBQUNOO0FBQ3ZEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0ErREMsR0FDTSxNQUFNTSxtQ0FBbUNILHFEQUFlQTtJQUMzREksWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUlDLGVBQWVMLG9EQUFjQSxDQUFDTSxJQUFJLENBQUMsQ0FBQ0MsT0FBT0MsVUFBWSxJQUFJLENBQUNDLGFBQWEsQ0FBQ0YsT0FBT0MsV0FBVyxDQUFDLElBQUlFLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQWM7UUFDekksTUFBTUMsY0FBY1IsT0FBT1Msa0JBQWtCLElBQUlULE9BQU9VLGdCQUFnQjtRQUN4RSxJQUFJRixhQUFhO1lBQ2JQLGVBQWVKLGdFQUFtQkEsQ0FBQ2MsTUFBTSxDQUFDO2dCQUN0QyxDQUFDSCxZQUFZLEVBQUVQO1lBQ25CLEdBQUdLLFVBQVUsQ0FBQztnQkFBRUMsU0FBUztZQUFnQjtRQUM3QztRQUNBLE1BQU1LLFFBQVFYLGFBQ1RZLElBQUksQ0FBQ2IsT0FBT2MsUUFBUSxDQUFDQyxhQUFhLENBQUM7WUFDcENDLE9BQU8sQ0FBQ0MsS0FBS0MsU0FBVyxJQUFJLENBQUNDLFlBQVksQ0FBQ0YsS0FBS0MsVUFBVSxDQUFDO1FBQzlELElBQ0taLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQTZCO1FBQ3hELE1BQU1XLFNBQVNsQixPQUFPa0IsTUFBTSxJQUFJLENBQUM7UUFDakMsS0FBSyxDQUFDO1lBQ0YsR0FBR2xCLE1BQU07WUFDVGtCO1lBQ0FOO1FBQ0o7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFD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RUFBRSxFQUFFeEIsS0FBS0MsU0FBUyxDQUFDd0IsZUFBZSxDQUFDLENBQUM7UUFDN0Y7UUFDQSx3QkFBd0I7UUFDeEIsTUFBTSxFQUFFRixTQUFTLEVBQUUsR0FBRzFDLE9BQU9LLFlBQVk7UUFDekNMLE9BQU9LLFlBQVksQ0FBQ3dCLGNBQWMsR0FBRyxNQUFNLElBQUksQ0FBQ3JCLGlCQUFpQixDQUFDa0M7UUFDbEUsT0FBTzFDO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaGlzdG9yeS5qcz9iYWZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJTWVzc2FnZSwgSHVtYW5NZXNzYWdlLCBpc0Jhc2VNZXNzYWdlLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVCaW5kaW5nLCBSdW5uYWJsZUxhbWJkYSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH0gZnJvbSBcIi4vcGFzc3Rocm91Z2guanNcIjtcbi8qKlxuICogV3JhcHMgYSBMQ0VMIGNoYWluIGFuZCBtYW5hZ2VzIGhpc3RvcnkuIEl0IGFwcGVuZHMgaW5wdXQgbWVzc2FnZXNcbiAqIGFuZCBjaGFpbiBvdXRwdXRzIGFzIGhpc3RvcnksIGFuZCBhZGRzIHRoZSBjdXJyZW50IGhpc3RvcnkgbWVzc2FnZXMgdG9cbiAqIHRoZSBjaGFpbiBpbnB1dC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyB5YXJuIGFkZCBAbGFuZ2NoYWluL2FudGhyb3BpYyBAbGFuZ2NoYWluL2NvbW11bml0eSBAdXBzdGFzaC9yZWRpc1xuICpcbiAqIGltcG9ydCB7XG4gKiAgIENoYXRQcm9tcHRUZW1wbGF0ZSxcbiAqICAgTWVzc2FnZXNQbGFjZWhvbGRlcixcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9wcm9tcHRzXCI7XG4gKiBpbXBvcnQgeyBDaGF0QW50aHJvcGljIH0gZnJvbSBcIkBsYW5nY2hhaW4vYW50aHJvcGljXCI7XG4gKiBpbXBvcnQgeyBVcHN0YXNoUmVkaXNDaGF0TWVzc2FnZUhpc3RvcnkgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb21tdW5pdHkvc3RvcmVzL21lc3NhZ2UvdXBzdGFzaF9yZWRpc1wiO1xuICogLy8gRm9yIGRlbW9zLCB5b3UgY2FuIGFsc28gdXNlIGFuIGluLW1lbW9yeSBzdG9yZTpcbiAqIC8vIGltcG9ydCB7IENoYXRNZXNzYWdlSGlzdG9yeSB9IGZyb20gXCJsYW5nY2hhaW4vc3RvcmVzL21lc3NhZ2UvaW5fbWVtb3J5XCI7XG4gKlxuICogY29uc3QgcHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21NZXNzYWdlcyhbXG4gKiAgIFtcInN5c3RlbVwiLCBcIllvdSdyZSBhbiBhc3Npc3RhbnQgd2hvJ3MgZ29vZCBhdCB7YWJpbGl0eX1cIl0sXG4gKiAgIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKFwiaGlzdG9yeVwiKSxcbiAqICAgW1wiaHVtYW5cIiwgXCJ7cXVlc3Rpb259XCJdLFxuICogXSk7XG4gKlxuICogY29uc3QgY2hhaW4gPSBwcm9tcHQucGlwZShuZXcgQ2hhdEFudGhyb3BpYyh7fSkpO1xuICpcbiAqIGNvbnN0IGNoYWluV2l0aEhpc3RvcnkgPSBuZXcgUnVubmFibGVXaXRoTWVzc2FnZUhpc3Rvcnkoe1xuICogICBydW5uYWJsZTogY2hhaW4sXG4gKiAgIGdldE1lc3NhZ2VIaXN0b3J5OiAoc2Vzc2lvbklkKSA9PlxuICogICAgIG5ldyBVcHN0YXNoUmVkaXNDaGF0TWVzc2FnZUhpc3Rvcnkoe1xuICogICAgICAgc2Vzc2lvbklkLFxuICogICAgICAgY29uZmlnOiB7XG4gKiAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTCEsXG4gKiAgICAgICAgIHRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4hLFxuICogICAgICAgfSxcbiAqICAgICB9KSxcbiAqICAgaW5wdXRNZXNzYWdlc0tleTogXCJxdWVzdGlvblwiLFxuICogICBoaXN0b3J5TWVzc2FnZXNLZXk6IFwiaGlzdG9yeVwiLFxuICogfSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW5XaXRoSGlzdG9yeS5pbnZva2UoXG4gKiAgIHtcbiAqICAgICBhYmlsaXR5OiBcIm1hdGhcIixcbiAqICAgICBxdWVzdGlvbjogXCJXaGF0IGRvZXMgY29zaW5lIG1lYW4/XCIsXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBjb25maWd1cmFibGU6IHtcbiAqICAgICAgIHNlc3Npb25JZDogXCJzb21lX3N0cmluZ19pZGVudGlmeWluZ19hX3VzZXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICpcbiAqIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBjaGFpbldpdGhIaXN0b3J5Lmludm9rZShcbiAqICAge1xuICogICAgIGFiaWxpdHk6IFwibWF0aFwiLFxuICogICAgIHF1ZXN0aW9uOiBcIldoYXQncyBpdHMgaW52ZXJzZT9cIixcbiAqICAgfSxcbiAqICAge1xuICogICAgIGNvbmZpZ3VyYWJsZToge1xuICogICAgICAgc2Vzc2lvbklkOiBcInNvbWVfc3RyaW5nX2lkZW50aWZ5aW5nX2FfdXNlclwiLFxuICogICAgIH0sXG4gKiAgIH1cbiAqICk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5IGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgbGV0IGhpc3RvcnlDaGFpbiA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKGlucHV0LCBvcHRpb25zKSA9PiB0aGlzLl9lbnRlckhpc3RvcnkoaW5wdXQsIG9wdGlvbnMgPz8ge30pKS53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJsb2FkSGlzdG9yeVwiIH0pO1xuICAgICAgICBjb25zdCBtZXNzYWdlc0tleSA9IGZpZWxkcy5oaXN0b3J5TWVzc2FnZXNLZXkgPz8gZmllbGRzLmlucHV0TWVzc2FnZXNLZXk7XG4gICAgICAgIGlmIChtZXNzYWdlc0tleSkge1xuICAgICAgICAgICAgaGlzdG9yeUNoYWluID0gUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIFttZXNzYWdlc0tleV06IGhpc3RvcnlDaGFpbixcbiAgICAgICAgICAgIH0pLndpdGhDb25maWcoeyBydW5OYW1lOiBcImluc2VydEhpc3RvcnlcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib3VuZCA9IGhpc3RvcnlDaGFpblxuICAgICAgICAgICAgLnBpcGUoZmllbGRzLnJ1bm5hYmxlLndpdGhMaXN0ZW5lcnMoe1xuICAgICAgICAgICAgb25FbmQ6IChydW4sIGNvbmZpZykgPT4gdGhpcy5fZXhpdEhpc3RvcnkocnVuLCBjb25maWcgPz8ge30pLFxuICAgICAgICB9KSlcbiAgICAgICAgICAgIC53aXRoQ29uZmlnKHsgcnVuTmFtZTogXCJSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeVwiIH0pO1xuICAgICAgICBjb25zdCBjb25maWcgPSBmaWVsZHMuY29uZmlnID8/IHt9O1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBib3VuZCxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bm5hYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0TWVzc2FnZXNLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3V0cHV0TWVzc2FnZXNLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGlzdG9yeU1lc3NhZ2VzS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldE1lc3NhZ2VIaXN0b3J5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnVubmFibGUgPSBmaWVsZHMucnVubmFibGU7XG4gICAgICAgIHRoaXMuZ2V0TWVzc2FnZUhpc3RvcnkgPSBmaWVsZHMuZ2V0TWVzc2FnZUhpc3Rvcnk7XG4gICAgICAgIHRoaXMuaW5wdXRNZXNzYWdlc0tleSA9IGZpZWxkcy5pbnB1dE1lc3NhZ2VzS2V5O1xuICAgICAgICB0aGlzLm91dHB1dE1lc3NhZ2VzS2V5ID0gZmllbGRzLm91dHB1dE1lc3NhZ2VzS2V5O1xuICAgICAgICB0aGlzLmhpc3RvcnlNZXNzYWdlc0tleSA9IGZpZWxkcy5oaXN0b3J5TWVzc2FnZXNLZXk7XG4gICAgfVxuICAgIF9nZXRJbnB1dE1lc3NhZ2VzKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW5wdXRWYWx1ZSkge1xuICAgICAgICBsZXQgcGFyc2VkSW5wdXRWYWx1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dFZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheShpbnB1dFZhbHVlKSAmJlxuICAgICAgICAgICAgIWlzQmFzZU1lc3NhZ2UoaW5wdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBrZXk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dE1lc3NhZ2VzS2V5KSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdGhpcy5pbnB1dE1lc3NhZ2VzS2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0LmtleXMoaW5wdXRWYWx1ZSkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gT2JqZWN0LmtleXMoaW5wdXRWYWx1ZSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBcImlucHV0XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFZhbHVlW2tleV0pICYmIEFycmF5LmlzQXJyYXkoaW5wdXRWYWx1ZVtrZXldWzBdKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZElucHV0VmFsdWUgPSBpbnB1dFZhbHVlW2tleV1bMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRJbnB1dFZhbHVlID0gaW5wdXRWYWx1ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VkSW5wdXRWYWx1ZSA9IGlucHV0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRJbnB1dFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBIdW1hbk1lc3NhZ2UocGFyc2VkSW5wdXRWYWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkSW5wdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRJbnB1dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UocGFyc2VkSW5wdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBbcGFyc2VkSW5wdXRWYWx1ZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgc3RyaW5nLCBCYXNlTWVzc2FnZSwgb3IgYXJyYXkgb2YgQmFzZU1lc3NhZ2VzLlxcbkdvdCAke0pTT04uc3RyaW5naWZ5KHBhcnNlZElucHV0VmFsdWUsIG51bGwsIDIpfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRPdXRwdXRNZXNzYWdlcyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIG91dHB1dFZhbHVlKSB7XG4gICAgICAgIGxldCBwYXJzZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG91dHB1dFZhbHVlKSAmJlxuICAgICAgICAgICAgIWlzQmFzZU1lc3NhZ2Uob3V0cHV0VmFsdWUpICYmXG4gICAgICAgICAgICB0eXBlb2Ygb3V0cHV0VmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGxldCBrZXk7XG4gICAgICAgICAgICBpZiAodGhpcy5vdXRwdXRNZXNzYWdlc0tleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdGhpcy5vdXRwdXRNZXNzYWdlc0tleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5rZXlzKG91dHB1dFZhbHVlKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBPYmplY3Qua2V5cyhvdXRwdXRWYWx1ZSlbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBcIm91dHB1dFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgeW91IGFyZSB3cmFwcGluZyBhIGNoYXQgbW9kZWwgZGlyZWN0bHlcbiAgICAgICAgICAgIC8vIFRoZSBvdXRwdXQgaXMgYWN0dWFsbHkgdGhpcyB3ZWlyZCBnZW5lcmF0aW9ucyBvYmplY3RcbiAgICAgICAgICAgIGlmIChvdXRwdXRWYWx1ZS5nZW5lcmF0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkT3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZS5nZW5lcmF0aW9uc1swXVswXS5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkT3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VkT3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhcnNlZE91dHB1dFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBBSU1lc3NhZ2UocGFyc2VkT3V0cHV0VmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZE91dHB1dFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZE91dHB1dFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UocGFyc2VkT3V0cHV0VmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3BhcnNlZE91dHB1dFZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSBzdHJpbmcsIEJhc2VNZXNzYWdlLCBvciBhcnJheSBvZiBCYXNlTWVzc2FnZXMuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KHBhcnNlZE91dHB1dFZhbHVlLCBudWxsLCAyKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZW50ZXJIaXN0b3J5KFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW5wdXQsIGt3YXJncykge1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0ga3dhcmdzPy5jb25maWd1cmFibGU/Lm1lc3NhZ2VIaXN0b3J5O1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGhpc3RvcnkuZ2V0TWVzc2FnZXMoKTtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeU1lc3NhZ2VzS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlcy5jb25jYXQodGhpcy5fZ2V0SW5wdXRNZXNzYWdlcyhpbnB1dCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9XG4gICAgYXN5bmMgX2V4aXRIaXN0b3J5KHJ1biwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGhpc3RvcnkgPSBjb25maWcuY29uZmlndXJhYmxlPy5tZXNzYWdlSGlzdG9yeTtcbiAgICAgICAgLy8gR2V0IGlucHV0IG1lc3NhZ2VzXG4gICAgICAgIGxldCBpbnB1dHM7XG4gICAgICAgIC8vIENoYXQgbW9kZWwgaW5wdXRzIGFyZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJ1bi5pbnB1dHMpICYmIEFycmF5LmlzQXJyYXkocnVuLmlucHV0c1swXSkpIHtcbiAgICAgICAgICAgIGlucHV0cyA9IHJ1bi5pbnB1dHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnB1dHMgPSBydW4uaW5wdXRzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbnB1dE1lc3NhZ2VzID0gdGhpcy5fZ2V0SW5wdXRNZXNzYWdlcyhpbnB1dHMpO1xuICAgICAgICAvLyBJZiBoaXN0b3JpYyBtZXNzYWdlcyB3ZXJlIHByZXBlbmRlZCB0byB0aGUgaW5wdXQgbWVzc2FnZXMsIHJlbW92ZSB0aGVtIHRvXG4gICAgICAgIC8vIGF2b2lkIGFkZGluZyBkdXBsaWNhdGUgbWVzc2FnZXMgdG8gaGlzdG9yeS5cbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeU1lc3NhZ2VzS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBhd2FpdCBoaXN0b3J5LmdldE1lc3NhZ2VzKCk7XG4gICAgICAgICAgICBpbnB1dE1lc3NhZ2VzID0gaW5wdXRNZXNzYWdlcy5zbGljZShleGlzdGluZ01lc3NhZ2VzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2V0IG91dHB1dCBtZXNzYWdlc1xuICAgICAgICBjb25zdCBvdXRwdXRWYWx1ZSA9IHJ1bi5vdXRwdXRzO1xuICAgICAgICBpZiAoIW91dHB1dFZhbHVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE91dHB1dCB2YWx1ZXMgZnJvbSAnUnVuJyB1bmRlZmluZWQuIFJ1bjogJHtKU09OLnN0cmluZ2lmeShydW4sIG51bGwsIDIpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2VzID0gdGhpcy5fZ2V0T3V0cHV0TWVzc2FnZXMob3V0cHV0VmFsdWUpO1xuICAgICAgICBhd2FpdCBoaXN0b3J5LmFkZE1lc3NhZ2VzKFsuLi5pbnB1dE1lc3NhZ2VzLCAuLi5vdXRwdXRNZXNzYWdlc10pO1xuICAgIH1cbiAgICBhc3luYyBfbWVyZ2VDb25maWcoLi4uY29uZmlncykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBhd2FpdCBzdXBlci5fbWVyZ2VDb25maWcoLi4uY29uZmlncyk7XG4gICAgICAgIC8vIEV4dHJhY3Qgc2Vzc2lvbklkXG4gICAgICAgIGlmICghY29uZmlnLmNvbmZpZ3VyYWJsZSB8fCAhY29uZmlnLmNvbmZpZ3VyYWJsZS5zZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVJbnB1dCA9IHtcbiAgICAgICAgICAgICAgICBbdGhpcy5pbnB1dE1lc3NhZ2VzS2V5ID8/IFwiaW5wdXRcIl06IFwiZm9vXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUNvbmZpZyA9IHsgY29uZmlndXJhYmxlOiB7IHNlc3Npb25JZDogXCIxMjNcIiB9IH07XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNlc3Npb25JZCBpcyByZXF1aXJlZC4gUGFzcyBpdCBpbiBhcyBwYXJ0IG9mIHRoZSBjb25maWcgYXJndW1lbnQgdG8gLmludm9rZSgpIG9yIC5zdHJlYW0oKVxcbmAgK1xuICAgICAgICAgICAgICAgIGBlZy4gY2hhaW4uaW52b2tlKCR7SlNPTi5zdHJpbmdpZnkoZXhhbXBsZUlucHV0KX0sICR7SlNPTi5zdHJpbmdpZnkoZXhhbXBsZUNvbmZpZyl9KWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGF0dGFjaCBtZXNzYWdlSGlzdG9yeVxuICAgICAgICBjb25zdCB7IHNlc3Npb25JZCB9ID0gY29uZmlnLmNvbmZpZ3VyYWJsZTtcbiAgICAgICAgY29uZmlnLmNvbmZpZ3VyYWJsZS5tZXNzYWdlSGlzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0TWVzc2FnZUhpc3Rvcnkoc2Vzc2lvbklkKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQUlNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiaXNCYXNlTWVzc2FnZSIsIlJ1bm5hYmxlQmluZGluZyIsIlJ1bm5hYmxlTGFtYmRhIiwiUnVubmFibGVQYXNzdGhyb3VnaCIsIlJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5IiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJoaXN0b3J5Q2hhaW4iLCJmcm9tIiwiaW5wdXQiLCJvcHRpb25zIiwiX2VudGVySGlzdG9yeSIsIndpdGhDb25maWciLCJydW5OYW1lIiwibWVzc2FnZXNLZXkiLCJoaXN0b3J5TWVzc2FnZXNLZXkiLCJpbnB1dE1lc3NhZ2VzS2V5IiwiYXNzaWduIiwiYm91bmQiLCJwaXBlIiwicnVubmFibGUiLCJ3aXRoTGlzdGVuZXJzIiwib25FbmQiLCJydW4iLCJjb25maWciLCJfZXhpdEhpc3RvcnkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZ2V0TWVzc2FnZUhpc3RvcnkiLCJvdXRwdXRNZXNzYWdlc0tleSIsIl9nZXRJbnB1dE1lc3NhZ2VzIiwiaW5wdXRWYWx1ZSIsInBhcnNlZElucHV0VmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJrZXkiLCJrZXlzIiwibGVuZ3RoIiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiX2dldE91dHB1dE1lc3NhZ2VzIiwib3V0cHV0VmFsdWUiLCJwYXJzZWRPdXRwdXRWYWx1ZSIsInVuZGVmaW5lZCIsImdlbmVyYXRpb25zIiwibWVzc2FnZSIsImt3YXJncyIsImhpc3RvcnkiLCJtZXNzYWdlSGlzdG9yeSIsIm1lc3NhZ2VzIiwiZ2V0TWVzc2FnZXMiLCJjb25jYXQiLCJpbnB1dHMiLCJpbnB1dE1lc3NhZ2VzIiwiZXhpc3RpbmdNZXNzYWdlcyIsInNsaWNlIiwib3V0cHV0cyIsIm91dHB1dE1lc3NhZ2VzIiwiYWRkTWVzc2FnZXMiLCJfbWVyZ2VDb25maWciLCJjb25maWdzIiwic2Vzc2lvbklkIiwiZXhhbXBsZUlucHV0IiwiZXhhbXBsZUNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_3__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _branch_js__WEBPACK_IMPORTED_MODULE_4__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _history_js__WEBPACK_IMPORTED_MODULE_5__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.mergeConfigs),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./router.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\");\n/* harmony import */ var _branch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./branch.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\");\n/* harmony import */ var _history_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./history.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\");\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK087QUFDbkg7QUFDckU7QUFDVjtBQUNBO0FBQ2MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzPzU1NjQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgUnVubmFibGUsIFJ1bm5hYmxlQmluZGluZywgUnVubmFibGVFYWNoLCBSdW5uYWJsZVJldHJ5LCBSdW5uYWJsZVNlcXVlbmNlLCBSdW5uYWJsZU1hcCwgUnVubmFibGVQYXJhbGxlbCwgUnVubmFibGVMYW1iZGEsIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcywgUnVubmFibGVBc3NpZ24sIFJ1bm5hYmxlUGljaywgX2NvZXJjZVRvUnVubmFibGUsIFJ1bm5hYmxlVG9vbExpa2UsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IHsgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBwYXRjaENvbmZpZywgZW5zdXJlQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMsIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5leHBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH0gZnJvbSBcIi4vcGFzc3Rocm91Z2guanNcIjtcbmV4cG9ydCB7IFJvdXRlclJ1bm5hYmxlIH0gZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5leHBvcnQgeyBSdW5uYWJsZUJyYW5jaCB9IGZyb20gXCIuL2JyYW5jaC5qc1wiO1xuZXhwb3J0IHsgUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnksIH0gZnJvbSBcIi4vaGlzdG9yeS5qc1wiO1xuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiUnVubmFibGVCaW5kaW5nIiwiUnVubmFibGVFYWNoIiwiUnVubmFibGVSZXRyeSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJSdW5uYWJsZU1hcCIsIlJ1bm5hYmxlUGFyYWxsZWwiLCJSdW5uYWJsZUxhbWJkYSIsIlJ1bm5hYmxlV2l0aEZhbGxiYWNrcyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVQaWNrIiwiX2NvZXJjZVRvUnVubmFibGUiLCJSdW5uYWJsZVRvb2xMaWtlIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwicGF0Y2hDb25maWciLCJlbnN1cmVDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwaWNrUnVubmFibGVDb25maWdLZXlzIiwiUnVubmFibGVQYXNzdGhyb3VnaCIsIlJvdXRlclJ1bm5hYmxlIiwiUnVubmFibGVCcmFuY2giLCJSdW5uYWJsZVdpdGhNZXNzYWdlSGlzdG9yeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/iter.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeAsyncIterableInContext: () => (/* binding */ consumeAsyncIterableInContext),\n/* harmony export */   consumeIteratorInContext: () => (/* binding */ consumeIteratorInContext),\n/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable),\n/* harmony export */   isIterableIterator: () => (/* binding */ isIterableIterator),\n/* harmony export */   isIterator: () => (/* binding */ isIterator)\n/* harmony export */ });\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\nfunction isIterableIterator(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.iterator] === \"function\" && // avoid detecting array/set as iterator\n    typeof thing.next === \"function\";\n}\nconst isIterator = (x)=>x != null && typeof x === \"object\" && \"next\" in x && typeof x.next === \"function\";\nfunction isAsyncIterable(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.asyncIterator] === \"function\";\n}\nfunction* consumeIteratorInContext(context, iter) {\n    while(true){\n        const { value, done } = _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)(context), iter.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\nasync function* consumeAsyncIterableInContext(context, iter) {\n    const iterator = iter[Symbol.asyncIterator]();\n    while(true){\n        const { value, done } = await _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_1__.pickRunnableConfigKeys)(context), iterator.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE0RTtBQUN2QjtBQUM5QyxTQUFTRSxtQkFBbUJDLEtBQUs7SUFDcEMsT0FBUSxPQUFPQSxVQUFVLFlBQ3JCQSxVQUFVLFFBQ1YsT0FBT0EsS0FBSyxDQUFDQyxPQUFPQyxRQUFRLENBQUMsS0FBSyxjQUNsQyx3Q0FBd0M7SUFDeEMsT0FBT0YsTUFBTUcsSUFBSSxLQUFLO0FBQzlCO0FBQ08sTUFBTUMsYUFBYSxDQUFDQyxJQUFNQSxLQUFLLFFBQ2xDLE9BQU9BLE1BQU0sWUFDYixVQUFVQSxLQUNWLE9BQU9BLEVBQUVGLElBQUksS0FBSyxXQUFXO0FBQzFCLFNBQVNHLGdCQUFnQk4sS0FBSztJQUNqQyxPQUFRLE9BQU9BLFVBQVUsWUFDckJBLFVBQVUsUUFDVixPQUFPQSxLQUFLLENBQUNDLE9BQU9NLGFBQWEsQ0FBQyxLQUM5QjtBQUNaO0FBQ08sVUFBVUMseUJBQXlCQyxPQUFPLEVBQUVDLElBQUk7SUFDbkQsTUFBTyxLQUFNO1FBQ1QsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRSxHQUFHZixvRkFBa0NBLENBQUNnQixhQUFhLENBQUNmLGtFQUFzQkEsQ0FBQ1csVUFBVUMsS0FBS1AsSUFBSSxDQUFDVyxJQUFJLENBQUNKLE9BQU87UUFDaEksSUFBSUUsTUFBTTtZQUNOO1FBQ0osT0FDSztZQUNELE1BQU1EO1FBQ1Y7SUFDSjtBQUNKO0FBQ08sZ0JBQWdCSSw4QkFBOEJOLE9BQU8sRUFBRUMsSUFBSTtJQUM5RCxNQUFNUixXQUFXUSxJQUFJLENBQUNULE9BQU9NLGFBQWEsQ0FBQztJQUMzQyxNQUFPLEtBQU07UUFDVCxNQUFNLEVBQUVJLEtBQUssRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTWYsb0ZBQWtDQSxDQUFDZ0IsYUFBYSxDQUFDZixrRUFBc0JBLENBQUNXLFVBQVVQLFNBQVNDLElBQUksQ0FBQ1csSUFBSSxDQUFDSixPQUFPO1FBQzFJLElBQUlFLE1BQU07WUFDTjtRQUNKLE9BQ0s7WUFDRCxNQUFNRDtRQUNWO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaXRlci5qcz9lYTVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGlja1J1bm5hYmxlQ29uZmlnS2V5cyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSXRlcmFibGVJdGVyYXRvcih0aGluZykge1xuICAgIHJldHVybiAodHlwZW9mIHRoaW5nID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHRoaW5nICE9PSBudWxsICYmXG4gICAgICAgIHR5cGVvZiB0aGluZ1tTeW1ib2wuaXRlcmF0b3JdID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgLy8gYXZvaWQgZGV0ZWN0aW5nIGFycmF5L3NldCBhcyBpdGVyYXRvclxuICAgICAgICB0eXBlb2YgdGhpbmcubmV4dCA9PT0gXCJmdW5jdGlvblwiKTtcbn1cbmV4cG9ydCBjb25zdCBpc0l0ZXJhdG9yID0gKHgpID0+IHggIT0gbnVsbCAmJlxuICAgIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgXCJuZXh0XCIgaW4geCAmJlxuICAgIHR5cGVvZiB4Lm5leHQgPT09IFwiZnVuY3Rpb25cIjtcbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUodGhpbmcpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB0aGluZyAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdGhpbmdbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09PVxuICAgICAgICAgICAgXCJmdW5jdGlvblwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiogY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNvbnRleHQsIGl0ZXIpIHtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjb250ZXh0KSwgaXRlci5uZXh0LmJpbmQoaXRlciksIHRydWUpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY29udGV4dCwgaXRlcikge1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gaXRlcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyhjb250ZXh0KSwgaXRlcmF0b3IubmV4dC5iaW5kKGl0ZXIpLCB0cnVlKTtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsInBpY2tSdW5uYWJsZUNvbmZpZ0tleXMiLCJpc0l0ZXJhYmxlSXRlcmF0b3IiLCJ0aGluZyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImlzSXRlcmF0b3IiLCJ4IiwiaXNBc3luY0l0ZXJhYmxlIiwiYXN5bmNJdGVyYXRvciIsImNvbnN1bWVJdGVyYXRvckluQ29udGV4dCIsImNvbnRleHQiLCJpdGVyIiwidmFsdWUiLCJkb25lIiwicnVuV2l0aENvbmZpZyIsImJpbmQiLCJjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/passthrough.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnablePassthrough: () => (/* binding */ RunnablePassthrough)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * A runnable to passthrough inputs unchanged or with additional keys.\n *\n * This runnable behaves almost like the identity function, except that it\n * can be configured to add additional keys to the output, if the input is\n * an object.\n *\n * The example below demonstrates how to use `RunnablePassthrough to\n * passthrough the input from the `.invoke()`\n *\n * @example\n * ```typescript\n * const chain = RunnableSequence.from([\n *   {\n *     question: new RunnablePassthrough(),\n *     context: async () => loadContextFromStore(),\n *   },\n *   prompt,\n *   llm,\n *   outputParser,\n * ]);\n * const response = await chain.invoke(\n *   \"I can pass a single string instead of an object since I'm using `RunnablePassthrough`.\"\n * );\n * ```\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass RunnablePassthrough extends _base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    static lc_name() {\n        return \"RunnablePassthrough\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (fields) {\n            this.func = fields.func;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        if (this.func) {\n            await this.func(input, config);\n        }\n        return this._callWithConfig((input)=>Promise.resolve(input), input, config);\n    }\n    async *transform(generator, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        let finalOutput;\n        let finalOutputSupported = true;\n        for await (const chunk of this._transformStreamWithConfig(generator, (input)=>input, config)){\n            yield chunk;\n            if (finalOutputSupported) {\n                if (finalOutput === undefined) {\n                    finalOutput = chunk;\n                } else {\n                    try {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.concat)(finalOutput, chunk);\n                    } catch  {\n                        finalOutput = undefined;\n                        finalOutputSupported = false;\n                    }\n                }\n            }\n        }\n        if (this.func && finalOutput !== undefined) {\n            await this.func(finalOutput, config);\n        }\n    }\n    /**\n     * A runnable that assigns key-value pairs to the input.\n     *\n     * The example below shows how you could use it with an inline function.\n     *\n     * @example\n     * ```typescript\n     * const prompt =\n     *   PromptTemplate.fromTemplate(`Write a SQL query to answer the question using the following schema: {schema}\n     * Question: {question}\n     * SQL Query:`);\n     *\n     * // The `RunnablePassthrough.assign()` is used here to passthrough the input from the `.invoke()`\n     * // call (in this example it's the question), along with any inputs passed to the `.assign()` method.\n     * // In this case, we're passing the schema.\n     * const sqlQueryGeneratorChain = RunnableSequence.from([\n     *   RunnablePassthrough.assign({\n     *     schema: async () => db.getTableInfo(),\n     *   }),\n     *   prompt,\n     *   new ChatOpenAI({}).bind({ stop: [\"\\nSQLResult:\"] }),\n     *   new StringOutputParser(),\n     * ]);\n     * const result = await sqlQueryGeneratorChain.invoke({\n     *   question: \"How many employees are there?\",\n     * });\n     * ```\n     */ static assign(mapping) {\n        return new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableAssign(new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableMap({\n            steps: mapping\n        }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEM7QUFDdUI7QUFDeEI7QUFDM0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0F5QkMsR0FDRCw4REFBOEQ7QUFDdkQsTUFBTUssNEJBQTRCSiw4Q0FBUUE7SUFDN0MsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSU4sUUFBUTtZQUNSLElBQUksQ0FBQ08sSUFBSSxHQUFHUCxPQUFPTyxJQUFJO1FBQzNCO0lBQ0o7SUFDQSxNQUFNQyxPQUFPQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtRQUN6QixNQUFNQyxTQUFTZix3REFBWUEsQ0FBQ2M7UUFDNUIsSUFBSSxJQUFJLENBQUNILElBQUksRUFBRTtZQUNYLE1BQU0sSUFBSSxDQUFDQSxJQUFJLENBQUNFLE9BQU9FO1FBQzNCO1FBQ0EsT0FBTyxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDSCxRQUFVSSxRQUFRQyxPQUFPLENBQUNMLFFBQVFBLE9BQU9FO0lBQzFFO0lBQ0EsT0FBT0ksVUFBVUMsU0FBUyxFQUFFTixPQUFPLEVBQUU7UUFDakMsTUFBTUMsU0FBU2Ysd0RBQVlBLENBQUNjO1FBQzVCLElBQUlPO1FBQ0osSUFBSUMsdUJBQXVCO1FBQzNCLFdBQVcsTUFBTUMsU0FBUyxJQUFJLENBQUNDLDBCQUEwQixDQUFDSixXQUFXLENBQUNQLFFBQVVBLE9BQU9FLFFBQVM7WUFDNUYsTUFBTVE7WUFDTixJQUFJRCxzQkFBc0I7Z0JBQ3RCLElBQUlELGdCQUFnQkksV0FBVztvQkFDM0JKLGNBQWNFO2dCQUNsQixPQUNLO29CQUNELElBQUk7d0JBQ0EsOERBQThEO3dCQUM5REYsY0FBY3pCLHdEQUFNQSxDQUFDeUIsYUFBYUU7b0JBQ3RDLEVBQ0EsT0FBTTt3QkFDRkYsY0FBY0k7d0JBQ2RILHVCQUF1QjtvQkFDM0I7Z0JBQ0o7WUFDSjtRQUNKO1FBQ0EsSUFBSSxJQUFJLENBQUNYLElBQUksSUFBSVUsZ0JBQWdCSSxXQUFXO1lBQ3hDLE1BQU0sSUFBSSxDQUFDZCxJQUFJLENBQUNVLGFBQWFOO1FBQ2pDO0lBQ0o7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBMkJDLEdBQ0QsT0FBT1csT0FBT0MsT0FBTyxFQUFFO1FBQ25CLE9BQU8sSUFBSTdCLG9EQUFjQSxDQUFDLElBQUlDLGlEQUFXQSxDQUFDO1lBQUU2QixPQUFPRDtRQUFRO0lBQy9EO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzPzMzMGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUsIFJ1bm5hYmxlQXNzaWduLCBSdW5uYWJsZU1hcCwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBlbnN1cmVDb25maWcgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbi8qKlxuICogQSBydW5uYWJsZSB0byBwYXNzdGhyb3VnaCBpbnB1dHMgdW5jaGFuZ2VkIG9yIHdpdGggYWRkaXRpb25hbCBrZXlzLlxuICpcbiAqIFRoaXMgcnVubmFibGUgYmVoYXZlcyBhbG1vc3QgbGlrZSB0aGUgaWRlbnRpdHkgZnVuY3Rpb24sIGV4Y2VwdCB0aGF0IGl0XG4gKiBjYW4gYmUgY29uZmlndXJlZCB0byBhZGQgYWRkaXRpb25hbCBrZXlzIHRvIHRoZSBvdXRwdXQsIGlmIHRoZSBpbnB1dCBpc1xuICogYW4gb2JqZWN0LlxuICpcbiAqIFRoZSBleGFtcGxlIGJlbG93IGRlbW9uc3RyYXRlcyBob3cgdG8gdXNlIGBSdW5uYWJsZVBhc3N0aHJvdWdoIHRvXG4gKiBwYXNzdGhyb3VnaCB0aGUgaW5wdXQgZnJvbSB0aGUgYC5pbnZva2UoKWBcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgY2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICogICB7XG4gKiAgICAgcXVlc3Rpb246IG5ldyBSdW5uYWJsZVBhc3N0aHJvdWdoKCksXG4gKiAgICAgY29udGV4dDogYXN5bmMgKCkgPT4gbG9hZENvbnRleHRGcm9tU3RvcmUoKSxcbiAqICAgfSxcbiAqICAgcHJvbXB0LFxuICogICBsbG0sXG4gKiAgIG91dHB1dFBhcnNlcixcbiAqIF0pO1xuICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjaGFpbi5pbnZva2UoXG4gKiAgIFwiSSBjYW4gcGFzcyBhIHNpbmdsZSBzdHJpbmcgaW5zdGVhZCBvZiBhbiBvYmplY3Qgc2luY2UgSSdtIHVzaW5nIGBSdW5uYWJsZVBhc3N0aHJvdWdoYC5cIlxuICogKTtcbiAqIGBgYFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGFzc3Rocm91Z2ggZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUGFzc3Rocm91Z2hcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnVuY1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZmllbGRzKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5mdW5jKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZ1bmMoaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKChpbnB1dCkgPT4gUHJvbWlzZS5yZXNvbHZlKGlucHV0KSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCAoaW5wdXQpID0+IGlucHV0LCBjb25maWcpKSB7XG4gICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZ1bmMgJiYgZmluYWxPdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mdW5jKGZpbmFsT3V0cHV0LCBjb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byB0aGUgaW5wdXQuXG4gICAgICpcbiAgICAgKiBUaGUgZXhhbXBsZSBiZWxvdyBzaG93cyBob3cgeW91IGNvdWxkIHVzZSBpdCB3aXRoIGFuIGlubGluZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGNvbnN0IHByb21wdCA9XG4gICAgICogICBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFdyaXRlIGEgU1FMIHF1ZXJ5IHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gdXNpbmcgdGhlIGZvbGxvd2luZyBzY2hlbWE6IHtzY2hlbWF9XG4gICAgICogUXVlc3Rpb246IHtxdWVzdGlvbn1cbiAgICAgKiBTUUwgUXVlcnk6YCk7XG4gICAgICpcbiAgICAgKiAvLyBUaGUgYFJ1bm5hYmxlUGFzc3Rocm91Z2guYXNzaWduKClgIGlzIHVzZWQgaGVyZSB0byBwYXNzdGhyb3VnaCB0aGUgaW5wdXQgZnJvbSB0aGUgYC5pbnZva2UoKWBcbiAgICAgKiAvLyBjYWxsIChpbiB0aGlzIGV4YW1wbGUgaXQncyB0aGUgcXVlc3Rpb24pLCBhbG9uZyB3aXRoIGFueSBpbnB1dHMgcGFzc2VkIHRvIHRoZSBgLmFzc2lnbigpYCBtZXRob2QuXG4gICAgICogLy8gSW4gdGhpcyBjYXNlLCB3ZSdyZSBwYXNzaW5nIHRoZSBzY2hlbWEuXG4gICAgICogY29uc3Qgc3FsUXVlcnlHZW5lcmF0b3JDaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbXG4gICAgICogICBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICogICAgIHNjaGVtYTogYXN5bmMgKCkgPT4gZGIuZ2V0VGFibGVJbmZvKCksXG4gICAgICogICB9KSxcbiAgICAgKiAgIHByb21wdCxcbiAgICAgKiAgIG5ldyBDaGF0T3BlbkFJKHt9KS5iaW5kKHsgc3RvcDogW1wiXFxuU1FMUmVzdWx0OlwiXSB9KSxcbiAgICAgKiAgIG5ldyBTdHJpbmdPdXRwdXRQYXJzZXIoKSxcbiAgICAgKiBdKTtcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWxRdWVyeUdlbmVyYXRvckNoYWluLmludm9rZSh7XG4gICAgICogICBxdWVzdGlvbjogXCJIb3cgbWFueSBlbXBsb3llZXMgYXJlIHRoZXJlP1wiLFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NpZ24obWFwcGluZykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQXNzaWduKG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiY29uY2F0IiwiUnVubmFibGUiLCJSdW5uYWJsZUFzc2lnbiIsIlJ1bm5hYmxlTWFwIiwiZW5zdXJlQ29uZmlnIiwiUnVubmFibGVQYXNzdGhyb3VnaCIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJmdW5jIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwiY29uZmlnIiwiX2NhbGxXaXRoQ29uZmlnIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0cmFuc2Zvcm0iLCJnZW5lcmF0b3IiLCJmaW5hbE91dHB1dCIsImZpbmFsT3V0cHV0U3VwcG9ydGVkIiwiY2h1bmsiLCJfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyIsInVuZGVmaW5lZCIsImFzc2lnbiIsIm1hcHBpbmciLCJzdGVwcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/router.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/router.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* binding */ RouterRunnable)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n/**\n * A runnable that routes to a set of runnables based on Input['key'].\n * Returns the output of the selected runnable.\n * @example\n * ```typescript\n * import { RouterRunnable, RunnableLambda } from \"@langchain/core/runnables\";\n *\n * const router = new RouterRunnable({\n *   runnables: {\n *     toUpperCase: RunnableLambda.from((text: string) => text.toUpperCase()),\n *     reverseText: RunnableLambda.from((text: string) =>\n *       text.split(\"\").reverse().join(\"\")\n *     ),\n *   },\n * });\n *\n * // Invoke the 'reverseText' runnable\n * const result1 = router.invoke({ key: \"reverseText\", input: \"Hello World\" });\n *\n * // \"dlroW olleH\"\n *\n * // Invoke the 'toUpperCase' runnable\n * const result2 = router.invoke({ key: \"toUpperCase\", input: \"Hello World\" });\n *\n * // \"HELLO WORLD\"\n * ```\n */ class RouterRunnable extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RouterRunnable\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnables = fields.runnables;\n    }\n    async invoke(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.invoke(actualInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const keys = inputs.map((input)=>input.key);\n        const actualInputs = inputs.map((input)=>input.input);\n        const missingKey = keys.find((key)=>this.runnables[key] === undefined);\n        if (missingKey !== undefined) {\n            throw new Error(`One or more keys do not have a corresponding runnable.`);\n        }\n        const runnables = keys.map((key)=>this.runnables[key]);\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = optionsList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const batchSize = maxConcurrency && maxConcurrency > 0 ? maxConcurrency : inputs.length;\n        const batchResults = [];\n        for(let i = 0; i < actualInputs.length; i += batchSize){\n            const batchPromises = actualInputs.slice(i, i + batchSize).map((actualInput, i)=>runnables[i].invoke(actualInput, optionsList[i]));\n            const batchResult = await Promise.all(batchPromises);\n            batchResults.push(batchResult);\n        }\n        return batchResults.flat();\n    }\n    async stream(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.stream(actualInput, options);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3JvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDTTtBQUMzQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EwQkMsR0FDTSxNQUFNRSx1QkFBdUJGLDhDQUFRQTtJQUN4QyxPQUFPRyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsT0FBT08sU0FBUztJQUNyQztJQUNBLE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVNMLE1BQU0sQ0FBQ0ksYUFBYWhCLHdEQUFZQSxDQUFDYztJQUNyRDtJQUNBLE1BQU1NLE1BQU1DLE1BQU0sRUFBRVAsT0FBTyxFQUFFUSxZQUFZLEVBQUU7UUFDdkMsTUFBTUMsT0FBT0YsT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1FLEdBQUc7UUFDNUMsTUFBTVUsZUFBZUosT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1BLEtBQUs7UUFDdEQsTUFBTWEsYUFBYUgsS0FBS0ksSUFBSSxDQUFDLENBQUNaLE1BQVEsSUFBSSxDQUFDSixTQUFTLENBQUNJLElBQUksS0FBS0c7UUFDOUQsSUFBSVEsZUFBZVIsV0FBVztZQUMxQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxzREFBc0QsQ0FBQztRQUM1RTtRQUNBLE1BQU1SLFlBQVlZLEtBQUtDLEdBQUcsQ0FBQyxDQUFDVCxNQUFRLElBQUksQ0FBQ0osU0FBUyxDQUFDSSxJQUFJO1FBQ3ZELE1BQU1hLGNBQWMsSUFBSSxDQUFDQyxlQUFlLENBQUNmLFdBQVcsQ0FBQyxHQUFHTyxPQUFPUyxNQUFNO1FBQ3JFLE1BQU1DLGlCQUFpQkgsV0FBVyxDQUFDLEVBQUUsRUFBRUcsa0JBQWtCVCxjQUFjUztRQUN2RSxNQUFNQyxZQUFZRCxrQkFBa0JBLGlCQUFpQixJQUFJQSxpQkFBaUJWLE9BQU9TLE1BQU07UUFDdkYsTUFBTUcsZUFBZSxFQUFFO1FBQ3ZCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJVCxhQUFhSyxNQUFNLEVBQUVJLEtBQUtGLFVBQVc7WUFDckQsTUFBTUcsZ0JBQWdCVixhQUNqQlcsS0FBSyxDQUFDRixHQUFHQSxJQUFJRixXQUNiUixHQUFHLENBQUMsQ0FBQ1IsYUFBYWtCLElBQU12QixTQUFTLENBQUN1QixFQUFFLENBQUN0QixNQUFNLENBQUNJLGFBQWFZLFdBQVcsQ0FBQ00sRUFBRTtZQUM1RSxNQUFNRyxjQUFjLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0o7WUFDdENGLGFBQWFPLElBQUksQ0FBQ0g7UUFDdEI7UUFDQSxPQUFPSixhQUFhUSxJQUFJO0lBQzVCO0lBQ0EsTUFBTUMsT0FBTzdCLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVN5QixNQUFNLENBQUMxQixhQUFhRjtJQUN4QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9yb3V0ZXIuanM/YzI4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcm91dGVzIHRvIGEgc2V0IG9mIHJ1bm5hYmxlcyBiYXNlZCBvbiBJbnB1dFsna2V5J10uXG4gKiBSZXR1cm5zIHRoZSBvdXRwdXQgb2YgdGhlIHNlbGVjdGVkIHJ1bm5hYmxlLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IFJvdXRlclJ1bm5hYmxlLCBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gKlxuICogY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlclJ1bm5hYmxlKHtcbiAqICAgcnVubmFibGVzOiB7XG4gKiAgICAgdG9VcHBlckNhc2U6IFJ1bm5hYmxlTGFtYmRhLmZyb20oKHRleHQ6IHN0cmluZykgPT4gdGV4dC50b1VwcGVyQ2FzZSgpKSxcbiAqICAgICByZXZlcnNlVGV4dDogUnVubmFibGVMYW1iZGEuZnJvbSgodGV4dDogc3RyaW5nKSA9PlxuICogICAgICAgdGV4dC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKVxuICogICAgICksXG4gKiAgIH0sXG4gKiB9KTtcbiAqXG4gKiAvLyBJbnZva2UgdGhlICdyZXZlcnNlVGV4dCcgcnVubmFibGVcbiAqIGNvbnN0IHJlc3VsdDEgPSByb3V0ZXIuaW52b2tlKHsga2V5OiBcInJldmVyc2VUZXh0XCIsIGlucHV0OiBcIkhlbGxvIFdvcmxkXCIgfSk7XG4gKlxuICogLy8gXCJkbHJvVyBvbGxlSFwiXG4gKlxuICogLy8gSW52b2tlIHRoZSAndG9VcHBlckNhc2UnIHJ1bm5hYmxlXG4gKiBjb25zdCByZXN1bHQyID0gcm91dGVyLmludm9rZSh7IGtleTogXCJ0b1VwcGVyQ2FzZVwiLCBpbnB1dDogXCJIZWxsbyBXb3JsZFwiIH0pO1xuICpcbiAqIC8vIFwiSEVMTE8gV09STERcIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3V0ZXJSdW5uYWJsZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUm91dGVyUnVubmFibGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVubmFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnVubmFibGVzID0gZmllbGRzLnJ1bm5hYmxlcztcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsga2V5LCBpbnB1dDogYWN0dWFsSW5wdXQgfSA9IGlucHV0O1xuICAgICAgICBjb25zdCBydW5uYWJsZSA9IHRoaXMucnVubmFibGVzW2tleV07XG4gICAgICAgIGlmIChydW5uYWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHJ1bm5hYmxlIGFzc29jaWF0ZWQgd2l0aCBrZXkgXCIke2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVubmFibGUuaW52b2tlKGFjdHVhbElucHV0LCBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBrZXlzID0gaW5wdXRzLm1hcCgoaW5wdXQpID0+IGlucHV0LmtleSk7XG4gICAgICAgIGNvbnN0IGFjdHVhbElucHV0cyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC5pbnB1dCk7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdLZXkgPSBrZXlzLmZpbmQoKGtleSkgPT4gdGhpcy5ydW5uYWJsZXNba2V5XSA9PT0gdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1pc3NpbmdLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPbmUgb3IgbW9yZSBrZXlzIGRvIG5vdCBoYXZlIGEgY29ycmVzcG9uZGluZyBydW5uYWJsZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZXMgPSBrZXlzLm1hcCgoa2V5KSA9PiB0aGlzLnJ1bm5hYmxlc1trZXldKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbWF4Q29uY3VycmVuY3kgPSBvcHRpb25zTGlzdFswXT8ubWF4Q29uY3VycmVuY3kgPz8gYmF0Y2hPcHRpb25zPy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gbWF4Q29uY3VycmVuY3kgJiYgbWF4Q29uY3VycmVuY3kgPiAwID8gbWF4Q29uY3VycmVuY3kgOiBpbnB1dHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3R1YWxJbnB1dHMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IGFjdHVhbElucHV0c1xuICAgICAgICAgICAgICAgIC5zbGljZShpLCBpICsgYmF0Y2hTaXplKVxuICAgICAgICAgICAgICAgIC5tYXAoKGFjdHVhbElucHV0LCBpKSA9PiBydW5uYWJsZXNbaV0uaW52b2tlKGFjdHVhbElucHV0LCBvcHRpb25zTGlzdFtpXSkpO1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcbiAgICAgICAgICAgIGJhdGNoUmVzdWx0cy5wdXNoKGJhdGNoUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmF0Y2hSZXN1bHRzLmZsYXQoKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsga2V5LCBpbnB1dDogYWN0dWFsSW5wdXQgfSA9IGlucHV0O1xuICAgICAgICBjb25zdCBydW5uYWJsZSA9IHRoaXMucnVubmFibGVzW2tleV07XG4gICAgICAgIGlmIChydW5uYWJsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHJ1bm5hYmxlIGFzc29jaWF0ZWQgd2l0aCBrZXkgXCIke2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVubmFibGUuc3RyZWFtKGFjdHVhbElucHV0LCBvcHRpb25zKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJlbnN1cmVDb25maWciLCJSb3V0ZXJSdW5uYWJsZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJydW5uYWJsZXMiLCJpbnZva2UiLCJpbnB1dCIsIm9wdGlvbnMiLCJrZXkiLCJhY3R1YWxJbnB1dCIsInJ1bm5hYmxlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJiYXRjaCIsImlucHV0cyIsImJhdGNoT3B0aW9ucyIsImtleXMiLCJtYXAiLCJhY3R1YWxJbnB1dHMiLCJtaXNzaW5nS2V5IiwiZmluZCIsIm9wdGlvbnNMaXN0IiwiX2dldE9wdGlvbnNMaXN0IiwibGVuZ3RoIiwibWF4Q29uY3VycmVuY3kiLCJiYXRjaFNpemUiLCJiYXRjaFJlc3VsdHMiLCJpIiwiYmF0Y2hQcm9taXNlcyIsInNsaWNlIiwiYmF0Y2hSZXN1bHQiLCJQcm9taXNlIiwiYWxsIiwicHVzaCIsImZsYXQiLCJzdHJlYW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOERBQThEO0FBQ3ZELFNBQVNBLG9CQUFvQkMsS0FBSztJQUNyQyxPQUFPQSxRQUFRQSxNQUFNQyxXQUFXLEdBQUc7QUFDdkM7QUFDQTs7Ozs7O0NBTUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFlBQVksR0FBR1AsT0FBT08sWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1IsT0FBT1EsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsT0FBT1MsV0FBVztRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR1YsT0FBT1UsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsT0FBT1csWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1osT0FBT1ksV0FBVztJQUN6QztJQUNBQyxhQUFhQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUMxQixJQUFJQyxVQUFVLElBQUksQ0FBQ1QsWUFBWSxLQUFLVSxhQUNoQyxJQUFJLENBQUNULFlBQVksS0FBS1MsYUFDdEIsSUFBSSxDQUFDUixXQUFXLEtBQUtRO1FBQ3pCLE1BQU1DLFlBQVlKLE1BQU1LLElBQUksSUFBSSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDWixZQUFZLEtBQUtVLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDVCxZQUFZLENBQUNhLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUM5RDtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtTLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDUixZQUFZLENBQUNZLFFBQVEsQ0FBQ0w7UUFDcEQ7UUFDQSxJQUFJLElBQUksQ0FBQ04sV0FBVyxLQUFLUSxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVSSxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUNkLFdBQVcsRUFBRVcsU0FBU0c7UUFDdEU7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLTyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTixZQUFZLENBQUNVLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUMvRDtRQUNBLElBQUksSUFBSSxDQUFDVixZQUFZLEtBQUtNLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNMLFlBQVksQ0FBQ1MsUUFBUSxDQUFDTDtRQUNyRDtRQUNBLElBQUksSUFBSSxDQUFDSCxXQUFXLEtBQUtLLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVNLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDWCxXQUFXLEVBQUVRLFNBQVNHO1FBQ3hFO1FBQ0EsT0FBT1A7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcz84MWZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyA/IHRoaW5nLmxjX3J1bm5hYmxlIDogZmFsc2U7XG59XG4vKipcbiAqIFV0aWxpdHkgdG8gZmlsdGVyIHRoZSByb290IGV2ZW50IGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4gKiBUaGlzIGlzIHNpbXBseSBiaW5kaW5nIHRoZSBhcmd1bWVudHMgdG8gdGhlIG5hbWVzcGFjZSB0byBtYWtlIHNhdmUgb25cbiAqIGEgYml0IG9mIHR5cGluZyBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRPRE86IFJlZmFjdG9yIGFuZCByZW1vdmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBfUm9vdEV2ZW50RmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzLmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHMuaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzLmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzLmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcy5leGNsdWRlVGFncztcbiAgICB9XG4gICAgaW5jbHVkZUV2ZW50KGV2ZW50LCByb290VHlwZSkge1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZXZlbnRUYWdzID0gZXZlbnQudGFncyA/PyBbXTtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fCBldmVudFRhZ3Muc29tZSgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgZXZlbnRUYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNSdW5uYWJsZUludGVyZmFjZSIsInRoaW5nIiwibGNfcnVubmFibGUiLCJfUm9vdEV2ZW50RmlsdGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsImluY2x1ZGVFdmVudCIsImV2ZW50Iiwicm9vdFR5cGUiLCJpbmNsdWRlIiwidW5kZWZpbmVkIiwiZXZlbnRUYWdzIiwidGFncyIsImluY2x1ZGVzIiwibmFtZSIsInNvbWUiLCJ0YWciLCJldmVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/wrappers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToHttpEventStream: () => (/* binding */ convertToHttpEventStream)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\nfunction convertToHttpEventStream(stream) {\n    const encoder = new TextEncoder();\n    const finalStream = new ReadableStream({\n        async start (controller) {\n            for await (const chunk of stream){\n                controller.enqueue(encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`));\n            }\n            controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n            controller.close();\n        }\n    });\n    return _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream.fromReadableStream(finalStream);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQ3JELFNBQVNDLHlCQUF5QkMsTUFBTTtJQUMzQyxNQUFNQyxVQUFVLElBQUlDO0lBQ3BCLE1BQU1DLGNBQWMsSUFBSUMsZUFBZTtRQUNuQyxNQUFNQyxPQUFNQyxVQUFVO1lBQ2xCLFdBQVcsTUFBTUMsU0FBU1AsT0FBUTtnQkFDOUJNLFdBQVdFLE9BQU8sQ0FBQ1AsUUFBUVEsTUFBTSxDQUFDLENBQUMsbUJBQW1CLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ0osT0FBTyxJQUFJLENBQUM7WUFDdkY7WUFDQUQsV0FBV0UsT0FBTyxDQUFDUCxRQUFRUSxNQUFNLENBQUM7WUFDbENILFdBQVdNLEtBQUs7UUFDcEI7SUFDSjtJQUNBLE9BQU9kLG9FQUFzQkEsQ0FBQ2Usa0JBQWtCLENBQUNWO0FBQ3JEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy93cmFwcGVycy5qcz8wNTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvSHR0cEV2ZW50U3RyZWFtKHN0cmVhbSkge1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBmaW5hbFN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIGFzeW5jIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBldmVudDogZGF0YVxcbmRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoY2h1bmspfVxcblxcbmApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShcImV2ZW50OiBlbmRcXG5cXG5cIikpO1xuICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbShmaW5hbFN0cmVhbSk7XG59XG4iXSwibmFtZXMiOlsiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsInN0cmVhbSIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImZpbmFsU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJjaHVuayIsImVucXVldWUiLCJlbmNvZGUiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xvc2UiLCJmcm9tUmVhZGFibGVTdHJlYW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _getConfigureHooks: () => (/* binding */ _getConfigureHooks),\n/* harmony export */   getContextVariable: () => (/* binding */ getContextVariable),\n/* harmony export */   registerConfigureHook: () => (/* binding */ registerConfigureHook),\n/* harmony export */   setContextVariable: () => (/* binding */ setContextVariable)\n/* harmony export */ });\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/langsmith/run_trees.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n\n\n/**\n * Set a context variable. Context variables are scoped to any\n * child runnables called by the current runnable, or globally if set outside\n * of any runnable.\n *\n * @remarks\n * This function is only supported in environments that support AsyncLocalStorage,\n * including Node.js, Deno, and Cloudflare Workers.\n *\n * @example\n * ```ts\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n * import {\n *   getContextVariable,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const nested = RunnableLambda.from(() => {\n *   // \"bar\" because it was set by a parent\n *   console.log(getContextVariable(\"foo\"));\n *\n *   // Override to \"baz\", but only for child runnables\n *   setContextVariable(\"foo\", \"baz\");\n *\n *   // Now \"baz\", but only for child runnables\n *   return getContextVariable(\"foo\");\n * });\n *\n * const runnable = RunnableLambda.from(async () => {\n *   // Set a context variable named \"foo\"\n *   setContextVariable(\"foo\", \"bar\");\n *\n *   const res = await nested.invoke({});\n *\n *   // Still \"bar\" since child changes do not affect parents\n *   console.log(getContextVariable(\"foo\"));\n *\n *   return res;\n * });\n *\n * // undefined, because context variable has not been set yet\n * console.log(getContextVariable(\"foo\"));\n *\n * // Final return value is \"baz\"\n * const result = await runnable.invoke({});\n * ```\n *\n * @param name The name of the context variable.\n * @param value The value to set.\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setContextVariable(name, value) {\n    // Avoid using global singleton due to circuluar dependency issues\n    const asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n    if (asyncLocalStorageInstance === undefined) {\n        throw new Error(`Internal error: Global shared async local storage instance has not been initialized.`);\n    }\n    const runTree = asyncLocalStorageInstance.getStore();\n    const contextVars = {\n        ...runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY]\n    };\n    contextVars[name] = value;\n    let newValue = {};\n    if ((0,langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.isRunTree)(runTree)) {\n        newValue = new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.RunTree(runTree);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    newValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] = contextVars;\n    asyncLocalStorageInstance.enterWith(newValue);\n}\n/**\n * Get the value of a previously set context variable. Context variables\n * are scoped to any child runnables called by the current runnable,\n * or globally if set outside of any runnable.\n *\n * @remarks\n * This function is only supported in environments that support AsyncLocalStorage,\n * including Node.js, Deno, and Cloudflare Workers.\n *\n * @example\n * ```ts\n * import { RunnableLambda } from \"@langchain/core/runnables\";\n * import {\n *   getContextVariable,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const nested = RunnableLambda.from(() => {\n *   // \"bar\" because it was set by a parent\n *   console.log(getContextVariable(\"foo\"));\n *\n *   // Override to \"baz\", but only for child runnables\n *   setContextVariable(\"foo\", \"baz\");\n *\n *   // Now \"baz\", but only for child runnables\n *   return getContextVariable(\"foo\");\n * });\n *\n * const runnable = RunnableLambda.from(async () => {\n *   // Set a context variable named \"foo\"\n *   setContextVariable(\"foo\", \"bar\");\n *\n *   const res = await nested.invoke({});\n *\n *   // Still \"bar\" since child changes do not affect parents\n *   console.log(getContextVariable(\"foo\"));\n *\n *   return res;\n * });\n *\n * // undefined, because context variable has not been set yet\n * console.log(getContextVariable(\"foo\"));\n *\n * // Final return value is \"baz\"\n * const result = await runnable.invoke({});\n * ```\n *\n * @param name The name of the context variable.\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getContextVariable(name) {\n    // Avoid using global singleton due to circuluar dependency issues\n    const asyncLocalStorageInstance = (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n    if (asyncLocalStorageInstance === undefined) {\n        return undefined;\n    }\n    const runTree = asyncLocalStorageInstance.getStore();\n    return runTree?.[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY]?.[name];\n}\nconst LC_CONFIGURE_HOOKS_KEY = Symbol(\"lc:configure_hooks\");\nconst _getConfigureHooks = ()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY) || [];\n/**\n * Register a callback configure hook to automatically add callback handlers to all runs.\n *\n * There are two ways to use this:\n *\n * 1. Using a context variable:\n *    - Set `contextVar` to specify the variable name\n *    - Use `setContextVariable()` to store your handler instance\n *\n * 2. Using an environment variable:\n *    - Set both `envVar` and `handlerClass`\n *    - The handler will be instantiated when the env var is set to \"true\".\n *\n * @example\n * ```typescript\n * // Method 1: Using context variable\n * import {\n *   registerConfigureHook,\n *   setContextVariable\n * } from \"@langchain/core/context\";\n *\n * const tracer = new MyCallbackHandler();\n * registerConfigureHook({\n *   contextVar: \"my_tracer\",\n * });\n * setContextVariable(\"my_tracer\", tracer);\n *\n * // ...run code here\n *\n * // Method 2: Using environment variable\n * registerConfigureHook({\n *   handlerClass: MyCallbackHandler,\n *   envVar: \"MY_TRACER_ENABLED\",\n * });\n * process.env.MY_TRACER_ENABLED = \"true\";\n *\n * // ...run code here\n * ```\n *\n * @param config Configuration object for the hook\n * @param config.contextVar Name of the context variable containing the handler instance\n * @param config.inheritable Whether child runs should inherit this handler\n * @param config.handlerClass Optional callback handler class (required if using envVar)\n * @param config.envVar Optional environment variable name to control handler activation\n */ const registerConfigureHook = (config)=>{\n    if (config.envVar && !config.handlerClass) {\n        throw new Error(\"If envVar is set, handlerClass must also be set to a non-None value.\");\n    }\n    setContextVariable(LC_CONFIGURE_HOOKS_KEY, [\n        ..._getConfigureHooks(),\n        config\n    ]);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ2tDO0FBQzNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaURDLEdBQ0QsOERBQThEO0FBQ3ZELFNBQVNJLG1CQUFtQkMsSUFBSSxFQUFFQyxLQUFLO0lBQzFDLGtFQUFrRTtJQUNsRSxNQUFNQyw0QkFBNEJKLCtFQUFrQ0E7SUFDcEUsSUFBSUksOEJBQThCQyxXQUFXO1FBQ3pDLE1BQU0sSUFBSUMsTUFBTSxDQUFDLG9GQUFvRixDQUFDO0lBQzFHO0lBQ0EsTUFBTUMsVUFBVUgsMEJBQTBCSSxRQUFRO0lBQ2xELE1BQU1DLGNBQWM7UUFBRSxHQUFHRixTQUFTLENBQUNSLCtEQUFzQkEsQ0FBQztJQUFDO0lBQzNEVSxXQUFXLENBQUNQLEtBQUssR0FBR0M7SUFDcEIsSUFBSU8sV0FBVyxDQUFDO0lBQ2hCLElBQUliLDhEQUFTQSxDQUFDVSxVQUFVO1FBQ3BCRyxXQUFXLElBQUlaLHdEQUFPQSxDQUFDUztJQUMzQjtJQUNBLDhEQUE4RDtJQUM5REcsUUFBUSxDQUFDWCwrREFBc0JBLENBQUMsR0FBR1U7SUFDbkNMLDBCQUEwQk8sU0FBUyxDQUFDRDtBQUN4QztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FnREMsR0FDRCw4REFBOEQ7QUFDdkQsU0FBU0UsbUJBQW1CVixJQUFJO0lBQ25DLGtFQUFrRTtJQUNsRSxNQUFNRSw0QkFBNEJKLCtFQUFrQ0E7SUFDcEUsSUFBSUksOEJBQThCQyxXQUFXO1FBQ3pDLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRSxVQUFVSCwwQkFBMEJJLFFBQVE7SUFDbEQsT0FBT0QsU0FBUyxDQUFDUiwrREFBc0JBLENBQUMsRUFBRSxDQUFDRyxLQUFLO0FBQ3BEO0FBQ0EsTUFBTVcseUJBQXlCQyxPQUFPO0FBQy9CLE1BQU1DLHFCQUFxQixJQUFNSCxtQkFBbUJDLDJCQUEyQixFQUFFLENBQUM7QUFDekY7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBNENDLEdBQ00sTUFBTUcsd0JBQXdCLENBQUNDO0lBQ2xDLElBQUlBLE9BQU9DLE1BQU0sSUFBSSxDQUFDRCxPQUFPRSxZQUFZLEVBQUU7UUFDdkMsTUFBTSxJQUFJYixNQUFNO0lBQ3BCO0lBQ0FMLG1CQUFtQlksd0JBQXdCO1dBQUlFO1FBQXNCRTtLQUFPO0FBQ2hGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2NvbnRleHQuanM/YTdlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1J1blRyZWUsIFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuaW1wb3J0IHsgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSwgZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSwgfSBmcm9tIFwiLi9nbG9iYWxzLmpzXCI7XG4vKipcbiAqIFNldCBhIGNvbnRleHQgdmFyaWFibGUuIENvbnRleHQgdmFyaWFibGVzIGFyZSBzY29wZWQgdG8gYW55XG4gKiBjaGlsZCBydW5uYWJsZXMgY2FsbGVkIGJ5IHRoZSBjdXJyZW50IHJ1bm5hYmxlLCBvciBnbG9iYWxseSBpZiBzZXQgb3V0c2lkZVxuICogb2YgYW55IHJ1bm5hYmxlLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgQXN5bmNMb2NhbFN0b3JhZ2UsXG4gKiBpbmNsdWRpbmcgTm9kZS5qcywgRGVubywgYW5kIENsb3VkZmxhcmUgV29ya2Vycy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGltcG9ydCB7IFJ1bm5hYmxlTGFtYmRhIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9ydW5uYWJsZXNcIjtcbiAqIGltcG9ydCB7XG4gKiAgIGdldENvbnRleHRWYXJpYWJsZSxcbiAqICAgc2V0Q29udGV4dFZhcmlhYmxlXG4gKiB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvY29udGV4dFwiO1xuICpcbiAqIGNvbnN0IG5lc3RlZCA9IFJ1bm5hYmxlTGFtYmRhLmZyb20oKCkgPT4ge1xuICogICAvLyBcImJhclwiIGJlY2F1c2UgaXQgd2FzIHNldCBieSBhIHBhcmVudFxuICogICBjb25zb2xlLmxvZyhnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIikpO1xuICpcbiAqICAgLy8gT3ZlcnJpZGUgdG8gXCJiYXpcIiwgYnV0IG9ubHkgZm9yIGNoaWxkIHJ1bm5hYmxlc1xuICogICBzZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIiwgXCJiYXpcIik7XG4gKlxuICogICAvLyBOb3cgXCJiYXpcIiwgYnV0IG9ubHkgZm9yIGNoaWxkIHJ1bm5hYmxlc1xuICogICByZXR1cm4gZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpO1xuICogfSk7XG4gKlxuICogY29uc3QgcnVubmFibGUgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKGFzeW5jICgpID0+IHtcbiAqICAgLy8gU2V0IGEgY29udGV4dCB2YXJpYWJsZSBuYW1lZCBcImZvb1wiXG4gKiAgIHNldENvbnRleHRWYXJpYWJsZShcImZvb1wiLCBcImJhclwiKTtcbiAqXG4gKiAgIGNvbnN0IHJlcyA9IGF3YWl0IG5lc3RlZC5pbnZva2Uoe30pO1xuICpcbiAqICAgLy8gU3RpbGwgXCJiYXJcIiBzaW5jZSBjaGlsZCBjaGFuZ2VzIGRvIG5vdCBhZmZlY3QgcGFyZW50c1xuICogICBjb25zb2xlLmxvZyhnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIikpO1xuICpcbiAqICAgcmV0dXJuIHJlcztcbiAqIH0pO1xuICpcbiAqIC8vIHVuZGVmaW5lZCwgYmVjYXVzZSBjb250ZXh0IHZhcmlhYmxlIGhhcyBub3QgYmVlbiBzZXQgeWV0XG4gKiBjb25zb2xlLmxvZyhnZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIikpO1xuICpcbiAqIC8vIEZpbmFsIHJldHVybiB2YWx1ZSBpcyBcImJhelwiXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5uYWJsZS5pbnZva2Uoe30pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbnRleHQgdmFyaWFibGUuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBzZXRDb250ZXh0VmFyaWFibGUobmFtZSwgdmFsdWUpIHtcbiAgICAvLyBBdm9pZCB1c2luZyBnbG9iYWwgc2luZ2xldG9uIGR1ZSB0byBjaXJjdWx1YXIgZGVwZW5kZW5jeSBpc3N1ZXNcbiAgICBjb25zdCBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlID0gZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSgpO1xuICAgIGlmIChhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBlcnJvcjogR2xvYmFsIHNoYXJlZCBhc3luYyBsb2NhbCBzdG9yYWdlIGluc3RhbmNlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5gKTtcbiAgICB9XG4gICAgY29uc3QgcnVuVHJlZSA9IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UuZ2V0U3RvcmUoKTtcbiAgICBjb25zdCBjb250ZXh0VmFycyA9IHsgLi4ucnVuVHJlZT8uW19DT05URVhUX1ZBUklBQkxFU19LRVldIH07XG4gICAgY29udGV4dFZhcnNbbmFtZV0gPSB2YWx1ZTtcbiAgICBsZXQgbmV3VmFsdWUgPSB7fTtcbiAgICBpZiAoaXNSdW5UcmVlKHJ1blRyZWUpKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gbmV3IFJ1blRyZWUocnVuVHJlZSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbmV3VmFsdWVbX0NPTlRFWFRfVkFSSUFCTEVTX0tFWV0gPSBjb250ZXh0VmFycztcbiAgICBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLmVudGVyV2l0aChuZXdWYWx1ZSk7XG59XG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYSBwcmV2aW91c2x5IHNldCBjb250ZXh0IHZhcmlhYmxlLiBDb250ZXh0IHZhcmlhYmxlc1xuICogYXJlIHNjb3BlZCB0byBhbnkgY2hpbGQgcnVubmFibGVzIGNhbGxlZCBieSB0aGUgY3VycmVudCBydW5uYWJsZSxcbiAqIG9yIGdsb2JhbGx5IGlmIHNldCBvdXRzaWRlIG9mIGFueSBydW5uYWJsZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhpcyBmdW5jdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBpbiBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IEFzeW5jTG9jYWxTdG9yYWdlLFxuICogaW5jbHVkaW5nIE5vZGUuanMsIERlbm8sIGFuZCBDbG91ZGZsYXJlIFdvcmtlcnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gKiBpbXBvcnQge1xuICogICBnZXRDb250ZXh0VmFyaWFibGUsXG4gKiAgIHNldENvbnRleHRWYXJpYWJsZVxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2NvbnRleHRcIjtcbiAqXG4gKiBjb25zdCBuZXN0ZWQgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKCgpID0+IHtcbiAqICAgLy8gXCJiYXJcIiBiZWNhdXNlIGl0IHdhcyBzZXQgYnkgYSBwYXJlbnRcbiAqICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAgIC8vIE92ZXJyaWRlIHRvIFwiYmF6XCIsIGJ1dCBvbmx5IGZvciBjaGlsZCBydW5uYWJsZXNcbiAqICAgc2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIsIFwiYmF6XCIpO1xuICpcbiAqICAgLy8gTm93IFwiYmF6XCIsIGJ1dCBvbmx5IGZvciBjaGlsZCBydW5uYWJsZXNcbiAqICAgcmV0dXJuIGdldENvbnRleHRWYXJpYWJsZShcImZvb1wiKTtcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJ1bm5hYmxlID0gUnVubmFibGVMYW1iZGEuZnJvbShhc3luYyAoKSA9PiB7XG4gKiAgIC8vIFNldCBhIGNvbnRleHQgdmFyaWFibGUgbmFtZWQgXCJmb29cIlxuICogICBzZXRDb250ZXh0VmFyaWFibGUoXCJmb29cIiwgXCJiYXJcIik7XG4gKlxuICogICBjb25zdCByZXMgPSBhd2FpdCBuZXN0ZWQuaW52b2tlKHt9KTtcbiAqXG4gKiAgIC8vIFN0aWxsIFwiYmFyXCIgc2luY2UgY2hpbGQgY2hhbmdlcyBkbyBub3QgYWZmZWN0IHBhcmVudHNcbiAqICAgY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAgIHJldHVybiByZXM7XG4gKiB9KTtcbiAqXG4gKiAvLyB1bmRlZmluZWQsIGJlY2F1c2UgY29udGV4dCB2YXJpYWJsZSBoYXMgbm90IGJlZW4gc2V0IHlldFxuICogY29uc29sZS5sb2coZ2V0Q29udGV4dFZhcmlhYmxlKFwiZm9vXCIpKTtcbiAqXG4gKiAvLyBGaW5hbCByZXR1cm4gdmFsdWUgaXMgXCJiYXpcIlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVubmFibGUuaW52b2tlKHt9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBjb250ZXh0IHZhcmlhYmxlLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRleHRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQXZvaWQgdXNpbmcgZ2xvYmFsIHNpbmdsZXRvbiBkdWUgdG8gY2lyY3VsdWFyIGRlcGVuZGVuY3kgaXNzdWVzXG4gICAgY29uc3QgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9IGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKTtcbiAgICBpZiAoYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJ1blRyZWUgPSBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLmdldFN0b3JlKCk7XG4gICAgcmV0dXJuIHJ1blRyZWU/LltfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXT8uW25hbWVdO1xufVxuY29uc3QgTENfQ09ORklHVVJFX0hPT0tTX0tFWSA9IFN5bWJvbChcImxjOmNvbmZpZ3VyZV9ob29rc1wiKTtcbmV4cG9ydCBjb25zdCBfZ2V0Q29uZmlndXJlSG9va3MgPSAoKSA9PiBnZXRDb250ZXh0VmFyaWFibGUoTENfQ09ORklHVVJFX0hPT0tTX0tFWSkgfHwgW107XG4vKipcbiAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgY29uZmlndXJlIGhvb2sgdG8gYXV0b21hdGljYWxseSBhZGQgY2FsbGJhY2sgaGFuZGxlcnMgdG8gYWxsIHJ1bnMuXG4gKlxuICogVGhlcmUgYXJlIHR3byB3YXlzIHRvIHVzZSB0aGlzOlxuICpcbiAqIDEuIFVzaW5nIGEgY29udGV4dCB2YXJpYWJsZTpcbiAqICAgIC0gU2V0IGBjb250ZXh0VmFyYCB0byBzcGVjaWZ5IHRoZSB2YXJpYWJsZSBuYW1lXG4gKiAgICAtIFVzZSBgc2V0Q29udGV4dFZhcmlhYmxlKClgIHRvIHN0b3JlIHlvdXIgaGFuZGxlciBpbnN0YW5jZVxuICpcbiAqIDIuIFVzaW5nIGFuIGVudmlyb25tZW50IHZhcmlhYmxlOlxuICogICAgLSBTZXQgYm90aCBgZW52VmFyYCBhbmQgYGhhbmRsZXJDbGFzc2BcbiAqICAgIC0gVGhlIGhhbmRsZXIgd2lsbCBiZSBpbnN0YW50aWF0ZWQgd2hlbiB0aGUgZW52IHZhciBpcyBzZXQgdG8gXCJ0cnVlXCIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIC8vIE1ldGhvZCAxOiBVc2luZyBjb250ZXh0IHZhcmlhYmxlXG4gKiBpbXBvcnQge1xuICogICByZWdpc3RlckNvbmZpZ3VyZUhvb2ssXG4gKiAgIHNldENvbnRleHRWYXJpYWJsZVxuICogfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2NvbnRleHRcIjtcbiAqXG4gKiBjb25zdCB0cmFjZXIgPSBuZXcgTXlDYWxsYmFja0hhbmRsZXIoKTtcbiAqIHJlZ2lzdGVyQ29uZmlndXJlSG9vayh7XG4gKiAgIGNvbnRleHRWYXI6IFwibXlfdHJhY2VyXCIsXG4gKiB9KTtcbiAqIHNldENvbnRleHRWYXJpYWJsZShcIm15X3RyYWNlclwiLCB0cmFjZXIpO1xuICpcbiAqIC8vIC4uLnJ1biBjb2RlIGhlcmVcbiAqXG4gKiAvLyBNZXRob2QgMjogVXNpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqIHJlZ2lzdGVyQ29uZmlndXJlSG9vayh7XG4gKiAgIGhhbmRsZXJDbGFzczogTXlDYWxsYmFja0hhbmRsZXIsXG4gKiAgIGVudlZhcjogXCJNWV9UUkFDRVJfRU5BQkxFRFwiLFxuICogfSk7XG4gKiBwcm9jZXNzLmVudi5NWV9UUkFDRVJfRU5BQkxFRCA9IFwidHJ1ZVwiO1xuICpcbiAqIC8vIC4uLnJ1biBjb2RlIGhlcmVcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb25maWcgQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSBob29rXG4gKiBAcGFyYW0gY29uZmlnLmNvbnRleHRWYXIgTmFtZSBvZiB0aGUgY29udGV4dCB2YXJpYWJsZSBjb250YWluaW5nIHRoZSBoYW5kbGVyIGluc3RhbmNlXG4gKiBAcGFyYW0gY29uZmlnLmluaGVyaXRhYmxlIFdoZXRoZXIgY2hpbGQgcnVucyBzaG91bGQgaW5oZXJpdCB0aGlzIGhhbmRsZXJcbiAqIEBwYXJhbSBjb25maWcuaGFuZGxlckNsYXNzIE9wdGlvbmFsIGNhbGxiYWNrIGhhbmRsZXIgY2xhc3MgKHJlcXVpcmVkIGlmIHVzaW5nIGVudlZhcilcbiAqIEBwYXJhbSBjb25maWcuZW52VmFyIE9wdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlIG5hbWUgdG8gY29udHJvbCBoYW5kbGVyIGFjdGl2YXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyQ29uZmlndXJlSG9vayA9IChjb25maWcpID0+IHtcbiAgICBpZiAoY29uZmlnLmVudlZhciAmJiAhY29uZmlnLmhhbmRsZXJDbGFzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJZiBlbnZWYXIgaXMgc2V0LCBoYW5kbGVyQ2xhc3MgbXVzdCBhbHNvIGJlIHNldCB0byBhIG5vbi1Ob25lIHZhbHVlLlwiKTtcbiAgICB9XG4gICAgc2V0Q29udGV4dFZhcmlhYmxlKExDX0NPTkZJR1VSRV9IT09LU19LRVksIFsuLi5fZ2V0Q29uZmlndXJlSG9va3MoKSwgY29uZmlnXSk7XG59O1xuIl0sIm5hbWVzIjpbImlzUnVuVHJlZSIsIlJ1blRyZWUiLCJfQ09OVEVYVF9WQVJJQUJMRVNfS0VZIiwiZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsInNldENvbnRleHRWYXJpYWJsZSIsIm5hbWUiLCJ2YWx1ZSIsImFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UiLCJ1bmRlZmluZWQiLCJFcnJvciIsInJ1blRyZWUiLCJnZXRTdG9yZSIsImNvbnRleHRWYXJzIiwibmV3VmFsdWUiLCJlbnRlcldpdGgiLCJnZXRDb250ZXh0VmFyaWFibGUiLCJMQ19DT05GSUdVUkVfSE9PS1NfS0VZIiwiU3ltYm9sIiwiX2dldENvbmZpZ3VyZUhvb2tzIiwicmVnaXN0ZXJDb25maWd1cmVIb29rIiwiY29uZmlnIiwiZW52VmFyIiwiaGFuZGxlckNsYXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TRACING_ALS_KEY: () => (/* binding */ TRACING_ALS_KEY),\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* binding */ _CONTEXT_VARIABLES_KEY),\n/* harmony export */   getGlobalAsyncLocalStorageInstance: () => (/* binding */ getGlobalAsyncLocalStorageInstance),\n/* harmony export */   setGlobalAsyncLocalStorageInstance: () => (/* binding */ setGlobalAsyncLocalStorageInstance)\n/* harmony export */ });\nconst TRACING_ALS_KEY = Symbol.for(\"ls:tracing_async_local_storage\");\nconst _CONTEXT_VARIABLES_KEY = Symbol.for(\"lc:context_variables\");\nconst setGlobalAsyncLocalStorageInstance = (instance)=>{\n    globalThis[TRACING_ALS_KEY] = instance;\n};\nconst getGlobalAsyncLocalStorageInstance = ()=>{\n    return globalThis[TRACING_ALS_KEY];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLE1BQU1BLGtCQUFrQkMsT0FBT0MsR0FBRyxDQUFDLGtDQUFrQztBQUNyRSxNQUFNQyx5QkFBeUJGLE9BQU9DLEdBQUcsQ0FBQyx3QkFBd0I7QUFDbEUsTUFBTUUscUNBQXFDLENBQUNDO0lBQy9DQyxVQUFVLENBQUNOLGdCQUFnQixHQUFHSztBQUNsQyxFQUFFO0FBQ0ssTUFBTUUscUNBQXFDO0lBQzlDLE9BQU9ELFVBQVUsQ0FBQ04sZ0JBQWdCO0FBQ3RDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2dsb2JhbHMuanM/MmU3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgVFJBQ0lOR19BTFNfS0VZID0gU3ltYm9sLmZvcihcImxzOnRyYWNpbmdfYXN5bmNfbG9jYWxfc3RvcmFnZVwiKTtcbmV4cG9ydCBjb25zdCBfQ09OVEVYVF9WQVJJQUJMRVNfS0VZID0gU3ltYm9sLmZvcihcImxjOmNvbnRleHRfdmFyaWFibGVzXCIpO1xuZXhwb3J0IGNvbnN0IHNldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgICBnbG9iYWxUaGlzW1RSQUNJTkdfQUxTX0tFWV0gPSBpbnN0YW5jZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2xvYmFsVGhpc1tUUkFDSU5HX0FMU19LRVldO1xufTtcbiJdLCJuYW1lcyI6WyJUUkFDSU5HX0FMU19LRVkiLCJTeW1ib2wiLCJmb3IiLCJfQ09OVEVYVF9WQVJJQUJMRVNfS0VZIiwic2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsImluc3RhbmNlIiwiZ2xvYmFsVGhpcyIsImdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\n\nclass MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        return callback();\n    }\n    enterWith(_store) {\n        return undefined;\n    }\n}\nconst mockAsyncLocalStorage = new MockAsyncLocalStorage();\nconst LC_CHILD_KEY = Symbol.for(\"lc:child_config\");\nclass AsyncLocalStorageProvider {\n    getInstance() {\n        return (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)() ?? mockAsyncLocalStorage;\n    }\n    getRunnableConfig() {\n        const storage = this.getInstance();\n        // this has the runnable config\n        // which means that we should also have an instance of a LangChainTracer\n        // with the run map prepopulated\n        return storage.getStore()?.extra?.[LC_CHILD_KEY];\n    }\n    runWithConfig(config, callback, avoidCreatingRootRunTree) {\n        const callbackManager = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n        const storage = this.getInstance();\n        const previousValue = storage.getStore();\n        const parentRunId = callbackManager?.getParentRunId();\n        const langChainTracer = callbackManager?.handlers?.find((handler)=>handler?.name === \"langchain_tracer\");\n        let runTree;\n        if (langChainTracer && parentRunId) {\n            runTree = langChainTracer.convertToRunTree(parentRunId);\n        } else if (!avoidCreatingRootRunTree) {\n            runTree = new langsmith__WEBPACK_IMPORTED_MODULE_0__.RunTree({\n                name: \"<runnable_lambda>\",\n                tracingEnabled: false\n            });\n        }\n        if (runTree) {\n            runTree.extra = {\n                ...runTree.extra,\n                [LC_CHILD_KEY]: config\n            };\n        }\n        if (previousValue !== undefined && previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] !== undefined) {\n            if (runTree === undefined) {\n                runTree = {};\n            }\n            runTree[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY] = previousValue[_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY];\n        }\n        return storage.run(runTree, callback);\n    }\n    initializeGlobalInstance(instance) {\n        if ((0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)() === undefined) {\n            (0,_globals_js__WEBPACK_IMPORTED_MODULE_1__.setGlobalAsyncLocalStorageInstance)(instance);\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9hc3luY19sb2NhbF9zdG9yYWdlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEscURBQXFELEdBQ2pCO0FBQzJGO0FBQ2xFO0FBQ3RELE1BQU1LO0lBQ1RDLFdBQVc7UUFDUCxPQUFPQztJQUNYO0lBQ0FDLElBQUlDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO1FBQ2xCLE9BQU9BO0lBQ1g7SUFDQUMsVUFBVUYsTUFBTSxFQUFFO1FBQ2QsT0FBT0Y7SUFDWDtBQUNKO0FBQ0EsTUFBTUssd0JBQXdCLElBQUlQO0FBQ2xDLE1BQU1RLGVBQWVDLE9BQU9DLEdBQUcsQ0FBQztBQUNoQyxNQUFNQztJQUNGQyxjQUFjO1FBQ1YsT0FBT2hCLCtFQUFrQ0EsTUFBTVc7SUFDbkQ7SUFDQU0sb0JBQW9CO1FBQ2hCLE1BQU1DLFVBQVUsSUFBSSxDQUFDRixXQUFXO1FBQ2hDLCtCQUErQjtRQUMvQix3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU9FLFFBQVFiLFFBQVEsSUFBSWMsT0FBTyxDQUFDUCxhQUFhO0lBQ3BEO0lBQ0FRLGNBQWNDLE1BQU0sRUFBRVosUUFBUSxFQUFFYSx3QkFBd0IsRUFBRTtRQUN0RCxNQUFNQyxrQkFBa0JwQixrRUFBZUEsQ0FBQ3FCLGNBQWMsQ0FBQ0gsUUFBUUksV0FBV25CLFdBQVdlLFFBQVFLLE1BQU1wQixXQUFXZSxRQUFRTTtRQUN0SCxNQUFNVCxVQUFVLElBQUksQ0FBQ0YsV0FBVztRQUNoQyxNQUFNWSxnQkFBZ0JWLFFBQVFiLFFBQVE7UUFDdEMsTUFBTXdCLGNBQWNOLGlCQUFpQk87UUFDckMsTUFBTUMsa0JBQWtCUixpQkFBaUJTLFVBQVVDLEtBQUssQ0FBQ0MsVUFBWUEsU0FBU0MsU0FBUztRQUN2RixJQUFJQztRQUNKLElBQUlMLG1CQUFtQkYsYUFBYTtZQUNoQ08sVUFBVUwsZ0JBQWdCTSxnQkFBZ0IsQ0FBQ1I7UUFDL0MsT0FDSyxJQUFJLENBQUNQLDBCQUEwQjtZQUNoQ2MsVUFBVSxJQUFJckMsOENBQU9BLENBQUM7Z0JBQ2xCb0MsTUFBTTtnQkFDTkcsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJRixTQUFTO1lBQ1RBLFFBQVFqQixLQUFLLEdBQUc7Z0JBQUUsR0FBR2lCLFFBQVFqQixLQUFLO2dCQUFFLENBQUNQLGFBQWEsRUFBRVM7WUFBTztRQUMvRDtRQUNBLElBQUlPLGtCQUFrQnRCLGFBQ2xCc0IsYUFBYSxDQUFDMUIsK0RBQXNCQSxDQUFDLEtBQUtJLFdBQVc7WUFDckQsSUFBSThCLFlBQVk5QixXQUFXO2dCQUN2QjhCLFVBQVUsQ0FBQztZQUNmO1lBQ0FBLE9BQU8sQ0FBQ2xDLCtEQUFzQkEsQ0FBQyxHQUMzQjBCLGFBQWEsQ0FBQzFCLCtEQUFzQkEsQ0FBQztRQUM3QztRQUNBLE9BQU9nQixRQUFRWCxHQUFHLENBQUM2QixTQUFTM0I7SUFDaEM7SUFDQThCLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLElBQUl4QywrRUFBa0NBLE9BQU9NLFdBQVc7WUFDcERMLCtFQUFrQ0EsQ0FBQ3VDO1FBQ3ZDO0lBQ0o7QUFDSjtBQUNBLE1BQU1DLHFDQUFxQyxJQUFJMUI7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2FzeW5jX2xvY2FsX3N0b3JhZ2UvaW5kZXguanM/MmMyYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgeyBSdW5UcmVlIH0gZnJvbSBcImxhbmdzbWl0aFwiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSwgc2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSwgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSwgfSBmcm9tIFwiLi9nbG9iYWxzLmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmV4cG9ydCBjbGFzcyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBydW4oX3N0b3JlLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9XG4gICAgZW50ZXJXaXRoKF9zdG9yZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmNvbnN0IG1vY2tBc3luY0xvY2FsU3RvcmFnZSA9IG5ldyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbmNvbnN0IExDX0NISUxEX0tFWSA9IFN5bWJvbC5mb3IoXCJsYzpjaGlsZF9jb25maWdcIik7XG5jbGFzcyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyIHtcbiAgICBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKSA/PyBtb2NrQXN5bmNMb2NhbFN0b3JhZ2U7XG4gICAgfVxuICAgIGdldFJ1bm5hYmxlQ29uZmlnKCkge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRJbnN0YW5jZSgpO1xuICAgICAgICAvLyB0aGlzIGhhcyB0aGUgcnVubmFibGUgY29uZmlnXG4gICAgICAgIC8vIHdoaWNoIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIGFsc28gaGF2ZSBhbiBpbnN0YW5jZSBvZiBhIExhbmdDaGFpblRyYWNlclxuICAgICAgICAvLyB3aXRoIHRoZSBydW4gbWFwIHByZXBvcHVsYXRlZFxuICAgICAgICByZXR1cm4gc3RvcmFnZS5nZXRTdG9yZSgpPy5leHRyYT8uW0xDX0NISUxEX0tFWV07XG4gICAgfVxuICAgIHJ1bldpdGhDb25maWcoY29uZmlnLCBjYWxsYmFjaywgYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlciA9IENhbGxiYWNrTWFuYWdlci5fY29uZmlndXJlU3luYyhjb25maWc/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBjb25maWc/LnRhZ3MsIHVuZGVmaW5lZCwgY29uZmlnPy5tZXRhZGF0YSk7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBzdG9yYWdlLmdldFN0b3JlKCk7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1bklkID0gY2FsbGJhY2tNYW5hZ2VyPy5nZXRQYXJlbnRSdW5JZCgpO1xuICAgICAgICBjb25zdCBsYW5nQ2hhaW5UcmFjZXIgPSBjYWxsYmFja01hbmFnZXI/LmhhbmRsZXJzPy5maW5kKChoYW5kbGVyKSA9PiBoYW5kbGVyPy5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIik7XG4gICAgICAgIGxldCBydW5UcmVlO1xuICAgICAgICBpZiAobGFuZ0NoYWluVHJhY2VyICYmIHBhcmVudFJ1bklkKSB7XG4gICAgICAgICAgICBydW5UcmVlID0gbGFuZ0NoYWluVHJhY2VyLmNvbnZlcnRUb1J1blRyZWUocGFyZW50UnVuSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFhdm9pZENyZWF0aW5nUm9vdFJ1blRyZWUpIHtcbiAgICAgICAgICAgIHJ1blRyZWUgPSBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCI8cnVubmFibGVfbGFtYmRhPlwiLFxuICAgICAgICAgICAgICAgIHRyYWNpbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5UcmVlKSB7XG4gICAgICAgICAgICBydW5UcmVlLmV4dHJhID0geyAuLi5ydW5UcmVlLmV4dHJhLCBbTENfQ0hJTERfS0VZXTogY29uZmlnIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXZpb3VzVmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgcHJldmlvdXNWYWx1ZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAocnVuVHJlZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcnVuVHJlZSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuVHJlZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXSA9XG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZVtfQ09OVEVYVF9WQVJJQUJMRVNfS0VZXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RvcmFnZS5ydW4ocnVuVHJlZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKGdldEdsb2JhbEFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlcigpO1xuZXhwb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9O1xuIl0sIm5hbWVzIjpbIlJ1blRyZWUiLCJnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIiwic2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsIl9DT05URVhUX1ZBUklBQkxFU19LRVkiLCJDYWxsYmFja01hbmFnZXIiLCJNb2NrQXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRTdG9yZSIsInVuZGVmaW5lZCIsInJ1biIsIl9zdG9yZSIsImNhbGxiYWNrIiwiZW50ZXJXaXRoIiwibW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiTENfQ0hJTERfS0VZIiwiU3ltYm9sIiwiZm9yIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciIsImdldEluc3RhbmNlIiwiZ2V0UnVubmFibGVDb25maWciLCJzdG9yYWdlIiwiZXh0cmEiLCJydW5XaXRoQ29uZmlnIiwiY29uZmlnIiwiYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlIiwiY2FsbGJhY2tNYW5hZ2VyIiwiX2NvbmZpZ3VyZVN5bmMiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJwcmV2aW91c1ZhbHVlIiwicGFyZW50UnVuSWQiLCJnZXRQYXJlbnRSdW5JZCIsImxhbmdDaGFpblRyYWNlciIsImhhbmRsZXJzIiwiZmluZCIsImhhbmRsZXIiLCJuYW1lIiwicnVuVHJlZSIsImNvbnZlcnRUb1J1blRyZWUiLCJ0cmFjaW5nRW5hYmxlZCIsImluaXRpYWxpemVHbG9iYWxJbnN0YW5jZSIsImluc3RhbmNlIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/callbacks.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback),\n/* harmony export */   getQueue: () => (/* binding */ getQueue)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\nfunction getQueue() {\n    if (typeof queue === \"undefined\") {\n        queue = createQueue();\n    }\n    return queue;\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promiseFn Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        // Clear config since callbacks are not part of the root run\n        // Avoid using global singleton due to circuluar dependency issues\n        const asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n        if (asyncLocalStorageInstance !== undefined) {\n            await asyncLocalStorageInstance.run(undefined, async ()=>promiseFn());\n        } else {\n            await promiseFn();\n        }\n    } else {\n        queue = getQueue();\n        void queue.add(async ()=>{\n            const asyncLocalStorageInstance = (0,_async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__.getGlobalAsyncLocalStorageInstance)();\n            if (asyncLocalStorageInstance !== undefined) {\n                await asyncLocalStorageInstance.run(undefined, async ()=>promiseFn());\n            } else {\n                await promiseFn();\n            }\n        });\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9jYWxsYmFja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxxREFBcUQsR0FDckI7QUFDc0Q7QUFDdEYsSUFBSUU7QUFDSjs7OztDQUlDLEdBQ0QsU0FBU0M7SUFDTCxNQUFNQyxTQUFTLEtBQXNCSixHQUFHQSwrQ0FBaUIsR0FBR0Esb0NBQVNBO0lBQ3JFLE9BQU8sSUFBSUksT0FBTztRQUNkRSxXQUFXO1FBQ1hDLGFBQWE7SUFDakI7QUFDSjtBQUNPLFNBQVNDO0lBQ1osSUFBSSxPQUFPTixVQUFVLGFBQWE7UUFDOUJBLFFBQVFDO0lBQ1o7SUFDQSxPQUFPRDtBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNNLGVBQWVPLGdCQUFnQkMsU0FBUyxFQUFFQyxJQUFJO0lBQ2pELElBQUlBLFNBQVMsTUFBTTtRQUNmLDREQUE0RDtRQUM1RCxrRUFBa0U7UUFDbEUsTUFBTUMsNEJBQTRCWCxtR0FBa0NBO1FBQ3BFLElBQUlXLDhCQUE4QkMsV0FBVztZQUN6QyxNQUFNRCwwQkFBMEJFLEdBQUcsQ0FBQ0QsV0FBVyxVQUFZSDtRQUMvRCxPQUNLO1lBQ0QsTUFBTUE7UUFDVjtJQUNKLE9BQ0s7UUFDRFIsUUFBUU07UUFDUixLQUFLTixNQUFNYSxHQUFHLENBQUM7WUFDWCxNQUFNSCw0QkFBNEJYLG1HQUFrQ0E7WUFDcEUsSUFBSVcsOEJBQThCQyxXQUFXO2dCQUN6QyxNQUFNRCwwQkFBMEJFLEdBQUcsQ0FBQ0QsV0FBVyxVQUFZSDtZQUMvRCxPQUNLO2dCQUNELE1BQU1BO1lBQ1Y7UUFDSjtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxTQUFTTTtJQUNaLE9BQU8sT0FBT2QsVUFBVSxjQUFjQSxNQUFNZSxNQUFNLEtBQUtDLFFBQVFDLE9BQU87QUFDMUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9jYWxsYmFja3MuanM/N2E2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIH0gZnJvbSBcIi4vYXN5bmNfbG9jYWxfc3RvcmFnZS9nbG9iYWxzLmpzXCI7XG5sZXQgcXVldWU7XG4vKipcbiAqIENyZWF0ZXMgYSBxdWV1ZSB1c2luZyB0aGUgcC1xdWV1ZSBsaWJyYXJ5LiBUaGUgcXVldWUgaXMgY29uZmlndXJlZCB0b1xuICogYXV0by1zdGFydCBhbmQgaGFzIGEgY29uY3VycmVuY3kgb2YgMSwgbWVhbmluZyBpdCB3aWxsIHByb2Nlc3MgdGFza3NcbiAqIG9uZSBhdCBhIHRpbWUuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVF1ZXVlKCkge1xuICAgIGNvbnN0IFBRdWV1ZSA9IFwiZGVmYXVsdFwiIGluIFBRdWV1ZU1vZCA/IFBRdWV1ZU1vZC5kZWZhdWx0IDogUFF1ZXVlTW9kO1xuICAgIHJldHVybiBuZXcgUFF1ZXVlKHtcbiAgICAgICAgYXV0b1N0YXJ0OiB0cnVlLFxuICAgICAgICBjb25jdXJyZW5jeTogMSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWV1ZSgpIHtcbiAgICBpZiAodHlwZW9mIHF1ZXVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHF1ZXVlID0gY3JlYXRlUXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXVlO1xufVxuLyoqXG4gKiBDb25zdW1lIGEgcHJvbWlzZSwgZWl0aGVyIGFkZGluZyBpdCB0byB0aGUgcXVldWUgb3Igd2FpdGluZyBmb3IgaXQgdG8gcmVzb2x2ZVxuICogQHBhcmFtIHByb21pc2VGbiBQcm9taXNlIHRvIGNvbnN1bWVcbiAqIEBwYXJhbSB3YWl0IFdoZXRoZXIgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgdG8gcmVzb2x2ZSBvciByZXNvbHZlIGltbWVkaWF0ZWx5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdW1lQ2FsbGJhY2socHJvbWlzZUZuLCB3YWl0KSB7XG4gICAgaWYgKHdhaXQgPT09IHRydWUpIHtcbiAgICAgICAgLy8gQ2xlYXIgY29uZmlnIHNpbmNlIGNhbGxiYWNrcyBhcmUgbm90IHBhcnQgb2YgdGhlIHJvb3QgcnVuXG4gICAgICAgIC8vIEF2b2lkIHVzaW5nIGdsb2JhbCBzaW5nbGV0b24gZHVlIHRvIGNpcmN1bHVhciBkZXBlbmRlbmN5IGlzc3Vlc1xuICAgICAgICBjb25zdCBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlID0gZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSgpO1xuICAgICAgICBpZiAoYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlLnJ1bih1bmRlZmluZWQsIGFzeW5jICgpID0+IHByb21pc2VGbigpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHByb21pc2VGbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBxdWV1ZSA9IGdldFF1ZXVlKCk7XG4gICAgICAgIHZvaWQgcXVldWUuYWRkKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFzeW5jTG9jYWxTdG9yYWdlSW5zdGFuY2UgPSBnZXRHbG9iYWxBc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlKCk7XG4gICAgICAgICAgICBpZiAoYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZS5ydW4odW5kZWZpbmVkLCBhc3luYyAoKSA9PiBwcm9taXNlRm4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwcm9taXNlRm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIGluIHRoZSBxdWV1ZSB0byByZXNvbHZlLiBJZiB0aGUgcXVldWUgaXNcbiAqIHVuZGVmaW5lZCwgaXQgaW1tZWRpYXRlbHkgcmVzb2x2ZXMgYSBwcm9taXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXdhaXRBbGxDYWxsYmFja3MoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBxdWV1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHF1ZXVlLm9uSWRsZSgpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iXSwibmFtZXMiOlsiUFF1ZXVlTW9kIiwiZ2V0R2xvYmFsQXN5bmNMb2NhbFN0b3JhZ2VJbnN0YW5jZSIsInF1ZXVlIiwiY3JlYXRlUXVldWUiLCJQUXVldWUiLCJkZWZhdWx0IiwiYXV0b1N0YXJ0IiwiY29uY3VycmVuY3kiLCJnZXRRdWV1ZSIsImNvbnN1bWVDYWxsYmFjayIsInByb21pc2VGbiIsIndhaXQiLCJhc3luY0xvY2FsU3RvcmFnZUluc3RhbmNlIiwidW5kZWZpbmVkIiwicnVuIiwiYWRkIiwiYXdhaXRBbGxDYWxsYmFja3MiLCJvbklkbGUiLCJQcm9taXNlIiwicmVzb2x2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/callbacks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* reexport safe */ _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__.MockAsyncLocalStorage),\n/* harmony export */   _CONTEXT_VARIABLES_KEY: () => (/* reexport safe */ _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__._CONTEXT_VARIABLES_KEY)\n/* harmony export */ });\n/* harmony import */ var _async_local_storage_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./async_local_storage/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/index.js\");\n/* harmony import */ var _async_local_storage_globals_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_local_storage/globals.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/async_local_storage/globals.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0RztBQUNsQztBQUNKO0FBQ3BDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvaW5kZXguanM/NjRkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLCBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UsIH0gZnJvbSBcIi4vYXN5bmNfbG9jYWxfc3RvcmFnZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSB9IGZyb20gXCIuL2FzeW5jX2xvY2FsX3N0b3JhZ2UvZ2xvYmFscy5qc1wiO1xuZXhwb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiwgTW9ja0FzeW5jTG9jYWxTdG9yYWdlLCB9O1xuZXhwb3J0IHsgX0NPTlRFWFRfVkFSSUFCTEVTX0tFWSB9O1xuIl0sIm5hbWVzIjpbIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJNb2NrQXN5bmNMb2NhbFN0b3JhZ2UiLCJfQ09OVEVYVF9WQVJJQUJMRVNfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/tracer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDefaultLangChainClientSingleton: () => (/* binding */ getDefaultLangChainClientSingleton),\n/* harmony export */   setDefaultLangChainClientSingleton: () => (/* binding */ setDefaultLangChainClientSingleton)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\nlet client;\nconst getDefaultLangChainClientSingleton = ()=>{\n    if (client === undefined) {\n        const clientParams = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") === \"false\" ? {\n            // LangSmith has its own backgrounding system\n            blockOnRootRunFinalization: true\n        } : {};\n        client = new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client(clientParams);\n    }\n    return client;\n};\nconst setDefaultLangChainClientSingleton = (newClient)=>{\n    client = newClient;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy90cmFjZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtQztBQUNzQjtBQUN6RCxJQUFJRTtBQUNHLE1BQU1DLHFDQUFxQztJQUM5QyxJQUFJRCxXQUFXRSxXQUFXO1FBQ3RCLE1BQU1DLGVBQWVKLHFFQUFzQkEsQ0FBQyxzQ0FBc0MsVUFDNUU7WUFDRSw2Q0FBNkM7WUFDN0NLLDRCQUE0QjtRQUNoQyxJQUNFLENBQUM7UUFDUEosU0FBUyxJQUFJRiw2Q0FBTUEsQ0FBQ0s7SUFDeEI7SUFDQSxPQUFPSDtBQUNYLEVBQUU7QUFDSyxNQUFNSyxxQ0FBcUMsQ0FBQ0M7SUFDL0NOLFNBQVNNO0FBQ2IsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL3RyYWNlci5qcz80MWMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5sZXQgY2xpZW50O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24gPSAoKSA9PiB7XG4gICAgaWYgKGNsaWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudFBhcmFtcyA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkRcIikgPT09IFwiZmFsc2VcIlxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgLy8gTGFuZ1NtaXRoIGhhcyBpdHMgb3duIGJhY2tncm91bmRpbmcgc3lzdGVtXG4gICAgICAgICAgICAgICAgYmxvY2tPblJvb3RSdW5GaW5hbGl6YXRpb246IHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBjbGllbnQgPSBuZXcgQ2xpZW50KGNsaWVudFBhcmFtcyk7XG4gICAgfVxuICAgIHJldHVybiBjbGllbnQ7XG59O1xuZXhwb3J0IGNvbnN0IHNldERlZmF1bHRMYW5nQ2hhaW5DbGllbnRTaW5nbGV0b24gPSAobmV3Q2xpZW50KSA9PiB7XG4gICAgY2xpZW50ID0gbmV3Q2xpZW50O1xufTtcbiJdLCJuYW1lcyI6WyJDbGllbnQiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiY2xpZW50IiwiZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiIsInVuZGVmaW5lZCIsImNsaWVudFBhcmFtcyIsImJsb2NrT25Sb290UnVuRmluYWxpemF0aW9uIiwic2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiIsIm5ld0NsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tools/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseToolkit: () => (/* binding */ BaseToolkit),\n/* harmony export */   DynamicStructuredTool: () => (/* binding */ DynamicStructuredTool),\n/* harmony export */   DynamicTool: () => (/* binding */ DynamicTool),\n/* harmony export */   StructuredTool: () => (/* binding */ StructuredTool),\n/* harmony export */   Tool: () => (/* binding */ Tool),\n/* harmony export */   ToolInputParsingException: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_5__.ToolInputParsingException),\n/* harmony export */   tool: () => (/* binding */ tool)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _language_models_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../language_models/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _messages_tool_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _utils_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/types/is_zod_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js\");\n\n\n\n\n\n\n\n\n\n/**\n * Base class for Tools that accept input of any shape defined by a Zod schema.\n */ class StructuredTool extends _language_models_base_js__WEBPACK_IMPORTED_MODULE_1__.BaseLangChain {\n    get lc_namespace() {\n        return [\n            \"langchain\",\n            \"tools\"\n        ];\n    }\n    constructor(fields){\n        super(fields ?? {});\n        /**\n         * Whether to return the tool's output directly.\n         *\n         * Setting this to true means that after the tool is called,\n         * an agent should stop looping.\n         */ Object.defineProperty(this, \"returnDirect\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"verboseParsingErrors\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        /**\n         * The tool response format.\n         *\n         * If \"content\" then the output of the tool is interpreted as the contents of a\n         * ToolMessage. If \"content_and_artifact\" then the output is expected to be a\n         * two-tuple corresponding to the (content, artifact) of a ToolMessage.\n         *\n         * @default \"content\"\n         */ Object.defineProperty(this, \"responseFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"content\"\n        });\n        this.verboseParsingErrors = fields?.verboseParsingErrors ?? this.verboseParsingErrors;\n        this.responseFormat = fields?.responseFormat ?? this.responseFormat;\n    }\n    /**\n     * Invokes the tool with the provided input and configuration.\n     * @param input The input for the tool.\n     * @param config Optional configuration for the tool.\n     * @returns A Promise that resolves with a string.\n     */ async invoke(input, config) {\n        let tool_call_id;\n        let toolInput;\n        let enrichedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(config);\n        if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__._isToolCall)(input)) {\n            tool_call_id = input.id;\n            toolInput = input.args;\n            enrichedConfig = {\n                ...enrichedConfig,\n                toolCall: input,\n                configurable: {\n                    ...enrichedConfig.configurable,\n                    tool_call_id\n                }\n            };\n        } else {\n            toolInput = input;\n        }\n        return this.call(toolInput, enrichedConfig);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Calls the tool with the provided argument, configuration, and tags. It\n     * parses the input according to the schema, handles any errors, and\n     * manages callbacks.\n     * @param arg The input argument for the tool.\n     * @param configArg Optional configuration or callbacks for the tool.\n     * @param tags Optional tags for the tool.\n     * @returns A Promise that resolves with a string.\n     */ async call(arg, configArg, /** @deprecated */ tags) {\n        let parsed;\n        try {\n            parsed = await this.schema.parseAsync(arg);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            let message = `Received tool input did not match expected schema`;\n            if (this.verboseParsingErrors) {\n                message = `${message}\\nDetails: ${e.message}`;\n            }\n            throw new _utils_js__WEBPACK_IMPORTED_MODULE_5__.ToolInputParsingException(message, JSON.stringify(arg));\n        }\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        const callbackManager_ = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config.callbacks, this.callbacks, config.tags || tags, this.tags, config.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const runManager = await callbackManager_?.handleToolStart(this.toJSON(), typeof parsed === \"string\" ? parsed : JSON.stringify(parsed), config.runId, undefined, undefined, undefined, config.runName);\n        delete config.runId;\n        let result;\n        try {\n            result = await this._call(parsed, runManager, config);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (e) {\n            await runManager?.handleToolError(e);\n            throw e;\n        }\n        let content;\n        let artifact;\n        if (this.responseFormat === \"content_and_artifact\") {\n            if (Array.isArray(result) && result.length === 2) {\n                [content, artifact] = result;\n            } else {\n                throw new Error(`Tool response format is \"content_and_artifact\" but the output was not a two-tuple.\\nResult: ${JSON.stringify(result)}`);\n            }\n        } else {\n            content = result;\n        }\n        let toolCallId;\n        if (config && \"configurable\" in config) {\n            toolCallId = config.configurable.tool_call_id;\n        }\n        const formattedOutput = _formatToolOutput({\n            content,\n            artifact,\n            toolCallId,\n            name: this.name\n        });\n        await runManager?.handleToolEnd(formattedOutput);\n        return formattedOutput;\n    }\n}\n/**\n * Base class for Tools that accept input as a string.\n */ class Tool extends StructuredTool {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: zod__WEBPACK_IMPORTED_MODULE_7__.z.object({\n                input: zod__WEBPACK_IMPORTED_MODULE_7__.z.string().optional()\n            }).transform((obj)=>obj.input)\n        });\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Calls the tool with the provided argument and callbacks. It handles\n     * string inputs specifically.\n     * @param arg The input argument for the tool, which can be a string, undefined, or an input of the tool's schema.\n     * @param callbacks Optional callbacks for the tool.\n     * @returns A Promise that resolves with a string.\n     */ call(arg, callbacks) {\n        return super.call(typeof arg === \"string\" || !arg ? {\n            input: arg\n        } : arg, callbacks);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and description.\n */ class DynamicTool extends Tool {\n    static lc_name() {\n        return \"DynamicTool\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     */ async call(arg, configArg) {\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        return super.call(arg, config);\n    }\n    /** @ignore */ async _call(input, runManager, parentConfig) {\n        return this.func(input, runManager, parentConfig);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and\n * description, designed to work with structured data. It extends the\n * StructuredTool class and overrides the _call method to execute the\n * provided function when the tool is called.\n *\n * Schema can be passed as Zod or JSON schema. The tool will not validate\n * input if JSON schema is passed.\n */ class DynamicStructuredTool extends StructuredTool {\n    static lc_name() {\n        return \"DynamicStructuredTool\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n        this.schema = (0,_utils_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_6__.isZodSchema)(fields.schema) ? fields.schema : zod__WEBPACK_IMPORTED_MODULE_7__.z.object({}).passthrough();\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     */ async call(arg, configArg, /** @deprecated */ tags) {\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        return super.call(arg, config, tags);\n    }\n    _call(arg, runManager, parentConfig) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.func(arg, runManager, parentConfig);\n    }\n}\n/**\n * Abstract base class for toolkits in LangChain. Toolkits are collections\n * of tools that agents can use. Subclasses must implement the `tools`\n * property to provide the specific tools for the toolkit.\n */ class BaseToolkit {\n    getTools() {\n        return this.tools;\n    }\n}\nfunction tool(func, fields) {\n    // If the schema is not provided, or it's a string schema, create a DynamicTool\n    if (!fields.schema || (0,_utils_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_6__.isZodSchema)(fields.schema) && (!(\"shape\" in fields.schema) || !fields.schema.shape)) {\n        return new DynamicTool({\n            ...fields,\n            description: fields.description ?? fields.schema?.description ?? `${fields.name} tool`,\n            func: async (input, runManager, config)=>{\n                return new Promise((resolve, reject)=>{\n                    const childConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.patchConfig)(config, {\n                        callbacks: runManager?.getChild()\n                    });\n                    void _singletons_index_js__WEBPACK_IMPORTED_MODULE_4__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                        try {\n                            // TS doesn't restrict the type here based on the guard above\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            resolve(func(input, childConfig));\n                        } catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n            }\n        });\n    }\n    const description = fields.description ?? fields.schema.description ?? `${fields.name} tool`;\n    return new DynamicStructuredTool({\n        ...fields,\n        description,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        schema: fields.schema,\n        // TODO: Consider moving into DynamicStructuredTool constructor\n        func: async (input, runManager, config)=>{\n            return new Promise((resolve, reject)=>{\n                const childConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.patchConfig)(config, {\n                    callbacks: runManager?.getChild()\n                });\n                void _singletons_index_js__WEBPACK_IMPORTED_MODULE_4__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.pickRunnableConfigKeys)(childConfig), async ()=>{\n                    try {\n                        // TS doesn't restrict the type here based on the guard above\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        resolve(func(input, childConfig));\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            });\n        }\n    });\n}\nfunction _formatToolOutput(params) {\n    const { content, artifact, toolCallId } = params;\n    if (toolCallId && !(0,_messages_tool_js__WEBPACK_IMPORTED_MODULE_3__.isDirectToolOutput)(content)) {\n        if (typeof content === \"string\" || Array.isArray(content) && content.every((item)=>typeof item === \"object\")) {\n            return new _messages_tool_js__WEBPACK_IMPORTED_MODULE_3__.ToolMessage({\n                content,\n                artifact,\n                tool_call_id: toolCallId,\n                name: params.name\n            });\n        } else {\n            return new _messages_tool_js__WEBPACK_IMPORTED_MODULE_3__.ToolMessage({\n                content: _stringify(content),\n                artifact,\n                tool_call_id: toolCallId,\n                name: params.name\n            });\n        }\n    } else {\n        return content;\n    }\n}\nfunction _stringify(content) {\n    try {\n        return JSON.stringify(content, null, 2);\n    } catch (_noOp) {\n        return `${content}`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQzJEO0FBQ3ZCO0FBQ2dDO0FBQ3RCO0FBQ007QUFDUjtBQUNOO0FBQ3pCO0FBQ3JDOztDQUVDLEdBQ00sTUFBTWEsdUJBQXVCVixtRUFBYUE7SUFDN0MsSUFBSVcsZUFBZTtRQUNmLE9BQU87WUFBQztZQUFhO1NBQVE7SUFDakM7SUFDQUMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0EsVUFBVSxDQUFDO1FBQ2pCOzs7OztTQUtDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx3QkFBd0I7WUFDaERDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBOzs7Ozs7OztTQVFDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLG9CQUFvQixHQUNyQlAsUUFBUU8sd0JBQXdCLElBQUksQ0FBQ0Esb0JBQW9CO1FBQzdELElBQUksQ0FBQ0MsY0FBYyxHQUFHUixRQUFRUSxrQkFBa0IsSUFBSSxDQUFDQSxjQUFjO0lBQ3ZFO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNQyxPQUFPQyxLQUFLLEVBQUVDLE1BQU0sRUFBRTtRQUN4QixJQUFJQztRQUNKLElBQUlDO1FBQ0osSUFBSUMsaUJBQWlCMUIsa0VBQVlBLENBQUN1QjtRQUNsQyxJQUFJakIsc0RBQVdBLENBQUNnQixRQUFRO1lBQ3BCRSxlQUFlRixNQUFNSyxFQUFFO1lBQ3ZCRixZQUFZSCxNQUFN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RUssVUFBVSxFQUFFLEdBQUc4QjtJQUMxQyxJQUFJOUIsY0FBYyxDQUFDMUQscUVBQWtCQSxDQUFDb0QsVUFBVTtRQUM1QyxJQUFJLE9BQU9BLFlBQVksWUFDbEJFLE1BQU1DLE9BQU8sQ0FBQ0gsWUFDWEEsUUFBUXFDLEtBQUssQ0FBQyxDQUFDQyxPQUFTLE9BQU9BLFNBQVMsV0FBWTtZQUN4RCxPQUFPLElBQUl6RiwwREFBV0EsQ0FBQztnQkFDbkJtRDtnQkFDQUM7Z0JBQ0FoQyxjQUFjcUM7Z0JBQ2RHLE1BQU0yQixPQUFPM0IsSUFBSTtZQUNyQjtRQUNKLE9BQ0s7WUFDRCxPQUFPLElBQUk1RCwwREFBV0EsQ0FBQztnQkFDbkJtRCxTQUFTdUMsV0FBV3ZDO2dCQUNwQkM7Z0JBQ0FoQyxjQUFjcUM7Z0JBQ2RHLE1BQU0yQixPQUFPM0IsSUFBSTtZQUNyQjtRQUNKO0lBQ0osT0FDSztRQUNELE9BQU9UO0lBQ1g7QUFDSjtBQUNBLFNBQVN1QyxXQUFXdkMsT0FBTztJQUN2QixJQUFJO1FBQ0EsT0FBT2hCLEtBQUtDLFNBQVMsQ0FBQ2UsU0FBUyxNQUFNO0lBQ3pDLEVBQ0EsT0FBT3dDLE9BQU87UUFDVixPQUFPLENBQUMsRUFBRXhDLFFBQVEsQ0FBQztJQUN2QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Rvb2xzL2luZGV4LmpzP2IxODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgcGFyc2VDYWxsYmFja0NvbmZpZ0FyZywgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5nQ2hhaW4sIH0gZnJvbSBcIi4uL2xhbmd1YWdlX21vZGVscy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBlbnN1cmVDb25maWcsIHBhdGNoQ29uZmlnLCBwaWNrUnVubmFibGVDb25maWdLZXlzLCB9IGZyb20gXCIuLi9ydW5uYWJsZXMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBpc0RpcmVjdFRvb2xPdXRwdXQsIFRvb2xNZXNzYWdlIH0gZnJvbSBcIi4uL21lc3NhZ2VzL3Rvb2wuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgX2lzVG9vbENhbGwsIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgaXNab2RTY2hlbWEgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvaXNfem9kX3NjaGVtYS5qc1wiO1xuZXhwb3J0IHsgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiB9O1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBUb29scyB0aGF0IGFjY2VwdCBpbnB1dCBvZiBhbnkgc2hhcGUgZGVmaW5lZCBieSBhIFpvZCBzY2hlbWEuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJ1Y3R1cmVkVG9vbCBleHRlbmRzIEJhc2VMYW5nQ2hhaW4ge1xuICAgIGdldCBsY19uYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiBbXCJsYW5nY2hhaW5cIiwgXCJ0b29sc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHJldHVybiB0aGUgdG9vbCdzIG91dHB1dCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogU2V0dGluZyB0aGlzIHRvIHRydWUgbWVhbnMgdGhhdCBhZnRlciB0aGUgdG9vbCBpcyBjYWxsZWQsXG4gICAgICAgICAqIGFuIGFnZW50IHNob3VsZCBzdG9wIGxvb3BpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXR1cm5EaXJlY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJib3NlUGFyc2luZ0Vycm9yc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdG9vbCByZXNwb25zZSBmb3JtYXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIFwiY29udGVudFwiIHRoZW4gdGhlIG91dHB1dCBvZiB0aGUgdG9vbCBpcyBpbnRlcnByZXRlZCBhcyB0aGUgY29udGVudHMgb2YgYVxuICAgICAgICAgKiBUb29sTWVzc2FnZS4gSWYgXCJjb250ZW50X2FuZF9hcnRpZmFjdFwiIHRoZW4gdGhlIG91dHB1dCBpcyBleHBlY3RlZCB0byBiZSBhXG4gICAgICAgICAqIHR3by10dXBsZSBjb3JyZXNwb25kaW5nIHRvIHRoZSAoY29udGVudCwgYXJ0aWZhY3QpIG9mIGEgVG9vbE1lc3NhZ2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZWZhdWx0IFwiY29udGVudFwiXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXNwb25zZUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjb250ZW50XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmVyYm9zZVBhcnNpbmdFcnJvcnMgPVxuICAgICAgICAgICAgZmllbGRzPy52ZXJib3NlUGFyc2luZ0Vycm9ycyA/PyB0aGlzLnZlcmJvc2VQYXJzaW5nRXJyb3JzO1xuICAgICAgICB0aGlzLnJlc3BvbnNlRm9ybWF0ID0gZmllbGRzPy5yZXNwb25zZUZvcm1hdCA/PyB0aGlzLnJlc3BvbnNlRm9ybWF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSB0b29sIHdpdGggdGhlIHByb3ZpZGVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSB0b29sLlxuICAgICAqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICBsZXQgdG9vbF9jYWxsX2lkO1xuICAgICAgICBsZXQgdG9vbElucHV0O1xuICAgICAgICBsZXQgZW5yaWNoZWRDb25maWcgPSBlbnN1cmVDb25maWcoY29uZmlnKTtcbiAgICAgICAgaWYgKF9pc1Rvb2xDYWxsKGlucHV0KSkge1xuICAgICAgICAgICAgdG9vbF9jYWxsX2lkID0gaW5wdXQuaWQ7XG4gICAgICAgICAgICB0b29sSW5wdXQgPSBpbnB1dC5hcmdzO1xuICAgICAgICAgICAgZW5yaWNoZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4uZW5yaWNoZWRDb25maWcsXG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGlucHV0LFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZToge1xuICAgICAgICAgICAgICAgICAgICAuLi5lbnJpY2hlZENvbmZpZy5jb25maWd1cmFibGUsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvb2xJbnB1dCA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwodG9vbElucHV0LCBlbnJpY2hlZENvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMy4wLlxuICAgICAqXG4gICAgICogQ2FsbHMgdGhlIHRvb2wgd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnQsIGNvbmZpZ3VyYXRpb24sIGFuZCB0YWdzLiBJdFxuICAgICAqIHBhcnNlcyB0aGUgaW5wdXQgYWNjb3JkaW5nIHRvIHRoZSBzY2hlbWEsIGhhbmRsZXMgYW55IGVycm9ycywgYW5kXG4gICAgICogbWFuYWdlcyBjYWxsYmFja3MuXG4gICAgICogQHBhcmFtIGFyZyBUaGUgaW5wdXQgYXJndW1lbnQgZm9yIHRoZSB0b29sLlxuICAgICAqIEBwYXJhbSBjb25maWdBcmcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvciBjYWxsYmFja3MgZm9yIHRoZSB0b29sLlxuICAgICAqIEBwYXJhbSB0YWdzIE9wdGlvbmFsIHRhZ3MgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzdHJpbmcuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbChhcmcsIGNvbmZpZ0FyZywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgdGFncykge1xuICAgICAgICBsZXQgcGFyc2VkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkID0gYXdhaXQgdGhpcy5zY2hlbWEucGFyc2VBc3luYyhhcmcpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBgUmVjZWl2ZWQgdG9vbCBpbnB1dCBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIHNjaGVtYWA7XG4gICAgICAgICAgICBpZiAodGhpcy52ZXJib3NlUGFyc2luZ0Vycm9ycykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfVxcbkRldGFpbHM6ICR7ZS5tZXNzYWdlfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbihtZXNzYWdlLCBKU09OLnN0cmluZ2lmeShhcmcpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGNvbmZpZ0FyZyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBjb25maWcudGFncyB8fCB0YWdzLCB0aGlzLnRhZ3MsIGNvbmZpZy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVUb29sU3RhcnQodGhpcy50b0pTT04oKSwgdHlwZW9mIHBhcnNlZCA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlZCA6IEpTT04uc3RyaW5naWZ5KHBhcnNlZCksIGNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnLnJ1bk5hbWUpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FsbChwYXJzZWQsIHJ1bk1hbmFnZXIsIGNvbmZpZyk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVUb29sRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb250ZW50O1xuICAgICAgICBsZXQgYXJ0aWZhY3Q7XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlRm9ybWF0ID09PSBcImNvbnRlbnRfYW5kX2FydGlmYWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkgJiYgcmVzdWx0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIFtjb250ZW50LCBhcnRpZmFjdF0gPSByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRvb2wgcmVzcG9uc2UgZm9ybWF0IGlzIFwiY29udGVudF9hbmRfYXJ0aWZhY3RcIiBidXQgdGhlIG91dHB1dCB3YXMgbm90IGEgdHdvLXR1cGxlLlxcblJlc3VsdDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGVudCA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdG9vbENhbGxJZDtcbiAgICAgICAgaWYgKGNvbmZpZyAmJiBcImNvbmZpZ3VyYWJsZVwiIGluIGNvbmZpZykge1xuICAgICAgICAgICAgdG9vbENhbGxJZCA9IGNvbmZpZy5jb25maWd1cmFibGVcbiAgICAgICAgICAgICAgICAudG9vbF9jYWxsX2lkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE91dHB1dCA9IF9mb3JtYXRUb29sT3V0cHV0KHtcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBhcnRpZmFjdCxcbiAgICAgICAgICAgIHRvb2xDYWxsSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVUb29sRW5kKGZvcm1hdHRlZE91dHB1dCk7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWRPdXRwdXQ7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBUb29scyB0aGF0IGFjY2VwdCBpbnB1dCBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2wgZXh0ZW5kcyBTdHJ1Y3R1cmVkVG9vbCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogelxuICAgICAgICAgICAgICAgIC5vYmplY3QoeyBpbnB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pXG4gICAgICAgICAgICAgICAgLnRyYW5zZm9ybSgob2JqKSA9PiBvYmouaW5wdXQpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjMuMC5cbiAgICAgKlxuICAgICAqIENhbGxzIHRoZSB0b29sIHdpdGggdGhlIHByb3ZpZGVkIGFyZ3VtZW50IGFuZCBjYWxsYmFja3MuIEl0IGhhbmRsZXNcbiAgICAgKiBzdHJpbmcgaW5wdXRzIHNwZWNpZmljYWxseS5cbiAgICAgKiBAcGFyYW0gYXJnIFRoZSBpbnB1dCBhcmd1bWVudCBmb3IgdGhlIHRvb2wsIHdoaWNoIGNhbiBiZSBhIHN0cmluZywgdW5kZWZpbmVkLCBvciBhbiBpbnB1dCBvZiB0aGUgdG9vbCdzIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIE9wdGlvbmFsIGNhbGxiYWNrcyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBjYWxsKGFyZywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jYWxsKHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgfHwgIWFyZyA/IHsgaW5wdXQ6IGFyZyB9IDogYXJnLCBjYWxsYmFja3MpO1xuICAgIH1cbn1cbi8qKlxuICogQSB0b29sIHRoYXQgY2FuIGJlIGNyZWF0ZWQgZHluYW1pY2FsbHkgZnJvbSBhIGZ1bmN0aW9uLCBuYW1lLCBhbmQgZGVzY3JpcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBEeW5hbWljVG9vbCBleHRlbmRzIFRvb2wge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJEeW5hbWljVG9vbFwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZXNjcmlwdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmdW5jXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICAgICAgdGhpcy5yZXR1cm5EaXJlY3QgPSBmaWVsZHMucmV0dXJuRGlyZWN0ID8/IHRoaXMucmV0dXJuRGlyZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjMuMC5cbiAgICAgKi9cbiAgICBhc3luYyBjYWxsKGFyZywgY29uZmlnQXJnKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoY29uZmlnQXJnKTtcbiAgICAgICAgaWYgKGNvbmZpZy5ydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5ydW5OYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5jYWxsKGFyZywgY29uZmlnKTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfY2FsbChpbnB1dCwgcnVuTWFuYWdlciwgcGFyZW50Q29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZ1bmMoaW5wdXQsIHJ1bk1hbmFnZXIsIHBhcmVudENvbmZpZyk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHRvb2wgdGhhdCBjYW4gYmUgY3JlYXRlZCBkeW5hbWljYWxseSBmcm9tIGEgZnVuY3Rpb24sIG5hbWUsIGFuZFxuICogZGVzY3JpcHRpb24sIGRlc2lnbmVkIHRvIHdvcmsgd2l0aCBzdHJ1Y3R1cmVkIGRhdGEuIEl0IGV4dGVuZHMgdGhlXG4gKiBTdHJ1Y3R1cmVkVG9vbCBjbGFzcyBhbmQgb3ZlcnJpZGVzIHRoZSBfY2FsbCBtZXRob2QgdG8gZXhlY3V0ZSB0aGVcbiAqIHByb3ZpZGVkIGZ1bmN0aW9uIHdoZW4gdGhlIHRvb2wgaXMgY2FsbGVkLlxuICpcbiAqIFNjaGVtYSBjYW4gYmUgcGFzc2VkIGFzIFpvZCBvciBKU09OIHNjaGVtYS4gVGhlIHRvb2wgd2lsbCBub3QgdmFsaWRhdGVcbiAqIGlucHV0IGlmIEpTT04gc2NoZW1hIGlzIHBhc3NlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIER5bmFtaWNTdHJ1Y3R1cmVkVG9vbCBleHRlbmRzIFN0cnVjdHVyZWRUb29sIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRHluYW1pY1N0cnVjdHVyZWRUb29sXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlc2NyaXB0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICAgICAgdGhpcy5yZXR1cm5EaXJlY3QgPSBmaWVsZHMucmV0dXJuRGlyZWN0ID8/IHRoaXMucmV0dXJuRGlyZWN0O1xuICAgICAgICB0aGlzLnNjaGVtYSA9IChpc1pvZFNjaGVtYShmaWVsZHMuc2NoZW1hKSA/IGZpZWxkcy5zY2hlbWEgOiB6Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMy4wLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGwoYXJnLCBjb25maWdBcmcsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHRhZ3MpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyhjb25maWdBcmcpO1xuICAgICAgICBpZiAoY29uZmlnLnJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uZmlnLnJ1bk5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmNhbGwoYXJnLCBjb25maWcsIHRhZ3MpO1xuICAgIH1cbiAgICBfY2FsbChhcmcsIHJ1bk1hbmFnZXIsIHBhcmVudENvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gdGhpcy5mdW5jKGFyZywgcnVuTWFuYWdlciwgcGFyZW50Q29uZmlnKTtcbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHRvb2xraXRzIGluIExhbmdDaGFpbi4gVG9vbGtpdHMgYXJlIGNvbGxlY3Rpb25zXG4gKiBvZiB0b29scyB0aGF0IGFnZW50cyBjYW4gdXNlLiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IHRoZSBgdG9vbHNgXG4gKiBwcm9wZXJ0eSB0byBwcm92aWRlIHRoZSBzcGVjaWZpYyB0b29scyBmb3IgdGhlIHRvb2xraXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlVG9vbGtpdCB7XG4gICAgZ2V0VG9vbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvb2xzO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0b29sKGZ1bmMsIGZpZWxkcykge1xuICAgIC8vIElmIHRoZSBzY2hlbWEgaXMgbm90IHByb3ZpZGVkLCBvciBpdCdzIGEgc3RyaW5nIHNjaGVtYSwgY3JlYXRlIGEgRHluYW1pY1Rvb2xcbiAgICBpZiAoIWZpZWxkcy5zY2hlbWEgfHxcbiAgICAgICAgKGlzWm9kU2NoZW1hKGZpZWxkcy5zY2hlbWEpICYmXG4gICAgICAgICAgICAoIShcInNoYXBlXCIgaW4gZmllbGRzLnNjaGVtYSkgfHwgIWZpZWxkcy5zY2hlbWEuc2hhcGUpKSkge1xuICAgICAgICByZXR1cm4gbmV3IER5bmFtaWNUb29sKHtcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmaWVsZHMuZGVzY3JpcHRpb24gPz9cbiAgICAgICAgICAgICAgICBmaWVsZHMuc2NoZW1hPy5kZXNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIGAke2ZpZWxkcy5uYW1lfSB0b29sYCxcbiAgICAgICAgICAgIGZ1bmM6IGFzeW5jIChpbnB1dCwgcnVuTWFuYWdlciwgY29uZmlnKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMoY2hpbGRDb25maWcpLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRTIGRvZXNuJ3QgcmVzdHJpY3QgdGhlIHR5cGUgaGVyZSBiYXNlZCBvbiB0aGUgZ3VhcmQgYWJvdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZnVuYyhpbnB1dCwgY2hpbGRDb25maWcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbiA/PyBmaWVsZHMuc2NoZW1hLmRlc2NyaXB0aW9uID8/IGAke2ZpZWxkcy5uYW1lfSB0b29sYDtcbiAgICByZXR1cm4gbmV3IER5bmFtaWNTdHJ1Y3R1cmVkVG9vbCh7XG4gICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHNjaGVtYTogZmllbGRzLnNjaGVtYSxcbiAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgbW92aW5nIGludG8gRHluYW1pY1N0cnVjdHVyZWRUb29sIGNvbnN0cnVjdG9yXG4gICAgICAgIGZ1bmM6IGFzeW5jIChpbnB1dCwgcnVuTWFuYWdlciwgY29uZmlnKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2b2lkIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhwaWNrUnVubmFibGVDb25maWdLZXlzKGNoaWxkQ29uZmlnKSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFMgZG9lc24ndCByZXN0cmljdCB0aGUgdHlwZSBoZXJlIGJhc2VkIG9uIHRoZSBndWFyZCBhYm92ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZnVuYyhpbnB1dCwgY2hpbGRDb25maWcpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIF9mb3JtYXRUb29sT3V0cHV0KHBhcmFtcykge1xuICAgIGNvbnN0IHsgY29udGVudCwgYXJ0aWZhY3QsIHRvb2xDYWxsSWQgfSA9IHBhcmFtcztcbiAgICBpZiAodG9vbENhbGxJZCAmJiAhaXNEaXJlY3RUb29sT3V0cHV0KGNvbnRlbnQpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkoY29udGVudCkgJiZcbiAgICAgICAgICAgICAgICBjb250ZW50LmV2ZXJ5KChpdGVtKSA9PiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgIGFydGlmYWN0LFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJhbXMubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgY29udGVudDogX3N0cmluZ2lmeShjb250ZW50KSxcbiAgICAgICAgICAgICAgICBhcnRpZmFjdCxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgbmFtZTogcGFyYW1zLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gX3N0cmluZ2lmeShjb250ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbnRlbnQsIG51bGwsIDIpO1xuICAgIH1cbiAgICBjYXRjaCAoX25vT3ApIHtcbiAgICAgICAgcmV0dXJuIGAke2NvbnRlbnR9YDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsieiIsIkNhbGxiYWNrTWFuYWdlciIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJCYXNlTGFuZ0NoYWluIiwiZW5zdXJlQ29uZmlnIiwicGF0Y2hDb25maWciLCJwaWNrUnVubmFibGVDb25maWdLZXlzIiwiaXNEaXJlY3RUb29sT3V0cHV0IiwiVG9vbE1lc3NhZ2UiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiX2lzVG9vbENhbGwiLCJUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uIiwiaXNab2RTY2hlbWEiLCJTdHJ1Y3R1cmVkVG9vbCIsImxjX25hbWVzcGFjZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInZlcmJvc2VQYXJzaW5nRXJyb3JzIiwicmVzcG9uc2VGb3JtYXQiLCJpbnZva2UiLCJpbnB1dCIsImNvbmZpZyIsInRvb2xfY2FsbF9pZCIsInRvb2xJbnB1dCIsImVucmljaGVkQ29uZmlnIiwiaWQiLCJhcmdzIiwidG9vbENhbGwiLCJjYWxsIiwiYXJnIiwiY29uZmlnQXJnIiwidGFncyIsInBhcnNlZCIsInNjaGVtYSIsInBhcnNlQXN5bmMiLCJlIiwibWVzc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYWxsYmFja01hbmFnZXJfIiwiY29uZmlndXJlIiwiY2FsbGJhY2tzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwicnVuTWFuYWdlciIsImhhbmRsZVRvb2xTdGFydCIsInRvSlNPTiIsInJ1bklkIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsInJlc3VsdCIsIl9jYWxsIiwiaGFuZGxlVG9vbEVycm9yIiwiY29udGVudCIsImFydGlmYWN0IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiRXJyb3IiLCJ0b29sQ2FsbElkIiwiZm9ybWF0dGVkT3V0cHV0IiwiX2Zvcm1hdFRvb2xPdXRwdXQiLCJuYW1lIiwiaGFuZGxlVG9vbEVuZCIsIlRvb2wiLCJvYmplY3QiLCJzdHJpbmciLCJvcHRpb25hbCIsInRyYW5zZm9ybSIsIm9iaiIsIkR5bmFtaWNUb29sIiwibGNfbmFtZSIsImRlc2NyaXB0aW9uIiwiZnVuYyIsInJldHVybkRpcmVjdCIsInBhcmVudENvbmZpZyIsIkR5bmFtaWNTdHJ1Y3R1cmVkVG9vbCIsInBhc3N0aHJvdWdoIiwiQmFzZVRvb2xraXQiLCJnZXRUb29scyIsInRvb2xzIiwidG9vbCIsInNoYXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjaGlsZENvbmZpZyIsImdldENoaWxkIiwicnVuV2l0aENvbmZpZyIsInBhcmFtcyIsImV2ZXJ5IiwiaXRlbSIsIl9zdHJpbmdpZnkiLCJfbm9PcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tools/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tools/utils.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools/utils.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolInputParsingException: () => (/* binding */ ToolInputParsingException),\n/* harmony export */   _isToolCall: () => (/* binding */ _isToolCall)\n/* harmony export */ });\nfunction _isToolCall(toolCall) {\n    return !!(toolCall && typeof toolCall === \"object\" && \"type\" in toolCall && toolCall.type === \"tool_call\");\n}\n/**\n * Custom error class used to handle exceptions related to tool input parsing.\n * It extends the built-in `Error` class and adds an optional `output`\n * property that can hold the output that caused the exception.\n */ class ToolInputParsingException extends Error {\n    constructor(message, output){\n        super(message);\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.output = output;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxTQUFTQSxZQUFZQyxRQUFRO0lBQ2hDLE9BQU8sQ0FBQyxDQUFFQSxDQUFBQSxZQUNOLE9BQU9BLGFBQWEsWUFDcEIsVUFBVUEsWUFDVkEsU0FBU0MsSUFBSSxLQUFLLFdBQVU7QUFDcEM7QUFDQTs7OztDQUlDLEdBQ00sTUFBTUMsa0NBQWtDQztJQUMzQ0MsWUFBWUMsT0FBTyxFQUFFQyxNQUFNLENBQUU7UUFDekIsS0FBSyxDQUFDRDtRQUNORSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ04sTUFBTSxHQUFHQTtJQUNsQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Rvb2xzL3V0aWxzLmpzP2U5NDkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIF9pc1Rvb2xDYWxsKHRvb2xDYWxsKSB7XG4gICAgcmV0dXJuICEhKHRvb2xDYWxsICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcInR5cGVcIiBpbiB0b29sQ2FsbCAmJlxuICAgICAgICB0b29sQ2FsbC50eXBlID09PSBcInRvb2xfY2FsbFwiKTtcbn1cbi8qKlxuICogQ3VzdG9tIGVycm9yIGNsYXNzIHVzZWQgdG8gaGFuZGxlIGV4Y2VwdGlvbnMgcmVsYXRlZCB0byB0b29sIGlucHV0IHBhcnNpbmcuXG4gKiBJdCBleHRlbmRzIHRoZSBidWlsdC1pbiBgRXJyb3JgIGNsYXNzIGFuZCBhZGRzIGFuIG9wdGlvbmFsIGBvdXRwdXRgXG4gKiBwcm9wZXJ0eSB0aGF0IGNhbiBob2xkIHRoZSBvdXRwdXQgdGhhdCBjYXVzZWQgdGhlIGV4Y2VwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3V0cHV0KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIl9pc1Rvb2xDYWxsIiwidG9vbENhbGwiLCJ0eXBlIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3V0cHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tools/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer),\n/* harmony export */   isBaseTracer: () => (/* binding */ isBaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId, executionOrder) {\n    const paddedOrder = executionOrder.toFixed(0).slice(0, 3).padStart(3, \"0\");\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}${paddedOrder}Z`) + runId;\n}\nfunction isBaseTracer(x) {\n    return typeof x._addRunToRunMap === \"function\";\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    _addRunToRunMap(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id, run.execution_order);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        return storedRun;\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    /**\n     * Create and add a run to the run map for LLM start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chat model start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId, _parentRunId, _tags, extraParams) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        run.extra = {\n            ...run.extra,\n            ...extraParams\n        };\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId, _parentRunId, _tags, extraParams) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        run.extra = {\n            ...run.extra,\n            ...extraParams\n        };\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chain start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name);\n        await this.onRunCreate?.(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for tool start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    /**\n     * Create and add a run to the run map for retriever start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0RDtBQUM1RCw4REFBOEQ7QUFDOUQsU0FBU0MsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQ3BDLE9BQU9ELFNBQVMsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUFVLE9BQU9BLFVBQVUsV0FDcERBLFFBQ0E7UUFBRSxDQUFDQyxXQUFXLEVBQUVEO0lBQU07QUFDaEM7QUFDQSxTQUFTSSxxQkFBcUJDLEtBQUs7SUFDL0IsT0FBT0EsTUFBTUMsT0FBTyxDQUFDLFVBQVU7QUFDbkM7QUFDQSxTQUFTQywyQkFBMkJDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxjQUFjO0lBQzVELE1BQU1DLGNBQWNELGVBQWVFLE9BQU8sQ0FBQyxHQUFHQyxLQUFLLENBQUMsR0FBRyxHQUFHQyxRQUFRLENBQUMsR0FBRztJQUN0RSxPQUFRVixxQkFBcUIsQ0FBQyxFQUFFLElBQUlXLEtBQUtQLE9BQU9RLFdBQVcsR0FBR0gsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUVGLFlBQVksQ0FBQyxDQUFDLElBQUlGO0FBQ25HO0FBQ08sU0FBU1EsYUFBYUMsQ0FBQztJQUMxQixPQUFPLE9BQU9BLEVBQUVDLGVBQWUsS0FBSztBQUN4QztBQUNPLE1BQU1DLG1CQUFtQnRCLG1FQUFtQkE7SUFDL0N1QixZQUFZQyxPQUFPLENBQUU7UUFDakIsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1Y1QixPQUFPLElBQUk2QjtRQUNmO0lBQ0o7SUFDQUMsT0FBTztRQUNILE9BQU8sSUFBSTtJQUNmO0lBQ0FDLGVBQWVDLEtBQUssRUFBRTtRQUNsQix1REFBdUQ7UUFDdkQsSUFBSUEsaUJBQWlCQyxPQUFPO1lBQ3hCLE9BQU9ELE1BQU1FLE9BQU8sR0FB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NUIsSUFBSSxDQUFDZ0MsT0FBT0EsS0FBS3FDLGFBQWEsU0FBUztZQUNuQztRQUNKO1FBQ0FyQyxJQUFJa0MsTUFBTSxDQUFDbkMsSUFBSSxDQUFDO1lBQ1o4QixNQUFNO1lBQ05NLE1BQU0sSUFBSTdELE9BQU9DLFdBQVc7WUFDNUJxRixRQUFRO2dCQUFFOEI7WUFBSztRQUNuQjtRQUNBLE1BQU0sSUFBSSxDQUFDQyxNQUFNLEdBQUczRjtJQUN4QjtJQUNBLE1BQU00RixrQkFBa0JDLEtBQUssRUFBRUMsR0FBRyxFQUFFOUgsS0FBSyxFQUFFK0UsWUFBWSxFQUFFQyxLQUFLLEVBQUUrQyxNQUFNLEVBQUU7UUFDcEUsTUFBTS9GLE1BQU0sSUFBSSxDQUFDUSxNQUFNLENBQUNDLEdBQUcsQ0FBQ3pDO1FBQzVCLElBQUksQ0FBQ2dDLE9BQU9BLEtBQUtxQyxhQUFhLE9BQU87WUFDakMsTUFBTSxJQUFJN0MsTUFBTSxDQUFDLHlEQUF5RCxDQUFDO1FBQy9FO1FBQ0FRLElBQUlrQyxNQUFNLENBQUNuQyxJQUFJLENBQUM7WUFDWjhCLE1BQU07WUFDTk0sTUFBTSxJQUFJN0QsT0FBT0MsV0FBVztZQUM1QnFGLFFBQVE7Z0JBQUVpQztnQkFBT0M7Z0JBQUtFLE9BQU9ELFFBQVFDO1lBQU07UUFDL0M7UUFDQSxNQUFNLElBQUksQ0FBQ0MsYUFBYSxHQUFHakcsS0FBSzZGLE9BQU87WUFBRUcsT0FBT0QsUUFBUUM7UUFBTTtRQUM5RCxPQUFPaEc7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcz8xZmZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkLCBleGVjdXRpb25PcmRlcikge1xuICAgIGNvbnN0IHBhZGRlZE9yZGVyID0gZXhlY3V0aW9uT3JkZXIudG9GaXhlZCgwKS5zbGljZSgwLCAzKS5wYWRTdGFydCgzLCBcIjBcIik7XG4gICAgcmV0dXJuIChzdHJpcE5vbkFscGhhbnVtZXJpYyhgJHtuZXcgRGF0ZShlcG9jaCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSl9JHtwYWRkZWRPcmRlcn1aYCkgKyBydW5JZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlVHJhY2VyKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHguX2FkZFJ1blRvUnVuTWFwID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgY2xhc3MgQmFzZVRyYWNlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKF9maWVsZHMpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdHJpbmdpZnlFcnJvcihlcnJvcikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSArIChlcnJvcj8uc3RhY2sgPyBgXFxuXFxuJHtlcnJvci5zdGFja31gIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtlcnJvcn1gO1xuICAgIH1cbiAgICBfYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBjaGlsZFJ1bikge1xuICAgICAgICBwYXJlbnRSdW4uY2hpbGRfcnVucy5wdXNoKGNoaWxkUnVuKTtcbiAgICB9XG4gICAgX2FkZFJ1blRvUnVuTWFwKHJ1bikge1xuICAgICAgICBjb25zdCBjdXJyZW50RG90dGVkT3JkZXIgPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChydW4uc3RhcnRfdGltZSwgcnVuLmlkLCBydW4uZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgY29uc3Qgc3RvcmVkUnVuID0geyAuLi5ydW4gfTtcbiAgICAgICAgaWYgKHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHRoaXMucnVuTWFwLmdldChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBzdG9yZWRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBwYXJlbnRSdW4udHJhY2VfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREb3R0ZWRPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gaGFzIG5vIGRvdHRlZCBvcmRlci5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAvLyAgIGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBub3QgZm91bmQuYFxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBzdG9yZWRSdW4uaWQ7XG4gICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gY3VycmVudERvdHRlZE9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLnNldChzdG9yZWRSdW4uaWQsIHN0b3JlZFJ1bik7XG4gICAgICAgIHJldHVybiBzdG9yZWRSdW47XG4gICAgfVxuICAgIGFzeW5jIF9lbmRUcmFjZShydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgocGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciwgcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RSdW4ocnVuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG4gICAgfVxuICAgIF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBwYXJlbnRSdW5JZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChwYXJlbnRSdW5JZCk7XG4gICAgICAgIC8vIElmIGEgcnVuIGhhcyBubyBwYXJlbnQgdGhlbiBleGVjdXRpb24gb3JkZXIgaXMgMVxuICAgICAgICBpZiAoIXBhcmVudFJ1bikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgTExNIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGFcbiAgICAgICAgICAgID8geyAuLi5leHRyYVBhcmFtcywgbWV0YWRhdGEgfVxuICAgICAgICAgICAgOiBleHRyYVBhcmFtcztcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBsbG0uaWRbbGxtLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcHJvbXB0cyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciBjaGF0IG1vZGVsIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IG1lc3NhZ2VzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0LCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZXh0cmFQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gb3V0cHV0O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bi5leHRyYSA9IHsgLi4ucnVuLmV4dHJhLCAuLi5leHRyYVBhcmFtcyB9O1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyb3IsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBleHRyYVBhcmFtcykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBydW4uZXh0cmEgPSB7IC4uLnJ1bi5leHRyYSwgLi4uZXh0cmFQYXJhbXMgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBhZGQgYSBydW4gdG8gdGhlIHJ1biBtYXAgZm9yIGNoYWluIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gY2hhaW4uaWRbY2hhaW4uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBjaGFpbixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzLFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogcnVuVHlwZSA/PyBcImNoYWluXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZFJ1blRvUnVuTWFwKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIHJ1blR5cGUsIG5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXRzLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGt3YXJncz8uaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnJvciwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1bikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciB0b29sIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gdG9vbC5pZFt0b29sLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogdG9vbCxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IGlucHV0IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCkgPz9cbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbFN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgb3V0cHV0IH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbEVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZ2VudFJ1biA9IHJ1bjtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucyA9IGFnZW50UnVuLmFjdGlvbnMgfHwgW107XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMucHVzaChhY3Rpb24pO1xuICAgICAgICBhZ2VudFJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImFnZW50X2FjdGlvblwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IGFjdGlvbiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50QWN0aW9uPy4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9lbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEVuZD8uKHJ1bik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciByZXRyaWV2ZXIgc3RhcnQgZXZlbnRzLlxuICAgICAqIFRoaXMgbXVzdCBzb21ldGltZXMgYmUgZG9uZSBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAqIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQsIHNvIHdlIGV4cG9zZSBpdCBhcyBhIHNlcGFyYXRlIG1ldGhvZCBoZXJlLlxuICAgICAqL1xuICAgIF9jcmVhdGVSdW5Gb3JSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gcmV0cmlldmVyLmlkW3JldHJpZXZlci5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHJldHJpZXZlcixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IHF1ZXJ5IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInJldHJpZXZlclwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCkgPz9cbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlclN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cywgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IGRvY3VtZW50cyB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcInRleHRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0ZXh0IH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVGV4dD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFwicnVuSWRcIiBwcm92aWRlZCB0byBcImhhbmRsZUxMTU5ld1Rva2VuXCIgY2FsbGJhY2suYCk7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwibmV3X3Rva2VuXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgdG9rZW4sIGlkeCwgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1OZXdUb2tlbj8uKHJ1biwgdG9rZW4sIHsgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSk7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJfY29lcmNlVG9EaWN0IiwidmFsdWUiLCJkZWZhdWx0S2V5IiwiQXJyYXkiLCJpc0FycmF5Iiwic3RyaXBOb25BbHBoYW51bWVyaWMiLCJpbnB1dCIsInJlcGxhY2UiLCJjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdCIsImVwb2NoIiwicnVuSWQiLCJleGVjdXRpb25PcmRlciIsInBhZGRlZE9yZGVyIiwidG9GaXhlZCIsInNsaWNlIiwicGFkU3RhcnQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpc0Jhc2VUcmFjZXIiLCJ4IiwiX2FkZFJ1blRvUnVuTWFwIiwiQmFzZVRyYWNlciIsImNvbnN0cnVjdG9yIiwiX2ZpZWxkcyIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiTWFwIiwiY29weSIsInN0cmluZ2lmeUVycm9yIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsIl9hZGRDaGlsZFJ1biIsInBhcmVudFJ1biIsImNoaWxkUnVuIiwiY2hpbGRfcnVucyIsInB1c2giLCJydW4iLCJjdXJyZW50RG90dGVkT3JkZXIiLCJzdGFydF90aW1lIiwiaWQiLCJleGVjdXRpb25fb3JkZXIiLCJzdG9yZWRSdW4iLCJwYXJlbnRfcnVuX2lkIiwidW5kZWZpbmVkIiwicnVuTWFwIiwiZ2V0IiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwiTWF0aCIsIm1heCIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwiam9pbiIsInNldCIsIl9lbmRUcmFjZSIsInBlcnNpc3RSdW4iLCJkZWxldGUiLCJvblJ1blVwZGF0ZSIsIl9nZXRFeGVjdXRpb25PcmRlciIsInBhcmVudFJ1bklkIiwiX2NyZWF0ZVJ1bkZvckxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsImV4dHJhUGFyYW1zIiwidGFncyIsIm1ldGFkYXRhIiwibmFtZSIsIm5vdyIsImZpbmFsRXh0cmFQYXJhbXMiLCJsZW5ndGgiLCJzZXJpYWxpemVkIiwiZXZlbnRzIiwidGltZSIsImlucHV0cyIsInJ1bl90eXBlIiwiZXh0cmEiLCJoYW5kbGVMTE1TdGFydCIsIm9uUnVuQ3JlYXRlIiwib25MTE1TdGFydCIsIl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydCIsIm1lc3NhZ2VzIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJfcGFyZW50UnVuSWQiLCJfdGFncyIsImVuZF90aW1lIiwib3V0cHV0cyIsIm9uTExNRW5kIiwiaGFuZGxlTExNRXJyb3IiLCJvbkxMTUVycm9yIiwiX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJoYW5kbGVDaGFpblN0YXJ0Iiwib25DaGFpblN0YXJ0IiwiaGFuZGxlQ2hhaW5FbmQiLCJrd2FyZ3MiLCJvbkNoYWluRW5kIiwiaGFuZGxlQ2hhaW5FcnJvciIsIm9uQ2hhaW5FcnJvciIsIl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQiLCJ0b29sIiwiaGFuZGxlVG9vbFN0YXJ0Iiwib25Ub29sU3RhcnQiLCJoYW5kbGVUb29sRW5kIiwib25Ub29sRW5kIiwiaGFuZGxlVG9vbEVycm9yIiwib25Ub29sRXJyb3IiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImFnZW50UnVuIiwiYWN0aW9ucyIsIm9uQWdlbnRBY3Rpb24iLCJoYW5kbGVBZ2VudEVuZCIsIm9uQWdlbnRFbmQiLCJfY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQiLCJyZXRyaWV2ZXIiLCJxdWVyeSIsImhhbmRsZVJldHJpZXZlclN0YXJ0Iiwib25SZXRyaWV2ZXJTdGFydCIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsIm9uUmV0cmlldmVyRW5kIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJvblJldHJpZXZlckVycm9yIiwiaGFuZGxlVGV4dCIsInRleHQiLCJvblRleHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiZmllbGRzIiwiY2h1bmsiLCJvbkxMTU5ld1Rva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction formatKVMapItem(value) {\n    if (typeof value === \"string\") {\n        return value.trim();\n    }\n    if (value === null || value === undefined) {\n        return value;\n    }\n    return tryJsonStringify(value, value.toString());\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${formatKVMapItem(run.inputs.input)}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${formatKVMapItem(run.outputs?.output)}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNNO0FBQ3ZDLFNBQVNFLEtBQUtDLEtBQUssRUFBRUMsSUFBSTtJQUNyQixPQUFPLENBQUMsRUFBRUQsTUFBTUUsSUFBSSxDQUFDLEVBQUVELEtBQUssRUFBRUQsTUFBTUcsS0FBSyxDQUFDLENBQUM7QUFDL0M7QUFDQSxTQUFTQyxpQkFBaUJDLEdBQUcsRUFBRUMsUUFBUTtJQUNuQyxJQUFJO1FBQ0EsT0FBT0MsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07SUFDckMsRUFDQSxPQUFPSSxLQUFLO1FBQ1IsT0FBT0g7SUFDWDtBQUNKO0FBQ0EsU0FBU0ksZ0JBQWdCQyxLQUFLO0lBQzFCLElBQUksT0FBT0EsVUFBVSxVQUFVO1FBQzNCLE9BQU9BLE1BQU1DLElBQUk7SUFDckI7SUFDQSxJQUFJRCxVQUFVLFFBQVFBLFVBQVVFLFdBQVc7UUFDdkMsT0FBT0Y7SUFDWDtJQUNBLE9BQU9QLGlCQUFpQk8sT0FBT0EsTUFBTUcsUUFBUTtBQUNqRDtBQUNBLFNBQVNDLFFBQVFDLEdBQUc7SUFDaEIsSUFBSSxDQUFDQSxJQUFJQyxRQUFRLEVBQ2IsT0FBTztJQUNYLE1BQU1GLFVBQVVDLElBQUlDLFFBQVEsR0FBR0QsSUFBSUUsVUFBVTtJQUM3QyxJQUFJSCxVQUFVLE1BQU07UUFDaEIsT0FBTyxDQUFDLEVBQUVBLFFBQVEsRUFBRSxDQUFDO0lBQ3pCO0lBQ0EsT0FBTyxDQUFDLEVBQUUsQ0FBQ0EsVUFBVSxJQUFHLEVBQUdJLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QztBQUNBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUd2Qix3Q0FBTUE7QUFDeEI7Ozs7Ozs7Ozs7Ozs7O0NBY0MsR0FDTSxNQUFNd0IsK0JBQStCdkIsZ0RBQVVBO0lBQ2xEd0IsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FB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MUQsS0FBS3FCLE1BQU00QyxHQUFHLEVBQUUscUJBQXFCLEVBQUUsRUFBRVQsT0FBTyxHQUFHLEVBQUV4QyxRQUFRQyxLQUFLLG9DQUFvQyxFQUFFWixpQkFBaUJZLElBQUlpRCxLQUFLLEVBQUUsV0FBVyxDQUFDO0lBQ25LO0lBQ0E7Ozs7S0FJQyxHQUNEYyxjQUFjL0QsR0FBRyxFQUFFO1FBQ2YsTUFBTWdFLFdBQVdoRTtRQUNqQixNQUFNdUMsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQ3pCO1FBQ25Dd0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRTFELEtBQUtxQixNQUFNNkQsSUFBSSxFQUFFLGtCQUFrQixFQUFFLEVBQUUxQixPQUFPLHlCQUF5QixFQUFFbkQsaUJBQWlCNEUsU0FBU0UsT0FBTyxDQUFDRixTQUFTRSxPQUFPLENBQUNoQyxNQUFNLEdBQUcsRUFBRSxFQUFFLFlBQVksQ0FBQztJQUN6SztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvY29uc29sZS5qcz83M2M4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZXMgZnJvbSBcImFuc2ktc3R5bGVzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZnVuY3Rpb24gd3JhcChzdHlsZSwgdGV4dCkge1xuICAgIHJldHVybiBgJHtzdHlsZS5vcGVufSR7dGV4dH0ke3N0eWxlLmNsb3NlfWA7XG59XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KG9iaiwgZmFsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0S1ZNYXBJdGVtKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB0cnlKc29uU3RyaW5naWZ5KHZhbHVlLCB2YWx1ZS50b1N0cmluZygpKTtcbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG4gICAgaWYgKCFydW4uZW5kX3RpbWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBydW4uZW5kX3RpbWUgLSBydW4uc3RhcnRfdGltZTtcbiAgICBpZiAoZWxhcHNlZCA8IDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGAke2VsYXBzZWR9bXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7KGVsYXBzZWQgLyAxMDAwKS50b0ZpeGVkKDIpfXNgO1xufVxuY29uc3QgeyBjb2xvciB9ID0gc3R5bGVzO1xuLyoqXG4gKiBBIHRyYWNlciB0aGF0IGxvZ3MgYWxsIGV2ZW50cyB0byB0aGUgY29uc29sZS4gSXQgZXh0ZW5kcyBmcm9tIHRoZVxuICogYEJhc2VUcmFjZXJgIGNsYXNzIGFuZCBvdmVycmlkZXMgaXRzIG1ldGhvZHMgdG8gcHJvdmlkZSBjdXN0b20gbG9nZ2luZ1xuICogZnVuY3Rpb25hbGl0eS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuICogICB0ZW1wZXJhdHVyZTogMCxcbiAqICAgdGFnczogW1wiZXhhbXBsZVwiLCBcImNhbGxiYWNrc1wiLCBcImNvbnN0cnVjdG9yXCJdLFxuICogICBjYWxsYmFja3M6IFtuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpXSxcbiAqIH0pO1xuICpcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBwZXJzaXN0IHRoZSBydW4uIEluIHRoaXMgY2FzZSwgaXQgc2ltcGx5IHJldHVybnMgYVxuICAgICAqIHJlc29sdmVkIHByb21pc2UgYXMgdGhlcmUncyBubyBwZXJzaXN0ZW5jZSBsb2dpYy5cbiAgICAgKiBAcGFyYW0gX3J1biBUaGUgcnVuIHRvIHBlcnNpc3QuXG4gICAgICogQHJldHVybnMgQSByZXNvbHZlZCBwcm9taXNlLlxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIHV0aWxpdHkgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGdldCBhbGwgdGhlIHBhcmVudCBydW5zIG9mIGEgZ2l2ZW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBwYXJlbnRzIGFyZSB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgcGFyZW50IHJ1bnMuXG4gICAgICovXG4gICAgZ2V0UGFyZW50cyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFJ1biA9IHJ1bjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ydW5NYXAuZ2V0KGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFJ1biA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UsIHdoaWNoXG4gICAgICogaXMgdXNlZCBpbiBsb2dnaW5nLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBsaW5lYWdlIGlzIHRvIGJlIHJldHJpZXZlZC5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZS5cbiAgICAgKi9cbiAgICBnZXRCcmVhZGNydW1icyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhydW4pLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gWy4uLnBhcmVudHMsIHJ1bl1cbiAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSwgYXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7cGFyZW50LmV4ZWN1dGlvbl9vcmRlcn06JHtwYXJlbnQucnVuX3R5cGV9OiR7cGFyZW50Lm5hbWV9YDtcbiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnIubGVuZ3RoIC0gMSA/IHdyYXAoc3R5bGVzLmJvbGQsIG5hbWUpIDogbmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiID4gXCIpO1xuICAgICAgICByZXR1cm4gd3JhcChjb2xvci5ncmV5LCBzdHJpbmcpO1xuICAgIH1cbiAgICAvLyBsb2dnaW5nIG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbY2hhaW4vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBDaGFpbiBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltjaGFpbi9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIENoYWluIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBcInByb21wdHNcIiBpbiBydW4uaW5wdXRzXG4gICAgICAgICAgICA/IHsgcHJvbXB0czogcnVuLmlucHV0cy5wcm9tcHRzLm1hcCgocCkgPT4gcC50cmltKCkpIH1cbiAgICAgICAgICAgIDogcnVuLmlucHV0cztcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbbGxtL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgTExNIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkoaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltsbG0vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBMTE0gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbdG9vbC9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFRvb2wgcnVuIHdpdGggaW5wdXQ6IFwiJHtmb3JtYXRLVk1hcEl0ZW0ocnVuLmlucHV0cy5pbnB1dCl9XCJgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbdG9vbC9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFRvb2wgcnVuIHdpdGggb3V0cHV0OiBcIiR7Zm9ybWF0S1ZNYXBJdGVtKHJ1bi5vdXRwdXRzPy5vdXRwdXQpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3Rvb2wvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBUb29sIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3JldHJpZXZlci9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFJldHJpZXZlciBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3JldHJpZXZlci9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFJldHJpZXZlciBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3JldHJpZXZlci9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFJldHJpZXZlciBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgYWN0aW9uIHNlbGVjdGVkIGJ5IHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gaW4gd2hpY2ggdGhlIGFnZW50IGFjdGlvbiBvY2N1cnJlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25BZ2VudEFjdGlvbihydW4pIHtcbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ibHVlLCBcIlthZ2VudC9hY3Rpb25dXCIpfSBbJHtjcnVtYnN9XSBBZ2VudCBzZWxlY3RlZCBhY3Rpb246ICR7dHJ5SnNvblN0cmluZ2lmeShhZ2VudFJ1bi5hY3Rpb25zW2FnZW50UnVuLmFjdGlvbnMubGVuZ3RoIC0gMV0sIFwiW2FjdGlvbl1cIil9YCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInN0eWxlcyIsIkJhc2VUcmFjZXIiLCJ3cmFwIiwic3R5bGUiLCJ0ZXh0Iiwib3BlbiIsImNsb3NlIiwidHJ5SnNvblN0cmluZ2lmeSIsIm9iaiIsImZhbGxiYWNrIiwiSlNPTiIsInN0cmluZ2lmeSIsImVyciIsImZvcm1hdEtWTWFwSXRlbSIsInZhbHVlIiwidHJpbSIsInVuZGVmaW5lZCIsInRvU3RyaW5nIiwiZWxhcHNlZCIsInJ1biIsImVuZF90aW1lIiwic3RhcnRfdGltZSIsInRvRml4ZWQiLCJjb2xvciIsIkNvbnNvbGVDYWxsYmFja0hhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldFBhcmVudHMiLCJwYXJlbnRzIiwiY3VycmVudFJ1biIsInBhcmVudF9ydW5faWQiLCJwYXJlbnQiLCJydW5NYXAiLCJnZXQiLCJwdXNoIiwiZ2V0QnJlYWRjcnVtYnMiLCJyZXZlcnNlIiwic3RyaW5nIiwibWFwIiwiaSIsImFyciIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJydW5fdHlwZSIsImxlbmd0aCIsImJvbGQiLCJqb2luIiwiZ3JleSIsIm9uQ2hhaW5TdGFydCIsImNydW1icyIsImNvbnNvbGUiLCJsb2ciLCJncmVlbiIsImlucHV0cyIsIm9uQ2hhaW5FbmQiLCJjeWFuIiwib3V0cHV0cyIsIm9uQ2hhaW5FcnJvciIsInJlZCIsImVycm9yIiwib25MTE1TdGFydCIsInByb21wdHMiLCJwIiwib25MTE1FbmQiLCJvbkxMTUVycm9yIiwib25Ub29sU3RhcnQiLCJpbnB1dCIsIm9uVG9vbEVuZCIsIm91dHB1dCIsIm9uVG9vbEVycm9yIiwib25SZXRyaWV2ZXJTdGFydCIsIm9uUmV0cmlldmVyRW5kIiwib25SZXRyaWV2ZXJFcnJvciIsIm9uQWdlbnRBY3Rpb24iLCJhZ2VudFJ1biIsImJsdWUiLCJhY3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/event_stream.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventStreamCallbackHandler: () => (/* binding */ EventStreamCallbackHandler),\n/* harmony export */   isStreamEventsHandler: () => (/* binding */ isStreamEventsHandler)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\nfunction assignName({ name, serialized }) {\n    if (name !== undefined) {\n        return name;\n    }\n    if (serialized?.name !== undefined) {\n        return serialized.name;\n    } else if (serialized?.id !== undefined && Array.isArray(serialized?.id)) {\n        return serialized.id[serialized.id.length - 1];\n    }\n    return \"Unnamed\";\n}\nconst isStreamEventsHandler = (handler)=>handler.name === \"event_stream_tracer\";\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class EventStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"runInfoMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"tappedPromises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"event_stream_tracer\"\n        });\n        Object.defineProperty(this, \"lc_prefer_streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.runType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.runType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, outputStream) {\n        const firstChunk = await outputStream.next();\n        if (firstChunk.done) {\n            return;\n        }\n        const runInfo = this.runInfoMap.get(runId);\n        // Run has finished, don't issue any stream events.\n        // An example of this is for runnables that use the default\n        // implementation of .stream(), which delegates to .invoke()\n        // and calls .onChainEnd() before passing it to the iterator.\n        if (runInfo === undefined) {\n            yield firstChunk.value;\n            return;\n        }\n        // Match format from handlers below\n        function _formatOutputChunk(eventType, data) {\n            if (eventType === \"llm\" && typeof data === \"string\") {\n                return new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: data\n                });\n            }\n            return data;\n        }\n        let tappedPromise = this.tappedPromises.get(runId);\n        // if we are the first to tap, issue stream events\n        if (tappedPromise === undefined) {\n            let tappedPromiseResolver;\n            tappedPromise = new Promise((resolve)=>{\n                tappedPromiseResolver = resolve;\n            });\n            this.tappedPromises.set(runId, tappedPromise);\n            try {\n                const event = {\n                    event: `on_${runInfo.runType}_stream`,\n                    run_id: runId,\n                    name: runInfo.name,\n                    tags: runInfo.tags,\n                    metadata: runInfo.metadata,\n                    data: {}\n                };\n                await this.send({\n                    ...event,\n                    data: {\n                        chunk: _formatOutputChunk(runInfo.runType, firstChunk.value)\n                    }\n                }, runInfo);\n                yield firstChunk.value;\n                for await (const chunk of outputStream){\n                    // Don't yield tool and retriever stream events\n                    if (runInfo.runType !== \"tool\" && runInfo.runType !== \"retriever\") {\n                        await this.send({\n                            ...event,\n                            data: {\n                                chunk: _formatOutputChunk(runInfo.runType, chunk)\n                            }\n                        }, runInfo);\n                    }\n                    yield chunk;\n                }\n            } finally{\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                tappedPromiseResolver();\n            // Don't delete from the promises map to keep track of which runs have been tapped.\n            }\n        } else {\n            // otherwise just pass through\n            yield firstChunk.value;\n            for await (const chunk of outputStream){\n                yield chunk;\n            }\n        }\n    }\n    async send(payload, run) {\n        if (this._includeRun(run)) {\n            await this.writer.write(payload);\n        }\n    }\n    async sendEndEvent(payload, run) {\n        const tappedPromise = this.tappedPromises.get(payload.run_id);\n        if (tappedPromise !== undefined) {\n            void tappedPromise.then(()=>{\n                void this.send(payload, run);\n            });\n        } else {\n            await this.send(payload, run);\n        }\n    }\n    async onLLMStart(run) {\n        const runName = assignName(run);\n        const runType = run.inputs.messages !== undefined ? \"chat_model\" : \"llm\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: run.inputs\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        const eventName = `on_${runType}_start`;\n        await this.send({\n            event: eventName,\n            data: {\n                input: run.inputs\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onLLMNewToken(run, token, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    kwargs) {\n        const runInfo = this.runInfoMap.get(run.id);\n        let chunk;\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMNewToken: Run ID ${run.id} not found in run map.`);\n        }\n        // Top-level streaming events are covered by tapOutputIterable\n        if (this.runInfoMap.size === 1) {\n            return;\n        }\n        if (runInfo.runType === \"chat_model\") {\n            eventName = \"on_chat_model_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n                    content: token,\n                    id: `run-${run.id}`\n                });\n            } else {\n                chunk = kwargs.chunk.message;\n            }\n        } else if (runInfo.runType === \"llm\") {\n            eventName = \"on_llm_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: token\n                });\n            } else {\n                chunk = kwargs.chunk;\n            }\n        } else {\n            throw new Error(`Unexpected run type ${runInfo.runType}`);\n        }\n        await this.send({\n            event: eventName,\n            data: {\n                chunk\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onLLMEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const generations = run.outputs?.generations;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let output;\n        if (runInfo.runType === \"chat_model\") {\n            for (const generation of generations ?? []){\n                if (output !== undefined) {\n                    break;\n                }\n                output = generation[0]?.message;\n            }\n            eventName = \"on_chat_model_end\";\n        } else if (runInfo.runType === \"llm\") {\n            output = {\n                generations: generations?.map((generation)=>{\n                    return generation.map((chunk)=>{\n                        return {\n                            text: chunk.text,\n                            generationInfo: chunk.generationInfo\n                        };\n                    });\n                }),\n                llmOutput: run.outputs?.llmOutput ?? {}\n            };\n            eventName = \"on_llm_end\";\n        } else {\n            throw new Error(`onLLMEnd: Unexpected run type: ${runInfo.runType}`);\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onChainStart(run) {\n        const runName = assignName(run);\n        const runType = run.run_type ?? \"chain\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: run.run_type\n        };\n        let eventData = {};\n        // Workaround Runnable core code not sending input when transform streaming.\n        if (run.inputs.input === \"\" && Object.keys(run.inputs).length === 1) {\n            eventData = {};\n            runInfo.inputs = {};\n        } else if (run.inputs.input !== undefined) {\n            eventData.input = run.inputs.input;\n            runInfo.inputs = run.inputs.input;\n        } else {\n            eventData.input = run.inputs;\n            runInfo.inputs = run.inputs;\n        }\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: `on_${runType}_start`,\n            data: eventData,\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onChainEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onChainEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const eventName = `on_${run.run_type}_end`;\n        const inputs = run.inputs ?? runInfo.inputs ?? {};\n        const outputs = run.outputs?.output ?? run.outputs;\n        const data = {\n            output: outputs,\n            input: inputs\n        };\n        if (inputs.input && Object.keys(inputs).length === 1) {\n            data.input = inputs.input;\n            runInfo.inputs = inputs.input;\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data,\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolStart(run) {\n        const runName = assignName(run);\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: \"tool\",\n            inputs: run.inputs ?? {}\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_tool_start\",\n            data: {\n                input: run.inputs ?? {}\n            },\n            name: runName,\n            run_id: run.id,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} not found in run map.`);\n        }\n        if (runInfo.inputs === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} is a tool call, and is expected to have traced inputs.`);\n        }\n        const output = run.outputs?.output === undefined ? run.outputs : run.outputs.output;\n        await this.sendEndEvent({\n            event: \"on_tool_end\",\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onRetrieverStart(run) {\n        const runName = assignName(run);\n        const runType = \"retriever\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: {\n                query: run.inputs.query\n            }\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_retriever_start\",\n            data: {\n                input: {\n                    query: run.inputs.query\n                }\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onRetrieverEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onRetrieverEnd: Run ID ${run.id} not found in run map.`);\n        }\n        await this.sendEndEvent({\n            event: \"on_retriever_end\",\n            data: {\n                output: run.outputs?.documents ?? run.outputs,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleCustomEvent(eventName, data, runId) {\n        const runInfo = this.runInfoMap.get(runId);\n        if (runInfo === undefined) {\n            throw new Error(`handleCustomEvent: Run ID ${runId} not found in run map.`);\n        }\n        await this.send({\n            event: \"on_custom_event\",\n            run_id: runId,\n            name: eventName,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata,\n            data\n        }, runInfo);\n    }\n    async finish() {\n        const pendingPromises = [\n            ...this.tappedPromises.values()\n        ];\n        void Promise.all(pendingPromises).finally(()=>{\n            void this.writer.close();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ldmVudF9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVDO0FBQ3FCO0FBQ1Q7QUFDSDtBQUNoRCxTQUFTSSxXQUFXLEVBQUVDLElBQUksRUFBRUMsVUFBVSxFQUFHO0lBQ3JDLElBQUlELFNBQVNFLFdBQVc7UUFDcEIsT0FBT0Y7SUFDWDtJQUNBLElBQUlDLFlBQVlELFNBQVNFLFdBQVc7UUFDaEMsT0FBT0QsV0FBV0QsSUFBSTtJQUMxQixPQUNLLElBQUlDLFlBQVlFLE9BQU9ELGFBQWFFLE1BQU1DLE9BQU8sQ0FBQ0osWUFBWUUsS0FBSztRQUNwRSxPQUFPRixXQUFXRSxFQUFFLENBQUNGLFdBQVdFLEVBQUUsQ0FBQ0csTUFBTSxHQUFHLEVBQUU7SUFDbEQ7SUFDQSxPQUFPO0FBQ1g7QUFDTyxNQUFNQyx3QkFBd0IsQ0FBQ0MsVUFBWUEsUUFBUVIsSUFBSSxLQUFLLHNCQUFzQjtBQUN6Rjs7Ozs7Q0FLQyxHQUNNLE1BQU1TLG1DQUFtQ2QsZ0RBQVVBO0lBQ3REZSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDO1lBQUVDLGVBQWU7WUFBTSxHQUFHRCxNQUFNO1FBQUM7UUFDdkNFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlB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ZixRQUFRZSxRQUFRO1FBQzlCLEdBQUdmO0lBQ1A7SUFDQSw4REFBOEQ7SUFDOUQsTUFBTXdELGtCQUFrQjdCLFNBQVMsRUFBRXRCLElBQUksRUFBRVYsS0FBSyxFQUFFO1FBQzVDLE1BQU1LLFVBQVUsSUFBSSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsQ0FBQ1A7UUFDcEMsSUFBSUssWUFBWXBELFdBQVc7WUFDdkIsTUFBTSxJQUFJb0YsTUFBTSxDQUFDLDBCQUEwQixFQUFFckMsTUFBTSxzQkFBc0IsQ0FBQztRQUM5RTtRQUNBLE1BQU0sSUFBSSxDQUFDcUIsSUFBSSxDQUFDO1lBQ1pILE9BQU87WUFDUEMsUUFBUW5CO1lBQ1JqRCxNQUFNaUY7WUFDTnhDLE1BQU1hLFFBQVFiLElBQUk7WUFDbEI0QixVQUFVZixRQUFRZSxRQUFRO1lBQzFCVjtRQUNKLEdBQUdMO0lBQ1A7SUFDQSxNQUFNeUQsU0FBUztRQUNYLE1BQU1DLGtCQUFrQjtlQUFJLElBQUksQ0FBQ2xELGNBQWMsQ0FBQ21ELE1BQU07U0FBRztRQUN6RCxLQUFLakQsUUFBUWtELEdBQUcsQ0FBQ0YsaUJBQWlCRyxPQUFPLENBQUM7WUFDdEMsS0FBSyxJQUFJLENBQUN0RixNQUFNLENBQUN1RixLQUFLO1FBQzFCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2V2ZW50X3N0cmVhbS5qcz84ODQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYWkuanNcIjtcbmltcG9ydCB7IEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG5mdW5jdGlvbiBhc3NpZ25OYW1lKHsgbmFtZSwgc2VyaWFsaXplZCwgfSkge1xuICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICAgIGlmIChzZXJpYWxpemVkPy5uYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQubmFtZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VyaWFsaXplZD8uaWQgIT09IHVuZGVmaW5lZCAmJiBBcnJheS5pc0FycmF5KHNlcmlhbGl6ZWQ/LmlkKSkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplZC5pZFtzZXJpYWxpemVkLmlkLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gXCJVbm5hbWVkXCI7XG59XG5leHBvcnQgY29uc3QgaXNTdHJlYW1FdmVudHNIYW5kbGVyID0gKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJldmVudF9zdHJlYW1fdHJhY2VyXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4gKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4gKiBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXhlY3V0aW9uIG9mIHJ1bnMgYW5kIGVtaXRzIGBSdW5Mb2dgIGluc3RhbmNlcyB0byBhXG4gKiBgUnVuTG9nU3RyZWFtYC5cbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKHsgX2F3YWl0SGFuZGxlcjogdHJ1ZSwgLi4uZmllbGRzIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdXRvQ2xvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5JbmZvTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhcHBlZFByb21pc2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYW5zZm9ybVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVjZWl2ZVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImV2ZW50X3N0cmVhbV90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcHJlZmVyX3N0cmVhbWluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hdXRvQ2xvc2UgPSBmaWVsZHM/LmF1dG9DbG9zZSA/PyB0cnVlO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcz8uaW5jbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcz8uaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzPy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHM/LmV4Y2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHM/LmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcz8uZXhjbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtU3RyZWFtID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuICAgICAgICB0aGlzLndyaXRlciA9IHRoaXMudHJhbnNmb3JtU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xuICAgICAgICB0aGlzLnJlY2VpdmVTdHJlYW0gPSBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbSh0aGlzLnRyYW5zZm9ybVN0cmVhbS5yZWFkYWJsZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVTdHJlYW07XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbGVnYWN5IG1ldGhvZCBvbmx5IGNhbGxlZCBvbmNlIGZvciBhbiBlbnRpcmUgcnVuIHRyZWVcbiAgICAgICAgLy8gYW5kIGlzIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICB9XG4gICAgX2luY2x1ZGVSdW4ocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blRhZ3MgPSBydW4udGFncyA/PyBbXTtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5UeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlIHx8XG4gICAgICAgICAgICAgICAgICAgIHJ1blRhZ3MuZmluZCgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1blR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgcnVuVGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxuICAgIGFzeW5jICp0YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgb3V0cHV0U3RyZWFtKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0Q2h1bmsgPSBhd2FpdCBvdXRwdXRTdHJlYW0ubmV4dCgpO1xuICAgICAgICBpZiAoZmlyc3RDaHVuay5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuSWQpO1xuICAgICAgICAvLyBSdW4gaGFzIGZpbmlzaGVkLCBkb24ndCBpc3N1ZSBhbnkgc3RyZWFtIGV2ZW50cy5cbiAgICAgICAgLy8gQW4gZXhhbXBsZSBvZiB0aGlzIGlzIGZvciBydW5uYWJsZXMgdGhhdCB1c2UgdGhlIGRlZmF1bHRcbiAgICAgICAgLy8gaW1wbGVtZW50YXRpb24gb2YgLnN0cmVhbSgpLCB3aGljaCBkZWxlZ2F0ZXMgdG8gLmludm9rZSgpXG4gICAgICAgIC8vIGFuZCBjYWxscyAub25DaGFpbkVuZCgpIGJlZm9yZSBwYXNzaW5nIGl0IHRvIHRoZSBpdGVyYXRvci5cbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgeWllbGQgZmlyc3RDaHVuay52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBNYXRjaCBmb3JtYXQgZnJvbSBoYW5kbGVycyBiZWxvd1xuICAgICAgICBmdW5jdGlvbiBfZm9ybWF0T3V0cHV0Q2h1bmsoZXZlbnRUeXBlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRUeXBlID09PSBcImxsbVwiICYmIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aW9uQ2h1bmsoeyB0ZXh0OiBkYXRhIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhcHBlZFByb21pc2UgPSB0aGlzLnRhcHBlZFByb21pc2VzLmdldChydW5JZCk7XG4gICAgICAgIC8vIGlmIHdlIGFyZSB0aGUgZmlyc3QgdG8gdGFwLCBpc3N1ZSBzdHJlYW0gZXZlbnRzXG4gICAgICAgIGlmICh0YXBwZWRQcm9taXNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCB0YXBwZWRQcm9taXNlUmVzb2x2ZXI7XG4gICAgICAgICAgICB0YXBwZWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICB0YXBwZWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRhcHBlZFByb21pc2VzLnNldChydW5JZCwgdGFwcGVkUHJvbWlzZSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7cnVuSW5mby5ydW5UeXBlfV9zdHJlYW1gLFxuICAgICAgICAgICAgICAgICAgICBydW5faWQ6IHJ1bklkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBydW5JbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBfZm9ybWF0T3V0cHV0Q2h1bmsocnVuSW5mby5ydW5UeXBlLCBmaXJzdENodW5rLnZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LCBydW5JbmZvKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBmaXJzdENodW5rLnZhbHVlO1xuICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0U3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHlpZWxkIHRvb2wgYW5kIHJldHJpZXZlciBzdHJlYW0gZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmIChydW5JbmZvLnJ1blR5cGUgIT09IFwidG9vbFwiICYmIHJ1bkluZm8ucnVuVHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBfZm9ybWF0T3V0cHV0Q2h1bmsocnVuSW5mby5ydW5UeXBlLCBjaHVuayksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJ1bkluZm8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgdGFwcGVkUHJvbWlzZVJlc29sdmVyKCk7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgZGVsZXRlIGZyb20gdGhlIHByb21pc2VzIG1hcCB0byBrZWVwIHRyYWNrIG9mIHdoaWNoIHJ1bnMgaGF2ZSBiZWVuIHRhcHBlZC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBqdXN0IHBhc3MgdGhyb3VnaFxuICAgICAgICAgICAgeWllbGQgZmlyc3RDaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0U3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZChwYXlsb2FkLCBydW4pIHtcbiAgICAgICAgaWYgKHRoaXMuX2luY2x1ZGVSdW4ocnVuKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZEVuZEV2ZW50KHBheWxvYWQsIHJ1bikge1xuICAgICAgICBjb25zdCB0YXBwZWRQcm9taXNlID0gdGhpcy50YXBwZWRQcm9taXNlcy5nZXQocGF5bG9hZC5ydW5faWQpO1xuICAgICAgICBpZiAodGFwcGVkUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2b2lkIHRhcHBlZFByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnNlbmQocGF5bG9hZCwgcnVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHBheWxvYWQsIHJ1bik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcbiAgICAgICAgY29uc3QgcnVuVHlwZSA9IHJ1bi5pbnB1dHMubWVzc2FnZXMgIT09IHVuZGVmaW5lZCA/IFwiY2hhdF9tb2RlbFwiIDogXCJsbG1cIjtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHtcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuVHlwZSxcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuICAgICAgICBjb25zdCBldmVudE5hbWUgPSBgb25fJHtydW5UeXBlfV9zdGFydGA7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlucHV0OiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvbkxMTU5ld1Rva2VuKHJ1biwgdG9rZW4sIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIGxldCBjaHVuaztcbiAgICAgICAgbGV0IGV2ZW50TmFtZTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvbkxMTU5ld1Rva2VuOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRvcC1sZXZlbCBzdHJlYW1pbmcgZXZlbnRzIGFyZSBjb3ZlcmVkIGJ5IHRhcE91dHB1dEl0ZXJhYmxlXG4gICAgICAgIGlmICh0aGlzLnJ1bkluZm9NYXAuc2l6ZSA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5JbmZvLnJ1blR5cGUgPT09IFwiY2hhdF9tb2RlbFwiKSB7XG4gICAgICAgICAgICBldmVudE5hbWUgPSBcIm9uX2NoYXRfbW9kZWxfc3RyZWFtXCI7XG4gICAgICAgICAgICBpZiAoa3dhcmdzPy5jaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgQUlNZXNzYWdlQ2h1bmsoeyBjb250ZW50OiB0b2tlbiwgaWQ6IGBydW4tJHtydW4uaWR9YCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rID0ga3dhcmdzLmNodW5rLm1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImxsbVwiKSB7XG4gICAgICAgICAgICBldmVudE5hbWUgPSBcIm9uX2xsbV9zdHJlYW1cIjtcbiAgICAgICAgICAgIGlmIChrd2FyZ3M/LmNodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IG5ldyBHZW5lcmF0aW9uQ2h1bmsoeyB0ZXh0OiB0b2tlbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rID0ga3dhcmdzLmNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHJ1biB0eXBlICR7cnVuSW5mby5ydW5UeXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgICAgICBsZXQgZXZlbnROYW1lO1xuICAgICAgICBpZiAocnVuSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uTExNRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gcnVuLm91dHB1dHM/LmdlbmVyYXRpb25zO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICBpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImNoYXRfbW9kZWxcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIGdlbmVyYXRpb25zID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBnZW5lcmF0aW9uWzBdPy5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9jaGF0X21vZGVsX2VuZFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgb3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBnZW5lcmF0aW9ucz8ubWFwKChnZW5lcmF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0aW9uLm1hcCgoY2h1bmspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY2h1bmsudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzogY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHJ1bi5vdXRwdXRzPy5sbG1PdXRwdXQgPz8ge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9sbG1fZW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uTExNRW5kOiBVbmV4cGVjdGVkIHJ1biB0eXBlOiAke3J1bkluZm8ucnVuVHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuSW5mby5pbnB1dHMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcnVuX2lkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW5JbmZvLm5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSxcbiAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgfVxuICAgIGFzeW5jIG9uQ2hhaW5TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcbiAgICAgICAgY29uc3QgcnVuVHlwZSA9IHJ1bi5ydW5fdHlwZSA/PyBcImNoYWluXCI7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB7XG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICAgICAgbmFtZTogcnVuTmFtZSxcbiAgICAgICAgICAgIHJ1blR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGV2ZW50RGF0YSA9IHt9O1xuICAgICAgICAvLyBXb3JrYXJvdW5kIFJ1bm5hYmxlIGNvcmUgY29kZSBub3Qgc2VuZGluZyBpbnB1dCB3aGVuIHRyYW5zZm9ybSBzdHJlYW1pbmcuXG4gICAgICAgIGlmIChydW4uaW5wdXRzLmlucHV0ID09PSBcIlwiICYmIE9iamVjdC5rZXlzKHJ1bi5pbnB1dHMpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZXZlbnREYXRhID0ge307XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bi5pbnB1dHMuaW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXZlbnREYXRhLmlucHV0ID0gcnVuLmlucHV0cy5pbnB1dDtcbiAgICAgICAgICAgIHJ1bkluZm8uaW5wdXRzID0gcnVuLmlucHV0cy5pbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50RGF0YS5pbnB1dCA9IHJ1bi5pbnB1dHM7XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IHJ1bi5pbnB1dHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3J1blR5cGV9X3N0YXJ0YCxcbiAgICAgICAgICAgIGRhdGE6IGV2ZW50RGF0YSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvbkNoYWluRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuICAgICAgICB0aGlzLnJ1bkluZm9NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25DaGFpbkVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudE5hbWUgPSBgb25fJHtydW4ucnVuX3R5cGV9X2VuZGA7XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IHJ1bi5pbnB1dHMgPz8gcnVuSW5mby5pbnB1dHMgPz8ge307XG4gICAgICAgIGNvbnN0IG91dHB1dHMgPSBydW4ub3V0cHV0cz8ub3V0cHV0ID8/IHJ1bi5vdXRwdXRzO1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgb3V0cHV0OiBvdXRwdXRzLFxuICAgICAgICAgICAgaW5wdXQ6IGlucHV0cyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlucHV0cy5pbnB1dCAmJiBPYmplY3Qua2V5cyhpbnB1dHMpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZGF0YS5pbnB1dCA9IGlucHV0cy5pbnB1dDtcbiAgICAgICAgICAgIHJ1bkluZm8uaW5wdXRzID0gaW5wdXRzLmlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEVuZEV2ZW50KHtcbiAgICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcnVuX2lkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW5JbmZvLm5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgfVxuICAgIGFzeW5jIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBydW5OYW1lID0gYXNzaWduTmFtZShydW4pO1xuICAgICAgICBjb25zdCBydW5JbmZvID0ge1xuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICBydW5UeXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyA/PyB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IFwib25fdG9vbF9zdGFydFwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlucHV0OiBydW4uaW5wdXRzID8/IHt9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblRvb2xFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvblRvb2xFbmQ6IFJ1biBJRCAke3J1bi5pZH0gbm90IGZvdW5kIGluIHJ1biBtYXAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bkluZm8uaW5wdXRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25Ub29sRW5kOiBSdW4gSUQgJHtydW4uaWR9IGlzIGEgdG9vbCBjYWxsLCBhbmQgaXMgZXhwZWN0ZWQgdG8gaGF2ZSB0cmFjZWQgaW5wdXRzLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHJ1bi5vdXRwdXRzPy5vdXRwdXQgPT09IHVuZGVmaW5lZCA/IHJ1bi5vdXRwdXRzIDogcnVuLm91dHB1dHMub3V0cHV0O1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl90b29sX2VuZFwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuSW5mby5pbnB1dHMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcnVuX2lkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW5JbmZvLm5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSxcbiAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgfVxuICAgIGFzeW5jIG9uUmV0cmlldmVyU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG4gICAgICAgIGNvbnN0IHJ1blR5cGUgPSBcInJldHJpZXZlclwiO1xuICAgICAgICBjb25zdCBydW5JbmZvID0ge1xuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICBydW5UeXBlLFxuICAgICAgICAgICAgaW5wdXRzOiB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHJ1bi5pbnB1dHMucXVlcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJ1bkluZm9NYXAuc2V0KHJ1bi5pZCwgcnVuSW5mbyk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl9yZXRyaWV2ZXJfc3RhcnRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogcnVuLmlucHV0cy5xdWVyeSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblJldHJpZXZlckVuZChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgICAgICBpZiAocnVuSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uUmV0cmlldmVyRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEVuZEV2ZW50KHtcbiAgICAgICAgICAgIGV2ZW50OiBcIm9uX3JldHJpZXZlcl9lbmRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHJ1bi5vdXRwdXRzPy5kb2N1bWVudHMgPz8gcnVuLm91dHB1dHMsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJ1bkluZm8uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgZGF0YSwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAocnVuSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGhhbmRsZUN1c3RvbUV2ZW50OiBSdW4gSUQgJHtydW5JZH0gbm90IGZvdW5kIGluIHJ1biBtYXAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50OiBcIm9uX2N1c3RvbV9ldmVudFwiLFxuICAgICAgICAgICAgcnVuX2lkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgfVxuICAgIGFzeW5jIGZpbmlzaCgpIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ1Byb21pc2VzID0gWy4uLnRoaXMudGFwcGVkUHJvbWlzZXMudmFsdWVzKCldO1xuICAgICAgICB2b2lkIFByb21pc2UuYWxsKHBlbmRpbmdQcm9taXNlcykuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB2b2lkIHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhY2VyIiwiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsIkFJTWVzc2FnZUNodW5rIiwiR2VuZXJhdGlvbkNodW5rIiwiYXNzaWduTmFtZSIsIm5hbWUiLCJzZXJpYWxpemVkIiwidW5kZWZpbmVkIiwiaWQiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJpc1N0cmVhbUV2ZW50c0hhbmRsZXIiLCJoYW5kbGVyIiwiRXZlbnRTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIl9hd2FpdEhhbmRsZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiTWFwIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsInRyYW5zZm9ybVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIndyaXRlciIsImdldFdyaXRlciIsInJlY2VpdmVTdHJlYW0iLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJyZWFkYWJsZSIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJwZXJzaXN0UnVuIiwiX3J1biIsIl9pbmNsdWRlUnVuIiwicnVuIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwiaW5jbHVkZXMiLCJydW5UeXBlIiwiZmluZCIsInRhZyIsImV2ZXJ5IiwidGFwT3V0cHV0SXRlcmFibGUiLCJydW5JZCIsIm91dHB1dFN0cmVhbSIsImZpcnN0Q2h1bmsiLCJuZXh0IiwiZG9uZSIsInJ1bkluZm8iLCJydW5JbmZvTWFwIiwiZ2V0IiwiX2Zvcm1hdE91dHB1dENodW5rIiwiZXZlbnRUeXBlIiwiZGF0YSIsInRleHQiLCJ0YXBwZWRQcm9taXNlIiwidGFwcGVkUHJvbWlzZXMiLCJ0YXBwZWRQcm9taXNlUmVzb2x2ZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldCIsImV2ZW50IiwicnVuX2lkIiwibWV0YWRhdGEiLCJzZW5kIiwiY2h1bmsiLCJwYXlsb2FkIiwid3JpdGUiLCJzZW5kRW5kRXZlbnQiLCJ0aGVuIiwib25MTE1TdGFydCIsInJ1bk5hbWUiLCJpbnB1dHMiLCJtZXNzYWdlcyIsImV4dHJhIiwiZXZlbnROYW1lIiwiaW5wdXQiLCJvbkxMTU5ld1Rva2VuIiwidG9rZW4iLCJrd2FyZ3MiLCJFcnJvciIsInNpemUiLCJjb250ZW50IiwibWVzc2FnZSIsIm9uTExNRW5kIiwiZGVsZXRlIiwiZ2VuZXJhdGlvbnMiLCJvdXRwdXRzIiwib3V0cHV0IiwiZ2VuZXJhdGlvbiIsIm1hcCIsImdlbmVyYXRpb25JbmZvIiwibGxtT3V0cHV0Iiwib25DaGFpblN0YXJ0IiwicnVuX3R5cGUiLCJldmVudERhdGEiLCJrZXlzIiwib25DaGFpbkVuZCIsIm9uVG9vbFN0YXJ0Iiwib25Ub29sRW5kIiwib25SZXRyaWV2ZXJTdGFydCIsInF1ZXJ5Iiwib25SZXRyaWV2ZXJFbmQiLCJkb2N1bWVudHMiLCJoYW5kbGVDdXN0b21FdmVudCIsImZpbmlzaCIsInBlbmRpbmdQcm9taXNlcyIsInZhbHVlcyIsImFsbCIsImZpbmFsbHkiLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/event_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch),\n/* harmony export */   isLogStreamHandler: () => (/* binding */ isLogStreamHandler)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nconst isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        Object.defineProperty(this, \"lc_prefer_streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk({\n                    id: `run-${run.id}`,\n                    content: token\n                });\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdFO0FBQ3pCO0FBQ3FCO0FBQ1Q7QUFDbkQ7Ozs7OztDQU1DLEdBQ00sTUFBTUk7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE9BQU87WUFDL0JDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsR0FBRyxHQUFHUCxPQUFPTyxHQUFHLElBQUksRUFBRTtJQUMvQjtJQUNBQyxPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLENBQUMsR0FBR2E7UUFDOUIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSUksT0FBTztZQUNkSjtZQUNBSyxPQUFPRixNQUFNLENBQUNBLE9BQU9HLE1BQU0sR0FBRyxFQUFFLENBQUNDLFdBQVc7UUFDaEQ7SUFDSjtBQUNKO0FBQ08sTUFBTUgsZUFBZWI7SUFDeEJDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxLQUFLLEdBQUdaLE9BQU9ZLEtBQUs7SUFDN0I7SUFDQUosT0FBT0MsS0FBSyxFQUFFO1FBQ1YsTUFBTUYsTUFBTSxJQUFJLENBQUNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNRixHQUFHO1FBQ3JDLE1BQU1HLFNBQVNoQiwyRUFBVUEsQ0FBQyxJQUFJLENBQUNrQixLQUFLLEVBQUVILE1BQU1G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LElBQUksQ0FBQ3NCLFNBQVMsRUFBRTtvQkFDaEIsTUFBTSxJQUFJLENBQUNVLE1BQU0sQ0FBQzRDLEtBQUs7Z0JBQzNCO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsTUFBTUMsY0FBY3hFLEdBQUcsRUFBRXlFLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQ3BDLE1BQU1MLFVBQVUsSUFBSSxDQUFDcEIsYUFBYSxDQUFDakQsSUFBSXFDLEVBQUUsQ0FBQztRQUMxQyxJQUFJZ0MsWUFBWTdELFdBQVc7WUFDdkI7UUFDSjtRQUNBLG9CQUFvQjtRQUNwQixNQUFNbUUsY0FBYzNFLElBQUlHLE1BQU0sQ0FBQ3lFLFFBQVEsS0FBS3BFO1FBQzVDLElBQUlxRTtRQUNKLElBQUlGLGFBQWE7WUFDYixJQUFJL0Qsc0JBQXNCOEQsUUFBUTNCLFFBQVE7Z0JBQ3RDOEIsc0JBQXNCSCxRQUFRM0I7WUFDbEMsT0FDSztnQkFDRDhCLHNCQUFzQixJQUFJckcsMkRBQWNBLENBQUM7b0JBQ3JDNkQsSUFBSSxDQUFDLElBQUksRUFBRXJDLElBQUlxQyxFQUFFLENBQUMsQ0FBQztvQkFDbkJ5QyxTQUFTTDtnQkFDYjtZQUNKO1FBQ0osT0FDSztZQUNESSxzQkFBc0JKO1FBQzFCO1FBQ0EsTUFBTTlFLFFBQVEsSUFBSWxCLFlBQVk7WUFDMUJTLEtBQUs7Z0JBQ0Q7b0JBQ0lpRSxJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxzQkFBc0IsQ0FBQztvQkFDOUNwRixPQUFPd0Y7Z0JBQ1g7Z0JBQ0E7b0JBQ0l0QixJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxrQkFBa0IsQ0FBQztvQkFDMUNwRixPQUFPNEY7Z0JBQ1g7YUFDSDtRQUNMO1FBQ0EsTUFBTSxJQUFJLENBQUNsRCxNQUFNLENBQUN1QixLQUFLLENBQUN2RDtJQUM1QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvbG9nX3N0cmVhbS5qcz8yOWQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwcGx5UGF0Y2gsIH0gZnJvbSBcIi4uL3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy9haS5qc1wiO1xuLyoqXG4gKiBMaXN0IG9mIGpzb25wYXRjaCBKU09OUGF0Y2hPcGVyYXRpb25zLCB3aGljaCBkZXNjcmliZSBob3cgdG8gY3JlYXRlIHRoZSBydW4gc3RhdGVcbiAqIGZyb20gYW4gZW1wdHkgZGljdC4gVGhpcyBpcyB0aGUgbWluaW1hbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbG9nLCBkZXNpZ25lZCB0b1xuICogYmUgc2VyaWFsaXplZCBhcyBKU09OIGFuZCBzZW50IG92ZXIgdGhlIHdpcmUgdG8gcmVjb25zdHJ1Y3QgdGhlIGxvZyBvbiB0aGUgb3RoZXJcbiAqIHNpZGUuIFJlY29uc3RydWN0aW9uIG9mIHRoZSBzdGF0ZSBjYW4gYmUgZG9uZSB3aXRoIGFueSBqc29ucGF0Y2gtY29tcGxpYW50IGxpYnJhcnksXG4gKiBzZWUgaHR0cHM6Ly9qc29ucGF0Y2guY29tIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vcHMgPSBmaWVsZHMub3BzID8/IFtdO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIG9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzLFxuICAgICAgICAgICAgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Mb2cgZXh0ZW5kcyBSdW5Mb2dQYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBmaWVsZHMuc3RhdGU7XG4gICAgfVxuICAgIGNvbmNhdChvdGhlcikge1xuICAgICAgICBjb25zdCBvcHMgPSB0aGlzLm9wcy5jb25jYXQob3RoZXIub3BzKTtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh0aGlzLnN0YXRlLCBvdGhlci5vcHMpO1xuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7IG9wcywgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUnVuTG9nUGF0Y2gocGF0Y2gpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh7fSwgcGF0Y2gub3BzKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7XG4gICAgICAgICAgICBvcHM6IHBhdGNoLm9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgaXNMb2dTdHJlYW1IYW5kbGVyID0gKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJsb2dfc3RyZWFtX3RyYWNlclwiO1xuLyoqXG4gKiBFeHRyYWN0IHN0YW5kYXJkaXplZCBpbnB1dHMgZnJvbSBhIHJ1bi5cbiAqXG4gKiBTdGFuZGFyZGl6ZXMgdGhlIGlucHV0cyBiYXNlZCBvbiB0aGUgdHlwZSBvZiB0aGUgcnVubmFibGUgdXNlZC5cbiAqXG4gKiBAcGFyYW0gcnVuIC0gUnVuIG9iamVjdFxuICogQHBhcmFtIHNjaGVtYUZvcm1hdCAtIFRoZSBzY2hlbWEgZm9ybWF0IHRvIHVzZS5cbiAqXG4gKiBAcmV0dXJucyBWYWxpZCBpbnB1dHMgYXJlIG9ubHkgZGljdC4gQnkgY29udmVudGlvbnMsIGlucHV0cyBhbHdheXMgcmVwcmVzZW50ZWRcbiAqIGludm9jYXRpb24gdXNpbmcgbmFtZWQgYXJndW1lbnRzLlxuICogQSBudWxsIG1lYW5zIHRoYXQgdGhlIGlucHV0IGlzIG5vdCB5ZXQga25vd24hXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCBzY2hlbWFGb3JtYXQpIHtcbiAgICBpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG8gbm90IGFzc2lnbiBpbnB1dHMgd2l0aCBvcmlnaW5hbCBzY2hlbWEgZHJvcCB0aGUga2V5IGZvciBub3cuIFwiICtcbiAgICAgICAgICAgIFwiV2hlbiBpbnB1dHMgYXJlIGFkZGVkIHRvIHN0cmVhbUxvZyB0aGV5IHNob3VsZCBiZSBhZGRlZCB3aXRoIFwiICtcbiAgICAgICAgICAgIFwic3RhbmRhcmRpemVkIHNjaGVtYSBmb3Igc3RyZWFtaW5nIGV2ZW50cy5cIik7XG4gICAgfVxuICAgIGNvbnN0IHsgaW5wdXRzIH0gPSBydW47XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dHM7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dHMpLmxlbmd0aCA9PT0gMSAmJiBpbnB1dHM/LmlucHV0ID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIG5ldyBzdHlsZSBjaGFpbnNcbiAgICAvLyBUaGVzZSBuZXN0IGFuIGFkZGl0aW9uYWwgJ2lucHV0JyBrZXkgaW5zaWRlIHRoZSAnaW5wdXRzJyB0byBtYWtlIHN1cmVcbiAgICAvLyB0aGUgaW5wdXQgaXMgYWx3YXlzIGEgZGljdC4gV2UgbmVlZCB0byB1bnBhY2sgYW5kIHVzZXIgdGhlIGlubmVyIHZhbHVlLlxuICAgIC8vIFdlIHNob3VsZCB0cnkgdG8gZml4IHRoaXMgaW4gUnVubmFibGVzIGFuZCBjYWxsYmFja3MvdHJhY2Vyc1xuICAgIC8vIFJ1bm5hYmxlcyBzaG91bGQgYmUgdXNpbmcgYSBudWxsIHR5cGUgaGVyZSBub3QgYSBwbGFjZWhvbGRlclxuICAgIC8vIGRpY3QuXG4gICAgcmV0dXJuIGlucHV0cy5pbnB1dDtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgY29uc3QgeyBvdXRwdXRzIH0gPSBydW47XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgb2xkIHNjaGVtYSwgd2l0aG91dCBzdGFuZGFyZGl6aW5nIGFueXRoaW5nXG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICBpZiAoW1wicmV0cmlldmVyXCIsIFwibGxtXCIsIFwicHJvbXB0XCJdLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2t5IGNoZWNrXG4gICAgaWYgKG91dHB1dHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBPYmplY3Qua2V5cyhvdXRwdXRzKS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgb3V0cHV0cz8ub3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHMub3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0cztcbn1cbmZ1bmN0aW9uIGlzQ2hhdEdlbmVyYXRpb25DaHVuayh4KSB7XG4gICAgcmV0dXJuIHggIT09IHVuZGVmaW5lZCAmJiB4Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ2xhc3MgdGhhdCBleHRlbmRzIHRoZSBgQmFzZVRyYWNlcmAgY2xhc3MgZnJvbSB0aGVcbiAqIGBsYW5nY2hhaW4uY2FsbGJhY2tzLnRyYWNlcnMuYmFzZWAgbW9kdWxlLiBJdCByZXByZXNlbnRzIGEgY2FsbGJhY2tcbiAqIGhhbmRsZXIgdGhhdCBsb2dzIHRoZSBleGVjdXRpb24gb2YgcnVucyBhbmQgZW1pdHMgYFJ1bkxvZ2AgaW5zdGFuY2VzIHRvIGFcbiAqIGBSdW5Mb2dTdHJlYW1gLlxuICovXG5leHBvcnQgY2xhc3MgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKHsgX2F3YWl0SGFuZGxlcjogdHJ1ZSwgLi4uZmllbGRzIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdXRvQ2xvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfc2NoZW1hRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIm9yaWdpbmFsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvb3RJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlNYXBCeVJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY291bnRlck1hcEJ5UnVuTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYW5zZm9ybVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVjZWl2ZVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxvZ19zdHJlYW1fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3ByZWZlcl9zdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0b0Nsb3NlID0gZmllbGRzPy5hdXRvQ2xvc2UgPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHM/LmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcz8uaW5jbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzPy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHM/LmV4Y2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLl9zY2hlbWFGb3JtYXQgPSBmaWVsZHM/Ll9zY2hlbWFGb3JtYXQgPz8gdGhpcy5fc2NoZW1hRm9ybWF0O1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB0aGlzLnRyYW5zZm9ybVN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlU3RyZWFtID0gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0odGhpcy50cmFuc2Zvcm1TdHJlYW0ucmVhZGFibGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlU3RyZWFtO1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICAgIC8vIGFuZCBpcyB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgfVxuICAgIF9pbmNsdWRlUnVuKHJ1bikge1xuICAgICAgICBpZiAocnVuLmlkID09PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1blRhZ3MgPSBydW4udGFncyA/PyBbXTtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fFxuICAgICAgICAgICAgICAgICAgICBydW5UYWdzLmZpbmQoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSAmJiBydW5UYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG4gICAgYXN5bmMgKnRhcE91dHB1dEl0ZXJhYmxlKHJ1bklkLCBvdXRwdXQpIHtcbiAgICAgICAgLy8gVGFwIGFuIG91dHB1dCBhc3luYyBpdGVyYXRvciB0byBzdHJlYW0gaXRzIHZhbHVlcyB0byB0aGUgbG9nLlxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgLy8gcm9vdCBydW4gaXMgaGFuZGxlZCBpbiAuc3RyZWFtTG9nKClcbiAgICAgICAgICAgIGlmIChydW5JZCAhPT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBjYW4ndCBmaW5kIHRoZSBydW4gc2lsZW50bHkgaWdub3JlXG4gICAgICAgICAgICAgICAgLy8gZWcuIGJlY2F1c2UgdGhpcyBydW4gd2Fzbid0IGluY2x1ZGVkIGluIHRoZSBsb2dcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuSWRdO1xuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke2tleX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdElkID0gcnVuLmlkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbF9vdXRwdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2luY2x1ZGVSdW4ocnVuKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gKz0gMTtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdO1xuICAgICAgICB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXSA9XG4gICAgICAgICAgICBjb3VudCA9PT0gMSA/IHJ1bi5uYW1lIDogYCR7cnVuLm5hbWV9OiR7Y291bnR9YDtcbiAgICAgICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICAgICAgICBpZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICAgICAgc3RhcnRfdGltZTogbmV3IERhdGUocnVuLnN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXQ6IFtdLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0X3N0cjogW10sXG4gICAgICAgICAgICBmaW5hbF9vdXRwdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZF90aW1lOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICBsb2dFbnRyeS5pbnB1dHMgPSBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7dGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF19YCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGxvZ0VudHJ5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuVXBkYXRlKHJ1bikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuICAgICAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9wcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYUZvcm1hdCA9PT0gXCJzdHJlYW1pbmdfZXZlbnRzXCIpIHtcbiAgICAgICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vaW5wdXRzYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2ZpbmFsX291dHB1dGAsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJ1bi5lbmRfdGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vZW5kX3RpbWVgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goeyBvcHMgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocnVuLmlkID09PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL2ZpbmFsX291dHB1dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25MTE1OZXdUb2tlbihydW4sIHRva2VuLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuICAgICAgICBpZiAocnVuTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGhhY2tcbiAgICAgICAgY29uc3QgaXNDaGF0TW9kZWwgPSBydW4uaW5wdXRzLm1lc3NhZ2VzICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBzdHJlYW1lZE91dHB1dFZhbHVlO1xuICAgICAgICBpZiAoaXNDaGF0TW9kZWwpIHtcbiAgICAgICAgICAgIGlmIChpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoa3dhcmdzPy5jaHVuaykpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0ga3dhcmdzPy5jaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICBpZDogYHJ1bi0ke3J1bi5pZH1gLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0b2tlbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXRfc3RyLy1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9rZW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXQvLWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdHJlYW1lZE91dHB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJhcHBseVBhdGNoIiwiQmFzZVRyYWNlciIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJBSU1lc3NhZ2VDaHVuayIsIlJ1bkxvZ1BhdGNoIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwib3BzIiwiY29uY2F0Iiwib3RoZXIiLCJzdGF0ZXMiLCJSdW5Mb2ciLCJzdGF0ZSIsImxlbmd0aCIsIm5ld0RvY3VtZW50IiwiZnJvbVJ1bkxvZ1BhdGNoIiwicGF0Y2giLCJpc0xvZ1N0cmVhbUhhbmRsZXIiLCJoYW5kbGVyIiwibmFtZSIsIl9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMiLCJydW4iLCJzY2hlbWFGb3JtYXQiLCJFcnJvciIsImlucHV0cyIsImluY2x1ZGVzIiwicnVuX3R5cGUiLCJrZXlzIiwiaW5wdXQiLCJ1bmRlZmluZWQiLCJfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyIsIm91dHB1dHMiLCJvdXRwdXQiLCJpc0NoYXRHZW5lcmF0aW9uQ2h1bmsiLCJ4IiwibWVzc2FnZSIsIkxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsIl9hd2FpdEhhbmRsZXIiLCJhdXRvQ2xvc2UiLCJpbmNsdWRlTmFtZXMiLCJpbmNsdWRlVHlwZXMiLCJpbmNsdWRlVGFncyIsImV4Y2x1ZGVOYW1lcyIsImV4Y2x1ZGVUeXBlcyIsImV4Y2x1ZGVUYWdzIiwiX3NjaGVtYUZvcm1hdCIsInRyYW5zZm9ybVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIndyaXRlciIsImdldFdyaXRlciIsInJlY2VpdmVTdHJlYW0iLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJyZWFkYWJsZSIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJwZXJzaXN0UnVuIiwiX3J1biIsIl9pbmNsdWRlUnVuIiwiaWQiLCJyb290SWQiLCJydW5UYWdzIiwidGFncyIsImluY2x1ZGUiLCJmaW5kIiwidGFnIiwiZXZlcnkiLCJ0YXBPdXRwdXRJdGVyYWJsZSIsInJ1bklkIiwiY2h1bmsiLCJrZXkiLCJrZXlNYXBCeVJ1bklkIiwid3JpdGUiLCJvcCIsInBhdGgiLCJvblJ1bkNyZWF0ZSIsInR5cGUiLCJzdHJlYW1lZF9vdXRwdXQiLCJmaW5hbF9vdXRwdXQiLCJsb2dzIiwiY291bnRlck1hcEJ5UnVuTmFtZSIsImNvdW50IiwibG9nRW50cnkiLCJtZXRhZGF0YSIsImV4dHJhIiwic3RhcnRfdGltZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN0cmVhbWVkX291dHB1dF9zdHIiLCJlbmRfdGltZSIsIm9uUnVuVXBkYXRlIiwicnVuTmFtZSIsInB1c2giLCJjbG9zZSIsIm9uTExNTmV3VG9rZW4iLCJ0b2tlbiIsImt3YXJncyIsImlzQ2hhdE1vZGVsIiwibWVzc2FnZXMiLCJzdHJlYW1lZE91dHB1dFZhbHVlIiwiY29udGVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            await this.argOnStart(run, this.config);\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                await this.argOnEnd(run, this.config);\n            }\n        } else if (this.argOnError) {\n            await this.argOnError(run, this.config);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDO0FBQ2hDLE1BQU1DLDRCQUE0QkQsZ0RBQVVBO0lBQy9DRSxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxDQUFFO1FBQzlDLEtBQUssQ0FBQztZQUFFQyxlQUFlO1FBQUs7UUFDNUJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNEJBQTRCLEdBQzVCTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ1csVUFBVSxHQUFHVjtRQUNsQixJQUFJLENBQUNXLFFBQVEsR0FBR1Y7UUFDaEIsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO0lBQ3RCO0lBQ0E7Ozs7S0FJQyxHQUNEVyxXQUFXQyxDQUFDLEVBQUU7UUFDVixPQUFPQyxRQUFRQyxPQUFPO0lBQzFCO0lBQ0EsTUFBTUMsWUFBWUMsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDYjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxNQUFNLEdBQUdELElBQUlFLEVBQUU7UUFDcEIsSUFBSSxJQUFJLENBQUNWLFVBQVUsRUFBRTtZQUNqQixNQUFNLElBQUksQ0FBQ0EsVUFBVSxDQUFDUSxLQUFLLElBQUksQ0FBQ25CLE1BQU07UUFDMUM7SUFDSjtJQUNBLE1BQU1zQixZQUFZSCxHQUFHLEVBQUU7UUFDbkIsSUFBSUEsSUFBSUUsRUFBRSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxFQUFFO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLENBQUNELElBQUlJLEtBQUssRUFBRTtZQUNaLElBQUksSUFBSSxDQUFDWCxRQUFRLEVBQUU7Z0JBQ2YsTUFBTSxJQUFJLENBQUNBLFFBQVEsQ0FBQ08sS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQ3hDO1FBQ0osT0FDSyxJQUFJLElBQUksQ0FBQ2EsVUFBVSxFQUFFO1lBQ3RCLE1BQU0sSUFBSSxDQUFDQSxVQUFVLENBQUNNLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtRQUMxQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzPzBkNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBSb290TGlzdGVuZXJzVHJhY2VyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoeyBjb25maWcsIG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHN1cGVyKHsgX2F3YWl0SGFuZGxlcjogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJSb290TGlzdGVuZXJzVHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgUnVuJ3MgSUQuIFR5cGUgVVVJRCAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uU3RhcnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25FbmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25FcnJvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5hcmdPblN0YXJ0ID0gb25TdGFydDtcbiAgICAgICAgdGhpcy5hcmdPbkVuZCA9IG9uRW5kO1xuICAgICAgICB0aGlzLmFyZ09uRXJyb3IgPSBvbkVycm9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgbGVnYWN5IG1ldGhvZCBvbmx5IGNhbGxlZCBvbmNlIGZvciBhbiBlbnRpcmUgcnVuIHRyZWVcbiAgICAgKiB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgICogQHBhcmFtIHtSdW59IF8gTm90IHVzZWRcbiAgICAgKi9cbiAgICBwZXJzaXN0UnVuKF8pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290SWQgPSBydW4uaWQ7XG4gICAgICAgIGlmICh0aGlzLmFyZ09uU3RhcnQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25TdGFydChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCAhPT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bi5lcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRW5kKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25FcnJvcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVycm9yKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFjZXIiLCJSb290TGlzdGVuZXJzVHJhY2VyIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJvblN0YXJ0Iiwib25FbmQiLCJvbkVycm9yIiwiX2F3YWl0SGFuZGxlciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJhcmdPblN0YXJ0IiwiYXJnT25FbmQiLCJhcmdPbkVycm9yIiwicGVyc2lzdFJ1biIsIl8iLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9uUnVuQ3JlYXRlIiwicnVuIiwicm9vdElkIiwiaWQiLCJvblJ1blVwZGF0ZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/langsmith/run_trees.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../singletons/tracer.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/tracer.js\");\n\n\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? (0,_singletons_tracer_js__WEBPACK_IMPORTED_MODULE_4__.getDefaultLangChainClientSingleton)();\n        const traceableTree = LangChainTracer.getTraceableRunTree();\n        if (traceableTree) {\n            this.updateFromRunTree(traceableTree);\n        }\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_2__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id,\n            extra: run.extra\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n    updateFromRunTree(runTree) {\n        let rootRun = runTree;\n        const visited = new Set();\n        while(rootRun.parent_run){\n            if (visited.has(rootRun.id)) break;\n            visited.add(rootRun.id);\n            if (!rootRun.parent_run) break;\n            rootRun = rootRun.parent_run;\n        }\n        visited.clear();\n        const queue = [\n            rootRun\n        ];\n        while(queue.length > 0){\n            const current = queue.shift();\n            if (!current || visited.has(current.id)) continue;\n            visited.add(current.id);\n            // @ts-expect-error Types of property 'events' are incompatible.\n            this.runMap.set(current.id, current);\n            if (current.child_runs) {\n                queue.push(...current.child_runs);\n            }\n        }\n        this.client = runTree.client ?? this.client;\n        this.projectName = runTree.project_name ?? this.projectName;\n        this.exampleId = runTree.reference_example_id ?? this.exampleId;\n    }\n    convertToRunTree(id) {\n        const runTreeMap = {};\n        const runTreeList = [];\n        for (const [id, run] of this.runMap){\n            // by converting the run map to a run tree, we are doing a copy\n            // thus, any mutation performed on the run tree will not be reflected\n            // back in the run map\n            // TODO: Stop using `this.runMap` in favour of LangSmith's `RunTree`\n            const runTree = new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_0__.RunTree({\n                ...run,\n                child_runs: [],\n                parent_run: undefined,\n                // inherited properties\n                client: this.client,\n                project_name: this.projectName,\n                reference_example_id: this.exampleId,\n                tracingEnabled: true\n            });\n            runTreeMap[id] = runTree;\n            runTreeList.push([\n                id,\n                run.dotted_order\n            ]);\n        }\n        runTreeList.sort((a, b)=>{\n            if (!a[1] || !b[1]) return 0;\n            return a[1].localeCompare(b[1]);\n        });\n        for (const [id] of runTreeList){\n            const run = this.runMap.get(id);\n            const runTree = runTreeMap[id];\n            if (!run || !runTree) continue;\n            if (run.parent_run_id) {\n                const parentRunTree = runTreeMap[run.parent_run_id];\n                if (parentRunTree) {\n                    parentRunTree.child_runs.push(runTree);\n                    runTree.parent_run = parentRunTree;\n                }\n            }\n        }\n        return runTreeMap[id];\n    }\n    static getTraceableRunTree() {\n        try {\n            return (0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.getCurrentRunTree)();\n        } catch  {\n            return undefined;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QztBQUNxQjtBQUNhO0FBQ3pDO0FBQ3NDO0FBQ3RFLE1BQU1NLHdCQUF3QkYsZ0RBQVVBO0lBQzNDRyxZQUFZQyxTQUFTLENBQUMsQ0FBQyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxNQUFNLEVBQUUsR0FBR1Q7UUFDM0MsSUFBSSxDQUFDUSxXQUFXLEdBQ1pBLGVBQ0lkLHFFQUFzQkEsQ0FBQyx3QkFDdkJBLHFFQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNhLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDRSxNQUFNLEdBQUdBLFVBQVVaLHlGQUFrQ0E7UUFDMUQsTUFBTWEsZ0JBQWdCWixnQkFBZ0JhLG1CQUFtQjtRQUN6RCxJQUFJRCxlQUFlO1lBQ2YsSUFBSSxDQUFDRSxpQkFBaUIsQ0FBQ0Y7UUFDM0I7SUFDSjtJQUNBLE1BQU1HLGlCQUFpQkMsR0FBRyxFQUFFQyxh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cyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcz80ZDg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3NpbmdsZXRvbnMvdHJhY2VhYmxlXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlLCBnZXRSdW50aW1lRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL3RyYWNlci5qc1wiO1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9qZWN0TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgZXhhbXBsZUlkLCBwcm9qZWN0TmFtZSwgY2xpZW50IH0gPSBmaWVsZHM7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPVxuICAgICAgICAgICAgcHJvamVjdE5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1BST0pFQ1RcIikgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIik7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudCA/PyBnZXREZWZhdWx0TGFuZ0NoYWluQ2xpZW50U2luZ2xldG9uKCk7XG4gICAgICAgIGNvbnN0IHRyYWNlYWJsZVRyZWUgPSBMYW5nQ2hhaW5UcmFjZXIuZ2V0VHJhY2VhYmxlUnVuVHJlZSgpO1xuICAgICAgICBpZiAodHJhY2VhYmxlVHJlZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGcm9tUnVuVHJlZSh0cmFjZWFibGVUcmVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfY29udmVydFRvQ3JlYXRlKHJ1biwgZXhhbXBsZV9pZCA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucnVuLFxuICAgICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgICAgICAuLi5ydW4uZXh0cmEsXG4gICAgICAgICAgICAgICAgcnVudGltZTogYXdhaXQgZ2V0UnVudGltZUVudmlyb25tZW50KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hpbGRfcnVuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2Vzc2lvbl9uYW1lOiB0aGlzLnByb2plY3ROYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHJ1bi5wYXJlbnRfcnVuX2lkID8gdW5kZWZpbmVkIDogZXhhbXBsZV9pZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7IH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkUnVuID0gYXdhaXQgdGhpcy5fY29udmVydFRvQ3JlYXRlKHJ1biwgdGhpcy5leGFtcGxlSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5jcmVhdGVSdW4ocGVyc2lzdGVkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blVwZGF0ZSA9IHtcbiAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICBldmVudHM6IHJ1bi5ldmVudHMsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICB0cmFjZV9pZDogcnVuLnRyYWNlX2lkLFxuICAgICAgICAgICAgZG90dGVkX29yZGVyOiBydW4uZG90dGVkX29yZGVyLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcnVuLnBhcmVudF9ydW5faWQsXG4gICAgICAgICAgICBleHRyYTogcnVuLmV4dHJhLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC51cGRhdGVSdW4ocnVuLmlkLCBydW5VcGRhdGUpO1xuICAgIH1cbiAgICBnZXRSdW4oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFwLmdldChpZCk7XG4gICAgfVxuICAgIHVwZGF0ZUZyb21SdW5UcmVlKHJ1blRyZWUpIHtcbiAgICAgICAgbGV0IHJvb3RSdW4gPSBydW5UcmVlO1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgICAgICB3aGlsZSAocm9vdFJ1bi5wYXJlbnRfcnVuKSB7XG4gICAgICAgICAgICBpZiAodmlzaXRlZC5oYXMocm9vdFJ1bi5pZCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB2aXNpdGVkLmFkZChyb290UnVuLmlkKTtcbiAgICAgICAgICAgIGlmICghcm9vdFJ1bi5wYXJlbnRfcnVuKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcm9vdFJ1biA9IHJvb3RSdW4ucGFyZW50X3J1bjtcbiAgICAgICAgfVxuICAgICAgICB2aXNpdGVkLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gW3Jvb3RSdW5dO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnQgfHwgdmlzaXRlZC5oYXMoY3VycmVudC5pZCkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB2aXNpdGVkLmFkZChjdXJyZW50LmlkKTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVHlwZXMgb2YgcHJvcGVydHkgJ2V2ZW50cycgYXJlIGluY29tcGF0aWJsZS5cbiAgICAgICAgICAgIHRoaXMucnVuTWFwLnNldChjdXJyZW50LmlkLCBjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50LmNoaWxkX3J1bnMpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKC4uLmN1cnJlbnQuY2hpbGRfcnVucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnQgPSBydW5UcmVlLmNsaWVudCA/PyB0aGlzLmNsaWVudDtcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9IHJ1blRyZWUucHJvamVjdF9uYW1lID8/IHRoaXMucHJvamVjdE5hbWU7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gcnVuVHJlZS5yZWZlcmVuY2VfZXhhbXBsZV9pZCA/PyB0aGlzLmV4YW1wbGVJZDtcbiAgICB9XG4gICAgY29udmVydFRvUnVuVHJlZShpZCkge1xuICAgICAgICBjb25zdCBydW5UcmVlTWFwID0ge307XG4gICAgICAgIGNvbnN0IHJ1blRyZWVMaXN0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2lkLCBydW5dIG9mIHRoaXMucnVuTWFwKSB7XG4gICAgICAgICAgICAvLyBieSBjb252ZXJ0aW5nIHRoZSBydW4gbWFwIHRvIGEgcnVuIHRyZWUsIHdlIGFyZSBkb2luZyBhIGNvcHlcbiAgICAgICAgICAgIC8vIHRodXMsIGFueSBtdXRhdGlvbiBwZXJmb3JtZWQgb24gdGhlIHJ1biB0cmVlIHdpbGwgbm90IGJlIHJlZmxlY3RlZFxuICAgICAgICAgICAgLy8gYmFjayBpbiB0aGUgcnVuIG1hcFxuICAgICAgICAgICAgLy8gVE9ETzogU3RvcCB1c2luZyBgdGhpcy5ydW5NYXBgIGluIGZhdm91ciBvZiBMYW5nU21pdGgncyBgUnVuVHJlZWBcbiAgICAgICAgICAgIGNvbnN0IHJ1blRyZWUgPSBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAgICAgLi4ucnVuLFxuICAgICAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgICAgIHBhcmVudF9ydW46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAvLyBpbmhlcml0ZWQgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICAgICAgICAgICAgcHJvamVjdF9uYW1lOiB0aGlzLnByb2plY3ROYW1lLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZV9leGFtcGxlX2lkOiB0aGlzLmV4YW1wbGVJZCxcbiAgICAgICAgICAgICAgICB0cmFjaW5nRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcnVuVHJlZU1hcFtpZF0gPSBydW5UcmVlO1xuICAgICAgICAgICAgcnVuVHJlZUxpc3QucHVzaChbaWQsIHJ1bi5kb3R0ZWRfb3JkZXJdKTtcbiAgICAgICAgfVxuICAgICAgICBydW5UcmVlTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWFbMV0gfHwgIWJbMV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICByZXR1cm4gYVsxXS5sb2NhbGVDb21wYXJlKGJbMV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChjb25zdCBbaWRdIG9mIHJ1blRyZWVMaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQoaWQpO1xuICAgICAgICAgICAgY29uc3QgcnVuVHJlZSA9IHJ1blRyZWVNYXBbaWRdO1xuICAgICAgICAgICAgaWYgKCFydW4gfHwgIXJ1blRyZWUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocnVuLnBhcmVudF9ydW5faWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRSdW5UcmVlID0gcnVuVHJlZU1hcFtydW4ucGFyZW50X3J1bl9pZF07XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1blRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuVHJlZS5jaGlsZF9ydW5zLnB1c2gocnVuVHJlZSk7XG4gICAgICAgICAgICAgICAgICAgIHJ1blRyZWUucGFyZW50X3J1biA9IHBhcmVudFJ1blRyZWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5UcmVlTWFwW2lkXTtcbiAgICB9XG4gICAgc3RhdGljIGdldFRyYWNlYWJsZVJ1blRyZWUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFJ1blRyZWUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1blRyZWUiLCJnZXRDdXJyZW50UnVuVHJlZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJCYXNlVHJhY2VyIiwiZ2V0RGVmYXVsdExhbmdDaGFpbkNsaWVudFNpbmdsZXRvbiIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImV4YW1wbGVJZCIsInByb2plY3ROYW1lIiwiY2xpZW50IiwidHJhY2VhYmxlVHJlZSIsImdldFRyYWNlYWJsZVJ1blRyZWUiLCJ1cGRhdGVGcm9tUnVuVHJlZSIsIl9jb252ZXJ0VG9DcmVhdGUiLCJydW4iLCJleGFtcGxlX2lkIiwidW5kZWZpbmVkIiwiZXh0cmEiLCJydW50aW1lIiwiY2hpbGRfcnVucyIsInNlc3Npb25fbmFtZSIsInJlZmVyZW5jZV9leGFtcGxlX2lkIiwicGFyZW50X3J1bl9pZCIsInBlcnNpc3RSdW4iLCJfcnVuIiwib25SdW5DcmVhdGUiLCJwZXJzaXN0ZWRSdW4iLCJjcmVhdGVSdW4iLCJvblJ1blVwZGF0ZSIsInJ1blVwZGF0ZSIsImVuZF90aW1lIiwiZXJyb3IiLCJvdXRwdXRzIiwiZXZlbnRzIiwiaW5wdXRzIiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJ1cGRhdGVSdW4iLCJpZCIsImdldFJ1biIsInJ1bk1hcCIsImdldCIsInJ1blRyZWUiLCJyb290UnVuIiwidmlzaXRlZCIsIlNldCIsInBhcmVudF9ydW4iLCJoYXMiLCJhZGQiLCJjbGVhciIsInF1ZXVlIiwibGVuZ3RoIiwiY3VycmVudCIsInNoaWZ0Iiwic2V0IiwicHVzaCIsInByb2plY3RfbmFtZSIsImNvbnZlcnRUb1J1blRyZWUiLCJydW5UcmVlTWFwIiwicnVuVHJlZUxpc3QiLCJ0cmFjaW5nRW5hYmxlZCIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJwYXJlbnRSdW5UcmVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUNHO0FBQ2hDLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELDhEQUE4RDtBQUM5RCxNQUFNQyw4QkFBOEIsQ0FBQ0M7SUFDakMsSUFBSUEsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsYUFDekJGLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGlCQUN6QkYsTUFBTUcsSUFBSSxLQUFLLGNBQWM7UUFDN0IsTUFBTUg7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPSSxTQUFTLGdCQUFnQjtRQUNoQyxNQUFNSjtJQUNWO0lBQ0EsTUFBTUssU0FDTiw4REFBOEQ7SUFDOURMLE9BQU9NLFVBQVVELFVBQVVMLE9BQU9LO0lBQ2xDLElBQUlBLFVBQVVQLGdCQUFnQlMsUUFBUSxDQUFDLENBQUNGLFNBQVM7UUFDN0MsTUFBTUw7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPQSxPQUFPSSxTQUFTLHNCQUFzQjtRQUM3QyxNQUFNSSxNQUFNLElBQUlDLE1BQU1ULE9BQU9DO1FBQzdCTyxJQUFJTCxJQUFJLEdBQUc7UUFDWCxNQUFNSztJQUNWO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxPQUFPTyxjQUFjLElBQUlDO1FBQy9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHVCxPQUFPUyxVQUFVLElBQUk7UUFDdkMsSUFBSSxDQUFDQyxlQUFlLEdBQ2hCVixPQUFPVSxlQUFlLElBQUl2QjtRQUM5QixNQUFNd0IsU0FBUyxLQUFzQjFCLEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7UUFDckUsSUFBSSxDQUFDNEIsS0FBSyxHQUFHLElBQUlGLE9BQU87WUFBRUcsYUFBYSxJQUFJLENBQUNQLGNBQWM7UUFBQztJQUMvRDtJQUNBLDhEQUE4RDtJQUM5RFEsS0FBS0MsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxHQUFHLENBQUMsSUFBTWxDLG9DQUFNQSxDQUFDLElBQU1nQyxZQUFZQyxNQUFNRSxLQUFLLENBQUMsQ0FBQy9CO29CQUM5RCx1REFBdUQ7b0JBQ3ZELElBQUlBLGlCQUFpQlMsT0FBTzt3QkFDeEIsTUFBTVQ7b0JBQ1YsT0FDSzt3QkFDRCxNQUFNLElBQUlTLE1BQU1UO29CQUNwQjtnQkFDSixJQUFJO2dCQUNBc0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtnQkFDckNVLFNBQVMsSUFBSSxDQUFDWCxVQUFVO2dCQUN4QlksV0FBVztZQUdmLElBQUk7WUFBRUMsZ0JBQWdCO1FBQUs7SUFDL0I7SUFDQSw4REFBOEQ7SUFDOURDLGdCQUFnQkMsT0FBTyxFQUFFUixRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3hDLG1EQUFtRDtRQUNuRCx3RUFBd0U7UUFDeEUsSUFBSU8sUUFBUUMsTUFBTSxFQUFFO1lBQ2hCLE9BQU9DLFFBQVFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxDQUFDWixJQUFJLENBQUNDLGFBQWFDO2dCQUN2QixJQUFJUyxRQUFRLENBQUNFLEdBQUdDO29CQUNaTCxRQUFRQyxNQUFNLEVBQUVLLGlCQUFpQixTQUFTO3dCQUN0Q0QsT0FBTyxJQUFJaEMsTUFBTTtvQkFDckI7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNrQixJQUFJLENBQUNDLGFBQWFDO0lBQ2xDO0lBQ0FjLE1BQU0sR0FBR2QsSUFBSSxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxJQUFNZ0IsU0FBU2QsTUFBTWUsSUFBSSxDQUFDLENBQUNDLE1BQVNBLElBQUlDLEVBQUUsR0FBR0QsTUFBTVAsUUFBUUcsTUFBTSxDQUFDSTtJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcz8xNGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmNvbnN0IFNUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMixcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8XG4gICAgICAgIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uY29kZSA9PT0gXCJFQ09OTkFCT1JURURcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdHVzID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlcnJvcj8ucmVzcG9uc2U/LnN0YXR1cyA/PyBlcnJvcj8uc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgJiYgU1RBVFVTX05PX1JFVFJZLmluY2x1ZGVzKCtzdGF0dXMpKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uZXJyb3I/LmNvZGUgPT09IFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgZXJyLm5hbWUgPSBcIkluc3VmZmljaWVudFF1b3RhRXJyb3JcIjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJxdWV1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9XG4gICAgICAgICAgICBwYXJhbXMub25GYWlsZWRBdHRlbXB0ID8/IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlcjtcbiAgICAgICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgICAgIHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5hZGQoKCkgPT4gcFJldHJ5KCgpID0+IGNhbGxhYmxlKC4uLmFyZ3MpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgLy8gSWYgbmVlZGVkIHdlIGNhbiBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdHMgaGVyZSxcbiAgICAgICAgICAgIC8vIGJ1dCB0aGV5J3JlIHF1aXRlIHNlbnNpYmxlLlxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gTm90ZSB0aGlzIGRvZXNuJ3QgY2FuY2VsIHRoZSB1bmRlcmx5aW5nIHJlcXVlc3QsXG4gICAgICAgIC8vIHdoZW4gYXZhaWxhYmxlIHByZWZlciB0byB1c2UgdGhlIHNpZ25hbCBvcHRpb24gb2YgdGhlIHVuZGVybHlpbmcgY2FsbFxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZmV0Y2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoKC4uLmFyZ3MpLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcyA6IFByb21pc2UucmVqZWN0KHJlcykpKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19OT19SRVRSWSIsImRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciIsImVycm9yIiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiaW5jbHVkZXMiLCJlcnIiLCJFcnJvciIsIkFzeW5jQ2FsbGVyIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWF4Q29uY3VycmVuY3kiLCJJbmZpbml0eSIsIm1heFJldHJpZXMiLCJvbkZhaWxlZEF0dGVtcHQiLCJQUXVldWUiLCJkZWZhdWx0IiwicXVldWUiLCJjb25jdXJyZW5jeSIsImNhbGwiLCJjYWxsYWJsZSIsImFyZ3MiLCJhZGQiLCJjYXRjaCIsInJldHJpZXMiLCJyYW5kb21pemUiLCJ0aHJvd09uVGltZW91dCIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaWduYWwiLCJQcm9taXNlIiwicmFjZSIsIl8iLCJyZWplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/callbacks.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isTracingEnabled: () => (/* binding */ isTracingEnabled)\n/* harmony export */ });\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\nconst isTracingEnabled = (tracingEnabled)=>{\n    if (tracingEnabled !== undefined) {\n        return tracingEnabled;\n    }\n    const envVars = [\n        \"LANGSMITH_TRACING_V2\",\n        \"LANGCHAIN_TRACING_V2\",\n        \"LANGSMITH_TRACING\",\n        \"LANGCHAIN_TRACING\"\n    ];\n    return !!envVars.find((envVar)=>(0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(envVar) === \"true\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2FsbGJhY2tzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDLE1BQU1DLG1CQUFtQixDQUFDQztJQUM3QixJQUFJQSxtQkFBbUJDLFdBQVc7UUFDOUIsT0FBT0Q7SUFDWDtJQUNBLE1BQU1FLFVBQVU7UUFDWjtRQUNBO1FBQ0E7UUFDQTtLQUNIO0lBQ0QsT0FBTyxDQUFDLENBQUNBLFFBQVFDLElBQUksQ0FBQyxDQUFDQyxTQUFXTiwrREFBc0JBLENBQUNNLFlBQVk7QUFDekUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9jYWxsYmFja3MuanM/YzczNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4vZW52LmpzXCI7XG5leHBvcnQgY29uc3QgaXNUcmFjaW5nRW5hYmxlZCA9ICh0cmFjaW5nRW5hYmxlZCkgPT4ge1xuICAgIGlmICh0cmFjaW5nRW5hYmxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cmFjaW5nRW5hYmxlZDtcbiAgICB9XG4gICAgY29uc3QgZW52VmFycyA9IFtcbiAgICAgICAgXCJMQU5HU01JVEhfVFJBQ0lOR19WMlwiLFxuICAgICAgICBcIkxBTkdDSEFJTl9UUkFDSU5HX1YyXCIsXG4gICAgICAgIFwiTEFOR1NNSVRIX1RSQUNJTkdcIixcbiAgICAgICAgXCJMQU5HQ0hBSU5fVFJBQ0lOR1wiLFxuICAgIF07XG4gICAgcmV0dXJuICEhZW52VmFycy5maW5kKChlbnZWYXIpID0+IGdldEVudmlyb25tZW50VmFyaWFibGUoZW52VmFyKSA9PT0gXCJ0cnVlXCIpO1xufTtcbiJdLCJuYW1lcyI6WyJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiaXNUcmFjaW5nRW5hYmxlZCIsInRyYWNpbmdFbmFibGVkIiwidW5kZWZpbmVkIiwiZW52VmFycyIsImZpbmQiLCJlbnZWYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/callbacks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/chunk_array.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* binding */ chunkArray)\n/* harmony export */ });\nconst chunkArray = (arr, chunkSize)=>arr.reduce((chunks, elem, index)=>{\n        const chunkIndex = Math.floor(index / chunkSize);\n        const chunk = chunks[chunkIndex] || [];\n        // eslint-disable-next-line no-param-reassign\n        chunks[chunkIndex] = chunk.concat([\n            elem\n        ]);\n        return chunks;\n    }, []);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGFBQWEsQ0FBQ0MsS0FBS0MsWUFBY0QsSUFBSUUsTUFBTSxDQUFDLENBQUNDLFFBQVFDLE1BQU1DO1FBQ3BFLE1BQU1DLGFBQWFDLEtBQUtDLEtBQUssQ0FBQ0gsUUFBUUo7UUFDdEMsTUFBTVEsUUFBUU4sTUFBTSxDQUFDRyxXQUFXLElBQUksRUFBRTtRQUN0Qyw2Q0FBNkM7UUFDN0NILE1BQU0sQ0FBQ0csV0FBVyxHQUFHRyxNQUFNQyxNQUFNLENBQUM7WUFBQ047U0FBSztRQUN4QyxPQUFPRDtJQUNYLEdBQUcsRUFBRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2NodW5rX2FycmF5LmpzP2MwOGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNodW5rQXJyYXkgPSAoYXJyLCBjaHVua1NpemUpID0+IGFyci5yZWR1Y2UoKGNodW5rcywgZWxlbSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjaHVua0luZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIGNodW5rU2l6ZSk7XG4gICAgY29uc3QgY2h1bmsgPSBjaHVua3NbY2h1bmtJbmRleF0gfHwgW107XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgY2h1bmtzW2NodW5rSW5kZXhdID0gY2h1bmsuY29uY2F0KFtlbGVtXSk7XG4gICAgcmV0dXJuIGNodW5rcztcbn0sIFtdKTtcbiJdLCJuYW1lcyI6WyJjaHVua0FycmF5IiwiYXJyIiwiY2h1bmtTaXplIiwicmVkdWNlIiwiY2h1bmtzIiwiZWxlbSIsImluZGV4IiwiY2h1bmtJbmRleCIsIk1hdGgiLCJmbG9vciIsImNodW5rIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        if (typeof process !== \"undefined\") {\n            // eslint-disable-next-line no-process-env\n            return process.env?.[name];\n        } else if (isDeno()) {\n            return Deno?.env.get(name);\n        } else {\n            return undefined;\n        }\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsWUFBWSxJQUFNLE1BQTZCLElBQUksQ0FBc0MsQ0FBQztBQUNoRyxNQUFNRyxjQUFjLElBQU0sT0FBT0MsZUFBZSxZQUNuREEsV0FBV0MsV0FBVyxJQUN0QkQsV0FBV0MsV0FBVyxDQUFDQyxJQUFJLEtBQUssNkJBQTZCO0FBQzFELE1BQU1DLFVBQVUsSUFBTSxNQUEwRCxJQUNsRixPQUFPQyxjQUFjLGVBQ2pCQSxDQUFBQSxVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxjQUMxQkYsVUFBVUMsU0FBUyxDQUFDQyxRQUFRLENBQUMsUUFBTyxFQUFJO0FBQ3BELHlEQUF5RDtBQUN6RCw2QkFBNkI7QUFDdEIsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFNBQVMsWUFBWTtBQUN4RCxnREFBZ0Q7QUFDekMsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFlBQVksZUFDM0MsT0FBT0EsUUFBUUMsUUFBUSxLQUFLLGVBQzVCLE9BQU9ELFFBQVFDLFFBQVEsQ0FBQ0MsSUFBSSxLQUFLLGVBQ2pDLENBQUNMLFNBQVM7QUFDUCxNQUFNTSxTQUFTO0lBQ2xCLElBQUlDO0lBQ0osSUFBSWxCLGFBQWE7UUFDYmtCLE1BQU07SUFDVixPQUNLLElBQUlMLFVBQVU7UUFDZkssTUFBTTtJQUNWLE9BQ0ssSUFBSWYsZUFBZTtRQUNwQmUsTUFBTTtJQUNWLE9BQ0ssSUFBSVgsV0FBVztRQUNoQlcsTUFBTTtJQUNWLE9BQ0ssSUFBSVAsVUFBVTtRQUNmTyxNQUFNO0lBQ1YsT0FDSztRQUNEQSxNQUFNO0lBQ1Y7SUFDQSxPQUFPQTtBQUNYLEVBQUU7QUFDRixJQUFJQztBQUNHLGVBQWVDO0lBQ2xCLElBQUlELHVCQUF1QkUsV0FBVztRQUNsQyxNQUFNSCxNQUFNRDtRQUNaRSxxQkFBcUI7WUFDakJHLFNBQVM7WUFDVEMsU0FBU0w7UUFDYjtJQUNKO0lBQ0EsT0FBT0M7QUFDWDtBQUNPLFNBQVNLLHVCQUF1QmxCLElBQUk7SUFDdkMscUZBQXFGO0lBQ3JGLDBEQUEwRDtJQUMxRCxJQUFJO1FBQ0EsSUFBSSxPQUFPUSxZQUFZLGFBQWE7WUFDaEMsMENBQTBDO1lBQzFDLE9BQU9BLFFBQVFJLEdBQUcsRUFBRSxDQUFDWixLQUFLO1FBQzlCLE9BQ0ssSUFBSUssVUFBVTtZQUNmLE9BQU9DLE1BQU1NLElBQUlPLElBQUluQjtRQUN6QixPQUNLO1lBQ0QsT0FBT2U7UUFDWDtJQUNKLEVBQ0EsT0FBT0ssR0FBRztRQUNOLE9BQU9MO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9lbnYuanM/NDJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyID0gKCkgPT4gdHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkRlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlXCI7XG5leHBvcnQgY29uc3QgaXNKc0RvbSA9ICgpID0+ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5uYW1lID09PSBcIm5vZGVqc1wiKSB8fFxuICAgICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTm9kZS5qc1wiKSB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcImpzZG9tXCIpKSk7XG4vLyBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uIHByb3ZpZGVzIGEgYERlbm9gIGdsb2JhbCBvYmplY3Rcbi8vIHdpdGhvdXQgYHZlcnNpb25gIHByb3BlcnR5XG5leHBvcnQgY29uc3QgaXNEZW5vID0gKCkgPT4gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCI7XG4vLyBNYXJrIG5vdC1hcy1ub2RlIGlmIGluIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbmV4cG9ydCBjb25zdCBpc05vZGUgPSAoKSA9PiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICFpc0Rlbm8oKTtcbmV4cG9ydCBjb25zdCBnZXRFbnYgPSAoKSA9PiB7XG4gICAgbGV0IGVudjtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgZW52ID0gXCJicm93c2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTm9kZSgpKSB7XG4gICAgICAgIGVudiA9IFwibm9kZVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1dlYldvcmtlcigpKSB7XG4gICAgICAgIGVudiA9IFwid2Vid29ya2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSnNEb20oKSkge1xuICAgICAgICBlbnYgPSBcImpzZG9tXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRGVubygpKSB7XG4gICAgICAgIGVudiA9IFwiZGVub1wiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW52ID0gXCJvdGhlclwiO1xuICAgIH1cbiAgICByZXR1cm4gZW52O1xufTtcbmxldCBydW50aW1lRW52aXJvbm1lbnQ7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UnVudGltZUVudmlyb25tZW50KCkge1xuICAgIGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICAgICAgcnVudGltZUVudmlyb25tZW50ID0ge1xuICAgICAgICAgICAgbGlicmFyeTogXCJsYW5nY2hhaW4tanNcIixcbiAgICAgICAgICAgIHJ1bnRpbWU6IGVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcbiAgICAvLyBDZXJ0YWluIERlbm8gc2V0dXBzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBhY2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9pc3N1ZXMvMTQxMlxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnY/LltuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICAgICAgcmV0dXJuIERlbm8/LmVudi5nZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiaXNXZWJXb3JrZXIiLCJnbG9iYWxUaGlzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNKc0RvbSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNEZW5vIiwiRGVubyIsImlzTm9kZSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnZXRFbnYiLCJlbnYiLCJydW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJ1bmRlZmluZWQiLCJsaWJyYXJ5IiwicnVudGltZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJnZXQiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRTtBQUNzRztBQUN0STs7Q0FFQyxHQUNxQztBQUNnRztBQUN0SSxpRUFBZTtJQUNYLEdBQUdNLHlDQUFJO0lBQ1AsYUFBYTtJQUNiTCxjQUFjQSx5REFBQUE7SUFDZEUsU0FBU0EseURBQUFBO0lBQ1RDLG1CQUFtQkEsa0VBQUFBO0lBQ25CQyxxQkFBcUJBLG9FQUFBQTtBQUN6QixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzPzRjOTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9kdXBsZXguanNcIjtcbmV4cG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbi8qKlxuICogRGVmYXVsdCBleHBvcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuaW1wb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC4uLmNvcmUsXG4gICAgLy8gLi4uZHVwbGV4LFxuICAgIEpzb25QYXRjaEVycm9yLFxuICAgIGRlZXBDbG9uZSxcbiAgICBlc2NhcGVQYXRoQ29tcG9uZW50LFxuICAgIHVuZXNjYXBlUGF0aENvbXBvbmVudCxcbn07XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIkpzb25QYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImRlZXBDbG9uZSIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJjb3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ3lGO0FBQ2hHLE1BQU1LLGlCQUFpQkwsbURBQVVBLENBQUM7QUFDbEMsTUFBTU0sWUFBWUwsbURBQVVBLENBQUM7QUFDcEM7Ozs7O0NBS0MsR0FDRCwwQ0FBMEMsR0FDMUMsTUFBTU0sU0FBUztJQUNYQyxLQUFLLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzdCRixHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtRQUFTO0lBQ25DO0lBQ0FHLFFBQVEsU0FBVUwsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDaEMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCLE9BQU9ELEdBQUcsQ0FBQ0MsSUFBSTtRQUNmLE9BQU87WUFBRUcsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBQyxTQUFTLFNBQVVQLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2pDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QkQsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNLFNBQVVSLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCOztvQ0FFNEIsR0FDNUIsSUFBSUksVUFBVUcsa0JBQWtCUCxVQUFVLElBQUksQ0FBQ1EsSUFBSTtRQUNuRCxJQUFJSixTQUFTO1lBQ1RBLFVBQVVkLHVEQUFVQSxDQUFDYztRQUN6QjtRQUNBLE1BQU1LLGdCQUFnQkMsZUFBZVYsVUFBVTtZQUMzQ1csSUFBSTtZQUNKSCxNQUFNLElBQUksQ0FBQ0ksSUFBSTtRQUNu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d2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanM/ZGY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSwgaXNJbnRlZ2VyLCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIGhhc1VuZGVmaW5lZCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5leHBvcnQgY29uc3QgSnNvblBhdGNoRXJyb3IgPSBQYXRjaEVycm9yO1xuZXhwb3J0IGNvbnN0IGRlZXBDbG9uZSA9IF9kZWVwQ2xvbmU7XG4vKiBXZSB1c2UgYSBKYXZhc2NyaXB0IGhhc2ggdG8gc3RvcmUgZWFjaFxuIGZ1bmN0aW9uLiBFYWNoIGhhc2ggZW50cnkgKHByb3BlcnR5KSB1c2VzXG4gdGhlIG9wZXJhdGlvbiBpZGVudGlmaWVycyBzcGVjaWZpZWQgaW4gcmZjNjkwMi5cbiBJbiB0aGlzIHdheSwgd2UgY2FuIG1hcCBlYWNoIHBhdGNoIG9wZXJhdGlvblxuIHRvIGl0cyBkZWRpY2F0ZWQgZnVuY3Rpb24gaW4gZWZmaWNpZW50IHdheS5cbiAqL1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBvYmplY3QgKi9cbmNvbnN0IG9iak9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICAvKiBpbiBjYXNlIG1vdmUgdGFyZ2V0IG92ZXJ3cml0ZXMgYW4gZXhpc3RpbmcgdmFsdWUsXG4gICAgICAgIHJldHVybiB0aGUgcmVtb3ZlZCB2YWx1ZSwgdGhpcyBjYW4gYmUgdGF4aW5nIHBlcmZvcm1hbmNlLXdpc2UsXG4gICAgICAgIGFuZCBpcyBwb3RlbnRpYWxseSB1bm5lZWRlZCAqL1xuICAgICAgICBsZXQgcmVtb3ZlZCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLnBhdGgpO1xuICAgICAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZCA9IF9kZWVwQ2xvbmUocmVtb3ZlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxWYWx1ZSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuZnJvbSxcbiAgICAgICAgfSkucmVtb3ZlZDtcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IG9yaWdpbmFsVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIGNvcHk6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdmFsdWVUb0NvcHkgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5mcm9tKTtcbiAgICAgICAgLy8gZW5mb3JjZSBjb3B5IGJ5IHZhbHVlIHNvIGZ1cnRoZXIgb3BlcmF0aW9ucyBkb24ndCBhZmZlY3Qgc291cmNlIChzZWUgaXNzdWUgIzE3NylcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUodmFsdWVUb0NvcHkpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICB0ZXN0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgdGVzdDogX2FyZUVxdWFscyhvYmpba2V5XSwgdGhpcy52YWx1ZSkgfTtcbiAgICB9LFxuICAgIF9nZXQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxufTtcbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gYXJyYXkuIE1hbnkgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgb2JqZWN0ICovXG52YXIgYXJyT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGlzSW50ZWdlcihpKSkge1xuICAgICAgICAgICAgYXJyLnNwbGljZShpLCAwLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5IHByb3BzXG4gICAgICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgbWF5IGJlIG5lZWRlZCB3aGVuIHVzaW5nICctJyBpbiBhbiBhcnJheVxuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIGluZGV4OiBpIH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkTGlzdCA9IGFyci5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZDogcmVtb3ZlZExpc3RbMF0gfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gYXJyW2ldO1xuICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IG9iak9wcy5tb3ZlLFxuICAgIGNvcHk6IG9iak9wcy5jb3B5LFxuICAgIHRlc3Q6IG9iak9wcy50ZXN0LFxuICAgIF9nZXQ6IG9iak9wcy5fZ2V0LFxufTtcbi8qKlxuICogUmV0cmlldmVzIGEgdmFsdWUgZnJvbSBhIEpTT04gZG9jdW1lbnQgYnkgYSBKU09OIHBvaW50ZXIuXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIGdldCB0aGUgdmFsdWUgZnJvbVxuICogQHBhcmFtIHBvaW50ZXIgYW4gZXNjYXBlZCBKU09OIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHJldHJpZXZlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHBvaW50ZXIpIHtcbiAgICBpZiAocG9pbnRlciA9PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgdmFyIGdldE9yaWdpbmFsRGVzdGluYXRpb24gPSB7IG9wOiBcIl9nZXRcIiwgcGF0aDogcG9pbnRlciB9O1xuICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBnZXRPcmlnaW5hbERlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbi52YWx1ZTtcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBvcGVyYXRpb24uXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBhbmQgYG9wZXJhdGlvbmAgb2JqZWN0cyAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKG9wZXJhdGlvbikpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBvcGVyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24sIHZhbGlkYXRlT3BlcmF0aW9uID0gZmFsc2UsIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUsIGluZGV4ID0gMCkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVPcGVyYXRpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgb3BlcmF0aW9uLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdG9yKG9wZXJhdGlvbiwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogUk9PVCBPUEVSQVRJT05TICovXG4gICAgaWYgKG9wZXJhdGlvbi5wYXRoID09PSBcIlwiKSB7XG4gICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50OyAvL2RvY3VtZW50IHdlIHJlbW92ZWRcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIC8vIGl0J3MgYSBtb3ZlIG9yIGNvcHkgdG8gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgb3BlcmF0aW9uLmZyb20pOyAvLyBnZXQgdGhlIHZhbHVlIGJ5IGpzb24tcG9pbnRlciBpbiBgZnJvbWAgZmllbGRcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlbW92ZWQgaXRlbVxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS50ZXN0ID0gX2FyZUVxdWFscyhkb2N1bWVudCwgb3BlcmF0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgLy8gYSByZW1vdmUgb24gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogYmFkIG9wZXJhdGlvbiAqL1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IC8qIEVORCBST09UIE9QRVJBVElPTlMgKi9cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gb3BlcmF0aW9uLnBhdGggfHwgXCJcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICBsZXQgb2JqID0gZG9jdW1lbnQ7XG4gICAgICAgIGxldCB0ID0gMTsgLy9za2lwIGVtcHR5IGVsZW1lbnQgLSBodHRwOi8vanNwZXJmLmNvbS90by1zaGlmdC1vci1ub3QtdG8tc2hpZnRcbiAgICAgICAgbGV0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBsZXQgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGxldCB2YWxpZGF0ZUZ1bmN0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRlT3BlcmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRvcjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAga2V5ID0ga2V5c1t0XTtcbiAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YoXCJ+XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdW5lc2NhcGVQYXRoQ29tcG9uZW50KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyAmJlxuICAgICAgICAgICAgICAgIChrZXkgPT0gXCJfX3Byb3RvX19cIiB8fFxuICAgICAgICAgICAgICAgICAgICAoa2V5ID09IFwicHJvdG90eXBlXCIgJiYgdCA+IDAgJiYga2V5c1t0IC0gMV0gPT0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSlNPTi1QYXRjaDogbW9kaWZ5aW5nIGBfX3Byb3RvX19gIG9yIGBjb25zdHJ1Y3Rvci9wcm90b3R5cGVgIHByb3AgaXMgYmFubmVkIGZvciBzZWN1cml0eSByZWFzb25zLCBpZiB0aGlzIHdhcyBvbiBwdXJwb3NlLCBwbGVhc2Ugc2V0IGBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zYCBmbGFnIGZhbHNlIGFuZCBwYXNzIGl0IHRvIHRoaXMgZnVuY3Rpb24uIE1vcmUgaW5mbyBpbiBmYXN0LWpzb24tcGF0Y2ggUkVBRE1FXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0ga2V5cy5zbGljZSgwLCB0KS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gb3BlcmF0aW9uLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IG9iai5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgIWlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJFeHBlY3RlZCBhbiB1bnNpZ25lZCBiYXNlLTEwIGludGVnZXIgdmFsdWUsIG1ha2luZyB0aGUgbmV3IHJlZmVyZW5jZWQgdmFsdWUgdGhlIGFycmF5IGVsZW1lbnQgd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleFwiLCBcIk9QRVJBVElPTl9QQVRIX0lMTEVHQUxfQVJSQVlfSU5ERVhcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIG9ubHkgcGFyc2Uga2V5IHdoZW4gaXQncyBhbiBpbnRlZ2VyIGZvciBgYXJyLnByb3BgIHRvIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IH5+a2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgb3BlcmF0aW9uLm9wID09PSBcImFkZFwiICYmIGtleSA+IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRoZSBzcGVjaWZpZWQgaW5kZXggTVVTVCBOT1QgYmUgZ3JlYXRlciB0aGFuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5XCIsIFwiT1BFUkFUSU9OX1ZBTFVFX09VVF9PRl9CT1VORFNcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gYXJyT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gb2JqT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vcmUga2V5cyBpbiB0aGUgcGF0aCwgYnV0IHRoZSBuZXh0IHZhbHVlIGlzbid0IGEgbm9uLW51bGwgb2JqZWN0LFxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFIGVycm9yIGluc3RlYWQgb2YgaXRlcmF0aW5nIGFnYWluLlxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIHQgPCBsZW4gJiYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IGEgZnVsbCBKU09OIFBhdGNoIGFycmF5IG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgcGF0Y2guXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBvYmplY3QgYW5kIGBwYXRjaGAgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5UGF0Y2goZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKHBhdGNoKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBwYXRjaCBUaGUgcGF0Y2ggdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIEFuIGFycmF5IG9mIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBwYXRjaFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYXRjaChkb2N1bWVudCwgcGF0Y2gsIHZhbGlkYXRlT3BlcmF0aW9uLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXRjaCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHBhdGNoLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHBhdGNoLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtdXRhdGVEb2N1bWVudCBhcmd1bWVudCBiZWNhdXNlIGlmIGl0IHdhcyB0cnVlLCB3ZSBhbHJlYWR5IGRlZXAgY2xvbmVkIHRoZSBvYmplY3QsIHdlJ2xsIGp1c3QgcGFzcyBgdHJ1ZWBcbiAgICAgICAgcmVzdWx0c1tpXSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBwYXRjaFtpXSwgdmFsaWRhdGVPcGVyYXRpb24sIHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMsIGkpO1xuICAgICAgICBkb2N1bWVudCA9IHJlc3VsdHNbaV0ubmV3RG9jdW1lbnQ7IC8vIGluIGNhc2Ugcm9vdCB3YXMgcmVwbGFjZWRcbiAgICB9XG4gICAgcmVzdWx0cy5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIGRvY3VtZW50LlxuICogU3VpdGFibGUgYXMgYSByZWR1Y2VyLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHJldHVybiBUaGUgdXBkYXRlZCBkb2N1bWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZWR1Y2VyKGRvY3VtZW50LCBvcGVyYXRpb24sIGluZGV4KSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uUmVzdWx0ID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbik7XG4gICAgaWYgKG9wZXJhdGlvblJlc3VsdC50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAvLyBmYWlsZWQgdGVzdFxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uUmVzdWx0Lm5ld0RvY3VtZW50O1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzaW5nbGUgb3BlcmF0aW9uLiBDYWxsZWQgZnJvbSBganNvbnBhdGNoLnZhbGlkYXRlYC4gVGhyb3dzIGBKc29uUGF0Y2hFcnJvcmAgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcGVyYXRpb24gLSBvcGVyYXRpb24gb2JqZWN0IChwYXRjaClcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIGluZGV4IG9mIG9wZXJhdGlvbiBpbiB0aGUgc2VxdWVuY2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZG9jdW1lbnRdIC0gb2JqZWN0IHdoZXJlIHRoZSBvcGVyYXRpb24gaXMgc3VwcG9zZWQgdG8gYmUgYXBwbGllZFxuICogQHBhcmFtIHtzdHJpbmd9IFtleGlzdGluZ1BhdGhGcmFnbWVudF0gLSBjb21lcyBhbG9uZyB3aXRoIGBkb2N1bWVudGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRvcihvcGVyYXRpb24sIGluZGV4LCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICBpZiAodHlwZW9mIG9wZXJhdGlvbiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICBvcGVyYXRpb24gPT09IG51bGwgfHxcbiAgICAgICAgQXJyYXkuaXNBcnJheShvcGVyYXRpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBpcyBub3QgYW4gb2JqZWN0XCIsIFwiT1BFUkFUSU9OX05PVF9BTl9PQkpFQ1RcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghb2JqT3BzW29wZXJhdGlvbi5vcF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBvcGVyYXRpb24ucGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IGlzIG5vdCBhIHN0cmluZ1wiLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24ucGF0aC5pbmRleE9mKFwiL1wiKSAhPT0gMCAmJiBvcGVyYXRpb24ucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHBhdGhzIHRoYXQgYXJlbid0IGVtcHR5IHN0cmluZyBzaG91bGQgc3RhcnQgd2l0aCBcIi9cIlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoJ09wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgbXVzdCBzdGFydCB3aXRoIFwiL1wiJywgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikgJiZcbiAgICAgICAgdHlwZW9mIG9wZXJhdGlvbi5mcm9tICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgZnJvbWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYG1vdmVgIGFuZCBgY29weWAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fRlJPTV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBvcGVyYXRpb24udmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgaGFzVW5kZWZpbmVkKG9wZXJhdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX0NBTk5PVF9DT05UQUlOX1VOREVGSU5FRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT0gXCJhZGRcIikge1xuICAgICAgICAgICAgdmFyIHBhdGhMZW4gPSBvcGVyYXRpb24ucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nUGF0aExlbiA9IGV4aXN0aW5nUGF0aEZyYWdtZW50LnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuICsgMSAmJiBwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBhbiBgYWRkYCBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX0NBTk5PVF9BRERcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXRoICE9PSBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gYXQgYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgb3A6IFwiX2dldFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IG9wZXJhdGlvbi5mcm9tLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGUoW2V4aXN0aW5nVmFsdWVdLCBkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gZnJvbSBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9GUk9NX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMuIElmIGBkb2N1bWVudGAgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGUgc2VxdWVuY2UgaXMgYWRkaXRpb25hbGx5IHZhbGlkYXRlZCBhZ2FpbnN0IHRoZSBvYmplY3QgZG9jdW1lbnQuXG4gKiBJZiBlcnJvciBpcyBlbmNvdW50ZXJlZCwgcmV0dXJucyBhIEpzb25QYXRjaEVycm9yIG9iamVjdFxuICogQHBhcmFtIHNlcXVlbmNlXG4gKiBAcGFyYW0gZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtKc29uUGF0Y2hFcnJvcnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZShzZXF1ZW5jZSwgZG9jdW1lbnQsIGV4dGVybmFsVmFsaWRhdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIC8vY2xvbmUgZG9jdW1lbnQgYW5kIHNlcXVlbmNlIHNvIHRoYXQgd2UgY2FuIHNhZmVseSB0cnkgYXBwbHlpbmcgb3BlcmF0aW9uc1xuICAgICAgICAgICAgYXBwbHlQYXRjaChfZGVlcENsb25lKGRvY3VtZW50KSwgX2RlZXBDbG9uZShzZXF1ZW5jZSksIGV4dGVybmFsVmFsaWRhdG9yIHx8IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3IgPSBleHRlcm5hbFZhbGlkYXRvciB8fCB2YWxpZGF0b3I7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3Ioc2VxdWVuY2VbaV0sIGksIGRvY3VtZW50LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgSnNvblBhdGNoRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9lcG9iZXJlemtpbi9mYXN0LWRlZXAtZXF1YWxcbi8vIE1JVCBMaWNlbnNlXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTcgRXZnZW55IFBvYmVyZXpraW5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuZXhwb3J0IGZ1bmN0aW9uIF9hcmVFcXVhbHMoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgYXJyQSA9IEFycmF5LmlzQXJyYXkoYSksIGFyckIgPSBBcnJheS5pc0FycmF5KGIpLCBpLCBsZW5ndGgsIGtleTtcbiAgICAgICAgaWYgKGFyckEgJiYgYXJyQikge1xuICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJBICE9IGFyckIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgIGlmICghYi5oYXNPd25Qcm9wZXJ0eShrZXlzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiaXNJbnRlZ2VyIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzVW5kZWZpbmVkIiwiSnNvblBhdGNoRXJyb3IiLCJkZWVwQ2xvbmUiLCJvYmpPcHMiLCJhZGQiLCJvYmoiLCJrZXkiLCJkb2N1bWVudCIsInZhbHVlIiwibmV3RG9jdW1lbnQiLCJyZW1vdmUiLCJyZW1vdmVkIiwicmVwbGFjZSIsIm1vdmUiLCJnZXRWYWx1ZUJ5UG9pbnRlciIsInBhdGgiLCJvcmlnaW5hbFZhbHVlIiwiYXBwbHlPcGVyYXRpb24iLCJvcCIsImZyb20iLCJjb3B5IiwidmFsdWVUb0NvcHkiLCJ0ZXN0IiwiX2FyZUVxdWFscyIsIl9nZXQiLCJhcnJPcHMiLCJhcnIiLCJpIiwic3BsaWNlIiwiaW5kZXgiLCJyZW1vdmVkTGlzdCIsInBvaW50ZXIiLCJnZXRPcmlnaW5hbERlc3RpbmF0aW9uIiwib3BlcmF0aW9uIiwidmFsaWRhdGVPcGVyYXRpb24iLCJtdXRhdGVEb2N1bWVudCIsImJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMiLCJ2YWxpZGF0b3IiLCJyZXR1cm5WYWx1ZSIsImtleXMiLCJzcGxpdCIsInQiLCJsZW4iLCJsZW5ndGgiLCJleGlzdGluZ1BhdGhGcmFnbWVudCIsInVuZGVmaW5lZCIsInZhbGlkYXRlRnVuY3Rpb24iLCJpbmRleE9mIiwiVHlwZUVycm9yIiwic2xpY2UiLCJqb2luIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbCIsImFwcGx5UGF0Y2giLCJwYXRjaCIsInJlc3VsdHMiLCJhcHBseVJlZHVjZXIiLCJvcGVyYXRpb25SZXN1bHQiLCJwYXRoTGVuIiwiZXhpc3RpbmdQYXRoTGVuIiwiZXhpc3RpbmdWYWx1ZSIsImVycm9yIiwidmFsaWRhdGUiLCJuYW1lIiwic2VxdWVuY2UiLCJleHRlcm5hbFZhbGlkYXRvciIsImUiLCJhIiwiYiIsImFyckEiLCJhcnJCIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQzRGO0FBQ3REO0FBQ3ZDLElBQUlLLGFBQWEsSUFBSUM7QUFDckIsTUFBTUM7SUFDRkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2JDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO1FBQ0FOLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixHQUFHLEdBQUdBO0lBQ2Y7QUFDSjtBQUNBLE1BQU1RO0lBQ0ZULFlBQVlVLFFBQVEsRUFBRUMsUUFBUSxDQUFFO1FBQzVCVCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0csUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7QUFDSjtBQUNBLFNBQVNDLFVBQVVYLEdBQUc7SUFDbEIsT0FBT0osV0FBV2dCLEdBQUcsQ0FBQ1o7QUFDMUI7QUFD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L0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvZHVwbGV4LmpzP2NlNmMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxMy0yMDIxIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZVxuICovXG5pbXBvcnQgeyBfZGVlcENsb25lLCBfb2JqZWN0S2V5cywgZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzT3duUHJvcGVydHksIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgYXBwbHlQYXRjaCB9IGZyb20gXCIuL2NvcmUuanNcIjtcbnZhciBiZWZvcmVEaWN0ID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIE1pcnJvciB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ialwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgfVxufVxuY2xhc3MgT2JzZXJ2ZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgb2JzZXJ2ZXIpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TWlycm9yKG9iaikge1xuICAgIHJldHVybiBiZWZvcmVEaWN0LmdldChvYmopO1xufVxuZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gbWlycm9yLm9ic2VydmVycy5nZXQoY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpIHtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlci5jYWxsYmFjayk7XG59XG4vKipcbiAqIERldGFjaCBhbiBvYnNlcnZlciBmcm9tIGFuIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5vYnNlcnZlKHJvb3QsIG9ic2VydmVyKSB7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlKCk7XG59XG4vKipcbiAqIE9ic2VydmVzIGNoYW5nZXMgbWFkZSB0byBhbiBvYmplY3QsIHdoaWNoIGNhbiB0aGVuIGJlIHJldHJpZXZlZCB1c2luZyBnZW5lcmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZShvYmosIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgdmFyIG1pcnJvciA9IGdldE1pcnJvcihvYmopO1xuICAgIGlmICghbWlycm9yKSB7XG4gICAgICAgIG1pcnJvciA9IG5ldyBNaXJyb3Iob2JqKTtcbiAgICAgICAgYmVmb3JlRGljdC5zZXQob2JqLCBtaXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJJbmZvID0gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spO1xuICAgICAgICBvYnNlcnZlciA9IG9ic2VydmVySW5mbyAmJiBvYnNlcnZlckluZm8ub2JzZXJ2ZXI7XG4gICAgfVxuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIG9ic2VydmVyID0ge307XG4gICAgbWlycm9yLnZhbHVlID0gX2RlZXBDbG9uZShvYmopO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBvYnNlcnZlci5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBvYnNlcnZlci5uZXh0ID0gbnVsbDtcbiAgICAgICAgdmFyIGRpcnR5Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmYXN0Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gc2V0VGltZW91dChkaXJ0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vbm90IE5vZGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnNlcnZlci5wYXRjaGVzID0gcGF0Y2hlcztcbiAgICBvYnNlcnZlci5vYmplY3QgPSBvYmo7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlID0gKCkgPT4ge1xuICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLnNldChjYWxsYmFjaywgbmV3IE9ic2VydmVySW5mbyhjYWxsYmFjaywgb2JzZXJ2ZXIpKTtcbiAgICByZXR1cm4gb2JzZXJ2ZXI7XG59XG4vKipcbiAqIEdlbmVyYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSBhbiBvYnNlcnZlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGUob2JzZXJ2ZXIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBtaXJyb3IgPSBiZWZvcmVEaWN0LmdldChvYnNlcnZlci5vYmplY3QpO1xuICAgIF9nZW5lcmF0ZShtaXJyb3IudmFsdWUsIG9ic2VydmVyLm9iamVjdCwgb2JzZXJ2ZXIucGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgaWYgKG9ic2VydmVyLnBhdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGFwcGx5UGF0Y2gobWlycm9yLnZhbHVlLCBvYnNlcnZlci5wYXRjaGVzKTtcbiAgICB9XG4gICAgdmFyIHRlbXAgPSBvYnNlcnZlci5wYXRjaGVzO1xuICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IFtdO1xuICAgICAgICBpZiAob2JzZXJ2ZXIuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNhbGxiYWNrKHRlbXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wO1xufVxuLy8gRGlydHkgY2hlY2sgaWYgb2JqIGlzIGRpZmZlcmVudCBmcm9tIG1pcnJvciwgZ2VuZXJhdGUgcGF0Y2hlcyBhbmQgdXBkYXRlIG1pcnJvclxuZnVuY3Rpb24gX2dlbmVyYXRlKG1pcnJvciwgb2JqLCBwYXRjaGVzLCBwYXRoLCBpbnZlcnRpYmxlKSB7XG4gICAgaWYgKG9iaiA9PT0gbWlycm9yKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmoudG9KU09OID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgIH1cbiAgICB2YXIgbmV3S2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgdmFyIG9sZEtleXMgPSBfb2JqZWN0S2V5cyhtaXJyb3IpO1xuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAvL2lmIGV2ZXIgXCJtb3ZlXCIgb3BlcmF0aW9uIGlzIGltcGxlbWVudGVkIGhlcmUsIG1ha2Ugc3VyZSB0aGlzIHRlc3QgcnVucyBPSzogXCJzaG91bGQgbm90IGdlbmVyYXRlIHRoZSBzYW1lIHBhdGNoIHR3aWNlIChtb3ZlKVwiXG4gICAgZm9yICh2YXIgdCA9IG9sZEtleXMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcbiAgICAgICAgdmFyIGtleSA9IG9sZEtleXNbdF07XG4gICAgICAgIHZhciBvbGRWYWwgPSBtaXJyb3Jba2V5XTtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwga2V5KSAmJlxuICAgICAgICAgICAgIShvYmpba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9iaikgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbGRWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5ld1ZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgbmV3VmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9sZFZhbCkgPT09IEFycmF5LmlzQXJyYXkobmV3VmFsKSkge1xuICAgICAgICAgICAgICAgIF9nZW5lcmF0ZShvbGRWYWwsIG5ld1ZhbCwgcGF0Y2hlcywgcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLCBpbnZlcnRpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG5ld1ZhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1pcnJvcikgPT09IEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTsgLy8gcHJvcGVydHkgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJ0ZXN0XCIsIHBhdGgsIHZhbHVlOiBtaXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJyZXBsYWNlXCIsIHBhdGgsIHZhbHVlOiBvYmogfSk7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWRlbGV0ZWQgJiYgbmV3S2V5cy5sZW5ndGggPT0gb2xkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG5ld0tleXMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgdmFyIGtleSA9IG5ld0tleXNbdF07XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobWlycm9yLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9ialtrZXldKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIHRoZSBkaWZmZXJlbmNlcyBpbiB0d28gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZSh0cmVlMSwgdHJlZTIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgX2dlbmVyYXRlKHRyZWUxLCB0cmVlMiwgcGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgcmV0dXJuIHBhdGNoZXM7XG59XG4iXSwibmFtZXMiOlsiX2RlZXBDbG9uZSIsIl9vYmplY3RLZXlzIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc093blByb3BlcnR5IiwiYXBwbHlQYXRjaCIsImJlZm9yZURpY3QiLCJXZWFrTWFwIiwiTWlycm9yIiwiY29uc3RydWN0b3IiLCJvYmoiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiTWFwIiwiT2JzZXJ2ZXJJbmZvIiwiY2FsbGJhY2siLCJvYnNlcnZlciIsImdldE1pcnJvciIsImdldCIsImdldE9ic2VydmVyRnJvbU1pcnJvciIsIm1pcnJvciIsIm9ic2VydmVycyIsInJlbW92ZU9ic2VydmVyRnJvbU1pcnJvciIsImRlbGV0ZSIsInVub2JzZXJ2ZSIsInJvb3QiLCJvYnNlcnZlIiwicGF0Y2hlcyIsInNldCIsIm9ic2VydmVySW5mbyIsIm5leHQiLCJkaXJ0eUNoZWNrIiwiZ2VuZXJhdGUiLCJmYXN0Q2hlY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9iamVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbnZlcnRpYmxlIiwiX2dlbmVyYXRlIiwibGVuZ3RoIiwidGVtcCIsInBhdGgiLCJ0b0pTT04iLCJuZXdLZXlzIiwib2xkS2V5cyIsImNoYW5nZWQiLCJkZWxldGVkIiwidCIsImtleSIsIm9sZFZhbCIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsIm5ld1ZhbCIsInB1c2giLCJvcCIsImNvbXBhcmUiLCJ0cmVlMSIsInRyZWUyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNQSxrQkFBa0JDLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYztBQUNoRCxTQUFTQSxlQUFlQyxHQUFHLEVBQUVDLEdBQUc7SUFDbkMsT0FBT0wsZ0JBQWdCTSxJQUFJLENBQUNGLEtBQUtDO0FBQ3JDO0FBQ08sU0FBU0UsWUFBWUgsR0FBRztJQUMzQixJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07UUFDcEIsTUFBTU0sT0FBTyxJQUFJRixNQUFNSixJQUFJTyxNQUFNO1FBQ2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLQyxNQUFNLEVBQUVDLElBQUs7WUFDbENGLElBQUksQ0FBQ0UsRUFBRSxHQUFHLEtBQUtBO1FBQ25CO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLElBQUlULE9BQU9TLElBQUksRUFBRTtRQUNiLE9BQU9ULE9BQU9TLElBQUksQ0FBQ047SUFDdkI7SUFDQSxJQUFJTSxPQUFPLEVBQUU7SUFDYixJQUFLLElBQUlHLEtBQUtULElBQUs7UUFDZixJQUFJRCxlQUFlQyxLQUFLUyxJQUFJO1lBQ3hCSCxLQUFLSSxJQUFJLENBQUNEO1FBQ2Q7SUFDSjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNLLFdBQVdYLEdBQUc7SUFDMUIsT0FBUSxPQUFPQTtRQUNYLEtBQUs7WUFDRCxPQUFPWSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ2QsT0FBTyxxRUFBcUU7UUFDakgsS0FBSztZQUNELE9BQU8sTUFBTSxvREFBb0Q7UUFDckU7WUFDSSxPQUFPQSxLQUFLLDZCQUE2QjtJQUNqRDtBQUNKO0FBQ0EseUNBQXlDO0FBQ2xDLFNBQVNlLFVBQVVDLEdB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QWEzQixJQUFJLENBQUMsQ0FBQyxFQUFFVCxJQUFJLEVBQUUsRUFBRXFDLE1BQU0sQ0FBQztRQUN4QztJQUNKO0lBQ0EsT0FBT0QsYUFBYUUsSUFBSSxDQUFDO0FBQzdCO0FBQ08sTUFBTUMsbUJBQW1CWDtJQUM1QlksWUFBWU4sT0FBTyxFQUFFTyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxJQUFJLENBQUU7UUFDL0MsS0FBSyxDQUFDWCwyQkFBMkJDLFNBQVM7WUFBRU87WUFBTUM7WUFBT0M7WUFBV0M7UUFBSztRQUN6RWhELE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9JO1FBQ1g7UUFDQTdDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9LO1FBQ1g7UUFDQTlDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9NO1FBQ1g7UUFDQS9DLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9PO1FBQ1g7UUFDQWhELE9BQU9xRCxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdwRCxTQUFTLEdBQUcsb0VBQW9FO1FBQ3ZILElBQUksQ0FBQ3FDLE9BQU8sR0FBR0QsMkJBQTJCQyxTQUFTO1lBQy9DTztZQUNBQztZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanM/Mjk5OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDE3LTIwMjIgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlZFxuICovXG5jb25zdCBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfb2JqZWN0S2V5cyhvYmopIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgQXJyYXkob2JqLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAga2V5c1trXSA9IFwiXCIgKyBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuICAgIGxldCBrZXlzID0gW107XG4gICAgZm9yIChsZXQgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwgaSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbi8qKlxuICogRGVlcGx5IGNsb25lIHRoZSBvYmplY3QuXG4gKiBodHRwczovL2pzcGVyZi5jb20vZGVlcC1jb3B5LXZzLWpzb24tc3RyaW5naWZ5LWpzb24tcGFyc2UvMjUgKHJlY3Vyc2l2ZURlZXBDb3B5KVxuICogQHBhcmFtICB7YW55fSBvYmogdmFsdWUgdG8gY2xvbmVcbiAqIEByZXR1cm4ge2FueX0gY2xvbmVkIG9ialxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RlZXBDbG9uZShvYmopIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmopIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7IC8vRmFzdGVyIHRoYW4gRVM1IGNsb25lIC0gaHR0cDovL2pzcGVyZi5jb20vZGVlcC1jbG9uaW5nLW9mLW9iamVjdHMvNVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy90aGlzIGlzIGhvdyBKU09OLnN0cmluZ2lmeSBiZWhhdmVzIGZvciBhcnJheSBpdGVtc1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG9iajsgLy9ubyBuZWVkIHRvIGNsb25lIHByaW1pdGl2ZXNcbiAgICB9XG59XG4vLzN4IGZhc3RlciB0aGFuIGNhY2hlZCAvXlxcZCskLy50ZXN0KHN0cilcbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVnZXIoc3RyKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgbGV0IGNoYXJDb2RlO1xuICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgcmF3IHBvaW50ZXJcbiAqIEByZXR1cm4gdGhlIEVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgaWYgKHBhdGguaW5kZXhPZihcIi9cIikgPT09IC0xICYmIHBhdGguaW5kZXhPZihcIn5cIikgPT09IC0xKVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG59XG4vKipcbiAqIFVuZXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgZXNjYXBlZCBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSB1bmVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+MS9nLCBcIi9cIikucmVwbGFjZSgvfjAvZywgXCJ+XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaikge1xuICAgIGxldCBmb3VuZDtcbiAgICBmb3IgKGxldCBrZXkgaW4gcm9vdCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkocm9vdCwga2V5KSkge1xuICAgICAgICAgICAgaWYgKHJvb3Rba2V5XSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJvb3Rba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdFtrZXldLCBvYmopO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIiArIGZvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoKHJvb3QsIG9iaikge1xuICAgIGlmIChyb290ID09PSBvYmopIHtcbiAgICAgICAgcmV0dXJuIFwiL1wiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKTtcbiAgICBpZiAocGF0aCA9PT0gXCJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kIGluIHJvb3RcIik7XG4gICAgfVxuICAgIHJldHVybiBgLyR7cGF0aH1gO1xufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgd2hldGhlciBhbiBvYmplY3QgaGFzIGFueSB1bmRlZmluZWQgdmFsdWVzIGluc2lkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1VuZGVmaW5lZChvYmopIHtcbiAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvYmopIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzTGVuZ3RoID0gb2JqS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW29iaktleXNbaV1dKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgYXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2VQYXJ0cyA9IFttZXNzYWdlXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGFyZ3Nba2V5XSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShhcmdzW2tleV0sIG51bGwsIDIpXG4gICAgICAgICAgICA6IGFyZ3Nba2V5XTsgLy8gcHJldHR5IHByaW50XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJ0cy5wdXNoKGAke2tleX06ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VQYXJ0cy5qb2luKFwiXFxuXCIpO1xufVxuZXhwb3J0IGNsYXNzIFBhdGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSkge1xuICAgICAgICBzdXBlcihwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7IG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUgfSkpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZXJhdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3BlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cmVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOyAvLyByZXN0b3JlIHByb3RvdHlwZSBjaGFpbiwgc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODM0MjM1OVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICB0cmVlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX2hhc093blByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJjYWxsIiwiX29iamVjdEtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJrZXlzIiwibGVuZ3RoIiwiayIsImkiLCJwdXNoIiwiX2RlZXBDbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImlzSW50ZWdlciIsInN0ciIsImxlbiIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJwYXRoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJfZ2V0UGF0aFJlY3Vyc2l2ZSIsInJvb3QiLCJmb3VuZCIsImdldFBhdGgiLCJFcnJvciIsImhhc1VuZGVmaW5lZCIsInVuZGVmaW5lZCIsIm9iaktleXMiLCJvYmpLZXlzTGVuZ3RoIiwicGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIiLCJtZXNzYWdlIiwiYXJncyIsIm1lc3NhZ2VQYXJ0cyIsInZhbHVlIiwiam9pbiIsIlBhdGNoRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpbmRleCIsIm9wZXJhdGlvbiIsInRyZWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/function_calling.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* binding */ convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* binding */ convertToOpenAITool),\n/* harmony export */   isLangChainTool: () => (/* binding */ isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* binding */ isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* binding */ isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* binding */ isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/is_zod_schema.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js\");\n\n\n\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a format\n * that is compatible with OpenAI function calling. It uses the `zodToJsonSchema`\n * function to convert the schema of the `StructuredTool` or `RunnableToolLike`\n * into a JSON schema, which is then used as the parameters for the OpenAI function.\n *\n * @param {StructuredToolInterface | RunnableToolLike} tool The tool to convert to an OpenAI function.\n * @returns {FunctionDefinition} The inputted tool in OpenAI function format.\n */ function convertToOpenAIFunction(tool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    return {\n        name: tool.name,\n        description: tool.description,\n        parameters: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(tool.schema),\n        // Do not include the `strict` field if it is `undefined`.\n        ...fieldsCopy?.strict !== undefined ? {\n            strict: fieldsCopy.strict\n        } : {}\n    };\n}\n/**\n * Formats a `StructuredTool` or `RunnableToolLike` instance into a\n * format that is compatible with OpenAI tool calling. It uses the\n * `zodToJsonSchema` function to convert the schema of the `StructuredTool`\n * or `RunnableToolLike` into a JSON schema, which is then used as the\n * parameters for the OpenAI tool.\n *\n * @param {StructuredToolInterface | Record<string, any> | RunnableToolLike} tool The tool to convert to an OpenAI tool.\n * @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n */ function convertToOpenAITool(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool, fields) {\n    // @TODO 0.3.0 Remove the `number` typing\n    const fieldsCopy = typeof fields === \"number\" ? undefined : fields;\n    let toolDef;\n    if (isLangChainTool(tool)) {\n        toolDef = {\n            type: \"function\",\n            function: convertToOpenAIFunction(tool)\n        };\n    } else {\n        toolDef = tool;\n    }\n    if (fieldsCopy?.strict !== undefined) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        toolDef.function.strict = fieldsCopy.strict;\n    }\n    return toolDef;\n}\n/**\n * Confirm whether the inputted tool is an instance of `StructuredToolInterface`.\n *\n * @param {StructuredToolInterface | Record<string, any> | undefined} tool The tool to check if it is an instance of `StructuredToolInterface`.\n * @returns {tool is StructuredToolInterface} Whether the inputted tool is an instance of `StructuredToolInterface`.\n */ function isStructuredTool(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool) {\n    return tool !== undefined && Array.isArray(tool.lc_namespace);\n}\n/**\n * Confirm whether the inputted tool is an instance of `RunnableToolLike`.\n *\n * @param {unknown | undefined} tool The tool to check if it is an instance of `RunnableToolLike`.\n * @returns {tool is RunnableToolLike} Whether the inputted tool is an instance of `RunnableToolLike`.\n */ function isRunnableToolLike(tool) {\n    return tool !== undefined && _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable.isRunnable(tool) && \"lc_name\" in tool.constructor && typeof tool.constructor.lc_name === \"function\" && tool.constructor.lc_name() === \"RunnableToolLike\";\n}\n/**\n * Confirm whether or not the tool contains the necessary properties to be considered a `StructuredToolParams`.\n *\n * @param {unknown | undefined} tool The object to check if it is a `StructuredToolParams`.\n * @returns {tool is StructuredToolParams} Whether the inputted object is a `StructuredToolParams`.\n */ function isStructuredToolParams(tool) {\n    return !!tool && typeof tool === \"object\" && \"name\" in tool && \"schema\" in tool && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (0,_types_is_zod_schema_js__WEBPACK_IMPORTED_MODULE_2__.isZodSchema)(tool.schema);\n}\n/**\n * Whether or not the tool is one of StructuredTool, RunnableTool or StructuredToolParams.\n * It returns `is StructuredToolParams` since that is the most minimal interface of the three,\n * while still containing the necessary properties to be passed to a LLM for tool calling.\n *\n * @param {unknown | undefined} tool The tool to check if it is a LangChain tool.\n * @returns {tool is StructuredToolParams} Whether the inputted tool is a LangChain tool.\n */ function isLangChainTool(tool) {\n    return isStructuredToolParams(tool) || isRunnableToolLike(tool) || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isStructuredTool(tool);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDTDtBQUNPO0FBQ3ZEOzs7Ozs7OztDQVFDLEdBQ00sU0FBU0csd0JBQXdCQyxJQUFJLEVBQUVDLE1BQU07SUFDaEQseUNBQXlDO0lBQ3pDLE1BQU1DLGFBQWEsT0FBT0QsV0FBVyxXQUFXRSxZQUFZRjtJQUM1RCxPQUFPO1FBQ0hHLE1BQU1KLEtBQUtJLElBQUk7UUFDZkMsYUFBYUwsS0FBS0ssV0FBVztRQUM3QkMsWUFBWVYsbUVBQWVBLENBQUNJLEtBQUtPLE1BQU07UUFDdkMsMERBQTBEO1FBQzFELEdBQUlMLFlBQVlNLFdBQVdMLFlBQVk7WUFBRUssUUFBUU4sV0FBV00sTUFBTTtRQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdFO0FBQ0o7QUFDQTs7Ozs7Ozs7O0NBU0MsR0FDTSxTQUFTQyxvQkFDaEIsOERBQThEO0FBQzlEVCxJQUFJLEVBQUVDLE1BQU07SUFDUix5Q0FBeUM7SUFDekMsTUFBTUMsYUFBYSxPQUFPRCxXQUFXLFdBQVdFLFlBQVlGO0lBQzVELElBQUlTO0lBQ0osSUFBSUMsZ0JBQWdCWCxPQUFPO1FBQ3ZCVSxVQUFVO1lBQ05FLE1BQU07WUFDTkMsVUFBVWQsd0JBQXdCQztRQUN0QztJQUNKLE9BQ0s7UUFDRFUsVUFBVVY7SUFDZDtJQUNBLElBQUlFLFlBQVlNLFdBQVdMLFdBQVc7UUFDbEMsOERBQThEO1FBQzlETyxRQUFRRyxRQUFRLENBQUNMLE1BQU0sR0FBR04sV0FBV00sTUFBTTtJQUMvQztJQUNBLE9BQU9FO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNJLGlCQUNoQiw4REFBOEQ7QUFDOURkLElBQUk7SUFDQSxPQUFRQSxTQUFTRyxhQUNiWSxNQUFNQyxPQUFPLENBQUNoQixLQUFLaUIsWUFBWTtBQUN2QztBQUNBOzs7OztDQUtDLEdBQ00sU0FBU0MsbUJBQW1CbEIsSUFBSTtJQUNuQyxPQUFRQSxTQUFTRyxhQUNiTix3REFBUUEsQ0FBQ3NCLFVBQVUsQ0FBQ25CLFNBQ3BCLGFBQWFBLEtBQUtvQixXQUFXLElBQzdCLE9BQU9wQixLQUFLb0IsV0FBVyxDQUFDQyxPQUFPLEtBQUssY0FDcENyQixLQUFLb0IsV0FBVyxDQUFDQyxPQUFPLE9BQU87QUFDdkM7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNDLHVCQUF1QnRCLElBQUk7SUFDdkMsT0FBUSxDQUFDLENBQUNBLFFBQ04sT0FBT0EsU0FBUyxZQUNoQixVQUFVQSxRQUNWLFlBQVlBLFFBQ1osOERBQThEO0lBQzlERixvRUFBV0EsQ0FBQ0UsS0FBS08sTUFBTTtBQUMvQjtBQUNBOzs7Ozs7O0NBT0MsR0FDTSxTQUFTSSxnQkFBZ0JYLElBQUk7SUFDaEMsT0FBUXNCLHVCQUF1QnRCLFNBQzNCa0IsbUJBQW1CbEIsU0FDbkIsOERBQThEO0lBQzlEYyxpQkFBaUJkO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanM/OTQ0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiem9kLXRvLWpzb24tc2NoZW1hXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuaW1wb3J0IHsgaXNab2RTY2hlbWEgfSBmcm9tIFwiLi90eXBlcy9pc196b2Rfc2NoZW1hLmpzXCI7XG4vKipcbiAqIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIG9yIGBSdW5uYWJsZVRvb2xMaWtlYCBpbnN0YW5jZSBpbnRvIGEgZm9ybWF0XG4gKiB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBPcGVuQUkgZnVuY3Rpb24gY2FsbGluZy4gSXQgdXNlcyB0aGUgYHpvZFRvSnNvblNjaGVtYWBcbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgdGhlIHNjaGVtYSBvZiB0aGUgYFN0cnVjdHVyZWRUb29sYCBvciBgUnVubmFibGVUb29sTGlrZWBcbiAqIGludG8gYSBKU09OIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RydWN0dXJlZFRvb2xJbnRlcmZhY2UgfCBSdW5uYWJsZVRvb2xMaWtlfSB0b29sIFRoZSB0b29sIHRvIGNvbnZlcnQgdG8gYW4gT3BlbkFJIGZ1bmN0aW9uLlxuICogQHJldHVybnMge0Z1bmN0aW9uRGVmaW5pdGlvbn0gVGhlIGlucHV0dGVkIHRvb2wgaW4gT3BlbkFJIGZ1bmN0aW9uIGZvcm1hdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uKHRvb2wsIGZpZWxkcykge1xuICAgIC8vIEBUT0RPIDAuMy4wIFJlbW92ZSB0aGUgYG51bWJlcmAgdHlwaW5nXG4gICAgY29uc3QgZmllbGRzQ29weSA9IHR5cGVvZiBmaWVsZHMgPT09IFwibnVtYmVyXCIgPyB1bmRlZmluZWQgOiBmaWVsZHM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKHRvb2wuc2NoZW1hKSxcbiAgICAgICAgLy8gRG8gbm90IGluY2x1ZGUgdGhlIGBzdHJpY3RgIGZpZWxkIGlmIGl0IGlzIGB1bmRlZmluZWRgLlxuICAgICAgICAuLi4oZmllbGRzQ29weT8uc3RyaWN0ICE9PSB1bmRlZmluZWQgPyB7IHN0cmljdDogZmllbGRzQ29weS5zdHJpY3QgfSA6IHt9KSxcbiAgICB9O1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgYFN0cnVjdHVyZWRUb29sYCBvciBgUnVubmFibGVUb29sTGlrZWAgaW5zdGFuY2UgaW50byBhXG4gKiBmb3JtYXQgdGhhdCBpcyBjb21wYXRpYmxlIHdpdGggT3BlbkFJIHRvb2wgY2FsbGluZy4gSXQgdXNlcyB0aGVcbiAqIGB6b2RUb0pzb25TY2hlbWFgIGZ1bmN0aW9uIHRvIGNvbnZlcnQgdGhlIHNjaGVtYSBvZiB0aGUgYFN0cnVjdHVyZWRUb29sYFxuICogb3IgYFJ1bm5hYmxlVG9vbExpa2VgIGludG8gYSBKU09OIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZVxuICogcGFyYW1ldGVycyBmb3IgdGhlIE9wZW5BSSB0b29sLlxuICpcbiAqIEBwYXJhbSB7U3RydWN0dXJlZFRvb2xJbnRlcmZhY2UgfCBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgUnVubmFibGVUb29sTGlrZX0gdG9vbCBUaGUgdG9vbCB0byBjb252ZXJ0IHRvIGFuIE9wZW5BSSB0b29sLlxuICogQHJldHVybnMge1Rvb2xEZWZpbml0aW9ufSBUaGUgaW5wdXR0ZWQgdG9vbCBpbiBPcGVuQUkgdG9vbCBmb3JtYXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlUb29sKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnRvb2wsIGZpZWxkcykge1xuICAgIC8vIEBUT0RPIDAuMy4wIFJlbW92ZSB0aGUgYG51bWJlcmAgdHlwaW5nXG4gICAgY29uc3QgZmllbGRzQ29weSA9IHR5cGVvZiBmaWVsZHMgPT09IFwibnVtYmVyXCIgPyB1bmRlZmluZWQgOiBmaWVsZHM7XG4gICAgbGV0IHRvb2xEZWY7XG4gICAgaWYgKGlzTGFuZ0NoYWluVG9vbCh0b29sKSkge1xuICAgICAgICB0b29sRGVmID0ge1xuICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgZnVuY3Rpb246IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uKHRvb2wpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdG9vbERlZiA9IHRvb2w7XG4gICAgfVxuICAgIGlmIChmaWVsZHNDb3B5Py5zdHJpY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0b29sRGVmLmZ1bmN0aW9uLnN0cmljdCA9IGZpZWxkc0NvcHkuc3RyaWN0O1xuICAgIH1cbiAgICByZXR1cm4gdG9vbERlZjtcbn1cbi8qKlxuICogQ29uZmlybSB3aGV0aGVyIHRoZSBpbnB1dHRlZCB0b29sIGlzIGFuIGluc3RhbmNlIG9mIGBTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZWAuXG4gKlxuICogQHBhcmFtIHtTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZSB8IFJlY29yZDxzdHJpbmcsIGFueT4gfCB1bmRlZmluZWR9IHRvb2wgVGhlIHRvb2wgdG8gY2hlY2sgaWYgaXQgaXMgYW4gaW5zdGFuY2Ugb2YgYFN0cnVjdHVyZWRUb29sSW50ZXJmYWNlYC5cbiAqIEByZXR1cm5zIHt0b29sIGlzIFN0cnVjdHVyZWRUb29sSW50ZXJmYWNlfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCB0b29sIGlzIGFuIGluc3RhbmNlIG9mIGBTdHJ1Y3R1cmVkVG9vbEludGVyZmFjZWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cnVjdHVyZWRUb29sKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnRvb2wpIHtcbiAgICByZXR1cm4gKHRvb2wgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHRvb2wubGNfbmFtZXNwYWNlKSk7XG59XG4vKipcbiAqIENvbmZpcm0gd2hldGhlciB0aGUgaW5wdXR0ZWQgdG9vbCBpcyBhbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAuXG4gKlxuICogQHBhcmFtIHt1bmtub3duIHwgdW5kZWZpbmVkfSB0b29sIFRoZSB0b29sIHRvIGNoZWNrIGlmIGl0IGlzIGFuIGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYC5cbiAqIEByZXR1cm5zIHt0b29sIGlzIFJ1bm5hYmxlVG9vbExpa2V9IFdoZXRoZXIgdGhlIGlucHV0dGVkIHRvb2wgaXMgYW4gaW5zdGFuY2Ugb2YgYFJ1bm5hYmxlVG9vbExpa2VgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSdW5uYWJsZVRvb2xMaWtlKHRvb2wpIHtcbiAgICByZXR1cm4gKHRvb2wgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBSdW5uYWJsZS5pc1J1bm5hYmxlKHRvb2wpICYmXG4gICAgICAgIFwibGNfbmFtZVwiIGluIHRvb2wuY29uc3RydWN0b3IgJiZcbiAgICAgICAgdHlwZW9mIHRvb2wuY29uc3RydWN0b3IubGNfbmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIHRvb2wuY29uc3RydWN0b3IubGNfbmFtZSgpID09PSBcIlJ1bm5hYmxlVG9vbExpa2VcIik7XG59XG4vKipcbiAqIENvbmZpcm0gd2hldGhlciBvciBub3QgdGhlIHRvb2wgY29udGFpbnMgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzIHRvIGJlIGNvbnNpZGVyZWQgYSBgU3RydWN0dXJlZFRvb2xQYXJhbXNgLlxuICpcbiAqIEBwYXJhbSB7dW5rbm93biB8IHVuZGVmaW5lZH0gdG9vbCBUaGUgb2JqZWN0IHRvIGNoZWNrIGlmIGl0IGlzIGEgYFN0cnVjdHVyZWRUb29sUGFyYW1zYC5cbiAqIEByZXR1cm5zIHt0b29sIGlzIFN0cnVjdHVyZWRUb29sUGFyYW1zfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCBvYmplY3QgaXMgYSBgU3RydWN0dXJlZFRvb2xQYXJhbXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJ1Y3R1cmVkVG9vbFBhcmFtcyh0b29sKSB7XG4gICAgcmV0dXJuICghIXRvb2wgJiZcbiAgICAgICAgdHlwZW9mIHRvb2wgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgXCJuYW1lXCIgaW4gdG9vbCAmJlxuICAgICAgICBcInNjaGVtYVwiIGluIHRvb2wgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgaXNab2RTY2hlbWEodG9vbC5zY2hlbWEpKTtcbn1cbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIHRvb2wgaXMgb25lIG9mIFN0cnVjdHVyZWRUb29sLCBSdW5uYWJsZVRvb2wgb3IgU3RydWN0dXJlZFRvb2xQYXJhbXMuXG4gKiBJdCByZXR1cm5zIGBpcyBTdHJ1Y3R1cmVkVG9vbFBhcmFtc2Agc2luY2UgdGhhdCBpcyB0aGUgbW9zdCBtaW5pbWFsIGludGVyZmFjZSBvZiB0aGUgdGhyZWUsXG4gKiB3aGlsZSBzdGlsbCBjb250YWluaW5nIHRoZSBuZWNlc3NhcnkgcHJvcGVydGllcyB0byBiZSBwYXNzZWQgdG8gYSBMTE0gZm9yIHRvb2wgY2FsbGluZy5cbiAqXG4gKiBAcGFyYW0ge3Vua25vd24gfCB1bmRlZmluZWR9IHRvb2wgVGhlIHRvb2wgdG8gY2hlY2sgaWYgaXQgaXMgYSBMYW5nQ2hhaW4gdG9vbC5cbiAqIEByZXR1cm5zIHt0b29sIGlzIFN0cnVjdHVyZWRUb29sUGFyYW1zfSBXaGV0aGVyIHRoZSBpbnB1dHRlZCB0b29sIGlzIGEgTGFuZ0NoYWluIHRvb2wuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xhbmdDaGFpblRvb2wodG9vbCkge1xuICAgIHJldHVybiAoaXNTdHJ1Y3R1cmVkVG9vbFBhcmFtcyh0b29sKSB8fFxuICAgICAgICBpc1J1bm5hYmxlVG9vbExpa2UodG9vbCkgfHxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgaXNTdHJ1Y3R1cmVkVG9vbCh0b29sKSk7XG59XG4iXSwibmFtZXMiOlsiem9kVG9Kc29uU2NoZW1hIiwiUnVubmFibGUiLCJpc1pvZFNjaGVtYSIsImNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uIiwidG9vbCIsImZpZWxkcyIsImZpZWxkc0NvcHkiLCJ1bmRlZmluZWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwic2NoZW1hIiwic3RyaWN0IiwiY29udmVydFRvT3BlbkFJVG9vbCIsInRvb2xEZWYiLCJpc0xhbmdDaGFpblRvb2wiLCJ0eXBlIiwiZnVuY3Rpb24iLCJpc1N0cnVjdHVyZWRUb29sIiwiQXJyYXkiLCJpc0FycmF5IiwibGNfbmFtZXNwYWNlIiwiaXNSdW5uYWJsZVRvb2xMaWtlIiwiaXNSdW5uYWJsZSIsImNvbnN0cnVjdG9yIiwibGNfbmFtZSIsImlzU3RydWN0dXJlZFRvb2xQYXJhbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9oYXNoLmpzPzRiNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgaW5zZWN1cmVIYXNoIH0gZnJvbSBcIi4vanMtc2hhMS9oYXNoLmpzXCI7XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nconst insecureHash = (message)=>{\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxjQUFjO0FBQ2QsdUVBQXVFO0FBQ3ZFOzs7Ozs7O0NBT0MsR0FDRCx1QkFBdUIsR0FDVjtBQUNiLElBQUlBLE9BQU8sTUFBMEIsR0FBR0MsQ0FBTUEsR0FBRyxDQUFDO0FBQ2xELElBQUlDLFlBQVksbUJBQW1CQyxLQUFLLENBQUM7QUFDekMsSUFBSUMsUUFBUTtJQUFDLENBQUM7SUFBWTtJQUFTO0lBQU87Q0FBSTtBQUM5QyxJQUFJQyxRQUFRO0lBQUM7SUFBSTtJQUFJO0lBQUc7Q0FBRTtBQUMxQixJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxLQUFLQyxZQUFZO0lBQ3RCLElBQUlBLGNBQWM7UUFDZEYsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtRQUNwRSxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEIsT0FDSztRQUNELElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQUM7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFH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U0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNRLEtBQUssS0FBSyxHQUNwQlIsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNTLEtBQUssS0FBSyxHQUNwQlQsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNVLEtBQUssS0FBSyxHQUNwQlYsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNXLEtBQUssS0FBSyxHQUNwQlgsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNZLEtBQUssS0FBSztBQUM1QjtBQUNBTixLQUFLYyxTQUFTLENBQUN3QixRQUFRLEdBQUd0QyxLQUFLYyxTQUFTLENBQUN1QixHQUFHO0FBQzVDckMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTSxHQUFHO0lBQ3BCLElBQUksQ0FBQ1gsUUFBUTtJQUNiLElBQUkxQixLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRTtJQUN4RSxPQUFPO1FBQ0ZKLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztLQUNSO0FBQ0w7QUFDQU4sS0FBS2MsU0FBUyxDQUFDMEIsS0FBSyxHQUFHeEMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTTtBQUM1Q3ZDLEtBQUtjLFNBQVMsQ0FBQzJCLFdBQVcsR0FBRztJQUN6QixJQUFJLENBQUNiLFFBQVE7SUFDYixJQUFJYyxTQUFTLElBQUl2QixZQUFZO0lBQzdCLElBQUl3QixXQUFXLElBQUlDLFNBQVNGO0lBQzVCQyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMzQyxFQUFFO0lBQzdCeUMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDMUMsRUFBRTtJQUM3QndDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ3pDLEVBQUU7SUFDN0J1QyxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUN4QyxFQUFFO0lBQzlCc0MsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDdkMsRUFBRTtJQUM5QixPQUFPb0M7QUFDWDtBQUNPLE1BQU1JLGVBQWUsQ0FBQzlCO0lBQ3pCLE9BQU8sSUFBSWhCLEtBQUssTUFBTWUsTUFBTSxDQUFDQyxRQUFRLENBQUMsTUFBTTtBQUNoRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzLXNoYTEvaGFzaC5qcz8xZGM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIHRvIGRlYWwgd2l0aCBwb3J0YWJpbGl0eSBpc3N1ZXMgd2l0aCBpbXBvcnRpbmcgY3J5cHRvIG1vZHVsZVxuLypcbiAqIFtqcy1zaGExXXtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW1uMTc4L2pzLXNoYTF9XG4gKlxuICogQHZlcnNpb24gMC42LjBcbiAqIEBhdXRob3IgQ2hlbiwgWWktQ3l1YW4gW2VtbjE3OEBnbWFpbC5jb21dXG4gKiBAY29weXJpZ2h0IENoZW4sIFlpLUN5dWFuIDIwMTQtMjAxN1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cbi8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cblwidXNlIHN0cmljdFwiO1xudmFyIHJvb3QgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiID8gd2luZG93IDoge307XG52YXIgSEVYX0NIQVJTID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCIuc3BsaXQoXCJcIik7XG52YXIgRVhUUkEgPSBbLTIxNDc0ODM2NDgsIDgzODg2MDgsIDMyNzY4LCAxMjhdO1xudmFyIFNISUZUID0gWzI0LCAxNiwgOCwgMF07XG52YXIgT1VUUFVUX1RZUEVTID0gW1wiaGV4XCIsIFwiYXJyYXlcIiwgXCJkaWdlc3RcIiwgXCJhcnJheUJ1ZmZlclwiXTtcbnZhciBibG9ja3MgPSBbXTtcbmZ1bmN0aW9uIFNoYTEoc2hhcmVkTWVtb3J5KSB7XG4gICAgaWYgKHNoYXJlZE1lbW9yeSkge1xuICAgICAgICBibG9ja3NbMF0gPVxuICAgICAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmJsb2NrcyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcbiAgICB9XG4gICAgdGhpcy5oMCA9IDB4Njc0NTIzMDE7XG4gICAgdGhpcy5oMSA9IDB4ZWZjZGFiODk7XG4gICAgdGhpcy5oMiA9IDB4OThiYWRjZmU7XG4gICAgdGhpcy5oMyA9IDB4MTAzMjU0NzY7XG4gICAgdGhpcy5oNCA9IDB4YzNkMmUxZjA7XG4gICAgdGhpcy5ibG9jayA9IHRoaXMuc3RhcnQgPSB0aGlzLmJ5dGVzID0gdGhpcy5oQnl0ZXMgPSAwO1xuICAgIHRoaXMuZmluYWxpemVkID0gdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcbn1cblNoYTEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5vdFN0cmluZyA9IHR5cGVvZiBtZXNzYWdlICE9PSBcInN0cmluZ1wiO1xuICAgIGlmIChub3RTdHJpbmcgJiYgbWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gcm9vdC5BcnJheUJ1ZmZlcikge1xuICAgICAgICBtZXNzYWdlID0gbmV3IFVpbnQ4QXJyYXkobWVzc2FnZSk7XG4gICAgfVxuICAgIHZhciBjb2RlLCBpbmRleCA9IDAsIGksIGxlbmd0aCA9IG1lc3NhZ2UubGVuZ3RoIHx8IDAsIGJsb2NrcyA9IHRoaXMuYmxvY2tzO1xuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5oYXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzaGVkID0gZmFsc2U7XG4gICAgICAgICAgICBibG9ja3NbMF0gPSB0aGlzLmJsb2NrO1xuICAgICAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm90U3RyaW5nKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcbiAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSBtZXNzYWdlW2luZGV4XSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvZGUgPSBtZXNzYWdlLmNoYXJDb2RlQXQoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSBjb2RlIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4YzAgfCAoY29kZSA+PiA2KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZTAgfCAoY29kZSA+PiAxMikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgMHgxMDAwMCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZjAgfCAoY29kZSA+PiAxOCkpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiAxMikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RCeXRlSW5kZXggPSBpO1xuICAgICAgICB0aGlzLmJ5dGVzICs9IGkgLSB0aGlzLnN0YXJ0O1xuICAgICAgICBpZiAoaSA+PSA2NCkge1xuICAgICAgICAgICAgdGhpcy5ibG9jayA9IGJsb2Nrc1sxNl07XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gaSAtIDY0O1xuICAgICAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICAgICAgICB0aGlzLmhhc2hlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5ieXRlcyA+IDQyOTQ5NjcyOTUpIHtcbiAgICAgICAgdGhpcy5oQnl0ZXMgKz0gKHRoaXMuYnl0ZXMgLyA0Mjk0OTY3Mjk2KSA8PCAwO1xuICAgICAgICB0aGlzLmJ5dGVzID0gdGhpcy5ieXRlcyAlIDQyOTQ5NjcyOTY7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblNoYTEucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB2YXIgYmxvY2tzID0gdGhpcy5ibG9ja3MsIGkgPSB0aGlzLmxhc3RCeXRlSW5kZXg7XG4gICAgYmxvY2tzWzE2XSA9IHRoaXMuYmxvY2s7XG4gICAgYmxvY2tzW2kgPj4gMl0gfD0gRVhUUkFbaSAmIDNdO1xuICAgIHRoaXMuYmxvY2sgPSBibG9ja3NbMTZdO1xuICAgIGlmIChpID49IDU2KSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJsb2Nrc1swXSA9IHRoaXMuYmxvY2s7XG4gICAgICAgIGJsb2Nrc1sxNl0gPVxuICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICB9XG4gICAgYmxvY2tzWzE0XSA9ICh0aGlzLmhCeXRlcyA8PCAzKSB8ICh0aGlzLmJ5dGVzID4+PiAyOSk7XG4gICAgYmxvY2tzWzE1XSA9IHRoaXMuYnl0ZXMgPDwgMztcbiAgICB0aGlzLmhhc2goKTtcbn07XG5TaGExLnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhID0gdGhpcy5oMCwgYiA9IHRoaXMuaDEsIGMgPSB0aGlzLmgyLCBkID0gdGhpcy5oMywgZSA9IHRoaXMuaDQ7XG4gICAgdmFyIGYsIGosIHQsIGJsb2NrcyA9IHRoaXMuYmxvY2tzO1xuICAgIGZvciAoaiA9IDE2OyBqIDwgODA7ICsraikge1xuICAgICAgICB0ID0gYmxvY2tzW2ogLSAzXSBeIGJsb2Nrc1tqIC0gOF0gXiBibG9ja3NbaiAtIDE0XSBeIGJsb2Nrc1tqIC0gMTZdO1xuICAgICAgICBibG9ja3Nbal0gPSAodCA8PCAxKSB8ICh0ID4+PiAzMSk7XG4gICAgfVxuICAgIGZvciAoaiA9IDA7IGogPCAyMDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSAoYiAmIGMpIHwgKH5iICYgZCk7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IChhICYgYikgfCAofmEgJiBjKTtcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IChlICYgYSkgfCAofmUgJiBiKTtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IChkICYgZSkgfCAofmQgJiBhKTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IChjICYgZCkgfCAofmMgJiBlKTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA0MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSBiIF4gYyBeIGQ7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IGEgXiBiIF4gYztcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IGUgXiBhIF4gYjtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IGQgXiBlIF4gYTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IGMgXiBkIF4gZTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA2MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSAoYiAmIGMpIHwgKGIgJiBkKSB8IChjICYgZCk7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IChhICYgYikgfCAoYSAmIGMpIHwgKGIgJiBjKTtcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IChlICYgYSkgfCAoZSAmIGIpIHwgKGEgJiBiKTtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IChkICYgZSkgfCAoZCAmIGEpIHwgKGUgJiBhKTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IChjICYgZCkgfCAoYyAmIGUpIHwgKGQgJiBlKTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA4MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSBiIF4gYyBeIGQ7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlIC0gODk5NDk3NTE0ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gYSBeIGIgXiBjO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgMV0pIDw8IDA7XG4gICAgICAgIGEgPSAoYSA8PCAzMCkgfCAoYSA+Pj4gMik7XG4gICAgICAgIGYgPSBlIF4gYSBeIGI7XG4gICAgICAgIHQgPSAoZCA8PCA1KSB8IChkID4+PiAyNyk7XG4gICAgICAgIGMgPSAodCArIGYgKyBjIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IGQgXiBlIF4gYTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gYyBeIGQgXiBlO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgNF0pIDw8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAzMCkgfCAoYyA+Pj4gMik7XG4gICAgfVxuICAgIHRoaXMuaDAgPSAodGhpcy5oMCArIGEpIDw8IDA7XG4gICAgdGhpcy5oMSA9ICh0aGlzLmgxICsgYikgPDwgMDtcbiAgICB0aGlzLmgyID0gKHRoaXMuaDIgKyBjKSA8PCAwO1xuICAgIHRoaXMuaDMgPSAodGhpcy5oMyArIGQpIDw8IDA7XG4gICAgdGhpcy5oNCA9ICh0aGlzLmg0ICsgZSkgPDwgMDtcbn07XG5TaGExLnByb3RvdHlwZS5oZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNDtcbiAgICByZXR1cm4gKEhFWF9DSEFSU1soaDAgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gwICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDIgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gzICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toNCAmIDB4MGZdKTtcbn07XG5TaGExLnByb3RvdHlwZS50b1N0cmluZyA9IFNoYTEucHJvdG90eXBlLmhleDtcblNoYTEucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0O1xuICAgIHJldHVybiBbXG4gICAgICAgIChoMCA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDAgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgwID4+IDgpICYgMHhmZixcbiAgICAgICAgaDAgJiAweGZmLFxuICAgICAgICAoaDEgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgxID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgxICYgMHhmZixcbiAgICAgICAgKGgyID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDIgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMiAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDMgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgzID4+IDgpICYgMHhmZixcbiAgICAgICAgaDMgJiAweGZmLFxuICAgICAgICAoaDQgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGg0ICYgMHhmZixcbiAgICBdO1xufTtcblNoYTEucHJvdG90eXBlLmFycmF5ID0gU2hhMS5wcm90b3R5cGUuZGlnZXN0O1xuU2hhMS5wcm90b3R5cGUuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMjApO1xuICAgIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigwLCB0aGlzLmgwKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoNCwgdGhpcy5oMSk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDgsIHRoaXMuaDIpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigxMiwgdGhpcy5oMyk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDE2LCB0aGlzLmg0KTtcbiAgICByZXR1cm4gYnVmZmVyO1xufTtcbmV4cG9ydCBjb25zdCBpbnNlY3VyZUhhc2ggPSAobWVzc2FnZSkgPT4ge1xuICAgIHJldHVybiBuZXcgU2hhMSh0cnVlKS51cGRhdGUobWVzc2FnZSlbXCJoZXhcIl0oKTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsIndpbmRvdyIsIkhFWF9DSEFSUyIsInNwbGl0IiwiRVhUUkEiLCJTSElGVCIsIk9VVFBVVF9UWVBFUyIsImJsb2NrcyIsIlNoYTEiLCJzaGFyZWRNZW1vcnkiLCJoMCIsImgxIiwiaDIiLCJoMyIsImg0IiwiYmxvY2siLCJzdGFydCIsImJ5dGVzIiwiaEJ5dGVzIiwiZmluYWxpemVkIiwiaGFzaGVkIiwiZmlyc3QiLCJwcm90b3R5cGUiLCJ1cGRhdGUiLCJtZXNzYWdlIiwibm90U3RyaW5nIiwiY29uc3RydWN0b3IiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJjb2RlIiwiaW5kZXgiLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImxhc3RCeXRlSW5kZXgiLCJoYXNoIiwiZmluYWxpemUiLCJhIiwiYiIsImMiLCJkIiwiZSIsImYiLCJqIiwidCIsImhleCIsInRvU3RyaW5nIiwiZGlnZXN0IiwiYXJyYXkiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsImRhdGFWaWV3IiwiRGF0YVZpZXciLCJzZXRVaW50MzIiLCJpbnNlY3VyZUhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLGtCQUFrQkMsQ0FBQyxFQUFFQyxTQUFTQyxnQkFBZ0I7SUFDMUQsNkNBQTZDO0lBQzdDRixJQUFJQSxFQUFFRyxJQUFJO0lBQ1YsTUFBTUMsUUFBUSxxQkFBcUJDLElBQUksQ0FBQ0w7SUFDeEMsSUFBSSxDQUFDSSxPQUFPO1FBQ1IsT0FBT0gsT0FBT0Q7SUFDbEIsT0FDSztRQUNELE9BQU9DLE9BQU9HLEtBQUssQ0FBQyxFQUFFO0lBQzFCO0FBQ0o7QUFDQSwySEFBMkg7QUFDM0gsY0FBYztBQUNQLFNBQVNGLGlCQUFpQkYsQ0FBQztJQUM5Qiw4REFBOEQ7SUFDOUQsSUFBSSxPQUFPQSxNQUFNLGFBQWE7UUFDMUIsT0FBTztJQUNYO0lBQ0EscUNBQXFDO0lBQ3JDLElBQUk7UUFDQSxPQUFPTSxLQUFLQyxLQUFLLENBQUNQO0lBQ3RCLEVBQ0EsT0FBT1EsT0FBTztJQUNWLE9BQU87SUFDWDtJQUNBLHdCQUF3QjtJQUN4QixJQUFJQyxRQUFRO0lBQ1osTUFBTUMsUUFBUSxFQUFFO0lBQ2hCLElBQUlDLGlCQUFpQjtJQUNyQixJQUFJQyxVQUFVO0lBQ2Qsc0RBQXNEO0lBQ3RELEtBQUssSUFBSUMsUUFBUWIsRUFBRztRQUNoQixJQUFJVyxnQkFBZ0I7WUFDaEIsSUFBSUUsU0FBUyxPQUFPLENBQUNELFNBQVM7Z0JBQzFCRCxpQkFBaUI7WUFDckIsT0FDSyxJQUFJRSxTQUFTLFFBQVEsQ0FBQ0QsU0FBUztnQkFDaENDLE9BQU8sT0FBTywwREFBMEQ7WUFDNUUsT0FDSyxJQUFJQSxTQUFTLE1BQU07Z0JBQ3BCRCxVQUFVLENBQUNBO1lBQ2YsT0FDSztnQkFDREEsVUFBVTtZQUNkO1FBQ0osT0FDSztZQUNELElBQUlDLFNBQVMsS0FBSztnQkFDZEYsaUJBQWlCO2dCQUNqQkMsVUFBVTtZQUNkLE9BQ0ssSUFBSUMsU0FBUyxLQUFLO2dCQUNuQkgsTUFBTUksSUFBSSxDQUFDO1lBQ2YsT0FDSyxJQUFJRCxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsT0FBT0EsU0FBUyxLQUFLO2dCQUNuQyxJQUFJSCxTQUFTQSxLQUFLLENBQUNBLE1BQU1LLE1BQU0sR0FBRyxFQUFFLEtBQUtGLE1BQU07b0JBQzNDSCxNQUFNTSxHQUFHO2dCQUNiLE9BQ0s7b0JBQ0Qsd0RBQXdEO29CQUN4RCxPQUFPO2dCQUNYO1lBQ0o7UUFDSjtRQUNBLG9EQUFvRDtRQUNwRFAsU0FBU0k7SUFDYjtJQUNBLDJEQUEyRDtJQUMzRCwrQkFBK0I7SUFDL0IsSUFBSUYsZ0JBQWdCO1FBQ2hCRixTQUFTO0lBQ2I7SUFDQSxrRkFBa0Y7SUFDbEYsSUFBSyxJQUFJUSxJQUFJUCxNQUFNSyxNQUFNLEdBQUcsR0FBR0UsS0FBSyxHQUFHQSxLQUFLLEVBQUc7UUFDM0NSLFNBQVNDLEtBQUssQ0FBQ08sRUFBRTtJQUNyQjtJQUNBLGdEQUFnRDtJQUNoRCxJQUFJO1FBQ0EsT0FBT1gsS0FBS0MsS0FBSyxDQUFDRTtJQUN0QixFQUNBLE9BQU9ELE9BQU87UUFDViwrRUFBK0U7UUFDL0UsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcz9hNmVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25NYXJrZG93bihzLCBwYXJzZXIgPSBwYXJzZVBhcnRpYWxKc29uKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcyA9IHMudHJpbSgpO1xuICAgIGNvbnN0IG1hdGNoID0gL2BgYChqc29uKT8oLiopYGBgL3MuZXhlYyhzKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIocyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyKG1hdGNoWzJdKTtcbiAgICB9XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0tpbGxpYW5MdWNhcy9vcGVuLWludGVycHJldGVyL2Jsb2IvbWFpbi9pbnRlcnByZXRlci9jb3JlL2xsbS91dGlscy9wYXJzZV9wYXJ0aWFsX2pzb24ucHlcbi8vIE1JVCBMaWNlbnNlXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXJ0aWFsSnNvbihzKSB7XG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCwgcmV0dXJuIG51bGwgdG8gaW5kaWNhdGUgZmFpbHVyZS5cbiAgICBpZiAodHlwZW9mIHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdGhlIHN0cmluZyBhcy1pcy5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFBhc3NcbiAgICB9XG4gICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXMuXG4gICAgbGV0IG5ld19zID0gXCJcIjtcbiAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgIGxldCBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgIGxldCBlc2NhcGVkID0gZmFsc2U7XG4gICAgLy8gUHJvY2VzcyBlYWNoIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nIG9uZSBhdCBhIHRpbWUuXG4gICAgZm9yIChsZXQgY2hhciBvZiBzKSB7XG4gICAgICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJcXG5cIiAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIGNoYXIgPSBcIlxcXFxuXCI7IC8vIFJlcGxhY2UgdGhlIG5ld2xpbmUgY2hhcmFjdGVyIHdpdGggdGhlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFwifVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiW1wiKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChcIl1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIn1cIiB8fCBjaGFyID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgIGlmIChzdGFjayAmJiBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gY2hhcikge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1pc21hdGNoZWQgY2xvc2luZyBjaGFyYWN0ZXI7IHRoZSBpbnB1dCBpcyBtYWxmb3JtZWQuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBlbmQgdGhlIHByb2Nlc3NlZCBjaGFyYWN0ZXIgdG8gdGhlIG5ldyBzdHJpbmcuXG4gICAgICAgIG5ld19zICs9IGNoYXI7XG4gICAgfVxuICAgIC8vIElmIHdlJ3JlIHN0aWxsIGluc2lkZSBhIHN0cmluZyBhdCB0aGUgZW5kIG9mIHByb2Nlc3NpbmcsXG4gICAgLy8gd2UgbmVlZCB0byBjbG9zZSB0aGUgc3RyaW5nLlxuICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICBuZXdfcyArPSAnXCInO1xuICAgIH1cbiAgICAvLyBDbG9zZSBhbnkgcmVtYWluaW5nIG9wZW4gc3RydWN0dXJlcyBpbiB0aGUgcmV2ZXJzZSBvcmRlciB0aGF0IHRoZXkgd2VyZSBvcGVuZWQuXG4gICAgZm9yIChsZXQgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgIG5ld19zICs9IHN0YWNrW2ldO1xuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBtb2RpZmllZCBzdHJpbmcgYXMgSlNPTi5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShuZXdfcyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZiB3ZSBzdGlsbCBjYW4ndCBwYXJzZSB0aGUgc3RyaW5nIGFzIEpTT04sIHJldHVybiBudWxsIHRvIGluZGljYXRlIGZhaWx1cmUuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZUpzb25NYXJrZG93biIsInMiLCJwYXJzZXIiLCJwYXJzZVBhcnRpYWxKc29uIiwidHJpbSIsIm1hdGNoIiwiZXhlYyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwibmV3X3MiLCJzdGFjayIsImlzSW5zaWRlU3RyaW5nIiwiZXNjYXBlZCIsImNoYXIiLCJwdXNoIiwibGVuZ3RoIiwicG9wIiwiaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_patch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyPatch: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   compare: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.compare)\n/* harmony export */ });\n/* harmony import */ var _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcz9jNGE1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGNvbXBhcmUsIGFwcGx5UGF0Y2gsIH0gZnJvbSBcIi4vZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzXCI7XG4iXSwibmFtZXMiOlsiY29tcGFyZSIsImFwcGx5UGF0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/sax-js/sax.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sax: () => (/* binding */ sax)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues\n// Originally from: https://github.com/isaacs/sax-js\nconst initializeSax = function() {\n    const sax = {};\n    sax.parser = function(strict, opt) {\n        return new SAXParser(strict, opt);\n    };\n    sax.SAXParser = SAXParser;\n    sax.SAXStream = SAXStream;\n    sax.createStream = createStream;\n    // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n    // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n    // since that's the earliest that a buffer overrun could occur.  This way, checks are\n    // as rare as required, but as often as necessary to ensure never crossing this bound.\n    // Furthermore, buffers are only tested at most once per write(), so passing a very\n    // large string into write() might have undesirable effects, but this is manageable by\n    // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n    // edge case, result in creating at most one complete copy of the string passed in.\n    // Set to Infinity to have unlimited buffers.\n    sax.MAX_BUFFER_LENGTH = 64 * 1024;\n    const buffers = [\n        \"comment\",\n        \"sgmlDecl\",\n        \"textNode\",\n        \"tagName\",\n        \"doctype\",\n        \"procInstName\",\n        \"procInstBody\",\n        \"entity\",\n        \"attribName\",\n        \"attribValue\",\n        \"cdata\",\n        \"script\"\n    ];\n    sax.EVENTS = [\n        \"text\",\n        \"processinginstruction\",\n        \"sgmldeclaration\",\n        \"doctype\",\n        \"comment\",\n        \"opentagstart\",\n        \"attribute\",\n        \"opentag\",\n        \"closetag\",\n        \"opencdata\",\n        \"cdata\",\n        \"closecdata\",\n        \"error\",\n        \"end\",\n        \"ready\",\n        \"script\",\n        \"opennamespace\",\n        \"closenamespace\"\n    ];\n    function SAXParser(strict, opt) {\n        if (!(this instanceof SAXParser)) {\n            return new SAXParser(strict, opt);\n        }\n        var parser = this;\n        clearBuffers(parser);\n        parser.q = parser.c = \"\";\n        parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n        parser.opt = opt || {};\n        parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n        parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\";\n        parser.tags = [];\n        parser.closed = parser.closedRoot = parser.sawRoot = false;\n        parser.tag = parser.error = null;\n        parser.strict = !!strict;\n        parser.noscript = !!(strict || parser.opt.noscript);\n        parser.state = S.BEGIN;\n        parser.strictEntities = parser.opt.strictEntities;\n        parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n        parser.attribList = [];\n        // namespaces form a prototype chain.\n        // it always points at the current tag,\n        // which protos to its parent tag.\n        if (parser.opt.xmlns) {\n            parser.ns = Object.create(rootNS);\n        }\n        // mostly just for error reporting\n        parser.trackPosition = parser.opt.position !== false;\n        if (parser.trackPosition) {\n            parser.position = parser.line = parser.column = 0;\n        }\n        emit(parser, \"onready\");\n    }\n    if (!Object.create) {\n        Object.create = function(o) {\n            function F() {}\n            F.prototype = o;\n            var newf = new F();\n            return newf;\n        };\n    }\n    if (!Object.keys) {\n        Object.keys = function(o) {\n            var a = [];\n            for(var i in o)if (o.hasOwnProperty(i)) a.push(i);\n            return a;\n        };\n    }\n    function checkBufferLength(parser) {\n        var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n        var maxActual = 0;\n        for(var i = 0, l = buffers.length; i < l; i++){\n            var len = parser[buffers[i]].length;\n            if (len > maxAllowed) {\n                // Text/cdata nodes can get big, and since they're buffered,\n                // we can get here under normal conditions.\n                // Avoid issues by emitting the text node now,\n                // so at least it won't get any bigger.\n                switch(buffers[i]){\n                    case \"textNode\":\n                        closeText(parser);\n                        break;\n                    case \"cdata\":\n                        emitNode(parser, \"oncdata\", parser.cdata);\n                        parser.cdata = \"\";\n                        break;\n                    case \"script\":\n                        emitNode(parser, \"onscript\", parser.script);\n                        parser.script = \"\";\n                        break;\n                    default:\n                        error(parser, \"Max buffer length exceeded: \" + buffers[i]);\n                }\n            }\n            maxActual = Math.max(maxActual, len);\n        }\n        // schedule the next check for the earliest possible buffer overrun.\n        var m = sax.MAX_BUFFER_LENGTH - maxActual;\n        parser.bufferCheckPosition = m + parser.position;\n    }\n    function clearBuffers(parser) {\n        for(var i = 0, l = buffers.length; i < l; i++){\n            parser[buffers[i]] = \"\";\n        }\n    }\n    function flushBuffers(parser) {\n        closeText(parser);\n        if (parser.cdata !== \"\") {\n            emitNode(parser, \"oncdata\", parser.cdata);\n            parser.cdata = \"\";\n        }\n        if (parser.script !== \"\") {\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n    }\n    SAXParser.prototype = {\n        end: function() {\n            end(this);\n        },\n        write: write,\n        resume: function() {\n            this.error = null;\n            return this;\n        },\n        close: function() {\n            return this.write(null);\n        },\n        flush: function() {\n            flushBuffers(this);\n        }\n    };\n    var Stream = ReadableStream;\n    if (!Stream) Stream = function() {};\n    var streamWraps = sax.EVENTS.filter(function(ev) {\n        return ev !== \"error\" && ev !== \"end\";\n    });\n    function createStream(strict, opt) {\n        return new SAXStream(strict, opt);\n    }\n    function SAXStream(strict, opt) {\n        if (!(this instanceof SAXStream)) {\n            return new SAXStream(strict, opt);\n        }\n        Stream.apply(this);\n        this._parser = new SAXParser(strict, opt);\n        this.writable = true;\n        this.readable = true;\n        var me = this;\n        this._parser.onend = function() {\n            me.emit(\"end\");\n        };\n        this._parser.onerror = function(er) {\n            me.emit(\"error\", er);\n            // if didn't throw, then means error was handled.\n            // go ahead and clear error, so we can write again.\n            me._parser.error = null;\n        };\n        this._decoder = null;\n        streamWraps.forEach(function(ev) {\n            Object.defineProperty(me, \"on\" + ev, {\n                get: function() {\n                    return me._parser[\"on\" + ev];\n                },\n                set: function(h) {\n                    if (!h) {\n                        me.removeAllListeners(ev);\n                        me._parser[\"on\" + ev] = h;\n                        return h;\n                    }\n                    me.on(ev, h);\n                },\n                enumerable: true,\n                configurable: false\n            });\n        });\n    }\n    SAXStream.prototype = Object.create(Stream.prototype, {\n        constructor: {\n            value: SAXStream\n        }\n    });\n    SAXStream.prototype.write = function(data) {\n        this._parser.write(data.toString());\n        this.emit(\"data\", data);\n        return true;\n    };\n    SAXStream.prototype.end = function(chunk) {\n        if (chunk && chunk.length) {\n            this.write(chunk);\n        }\n        this._parser.end();\n        return true;\n    };\n    SAXStream.prototype.on = function(ev, handler) {\n        var me = this;\n        if (!me._parser[\"on\" + ev] && streamWraps.indexOf(ev) !== -1) {\n            me._parser[\"on\" + ev] = function() {\n                var args = arguments.length === 1 ? [\n                    arguments[0]\n                ] : Array.apply(null, arguments);\n                args.splice(0, 0, ev);\n                me.emit.apply(me, args);\n            };\n        }\n        return Stream.prototype.on.call(me, ev, handler);\n    };\n    // this really needs to be replaced with character classes.\n    // XML allows all manner of ridiculous numbers and digits.\n    var CDATA = \"[CDATA[\";\n    var DOCTYPE = \"DOCTYPE\";\n    var XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n    var XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\n    var rootNS = {\n        xml: XML_NAMESPACE,\n        xmlns: XMLNS_NAMESPACE\n    };\n    // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n    // This implementation works on strings, a single character at a time\n    // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n    // without a significant breaking change to either this  parser, or the\n    // JavaScript language.  Implementation of an emoji-capable xml parser\n    // is left as an exercise for the reader.\n    var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    function isWhitespace(c) {\n        return c === \" \" || c === \"\\n\" || c === \"\\r\" || c === \"\t\";\n    }\n    function isQuote(c) {\n        return c === '\"' || c === \"'\";\n    }\n    function isAttribEnd(c) {\n        return c === \">\" || isWhitespace(c);\n    }\n    function isMatch(regex, c) {\n        return regex.test(c);\n    }\n    function notMatch(regex, c) {\n        return !isMatch(regex, c);\n    }\n    var S = 0;\n    sax.STATE = {\n        BEGIN: S++,\n        BEGIN_WHITESPACE: S++,\n        TEXT: S++,\n        TEXT_ENTITY: S++,\n        OPEN_WAKA: S++,\n        SGML_DECL: S++,\n        SGML_DECL_QUOTED: S++,\n        DOCTYPE: S++,\n        DOCTYPE_QUOTED: S++,\n        DOCTYPE_DTD: S++,\n        DOCTYPE_DTD_QUOTED: S++,\n        COMMENT_STARTING: S++,\n        COMMENT: S++,\n        COMMENT_ENDING: S++,\n        COMMENT_ENDED: S++,\n        CDATA: S++,\n        CDATA_ENDING: S++,\n        CDATA_ENDING_2: S++,\n        PROC_INST: S++,\n        PROC_INST_BODY: S++,\n        PROC_INST_ENDING: S++,\n        OPEN_TAG: S++,\n        OPEN_TAG_SLASH: S++,\n        ATTRIB: S++,\n        ATTRIB_NAME: S++,\n        ATTRIB_NAME_SAW_WHITE: S++,\n        ATTRIB_VALUE: S++,\n        ATTRIB_VALUE_QUOTED: S++,\n        ATTRIB_VALUE_CLOSED: S++,\n        ATTRIB_VALUE_UNQUOTED: S++,\n        ATTRIB_VALUE_ENTITY_Q: S++,\n        ATTRIB_VALUE_ENTITY_U: S++,\n        CLOSE_TAG: S++,\n        CLOSE_TAG_SAW_WHITE: S++,\n        SCRIPT: S++,\n        SCRIPT_ENDING: S++\n    };\n    sax.XML_ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\"\n    };\n    sax.ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\",\n        AElig: 198,\n        Aacute: 193,\n        Acirc: 194,\n        Agrave: 192,\n        Aring: 197,\n        Atilde: 195,\n        Auml: 196,\n        Ccedil: 199,\n        ETH: 208,\n        Eacute: 201,\n        Ecirc: 202,\n        Egrave: 200,\n        Euml: 203,\n        Iacute: 205,\n        Icirc: 206,\n        Igrave: 204,\n        Iuml: 207,\n        Ntilde: 209,\n        Oacute: 211,\n        Ocirc: 212,\n        Ograve: 210,\n        Oslash: 216,\n        Otilde: 213,\n        Ouml: 214,\n        THORN: 222,\n        Uacute: 218,\n        Ucirc: 219,\n        Ugrave: 217,\n        Uuml: 220,\n        Yacute: 221,\n        aacute: 225,\n        acirc: 226,\n        aelig: 230,\n        agrave: 224,\n        aring: 229,\n        atilde: 227,\n        auml: 228,\n        ccedil: 231,\n        eacute: 233,\n        ecirc: 234,\n        egrave: 232,\n        eth: 240,\n        euml: 235,\n        iacute: 237,\n        icirc: 238,\n        igrave: 236,\n        iuml: 239,\n        ntilde: 241,\n        oacute: 243,\n        ocirc: 244,\n        ograve: 242,\n        oslash: 248,\n        otilde: 245,\n        ouml: 246,\n        szlig: 223,\n        thorn: 254,\n        uacute: 250,\n        ucirc: 251,\n        ugrave: 249,\n        uuml: 252,\n        yacute: 253,\n        yuml: 255,\n        copy: 169,\n        reg: 174,\n        nbsp: 160,\n        iexcl: 161,\n        cent: 162,\n        pound: 163,\n        curren: 164,\n        yen: 165,\n        brvbar: 166,\n        sect: 167,\n        uml: 168,\n        ordf: 170,\n        laquo: 171,\n        not: 172,\n        shy: 173,\n        macr: 175,\n        deg: 176,\n        plusmn: 177,\n        sup1: 185,\n        sup2: 178,\n        sup3: 179,\n        acute: 180,\n        micro: 181,\n        para: 182,\n        middot: 183,\n        cedil: 184,\n        ordm: 186,\n        raquo: 187,\n        frac14: 188,\n        frac12: 189,\n        frac34: 190,\n        iquest: 191,\n        times: 215,\n        divide: 247,\n        OElig: 338,\n        oelig: 339,\n        Scaron: 352,\n        scaron: 353,\n        Yuml: 376,\n        fnof: 402,\n        circ: 710,\n        tilde: 732,\n        Alpha: 913,\n        Beta: 914,\n        Gamma: 915,\n        Delta: 916,\n        Epsilon: 917,\n        Zeta: 918,\n        Eta: 919,\n        Theta: 920,\n        Iota: 921,\n        Kappa: 922,\n        Lambda: 923,\n        Mu: 924,\n        Nu: 925,\n        Xi: 926,\n        Omicron: 927,\n        Pi: 928,\n        Rho: 929,\n        Sigma: 931,\n        Tau: 932,\n        Upsilon: 933,\n        Phi: 934,\n        Chi: 935,\n        Psi: 936,\n        Omega: 937,\n        alpha: 945,\n        beta: 946,\n        gamma: 947,\n        delta: 948,\n        epsilon: 949,\n        zeta: 950,\n        eta: 951,\n        theta: 952,\n        iota: 953,\n        kappa: 954,\n        lambda: 955,\n        mu: 956,\n        nu: 957,\n        xi: 958,\n        omicron: 959,\n        pi: 960,\n        rho: 961,\n        sigmaf: 962,\n        sigma: 963,\n        tau: 964,\n        upsilon: 965,\n        phi: 966,\n        chi: 967,\n        psi: 968,\n        omega: 969,\n        thetasym: 977,\n        upsih: 978,\n        piv: 982,\n        ensp: 8194,\n        emsp: 8195,\n        thinsp: 8201,\n        zwnj: 8204,\n        zwj: 8205,\n        lrm: 8206,\n        rlm: 8207,\n        ndash: 8211,\n        mdash: 8212,\n        lsquo: 8216,\n        rsquo: 8217,\n        sbquo: 8218,\n        ldquo: 8220,\n        rdquo: 8221,\n        bdquo: 8222,\n        dagger: 8224,\n        Dagger: 8225,\n        bull: 8226,\n        hellip: 8230,\n        permil: 8240,\n        prime: 8242,\n        Prime: 8243,\n        lsaquo: 8249,\n        rsaquo: 8250,\n        oline: 8254,\n        frasl: 8260,\n        euro: 8364,\n        image: 8465,\n        weierp: 8472,\n        real: 8476,\n        trade: 8482,\n        alefsym: 8501,\n        larr: 8592,\n        uarr: 8593,\n        rarr: 8594,\n        darr: 8595,\n        harr: 8596,\n        crarr: 8629,\n        lArr: 8656,\n        uArr: 8657,\n        rArr: 8658,\n        dArr: 8659,\n        hArr: 8660,\n        forall: 8704,\n        part: 8706,\n        exist: 8707,\n        empty: 8709,\n        nabla: 8711,\n        isin: 8712,\n        notin: 8713,\n        ni: 8715,\n        prod: 8719,\n        sum: 8721,\n        minus: 8722,\n        lowast: 8727,\n        radic: 8730,\n        prop: 8733,\n        infin: 8734,\n        ang: 8736,\n        and: 8743,\n        or: 8744,\n        cap: 8745,\n        cup: 8746,\n        int: 8747,\n        there4: 8756,\n        sim: 8764,\n        cong: 8773,\n        asymp: 8776,\n        ne: 8800,\n        equiv: 8801,\n        le: 8804,\n        ge: 8805,\n        sub: 8834,\n        sup: 8835,\n        nsub: 8836,\n        sube: 8838,\n        supe: 8839,\n        oplus: 8853,\n        otimes: 8855,\n        perp: 8869,\n        sdot: 8901,\n        lceil: 8968,\n        rceil: 8969,\n        lfloor: 8970,\n        rfloor: 8971,\n        lang: 9001,\n        rang: 9002,\n        loz: 9674,\n        spades: 9824,\n        clubs: 9827,\n        hearts: 9829,\n        diams: 9830\n    };\n    Object.keys(sax.ENTITIES).forEach(function(key) {\n        var e = sax.ENTITIES[key];\n        var s = typeof e === \"number\" ? String.fromCharCode(e) : e;\n        sax.ENTITIES[key] = s;\n    });\n    for(var s in sax.STATE){\n        sax.STATE[sax.STATE[s]] = s;\n    }\n    // shorthand\n    S = sax.STATE;\n    function emit(parser, event, data) {\n        parser[event] && parser[event](data);\n    }\n    function emitNode(parser, nodeType, data) {\n        if (parser.textNode) closeText(parser);\n        emit(parser, nodeType, data);\n    }\n    function closeText(parser) {\n        parser.textNode = textopts(parser.opt, parser.textNode);\n        if (parser.textNode) emit(parser, \"ontext\", parser.textNode);\n        parser.textNode = \"\";\n    }\n    function textopts(opt, text) {\n        if (opt.trim) text = text.trim();\n        if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n        return text;\n    }\n    function error(parser, er) {\n        closeText(parser);\n        if (parser.trackPosition) {\n            er += \"\\nLine: \" + parser.line + \"\\nColumn: \" + parser.column + \"\\nChar: \" + parser.c;\n        }\n        er = new Error(er);\n        parser.error = er;\n        emit(parser, \"onerror\", er);\n        return parser;\n    }\n    function end(parser) {\n        if (parser.sawRoot && !parser.closedRoot) strictFail(parser, \"Unclosed root tag\");\n        if (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) {\n            error(parser, \"Unexpected end\");\n        }\n        closeText(parser);\n        parser.c = \"\";\n        parser.closed = true;\n        emit(parser, \"onend\");\n        SAXParser.call(parser, parser.strict, parser.opt);\n        return parser;\n    }\n    function strictFail(parser, message) {\n        if (typeof parser !== \"object\" || !(parser instanceof SAXParser)) {\n            throw new Error(\"bad call to strictFail\");\n        }\n        if (parser.strict) {\n            error(parser, message);\n        }\n    }\n    function newTag(parser) {\n        if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n        var tag = parser.tag = {\n            name: parser.tagName,\n            attributes: {}\n        };\n        // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n        if (parser.opt.xmlns) {\n            tag.ns = parent.ns;\n        }\n        parser.attribList.length = 0;\n        emitNode(parser, \"onopentagstart\", tag);\n    }\n    function qname(name, attribute) {\n        var i = name.indexOf(\":\");\n        var qualName = i < 0 ? [\n            \"\",\n            name\n        ] : name.split(\":\");\n        var prefix = qualName[0];\n        var local = qualName[1];\n        // <x \"xmlns\"=\"http://foo\">\n        if (attribute && name === \"xmlns\") {\n            prefix = \"xmlns\";\n            local = \"\";\n        }\n        return {\n            prefix: prefix,\n            local: local\n        };\n    }\n    function attrib(parser) {\n        if (!parser.strict) {\n            parser.attribName = parser.attribName[parser.looseCase]();\n        }\n        if (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n            parser.attribName = parser.attribValue = \"\";\n            return;\n        }\n        if (parser.opt.xmlns) {\n            var qn = qname(parser.attribName, true);\n            var prefix = qn.prefix;\n            var local = qn.local;\n            if (prefix === \"xmlns\") {\n                // namespace binding attribute. push the binding into scope\n                if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n                    strictFail(parser, \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n                    strictFail(parser, \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else {\n                    var tag = parser.tag;\n                    var parent = parser.tags[parser.tags.length - 1] || parser;\n                    if (tag.ns === parent.ns) {\n                        tag.ns = Object.create(parent.ns);\n                    }\n                    tag.ns[local] = parser.attribValue;\n                }\n            }\n            // defer onattribute events until all attributes have been seen\n            // so any new bindings can take effect. preserve attribute order\n            // so deferred events can be emitted in document order\n            parser.attribList.push([\n                parser.attribName,\n                parser.attribValue\n            ]);\n        } else {\n            // in non-xmlns mode, we can emit the event right away\n            parser.tag.attributes[parser.attribName] = parser.attribValue;\n            emitNode(parser, \"onattribute\", {\n                name: parser.attribName,\n                value: parser.attribValue\n            });\n        }\n        parser.attribName = parser.attribValue = \"\";\n    }\n    function openTag(parser, selfClosing) {\n        if (parser.opt.xmlns) {\n            // emit namespace binding events\n            var tag = parser.tag;\n            // add namespace info to tag\n            var qn = qname(parser.tagName);\n            tag.prefix = qn.prefix;\n            tag.local = qn.local;\n            tag.uri = tag.ns[qn.prefix] || \"\";\n            if (tag.prefix && !tag.uri) {\n                strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(parser.tagName));\n                tag.uri = qn.prefix;\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (tag.ns && parent.ns !== tag.ns) {\n                Object.keys(tag.ns).forEach(function(p) {\n                    emitNode(parser, \"onopennamespace\", {\n                        prefix: p,\n                        uri: tag.ns[p]\n                    });\n                });\n            }\n            // handle deferred onattribute events\n            // Note: do not apply default ns to attributes:\n            //   http://www.w3.org/TR/REC-xml-names/#defaulting\n            for(var i = 0, l = parser.attribList.length; i < l; i++){\n                var nv = parser.attribList[i];\n                var name = nv[0];\n                var value = nv[1];\n                var qualName = qname(name, true);\n                var prefix = qualName.prefix;\n                var local = qualName.local;\n                var uri = prefix === \"\" ? \"\" : tag.ns[prefix] || \"\";\n                var a = {\n                    name: name,\n                    value: value,\n                    prefix: prefix,\n                    local: local,\n                    uri: uri\n                };\n                // if there's any attributes with an undefined namespace,\n                // then fail on them now.\n                if (prefix && prefix !== \"xmlns\" && !uri) {\n                    strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(prefix));\n                    a.uri = prefix;\n                }\n                parser.tag.attributes[name] = a;\n                emitNode(parser, \"onattribute\", a);\n            }\n            parser.attribList.length = 0;\n        }\n        parser.tag.isSelfClosing = !!selfClosing;\n        // process the tag\n        parser.sawRoot = true;\n        parser.tags.push(parser.tag);\n        emitNode(parser, \"onopentag\", parser.tag);\n        if (!selfClosing) {\n            // special case for <script> in non-strict mode.\n            if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n                parser.state = S.SCRIPT;\n            } else {\n                parser.state = S.TEXT;\n            }\n            parser.tag = null;\n            parser.tagName = \"\";\n        }\n        parser.attribName = parser.attribValue = \"\";\n        parser.attribList.length = 0;\n    }\n    function closeTag(parser) {\n        if (!parser.tagName) {\n            strictFail(parser, \"Weird empty close tag.\");\n            parser.textNode += \"</>\";\n            parser.state = S.TEXT;\n            return;\n        }\n        if (parser.script) {\n            if (parser.tagName !== \"script\") {\n                parser.script += \"</\" + parser.tagName + \">\";\n                parser.tagName = \"\";\n                parser.state = S.SCRIPT;\n                return;\n            }\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n        // first make sure that the closing tag actually exists.\n        // <a><b></c></b></a> will close everything, otherwise.\n        var t = parser.tags.length;\n        var tagName = parser.tagName;\n        if (!parser.strict) {\n            tagName = tagName[parser.looseCase]();\n        }\n        var closeTo = tagName;\n        while(t--){\n            var close = parser.tags[t];\n            if (close.name !== closeTo) {\n                // fail the first time in strict mode\n                strictFail(parser, \"Unexpected close tag\");\n            } else {\n                break;\n            }\n        }\n        // didn't find it.  we already failed for strict, so just abort.\n        if (t < 0) {\n            strictFail(parser, \"Unmatched closing tag: \" + parser.tagName);\n            parser.textNode += \"</\" + parser.tagName + \">\";\n            parser.state = S.TEXT;\n            return;\n        }\n        parser.tagName = tagName;\n        var s = parser.tags.length;\n        while(s-- > t){\n            var tag = parser.tag = parser.tags.pop();\n            parser.tagName = parser.tag.name;\n            emitNode(parser, \"onclosetag\", parser.tagName);\n            var x = {};\n            for(var i in tag.ns){\n                x[i] = tag.ns[i];\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (parser.opt.xmlns && tag.ns !== parent.ns) {\n                // remove namespace bindings introduced by tag\n                Object.keys(tag.ns).forEach(function(p) {\n                    var n = tag.ns[p];\n                    emitNode(parser, \"onclosenamespace\", {\n                        prefix: p,\n                        uri: n\n                    });\n                });\n            }\n        }\n        if (t === 0) parser.closedRoot = true;\n        parser.tagName = parser.attribValue = parser.attribName = \"\";\n        parser.attribList.length = 0;\n        parser.state = S.TEXT;\n    }\n    function parseEntity(parser) {\n        var entity = parser.entity;\n        var entityLC = entity.toLowerCase();\n        var num;\n        var numStr = \"\";\n        if (parser.ENTITIES[entity]) {\n            return parser.ENTITIES[entity];\n        }\n        if (parser.ENTITIES[entityLC]) {\n            return parser.ENTITIES[entityLC];\n        }\n        entity = entityLC;\n        if (entity.charAt(0) === \"#\") {\n            if (entity.charAt(1) === \"x\") {\n                entity = entity.slice(2);\n                num = parseInt(entity, 16);\n                numStr = num.toString(16);\n            } else {\n                entity = entity.slice(1);\n                num = parseInt(entity, 10);\n                numStr = num.toString(10);\n            }\n        }\n        entity = entity.replace(/^0+/, \"\");\n        if (isNaN(num) || numStr.toLowerCase() !== entity) {\n            strictFail(parser, \"Invalid character entity\");\n            return \"&\" + parser.entity + \";\";\n        }\n        return String.fromCodePoint(num);\n    }\n    function beginWhiteSpace(parser, c) {\n        if (c === \"<\") {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n        } else if (!isWhitespace(c)) {\n            // have to process this as a text node.\n            // weird, but happens.\n            strictFail(parser, \"Non-whitespace before first tag.\");\n            parser.textNode = c;\n            parser.state = S.TEXT;\n        }\n    }\n    function charAt(chunk, i) {\n        var result = \"\";\n        if (i < chunk.length) {\n            result = chunk.charAt(i);\n        }\n        return result;\n    }\n    function write(chunk) {\n        var parser = this;\n        if (this.error) {\n            throw this.error;\n        }\n        if (parser.closed) {\n            return error(parser, \"Cannot write after close. Assign an onready handler.\");\n        }\n        if (chunk === null) {\n            return end(parser);\n        }\n        if (typeof chunk === \"object\") {\n            chunk = chunk.toString();\n        }\n        var i = 0;\n        var c = \"\";\n        while(true){\n            c = charAt(chunk, i++);\n            parser.c = c;\n            if (!c) {\n                break;\n            }\n            if (parser.trackPosition) {\n                parser.position++;\n                if (c === \"\\n\") {\n                    parser.line++;\n                    parser.column = 0;\n                } else {\n                    parser.column++;\n                }\n            }\n            switch(parser.state){\n                case S.BEGIN:\n                    parser.state = S.BEGIN_WHITESPACE;\n                    if (c === \"\\uFEFF\") {\n                        continue;\n                    }\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.BEGIN_WHITESPACE:\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.TEXT:\n                    if (parser.sawRoot && !parser.closedRoot) {\n                        var starti = i - 1;\n                        while(c && c !== \"<\" && c !== \"&\"){\n                            c = charAt(chunk, i++);\n                            if (c && parser.trackPosition) {\n                                parser.position++;\n                                if (c === \"\\n\") {\n                                    parser.line++;\n                                    parser.column = 0;\n                                } else {\n                                    parser.column++;\n                                }\n                            }\n                        }\n                        parser.textNode += chunk.substring(starti, i - 1);\n                    }\n                    if (c === \"<\" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n                        parser.state = S.OPEN_WAKA;\n                        parser.startTagPosition = parser.position;\n                    } else {\n                        if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n                            strictFail(parser, \"Text data outside of root node.\");\n                        }\n                        if (c === \"&\") {\n                            parser.state = S.TEXT_ENTITY;\n                        } else {\n                            parser.textNode += c;\n                        }\n                    }\n                    continue;\n                case S.SCRIPT:\n                    // only non-strict\n                    if (c === \"<\") {\n                        parser.state = S.SCRIPT_ENDING;\n                    } else {\n                        parser.script += c;\n                    }\n                    continue;\n                case S.SCRIPT_ENDING:\n                    if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                    } else {\n                        parser.script += \"<\" + c;\n                        parser.state = S.SCRIPT;\n                    }\n                    continue;\n                case S.OPEN_WAKA:\n                    // either a /, ?, !, or text is coming next.\n                    if (c === \"!\") {\n                        parser.state = S.SGML_DECL;\n                        parser.sgmlDecl = \"\";\n                    } else if (isWhitespace(c)) {\n                    // wait for it...\n                    } else if (isMatch(nameStart, c)) {\n                        parser.state = S.OPEN_TAG;\n                        parser.tagName = c;\n                    } else if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                        parser.tagName = \"\";\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST;\n                        parser.procInstName = parser.procInstBody = \"\";\n                    } else {\n                        strictFail(parser, \"Unencoded <\");\n                        // if there was some whitespace, then add that in.\n                        if (parser.startTagPosition + 1 < parser.position) {\n                            var pad = parser.position - parser.startTagPosition;\n                            c = new Array(pad).join(\" \") + c;\n                        }\n                        parser.textNode += \"<\" + c;\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.SGML_DECL:\n                    if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n                        emitNode(parser, \"onopencdata\");\n                        parser.state = S.CDATA;\n                        parser.sgmlDecl = \"\";\n                        parser.cdata = \"\";\n                    } else if (parser.sgmlDecl + c === \"--\") {\n                        parser.state = S.COMMENT;\n                        parser.comment = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n                        parser.state = S.DOCTYPE;\n                        if (parser.doctype || parser.sawRoot) {\n                            strictFail(parser, \"Inappropriately located doctype declaration\");\n                        }\n                        parser.doctype = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if (c === \">\") {\n                        emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl);\n                        parser.sgmlDecl = \"\";\n                        parser.state = S.TEXT;\n                    } else if (isQuote(c)) {\n                        parser.state = S.SGML_DECL_QUOTED;\n                        parser.sgmlDecl += c;\n                    } else {\n                        parser.sgmlDecl += c;\n                    }\n                    continue;\n                case S.SGML_DECL_QUOTED:\n                    if (c === parser.q) {\n                        parser.state = S.SGML_DECL;\n                        parser.q = \"\";\n                    }\n                    parser.sgmlDecl += c;\n                    continue;\n                case S.DOCTYPE:\n                    if (c === \">\") {\n                        parser.state = S.TEXT;\n                        emitNode(parser, \"ondoctype\", parser.doctype);\n                        parser.doctype = true; // just remember that we saw it.\n                    } else {\n                        parser.doctype += c;\n                        if (c === \"[\") {\n                            parser.state = S.DOCTYPE_DTD;\n                        } else if (isQuote(c)) {\n                            parser.state = S.DOCTYPE_QUOTED;\n                            parser.q = c;\n                        }\n                    }\n                    continue;\n                case S.DOCTYPE_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.q = \"\";\n                        parser.state = S.DOCTYPE;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD:\n                    parser.doctype += c;\n                    if (c === \"]\") {\n                        parser.state = S.DOCTYPE;\n                    } else if (isQuote(c)) {\n                        parser.state = S.DOCTYPE_DTD_QUOTED;\n                        parser.q = c;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.state = S.DOCTYPE_DTD;\n                        parser.q = \"\";\n                    }\n                    continue;\n                case S.COMMENT:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDING;\n                    } else {\n                        parser.comment += c;\n                    }\n                    continue;\n                case S.COMMENT_ENDING:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDED;\n                        parser.comment = textopts(parser.opt, parser.comment);\n                        if (parser.comment) {\n                            emitNode(parser, \"oncomment\", parser.comment);\n                        }\n                        parser.comment = \"\";\n                    } else {\n                        parser.comment += \"-\" + c;\n                        parser.state = S.COMMENT;\n                    }\n                    continue;\n                case S.COMMENT_ENDED:\n                    if (c !== \">\") {\n                        strictFail(parser, \"Malformed comment\");\n                        // allow <!-- blah -- bloo --> in non-strict mode,\n                        // which is a comment of \" blah -- bloo \"\n                        parser.comment += \"--\" + c;\n                        parser.state = S.COMMENT;\n                    } else {\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.CDATA:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING;\n                    } else {\n                        parser.cdata += c;\n                    }\n                    continue;\n                case S.CDATA_ENDING:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING_2;\n                    } else {\n                        parser.cdata += \"]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.CDATA_ENDING_2:\n                    if (c === \">\") {\n                        if (parser.cdata) {\n                            emitNode(parser, \"oncdata\", parser.cdata);\n                        }\n                        emitNode(parser, \"onclosecdata\");\n                        parser.cdata = \"\";\n                        parser.state = S.TEXT;\n                    } else if (c === \"]\") {\n                        parser.cdata += \"]\";\n                    } else {\n                        parser.cdata += \"]]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.PROC_INST:\n                    if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.PROC_INST_BODY;\n                    } else {\n                        parser.procInstName += c;\n                    }\n                    continue;\n                case S.PROC_INST_BODY:\n                    if (!parser.procInstBody && isWhitespace(c)) {\n                        continue;\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else {\n                        parser.procInstBody += c;\n                    }\n                    continue;\n                case S.PROC_INST_ENDING:\n                    if (c === \">\") {\n                        emitNode(parser, \"onprocessinginstruction\", {\n                            name: parser.procInstName,\n                            body: parser.procInstBody\n                        });\n                        parser.procInstName = parser.procInstBody = \"\";\n                        parser.state = S.TEXT;\n                    } else {\n                        parser.procInstBody += \"?\" + c;\n                        parser.state = S.PROC_INST_BODY;\n                    }\n                    continue;\n                case S.OPEN_TAG:\n                    if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else {\n                        newTag(parser);\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (c === \"/\") {\n                            parser.state = S.OPEN_TAG_SLASH;\n                        } else {\n                            if (!isWhitespace(c)) {\n                                strictFail(parser, \"Invalid character in tag name\");\n                            }\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.OPEN_TAG_SLASH:\n                    if (c === \">\") {\n                        openTag(parser, true);\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Forward-slash in opening tag not followed by >\");\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.ATTRIB:\n                    // haven't read the attribute name yet.\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (c === \">\") {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.attribValue = parser.attribName;\n                        attrib(parser);\n                        openTag(parser);\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB_NAME_SAW_WHITE;\n                    } else if (isMatch(nameBody, c)) {\n                        parser.attribName += c;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME_SAW_WHITE:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (isWhitespace(c)) {\n                        continue;\n                    } else {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.tag.attributes[parser.attribName] = \"\";\n                        parser.attribValue = \"\";\n                        emitNode(parser, \"onattribute\", {\n                            name: parser.attribName,\n                            value: \"\"\n                        });\n                        parser.attribName = \"\";\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (isMatch(nameStart, c)) {\n                            parser.attribName = c;\n                            parser.state = S.ATTRIB_NAME;\n                        } else {\n                            strictFail(parser, \"Invalid attribute name\");\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.ATTRIB_VALUE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (isQuote(c)) {\n                        parser.q = c;\n                        parser.state = S.ATTRIB_VALUE_QUOTED;\n                    } else {\n                        strictFail(parser, \"Unquoted attribute value\");\n                        parser.state = S.ATTRIB_VALUE_UNQUOTED;\n                        parser.attribValue = c;\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_QUOTED:\n                    if (c !== parser.q) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    parser.q = \"\";\n                    parser.state = S.ATTRIB_VALUE_CLOSED;\n                    continue;\n                case S.ATTRIB_VALUE_CLOSED:\n                    if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        strictFail(parser, \"No whitespace between attributes\");\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_UNQUOTED:\n                    if (!isAttribEnd(c)) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_U;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    if (c === \">\") {\n                        openTag(parser);\n                    } else {\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.CLOSE_TAG:\n                    if (!parser.tagName) {\n                        if (isWhitespace(c)) {\n                            continue;\n                        } else if (notMatch(nameStart, c)) {\n                            if (parser.script) {\n                                parser.script += \"</\" + c;\n                                parser.state = S.SCRIPT;\n                            } else {\n                                strictFail(parser, \"Invalid tagname in closing tag.\");\n                            }\n                        } else {\n                            parser.tagName = c;\n                        }\n                    } else if (c === \">\") {\n                        closeTag(parser);\n                    } else if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else if (parser.script) {\n                        parser.script += \"</\" + parser.tagName;\n                        parser.tagName = \"\";\n                        parser.state = S.SCRIPT;\n                    } else {\n                        if (!isWhitespace(c)) {\n                            strictFail(parser, \"Invalid tagname in closing tag\");\n                        }\n                        parser.state = S.CLOSE_TAG_SAW_WHITE;\n                    }\n                    continue;\n                case S.CLOSE_TAG_SAW_WHITE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    if (c === \">\") {\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Invalid characters in closing tag\");\n                    }\n                    continue;\n                case S.TEXT_ENTITY:\n                case S.ATTRIB_VALUE_ENTITY_Q:\n                case S.ATTRIB_VALUE_ENTITY_U:\n                    var returnState;\n                    var buffer;\n                    switch(parser.state){\n                        case S.TEXT_ENTITY:\n                            returnState = S.TEXT;\n                            buffer = \"textNode\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_Q:\n                            returnState = S.ATTRIB_VALUE_QUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_U:\n                            returnState = S.ATTRIB_VALUE_UNQUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                    }\n                    if (c === \";\") {\n                        if (parser.opt.unparsedEntities) {\n                            var parsedEntity = parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                            parser.write(parsedEntity);\n                        } else {\n                            parser[buffer] += parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                        }\n                    } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n                        parser.entity += c;\n                    } else {\n                        strictFail(parser, \"Invalid character in entity name\");\n                        parser[buffer] += \"&\" + parser.entity + c;\n                        parser.entity = \"\";\n                        parser.state = returnState;\n                    }\n                    continue;\n                default:\n                    /* istanbul ignore next */ {\n                        throw new Error(parser, \"Unknown state: \" + parser.state);\n                    }\n            }\n        } // while\n        if (parser.position >= parser.bufferCheckPosition) {\n            checkBufferLength(parser);\n        }\n        return parser;\n    }\n    /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */ /* istanbul ignore next */ if (!String.fromCodePoint) {\n        (function() {\n            var stringFromCharCode = String.fromCharCode;\n            var floor = Math.floor;\n            var fromCodePoint = function() {\n                var MAX_SIZE = 0x4000;\n                var codeUnits = [];\n                var highSurrogate;\n                var lowSurrogate;\n                var index = -1;\n                var length = arguments.length;\n                if (!length) {\n                    return \"\";\n                }\n                var result = \"\";\n                while(++index < length){\n                    var codePoint = Number(arguments[index]);\n                    if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                    codePoint < 0 || // not a valid Unicode code point\n                    codePoint > 0x10ffff || // not a valid Unicode code point\n                    floor(codePoint) !== codePoint // not an integer\n                    ) {\n                        throw RangeError(\"Invalid code point: \" + codePoint);\n                    }\n                    if (codePoint <= 0xffff) {\n                        // BMP code point\n                        codeUnits.push(codePoint);\n                    } else {\n                        // Astral code point; split in surrogate halves\n                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                        codePoint -= 0x10000;\n                        highSurrogate = (codePoint >> 10) + 0xd800;\n                        lowSurrogate = codePoint % 0x400 + 0xdc00;\n                        codeUnits.push(highSurrogate, lowSurrogate);\n                    }\n                    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n                        result += stringFromCharCode.apply(null, codeUnits);\n                        codeUnits.length = 0;\n                    }\n                }\n                return result;\n            };\n            /* istanbul ignore next */ if (Object.defineProperty) {\n                Object.defineProperty(String, \"fromCodePoint\", {\n                    value: fromCodePoint,\n                    configurable: true,\n                    writable: true\n                });\n            } else {\n                String.fromCodePoint = fromCodePoint;\n            }\n        })();\n    }\n    return sax;\n};\nconst sax = /** #__PURE__ */ initializeSax();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2F4LWpzL3NheC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsY0FBYztBQUNkLDBDQUEwQztBQUMxQyxvREFBb0Q7QUFDcEQsTUFBTUEsZ0JBQWdCO0lBQ2xCLE1BQU1DLE1BQU0sQ0FBQztJQUNiQSxJQUFJQyxNQUFNLEdBQUcsU0FBVUMsTUFBTSxFQUFFQyxHQUFHO1FBQzlCLE9BQU8sSUFBSUMsVUFBVUYsUUFBUUM7SUFDakM7SUFDQUgsSUFBSUksU0FBUyxHQUFHQTtJQUNoQkosSUFBSUssU0FBUyxHQUFHQTtJQUNoQkwsSUFBSU0sWUFBWSxHQUFHQTtJQUNuQixtRkFBbUY7SUFDbkYsd0ZBQXdGO0lBQ3hGLHFGQUFxRjtJQUNyRixzRkFBc0Y7SUFDdEYsbUZBQW1GO0lBQ25GLHNGQUFzRjtJQUN0Rix3RkFBd0Y7SUFDeEYsbUZBQW1GO0lBQ25GLDZDQUE2QztJQUM3Q04sSUFBSU8saUJBQWlCLEdBQUcsS0FBSztJQUM3QixNQUFNQyxVQUFVO1FBQ1o7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRFIsSUFBSVMsTUFBTSxHQUFHO1FBQ1Q7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRCxTQUFTTCxVQUFVRixNQUFNLEVBQUVDLEdBQUc7UUFDMUIsSUFBSSxDQUFFLEtBQUksWUFBWUMsU0FBUSxHQUFJO1lBQzlCLE9BQU8sSUFBSUEsVUFBVUYsUUFBUUM7UUFDakM7UUFDQSxJQUFJRixTQUFTLElBQUk7UUFDakJTLGFBQWFUO1FBQ2JBLE9BQU9VLENBQUMsR0FBR1YsT0FBT1csQ0FBQyxHQUFHO1FBQ3RCWCxPQUFPWSxtQkFBbUIsR0FBR2IsSUFBSU8saUJBQWlCO1FBQ2xETixPQUFP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TkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxTQUFTO1FBQ1RDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLFNBQVM7UUFDVEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLEtBQUs7UUFDTEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxJQUFJO1FBQ0pDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE9BQU87SUFDWDtJQUNBelgsT0FBT2dCLElBQUksQ0FBQzdDLElBQUk0QixRQUFRLEVBQUV1RCxPQUFPLENBQUMsU0FBVW9VLEdBQUc7UUFDM0MsSUFBSUMsSUFBSXhaLElBQUk0QixRQUFRLENBQUMyWCxJQUFJO1FBQ3pCLElBQUlFLElBQUksT0FBT0QsTUFBTSxXQUFXRSxPQUFPQyxZQUFZLENBQUNILEtBQUtBO1FBQ3pEeFosSUFBSTRCLFFBQVEsQ0FBQzJYLElBQUksR0FBR0U7SUFDeEI7SUFDQSxJQUFLLElBQUlBLEtBQUt6WixJQUFJd0gsS0FBSyxDQUFFO1FBQ3JCeEgsSUFBSXdILEtBQUssQ0FBQ3hILElBQUl3SCxLQUFLLENBQUNpUyxFQUFFLENBQUMsR0FBR0E7SUFDOUI7SUFDQSxZQUFZO0lBQ1poWSxJQUFJekIsSUFBSXdILEtBQUs7SUFDYixTQUFTaEYsS0FBS3ZDLE1BQU0sRUFBRTJaLEtBQUssRUFBRTlULElBQUk7UUFDN0I3RixNQUFNLENBQUMyWixNQUFNLElBQUkzWixNQUFNLENBQUMyWixNQUFNLENBQUM5VDtJQUNuQztJQUNBLFNBQVNuQyxTQUFTMUQsTUFBTSxFQUFFNFosUUFBUSxFQUFFL1QsSUFBSTtRQUNwQyxJQUFJN0YsT0FBTzZaLFFBQVEsRUFDZnBXLFVBQVV6RDtRQUNkdUMsS0FBS3ZDLFFBQVE0WixVQUFVL1Q7SUFDM0I7SUFDQSxTQUFTcEMsVUFBVXpELE1BQU07UUFDckJBLE9BQU82WixRQUFRLEdBQUdDLFNBQVM5WixPQUFPRSxHQUFHLEVBQUVGLE9BQU82WixRQUFRO1FBQ3RELElBQUk3WixPQUFPNlosUUFBUSxFQUNmdFgsS0FBS3ZDLFFBQVEsVUFBVUEsT0FBTzZaLFFBQVE7UUFDMUM3WixPQUFPNlosUUFBUSxHQUFHO0lBQ3RCO0lBQ0EsU0FBU0MsU0FBUzVaLEdBQUcsRUFBRTZaLElBQUk7UUFDdkIsSUFBSTdaLElBQUk4WixJQUFJLEVBQ1JELE9BQU9BLEtBQUtDLElBQUk7UUFDcEIsSUFBSTlaLElBQUkrWixTQUFTLEVBQ2JGLE9BQU9BLEtBQUtHLE9BQU8sQ0FBQyxRQUFRO1FBQ2hDLE9BQU9IO0lBQ1g7SUFDQSxTQUFTMVksTUFBTXJCLE1BQU0sRUFBRWdGLEVBQUU7UUFDckJ2QixVQUFVekQ7UUFDVixJQUFJQSxPQUFPbUMsYUFBYSxFQUFFO1lBQ3RCNkMsTUFDSSxhQUNJaEYsT0FBT3FDLElBQUksR0FDWCxlQUNBckMsT0FBT3NDLE1BQU0sR0FDYixhQUNBdEMsT0FBT1csQ0FBQztRQUNwQjtRQUNBcUUsS0FBSyxJQUFJbVYsTUFBTW5WO1FBQ2ZoRixPQUFPcUIsS0FBSyxHQUFHMkQ7UUFDZnpDLEtBQUt2QyxRQUFRLFdBQVdnRjtRQUN4QixPQUFPaEY7SUFDWDtJQUNBLFNBQVMrRCxJQUFJL0QsTUFBTTtRQUNmLElBQUlBLE9BQU9tQixPQUFPLElBQUksQ0FBQ25CLE9BQU9rQixVQUFVLEVBQ3BDa1osV0FBV3BhLFFBQVE7UUFDdkIsSUFBSUEsT0FBT3VCLEtBQUssS0FBS0MsRUFBRUMsS0FBSyxJQUN4QnpCLE9BQU91QixLQUFLLEtBQUtDLEVBQUVnRyxnQkFBZ0IsSUFDbkN4SCxPQUFPdUIsS0FBSyxLQUFLQyxFQUFFaUcsSUFBSSxFQUFFO1lBQ3pCcEcsTUFBTXJCLFFBQVE7UUFDbEI7UUFDQXlELFVBQVV6RDtRQUNWQSxPQUFPVyxDQUFDLEdBQUc7UUFDWFgsT0FBT2lCLE1BQU0sR0FBRztRQUNoQnNCLEtBQUt2QyxRQUFRO1FBQ2JHLFVBQVVtRyxJQUFJLENBQUN0RyxRQUFRQSxPQUFPQyxNQUFNLEVBQUVELE9BQU9FLEdBQUc7UUFDaEQsT0FBT0Y7SUFDWDtJQUNBLFNBQVNvYSxXQUFXcGEsTUFBTSxFQUFFcWEsT0FBTztRQUMvQixJQUFJLE9BQU9yYSxXQUFXLFlBQVksQ0FBRUEsQ0FBQUEsa0JBQWtCRyxTQUFRLEdBQUk7WUFDOUQsTUFBTSxJQUFJZ2EsTUFBTTtRQUNwQjtRQUNBLElBQUluYSxPQUFPQyxNQUFNLEVBQUU7WUFDZm9CLE1BQU1yQixRQUFRcWE7UUFDbEI7SUFDSjtJQUNBLFNBQVNDLE9BQU90YSxNQUFNO1FBQ2xCLElBQUksQ0FBQ0EsT0FBT0MsTUFBTSxFQUNkRCxPQUFPdWEsT0FBTyxHQUFHdmEsT0FBT3VhLE9BQU8sQ0FBQ3ZhLE9BQU9lLFNBQVMsQ0FBQztRQUNyRCxJQUFJeVosU0FBU3hhLE9BQU9nQixJQUFJLENBQUNoQixPQUFPZ0IsSUFBSSxDQUFDdUMsTUFBTSxHQUFHLEVBQUUsSUFBSXZEO1FBQ3BELElBQUlvQixNQUFPcEIsT0FBT29CLEdBQUcsR0FBRztZQUFFcVosTUFBTXphLE9BQU91YSxPQUFPO1lBQUVHLFlBQVksQ0FBQztRQUFFO1FBQy9ELHVFQUF1RTtRQUN2RSxJQUFJMWEsT0FBT0UsR0FBRyxDQUFDOEIsS0FBSyxFQUFFO1lBQ2xCWixJQUFJYSxFQUFFLEdBQUd1WSxPQUFPdlksRUFBRTtRQUN0QjtRQUNBakMsT0FBTytCLFVBQVUsQ0FBQ3dCLE1BQU0sR0FBRztRQUMzQkcsU0FBUzFELFFBQVEsa0JBQWtCb0I7SUFDdkM7SUFDQSxTQUFTdVosTUFBTUYsSUFBSSxFQUFFRyxTQUFTO1FBQzFCLElBQUk5WCxJQUFJMlgsS0FBS3hVLE9BQU8sQ0FBQztRQUNyQixJQUFJNFUsV0FBVy9YLElBQUksSUFBSTtZQUFDO1lBQUkyWDtTQUFLLEdBQUdBLEtBQUtLLEtBQUssQ0FBQztRQUMvQyxJQUFJQyxTQUFTRixRQUFRLENBQUMsRUFBRTtRQUN4QixJQUFJRyxRQUFRSCxRQUFRLENBQUMsRUFBRTtRQUN2QiwyQkFBMkI7UUFDM0IsSUFBSUQsYUFBYUgsU0FBUyxTQUFTO1lBQy9CTSxTQUFTO1lBQ1RDLFFBQVE7UUFDWjtRQUNBLE9BQU87WUFBRUQsUUFBUUE7WUFBUUMsT0FBT0E7UUFBTTtJQUMxQztJQUNBLFNBQVNDLE9BQU9qYixNQUFNO1FBQ2xCLElBQUksQ0FBQ0EsT0FBT0MsTUFBTSxFQUFFO1lBQ2hCRCxPQUFPa2IsVUFBVSxHQUFHbGIsT0FBT2tiLFVBQVUsQ0FBQ2xiLE9BQU9lLFNBQVMsQ0FBQztRQUMzRDtRQUNBLElBQUlmLE9BQU8rQixVQUFVLENBQUNrRSxPQUFPLENBQUNqRyxPQUFPa2IsVUFBVSxNQUFNLENBQUMsS0FDbERsYixPQUFPb0IsR0FBRyxDQUFDc1osVUFBVSxDQUFDM1gsY0FBYyxDQUFDL0MsT0FBT2tiLFVBQVUsR0FBRztZQUN6RGxiLE9BQU9rYixVQUFVLEdBQUdsYixPQUFPbWIsV0FBVyxHQUFHO1lBQ3pDO1FBQ0o7UUFDQSxJQUFJbmIsT0FBT0UsR0FBRyxDQUFDOEIsS0FBSyxFQUFFO1lBQ2xCLElBQUlvWixLQUFLVCxNQUFNM2EsT0FBT2tiLFVBQVUsRUFBRTtZQUNsQyxJQUFJSCxTQUFTSyxHQUFHTCxNQUFNO1lBQ3RCLElBQUlDLFFBQVFJLEdBQUdKLEtBQUs7WUFDcEIsSUFBSUQsV0FBVyxTQUFTO2dCQUNwQiwyREFBMkQ7Z0JBQzNELElBQUlDLFVBQVUsU0FBU2hiLE9BQU9tYixXQUFXLEtBQUsxVSxlQUFlO29CQUN6RDJULFdBQVdwYSxRQUFRLGtDQUNmeUcsZ0JBQ0EsT0FDQSxhQUNBekcsT0FBT21iLFdBQVc7Z0JBQzFCLE9BQ0ssSUFBSUgsVUFBVSxXQUNmaGIsT0FBT21iLFdBQVcsS0FBS3pVLGlCQUFpQjtvQkFDeEMwVCxXQUFXcGEsUUFBUSxvQ0FDZjBHLGtCQUNBLE9BQ0EsYUFDQTFHLE9BQU9tYixXQUFXO2dCQUMxQixPQUNLO29CQUNELElBQUkvWixNQUFNcEIsT0FBT29CLEdBQUc7b0JBQ3BCLElBQUlvWixTQUFTeGEsT0FBT2dCLElBQUksQ0FBQ2hCLE9BQU9nQixJQUFJLENBQUN1QyxNQUFNLEdBQUcsRUFBRSxJQUFJdkQ7b0JBQ3BELElBQUlvQixJQUFJYSxFQUFFLEtBQUt1WSxPQUFPdlksRUFBRSxFQUFFO3dCQUN0QmIsSUFBSWEsRUFBRSxHQUFHTCxPQUFPQyxNQUFNLENBQUMyWSxPQUFPdlksRUFBRTtvQkFDcEM7b0JBQ0FiLElBQUlhLEVBQUUsQ0FBQytZLE1BQU0sR0FBR2hiLE9BQU9tYixXQUFXO2dCQUN0QztZQUNKO1lBQ0EsK0RBQStEO1lBQy9ELGdFQUFnRTtZQUNoRSxzREFBc0Q7WUFDdERuYixPQUFPK0IsVUFBVSxDQUFDaUIsSUFBSSxDQUFDO2dCQUFDaEQsT0FBT2tiLFVBQVU7Z0JBQUVsYixPQUFPbWIsV0FBVzthQUFDO1FBQ2xFLE9BQ0s7WUFDRCxzREFBc0Q7WUFDdERuYixPQUFPb0IsR0FBRyxDQUFDc1osVUFBVSxDQUFDMWEsT0FBT2tiLFVBQVUsQ0FBQyxHQUFHbGIsT0FBT21iLFdBQVc7WUFDN0R6WCxTQUFTMUQsUUFBUSxlQUFlO2dCQUM1QnlhLE1BQU16YSxPQUFPa2IsVUFBVTtnQkFDdkJ0VixPQUFPNUYsT0FBT21iLFdBQVc7WUFDN0I7UUFDSjtRQUNBbmIsT0FBT2tiLFVBQVUsR0FBR2xiLE9BQU9tYixXQUFXLEdBQUc7SUFDN0M7SUFDQSxTQUFTRSxRQUFRcmIsTUFBTSxFQUFFc2IsV0FBVztRQUNoQyxJQUFJdGIsT0FBT0UsR0FBRyxDQUFDOEIsS0FBSyxFQUFFO1lBQ2xCLGdDQUFnQztZQUNoQyxJQUFJWixNQUFNcEIsT0FBT29CLEdBQUc7WUFDcEIsNEJBQTRCO1lBQzVCLElBQUlnYSxLQUFLVCxNQUFNM2EsT0FBT3VhLE9BQU87WUFDN0JuWixJQUFJMlosTUFBTSxHQUFHSyxHQUFHTCxNQUFNO1lBQ3RCM1osSUFBSTRaLEtBQUssR0FBR0ksR0FBR0osS0FBSztZQUNwQjVaLElBQUltYSxHQUFHLEdBQUduYSxJQUFJYSxFQUFFLENBQUNtWixHQUFHTCxNQUFNLENBQUMsSUFBSTtZQUMvQixJQUFJM1osSUFBSTJaLE1BQU0sSUFBSSxDQUFDM1osSUFBSW1hLEdBQUcsRUFBRTtnQkFDeEJuQixXQUFXcGEsUUFBUSwrQkFBK0J3YixLQUFLQyxTQUFTLENBQUN6YixPQUFPdWEsT0FBTztnQkFDL0VuWixJQUFJbWEsR0FBRyxHQUFHSCxHQUFHTCxNQUFNO1lBQ3ZCO1lBQ0EsSUFBSVAsU0FBU3hhLE9BQU9nQixJQUFJLENBQUNoQixPQUFPZ0IsSUFBSSxDQUFDdUMsTUFBTSxHQUFHLEVBQUUsSUFBSXZEO1lBQ3BELElBQUlvQixJQUFJYSxFQUFFLElBQUl1WSxPQUFPdlksRUFBRSxLQUFLYixJQUFJYSxFQUFFLEVBQUU7Z0JBQ2hDTCxPQUFPZ0IsSUFBSSxDQUFDeEIsSUFBSWEsRUFBRSxFQUFFaUQsT0FBTyxDQUFDLFNBQVV3VyxDQUFDO29CQUNuQ2hZLFNBQVMxRCxRQUFRLG1CQUFtQjt3QkFDaEMrYSxRQUFRVzt3QkFDUkgsS0FBS25hLElBQUlhLEVBQUUsQ0FBQ3laLEVBQUU7b0JBQ2xCO2dCQUNKO1lBQ0o7WUFDQSxxQ0FBcUM7WUFDckMsK0NBQStDO1lBQy9DLG1EQUFtRDtZQUNuRCxJQUFLLElBQUk1WSxJQUFJLEdBQUdRLElBQUl0RCxPQUFPK0IsVUFBVSxDQUFDd0IsTUFBTSxFQUFFVCxJQUFJUSxHQUFHUixJQUFLO2dCQUN0RCxJQUFJNlksS0FBSzNiLE9BQU8rQixVQUFVLENBQUNlLEVBQUU7Z0JBQzdCLElBQUkyWCxPQUFPa0IsRUFBRSxDQUFDLEVBQUU7Z0JBQ2hCLElBQUkvVixRQUFRK1YsRUFBRSxDQUFDLEVBQUU7Z0JBQ2pCLElBQUlkLFdBQVdGLE1BQU1GLE1BQU07Z0JBQzNCLElBQUlNLFNBQVNGLFNBQVNFLE1BQU07Z0JBQzVCLElBQUlDLFFBQVFILFNBQVNHLEtBQUs7Z0JBQzFCLElBQUlPLE1BQU1SLFdBQVcsS0FBSyxLQUFLM1osSUFBSWEsRUFBRSxDQUFDOFksT0FBTyxJQUFJO2dCQUNqRCxJQUFJbFksSUFBSTtvQkFDSjRYLE1BQU1BO29CQUNON1UsT0FBT0E7b0JBQ1BtVixRQUFRQTtvQkFDUkMsT0FBT0E7b0JBQ1BPLEtBQUtBO2dCQUNUO2dCQUNBLHlEQUF5RDtnQkFDekQseUJBQXlCO2dCQUN6QixJQUFJUixVQUFVQSxXQUFXLFdBQVcsQ0FBQ1EsS0FBSztvQkFDdENuQixXQUFXcGEsUUFBUSwrQkFBK0J3YixLQUFLQyxTQUFTLENBQUNWO29CQUNqRWxZLEVBQUUwWSxHQUFHLEdBQUdSO2dCQUNaO2dCQUNBL2EsT0FBT29CLEdBQUcsQ0FBQ3NaLFVBQVUsQ0FBQ0QsS0FBSyxHQUFHNVg7Z0JBQzlCYSxTQUFTMUQsUUFBUSxlQUFlNkM7WUFDcEM7WUFDQTdDLE9BQU8rQixVQUFVLENBQUN3QixNQUFNLEdBQUc7UUFDL0I7UUFDQXZELE9BQU9vQixHQUFHLENBQUN3YSxhQUFhLEdBQUcsQ0FBQyxDQUFDTjtRQUM3QixrQkFBa0I7UUFDbEJ0YixPQUFPbUIsT0FBTyxHQUFHO1FBQ2pCbkIsT0FBT2dCLElBQUksQ0FBQ2dDLElBQUksQ0FBQ2hELE9BQU9vQixHQUFHO1FBQzNCc0MsU0FBUzFELFFBQVEsYUFBYUEsT0FBT29CLEdBQUc7UUFDeEMsSUFBSSxDQUFDa2EsYUFBYTtZQUNkLGdEQUFnRDtZQUNoRCxJQUFJLENBQUN0YixPQUFPc0IsUUFBUSxJQUFJdEIsT0FBT3VhLE9BQU8sQ0FBQ3NCLFdBQVcsT0FBTyxVQUFVO2dCQUMvRDdiLE9BQU91QixLQUFLLEdBQUdDLEVBQUUrSCxNQUFNO1lBQzNCLE9BQ0s7Z0JBQ0R2SixPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtZQUN6QjtZQUNBekgsT0FBT29CLEdBQUcsR0FBRztZQUNicEIsT0FBT3VhLE9BQU8sR0FBRztRQUNyQjtRQUNBdmEsT0FBT2tiLFVBQVUsR0FBR2xiLE9BQU9tYixXQUFXLEdBQUc7UUFDekNuYixPQUFPK0IsVUFBVSxDQUFDd0IsTUFBTSxHQUFHO0lBQy9CO0lBQ0EsU0FBU3VZLFNBQVM5YixNQUFNO1FBQ3BCLElBQUksQ0FBQ0EsT0FBT3VhLE9BQU8sRUFBRTtZQUNqQkgsV0FBV3BhLFFBQVE7WUFDbkJBLE9BQU82WixRQUFRLElBQUk7WUFDbkI3WixPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtZQUNyQjtRQUNKO1FBQ0EsSUFBSXpILE9BQU80RCxNQUFNLEVBQUU7WUFDZixJQUFJNUQsT0FBT3VhLE9BQU8sS0FBSyxVQUFVO2dCQUM3QnZhLE9BQU80RCxNQUFNLElBQUksT0FBTzVELE9BQU91YSxPQUFPLEdBQUc7Z0JBQ3pDdmEsT0FBT3VhLE9BQU8sR0FBRztnQkFDakJ2YSxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFK0gsTUFBTTtnQkFDdkI7WUFDSjtZQUNBN0YsU0FBUzFELFFBQVEsWUFBWUEsT0FBTzRELE1BQU07WUFDMUM1RCxPQUFPNEQsTUFBTSxHQUFHO1FBQ3BCO1FBQ0Esd0RBQXdEO1FBQ3hELHVEQUF1RDtRQUN2RCxJQUFJbVksSUFBSS9iLE9BQU9nQixJQUFJLENBQUN1QyxNQUFNO1FBQzFCLElBQUlnWCxVQUFVdmEsT0FBT3VhLE9BQU87UUFDNUIsSUFBSSxDQUFDdmEsT0FBT0MsTUFBTSxFQUFFO1lBQ2hCc2EsVUFBVUEsT0FBTyxDQUFDdmEsT0FBT2UsU0FBUyxDQUFDO1FBQ3ZDO1FBQ0EsSUFBSWliLFVBQVV6QjtRQUNkLE1BQU93QixJQUFLO1lBQ1IsSUFBSTdYLFFBQVFsRSxPQUFPZ0IsSUFBSSxDQUFDK2EsRUFBRTtZQUMxQixJQUFJN1gsTUFBTXVXLElBQUksS0FBS3VCLFNBQVM7Z0JBQ3hCLHFDQUFxQztnQkFDckM1QixXQUFXcGEsUUFBUTtZQUN2QixPQUNLO2dCQUNEO1lBQ0o7UUFDSjtRQUNBLGdFQUFnRTtRQUNoRSxJQUFJK2IsSUFBSSxHQUFHO1lBQ1AzQixXQUFXcGEsUUFBUSw0QkFBNEJBLE9BQU91YSxPQUFPO1lBQzdEdmEsT0FBTzZaLFFBQVEsSUFBSSxPQUFPN1osT0FBT3VhLE9BQU8sR0FBRztZQUMzQ3ZhLE9BQU91QixLQUFLLEdBQUdDLEVBQUVpRyxJQUFJO1lBQ3JCO1FBQ0o7UUFDQXpILE9BQU91YSxPQUFPLEdBQUdBO1FBQ2pCLElBQUlmLElBQUl4WixPQUFPZ0IsSUFBSSxDQUFDdUMsTUFBTTtRQUMxQixNQUFPaVcsTUFBTXVDLEVBQUc7WUFDWixJQUFJM2EsTUFBT3BCLE9BQU9vQixHQUFHLEdBQUdwQixPQUFPZ0IsSUFBSSxDQUFDaWIsR0FBRztZQUN2Q2pjLE9BQU91YSxPQUFPLEdBQUd2YSxPQUFPb0IsR0FBRyxDQUFDcVosSUFBSTtZQUNoQy9XLFNBQVMxRCxRQUFRLGNBQWNBLE9BQU91YSxPQUFPO1lBQzdDLElBQUkyQixJQUFJLENBQUM7WUFDVCxJQUFLLElBQUlwWixLQUFLMUIsSUFBSWEsRUFBRSxDQUFFO2dCQUNsQmlhLENBQUMsQ0FBQ3BaLEVBQUUsR0FBRzFCLElBQUlhLEVBQUUsQ0FBQ2EsRUFBRTtZQUNwQjtZQUNBLElBQUkwWCxTQUFTeGEsT0FBT2dCLElBQUksQ0FBQ2hCLE9BQU9nQixJQUFJLENBQUN1QyxNQUFNLEdBQUcsRUFBRSxJQUFJdkQ7WUFDcEQsSUFBSUEsT0FBT0UsR0FBRyxDQUFDOEIsS0FBSyxJQUFJWixJQUFJYSxFQUFFLEtBQUt1WSxPQUFPdlksRUFBRSxFQUFFO2dCQUMxQyw4Q0FBOEM7Z0JBQzlDTCxPQUFPZ0IsSUFBSSxDQUFDeEIsSUFBSWEsRUFBRSxFQUFFaUQsT0FBTyxDQUFDLFNBQVV3VyxDQUFDO29CQUNuQyxJQUFJUyxJQUFJL2EsSUFBSWEsRUFBRSxDQUFDeVosRUFBRTtvQkFDakJoWSxTQUFTMUQsUUFBUSxvQkFBb0I7d0JBQUUrYSxRQUFRVzt3QkFBR0gsS0FBS1k7b0JBQUU7Z0JBQzdEO1lBQ0o7UUFDSjtRQUNBLElBQUlKLE1BQU0sR0FDTi9iLE9BQU9rQixVQUFVLEdBQUc7UUFDeEJsQixPQUFPdWEsT0FBTyxHQUFHdmEsT0FBT21iLFdBQVcsR0FBR25iLE9BQU9rYixVQUFVLEdBQUc7UUFDMURsYixPQUFPK0IsVUFBVSxDQUFDd0IsTUFBTSxHQUFHO1FBQzNCdkQsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWlHLElBQUk7SUFDekI7SUFDQSxTQUFTMlUsWUFBWXBjLE1BQU07UUFDdkIsSUFBSXFjLFNBQVNyYyxPQUFPcWMsTUFBTTtRQUMxQixJQUFJQyxXQUFXRCxPQUFPUixXQUFXO1FBQ2pDLElBQUlVO1FBQ0osSUFBSUMsU0FBUztRQUNiLElBQUl4YyxPQUFPMkIsUUFBUSxDQUFDMGEsT0FBTyxFQUFFO1lBQ3pCLE9BQU9yYyxPQUFPMkIsUUFBUSxDQUFDMGEsT0FBTztRQUNsQztRQUNBLElBQUlyYyxPQUFPMkIsUUFBUSxDQUFDMmEsU0FBUyxFQUFFO1lBQzNCLE9BQU90YyxPQUFPMkIsUUFBUSxDQUFDMmEsU0FBUztRQUNwQztRQUNBRCxTQUFTQztRQUNULElBQUlELE9BQU9JLE1BQU0sQ0FBQyxPQUFPLEtBQUs7WUFDMUIsSUFBSUosT0FBT0ksTUFBTSxDQUFDLE9BQU8sS0FBSztnQkFDMUJKLFNBQVNBLE9BQU9LLEtBQUssQ0FBQztnQkFDdEJILE1BQU1JLFNBQVNOLFFBQVE7Z0JBQ3ZCRyxTQUFTRCxJQUFJelcsUUFBUSxDQUFDO1lBQzFCLE9BQ0s7Z0JBQ0R1VyxTQUFTQSxPQUFPSyxLQUFLLENBQUM7Z0JBQ3RCSCxNQUFNSSxTQUFTTixRQUFRO2dCQUN2QkcsU0FBU0QsSUFBSXpXLFFBQVEsQ0FBQztZQUMxQjtRQUNKO1FBQ0F1VyxTQUFTQSxPQUFPbkMsT0FBTyxDQUFDLE9BQU87UUFDL0IsSUFBSTBDLE1BQU1MLFFBQVFDLE9BQU9YLFdBQVcsT0FBT1EsUUFBUTtZQUMvQ2pDLFdBQVdwYSxRQUFRO1lBQ25CLE9BQU8sTUFBTUEsT0FBT3FjLE1BQU0sR0FBRztRQUNqQztRQUNBLE9BQU81QyxPQUFPb0QsYUFBYSxDQUFDTjtJQUNoQztJQUNBLFNBQVNPLGdCQUFnQjljLE1BQU0sRUFBRVcsQ0FBQztRQUM5QixJQUFJQSxNQUFNLEtBQUs7WUFDWFgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRW1HLFNBQVM7WUFDMUIzSCxPQUFPK2MsZ0JBQWdCLEdBQUcvYyxPQUFPb0MsUUFBUTtRQUM3QyxPQUNLLElBQUksQ0FBQzRFLGFBQWFyRyxJQUFJO1lBQ3ZCLHVDQUF1QztZQUN2QyxzQkFBc0I7WUFDdEJ5WixXQUFXcGEsUUFBUTtZQUNuQkEsT0FBTzZaLFFBQVEsR0FBR2xaO1lBQ2xCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtRQUN6QjtJQUNKO0lBQ0EsU0FBU2dWLE9BQU8xVyxLQUFLLEVBQUVqRCxDQUFDO1FBQ3BCLElBQUlrYSxTQUFTO1FBQ2IsSUFBSWxhLElBQUlpRCxNQUFNeEMsTUFBTSxFQUFFO1lBQ2xCeVosU0FBU2pYLE1BQU0wVyxNQUFNLENBQUMzWjtRQUMxQjtRQUNBLE9BQU9rYTtJQUNYO0lBQ0EsU0FBU2haLE1BQU0rQixLQUFLO1FBQ2hCLElBQUkvRixTQUFTLElBQUk7UUFDakIsSUFBSSxJQUFJLENBQUNxQixLQUFLLEVBQUU7WUFDWixNQUFNLElBQUksQ0FBQ0EsS0FBSztRQUNwQjtRQUNBLElBQUlyQixPQUFPaUIsTUFBTSxFQUFFO1lBQ2YsT0FBT0ksTUFBTXJCLFFBQVE7UUFDekI7UUFDQSxJQUFJK0YsVUFBVSxNQUFNO1lBQ2hCLE9BQU9oQyxJQUFJL0Q7UUFDZjtRQUNBLElBQUksT0FBTytGLFVBQVUsVUFBVTtZQUMzQkEsUUFBUUEsTUFBTUQsUUFBUTtRQUMxQjtRQUNBLElBQUloRCxJQUFJO1FBQ1IsSUFBSW5DLElBQUk7UUFDUixNQUFPLEtBQU07WUFDVEEsSUFBSThiLE9BQU8xVyxPQUFPakQ7WUFDbEI5QyxPQUFPVyxDQUFDLEdBQUdBO1lBQ1gsSUFBSSxDQUFDQSxHQUFHO2dCQUNKO1lBQ0o7WUFDQSxJQUFJWCxPQUFPbUMsYUFBYSxFQUFFO2dCQUN0Qm5DLE9BQU9vQyxRQUFRO2dCQUNmLElBQUl6QixNQUFNLE1BQU07b0JBQ1pYLE9BQU9xQyxJQUFJO29CQUNYckMsT0FBT3NDLE1BQU0sR0FBRztnQkFDcEIsT0FDSztvQkFDRHRDLE9BQU9zQyxNQUFNO2dCQUNqQjtZQUNKO1lBQ0EsT0FBUXRDLE9BQU91QixLQUFLO2dCQUNoQixLQUFLQyxFQUFFQyxLQUFLO29CQUNSekIsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWdHLGdCQUFnQjtvQkFDakMsSUFBSTdHLE1BQU0sVUFBVTt3QkFDaEI7b0JBQ0o7b0JBQ0FtYyxnQkFBZ0I5YyxRQUFRVztvQkFDeEI7Z0JBQ0osS0FBS2EsRUFBRWdHLGdCQUFnQjtvQkFDbkJzVixnQkFBZ0I5YyxRQUFRVztvQkFDeEI7Z0JBQ0osS0FBS2EsRUFBRWlHLElBQUk7b0JBQ1AsSUFBSXpILE9BQU9tQixPQUFPLElBQUksQ0FBQ25CLE9BQU9rQixVQUFVLEVBQUU7d0JBQ3RDLElBQUkrYixTQUFTbmEsSUFBSTt3QkFDakIsTUFBT25DLEtBQUtBLE1BQU0sT0FBT0EsTUFBTSxJQUFLOzRCQUNoQ0EsSUFBSThiLE9BQU8xVyxPQUFPakQ7NEJBQ2xCLElBQUluQyxLQUFLWCxPQUFPbUMsYUFBYSxFQUFFO2dDQUMzQm5DLE9BQU9vQyxRQUFRO2dDQUNmLElBQUl6QixNQUFNLE1BQU07b0NBQ1pYLE9BQU9xQyxJQUFJO29DQUNYckMsT0FBT3NDLE1BQU0sR0FBRztnQ0FDcEIsT0FDSztvQ0FDRHRDLE9BQU9zQyxNQUFNO2dDQUNqQjs0QkFDSjt3QkFDSjt3QkFDQXRDLE9BQU82WixRQUFRLElBQUk5VCxNQUFNbVgsU0FBUyxDQUFDRCxRQUFRbmEsSUFBSTtvQkFDbkQ7b0JBQ0EsSUFBSW5DLE1BQU0sT0FDTixDQUFFWCxDQUFBQSxPQUFPbUIsT0FBTyxJQUFJbkIsT0FBT2tCLFVBQVUsSUFBSSxDQUFDbEIsT0FBT0MsTUFBTSxHQUFHO3dCQUMxREQsT0FBT3VCLEtBQUssR0FBR0MsRUFBRW1HLFNBQVM7d0JBQzFCM0gsT0FBTytjLGdCQUFnQixHQUFHL2MsT0FBT29DLFFBQVE7b0JBQzdDLE9BQ0s7d0JBQ0QsSUFBSSxDQUFDNEUsYUFBYXJHLE1BQU8sRUFBQ1gsT0FBT21CLE9BQU8sSUFBSW5CLE9BQU9rQixVQUFVLEdBQUc7NEJBQzVEa1osV0FBV3BhLFFBQVE7d0JBQ3ZCO3dCQUNBLElBQUlXLE1BQU0sS0FBSzs0QkFDWFgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWtHLFdBQVc7d0JBQ2hDLE9BQ0s7NEJBQ0QxSCxPQUFPNlosUUFBUSxJQUFJbFo7d0JBQ3ZCO29CQUNKO29CQUNBO2dCQUNKLEtBQUthLEVBQUUrSCxNQUFNO29CQUNULGtCQUFrQjtvQkFDbEIsSUFBSTVJLE1BQU0sS0FBSzt3QkFDWFgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWdJLGFBQWE7b0JBQ2xDLE9BQ0s7d0JBQ0R4SixPQUFPNEQsTUFBTSxJQUFJakQ7b0JBQ3JCO29CQUNBO2dCQUNKLEtBQUthLEVBQUVnSSxhQUFhO29CQUNoQixJQUFJN0ksTUFBTSxLQUFLO3dCQUNYWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFNkgsU0FBUztvQkFDOUIsT0FDSzt3QkFDRHJKLE9BQU80RCxNQUFNLElBQUksTUFBTWpEO3dCQUN2QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRStILE1BQU07b0JBQzNCO29CQUNBO2dCQUNKLEtBQUsvSCxFQUFFbUcsU0FBUztvQkFDWiw0Q0FBNEM7b0JBQzVDLElBQUloSCxNQUFNLEtBQUs7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVvRyxTQUFTO3dCQUMxQjVILE9BQU9tZCxRQUFRLEdBQUc7b0JBQ3RCLE9BQ0ssSUFBSW5XLGFBQWFyRyxJQUFJO29CQUN0QixpQkFBaUI7b0JBQ3JCLE9BQ0ssSUFBSXdHLFFBQVFQLFdBQVdqRyxJQUFJO3dCQUM1QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWtILFFBQVE7d0JBQ3pCMUksT0FBT3VhLE9BQU8sR0FBRzVaO29CQUNyQixPQUNLLElBQUlBLE1BQU0sS0FBSzt3QkFDaEJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUU2SCxTQUFTO3dCQUMxQnJKLE9BQU91YSxPQUFPLEdBQUc7b0JBQ3JCLE9BQ0ssSUFBSTVaLE1BQU0sS0FBSzt3QkFDaEJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUUrRyxTQUFTO3dCQUMxQnZJLE9BQU9vZCxZQUFZLEdBQUdwZCxPQUFPcWQsWUFBWSxHQUFHO29CQUNoRCxPQUNLO3dCQUNEakQsV0FBV3BhLFFBQVE7d0JBQ25CLGtEQUFrRDt3QkFDbEQsSUFBSUEsT0FBTytjLGdCQUFnQixHQUFHLElBQUkvYyxPQUFPb0MsUUFBUSxFQUFFOzRCQUMvQyxJQUFJa2IsTUFBTXRkLE9BQU9vQyxRQUFRLEdBQUdwQyxPQUFPK2MsZ0JBQWdCOzRCQUNuRHBjLElBQUksSUFBSXlGLE1BQU1rWCxLQUFLQyxJQUFJLENBQUMsT0FBTzVjO3dCQUNuQzt3QkFDQVgsT0FBTzZaLFFBQVEsSUFBSSxNQUFNbFo7d0JBQ3pCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtvQkFDekI7b0JBQ0E7Z0JBQ0osS0FBS2pHLEVBQUVvRyxTQUFTO29CQUNaLElBQUksQ0FBQzVILE9BQU9tZCxRQUFRLEdBQUd4YyxDQUFBQSxFQUFHNmMsV0FBVyxPQUFPalgsT0FBTzt3QkFDL0M3QyxTQUFTMUQsUUFBUTt3QkFDakJBLE9BQU91QixLQUFLLEdBQUdDLEVBQUUrRSxLQUFLO3dCQUN0QnZHLE9BQU9tZCxRQUFRLEdBQUc7d0JBQ2xCbmQsT0FBTzJELEtBQUssR0FBRztvQkFDbkIsT0FDSyxJQUFJM0QsT0FBT21kLFFBQVEsR0FBR3hjLE1BQU0sTUFBTTt3QkFDbkNYLE9BQU91QixLQUFLLEdBQUdDLEVBQUUwRyxPQUFPO3dCQUN4QmxJLE9BQU95ZCxPQUFPLEdBQUc7d0JBQ2pCemQsT0FBT21kLFFBQVEsR0FBRztvQkFDdEIsT0FDSyxJQUFJLENBQUNuZCxPQUFPbWQsUUFBUSxHQUFHeGMsQ0FBQUEsRUFBRzZjLFdBQVcsT0FBT2hYLFNBQVM7d0JBQ3REeEcsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWdGLE9BQU87d0JBQ3hCLElBQUl4RyxPQUFPMGQsT0FBTyxJQUFJMWQsT0FBT21CLE9BQU8sRUFBRTs0QkFDbENpWixXQUFXcGEsUUFBUTt3QkFDdkI7d0JBQ0FBLE9BQU8wZCxPQUFPLEdBQUc7d0JBQ2pCMWQsT0FBT21kLFFBQVEsR0FBRztvQkFDdEIsT0FDSyxJQUFJeGMsTUFBTSxLQUFLO3dCQUNoQitDLFNBQVMxRCxRQUFRLHFCQUFxQkEsT0FBT21kLFFBQVE7d0JBQ3JEbmQsT0FBT21kLFFBQVEsR0FBRzt3QkFDbEJuZCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtvQkFDekIsT0FDSyxJQUFJUixRQUFRdEcsSUFBSTt3QkFDakJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVxRyxnQkFBZ0I7d0JBQ2pDN0gsT0FBT21kLFFBQVEsSUFBSXhjO29CQUN2QixPQUNLO3dCQUNEWCxPQUFPbWQsUUFBUSxJQUFJeGM7b0JBQ3ZCO29CQUNBO2dCQUNKLEtBQUthLEVBQUVxRyxnQkFBZ0I7b0JBQ25CLElBQUlsSCxNQUFNWCxPQUFPVSxDQUFDLEVBQUU7d0JBQ2hCVixPQUFPdUIsS0FBSyxHQUFHQyxFQUFFb0csU0FBUzt3QkFDMUI1SCxPQUFPVSxDQUFDLEdBQUc7b0JBQ2Y7b0JBQ0FWLE9BQU9tZCxRQUFRLElBQUl4YztvQkFDbkI7Z0JBQ0osS0FBS2EsRUFBRWdGLE9BQU87b0JBQ1YsSUFBSTdGLE1BQU0sS0FBSzt3QkFDWFgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWlHLElBQUk7d0JBQ3JCL0QsU0FBUzFELFFBQVEsYUFBYUEsT0FBTzBkLE9BQU87d0JBQzVDMWQsT0FBTzBkLE9BQU8sR0FBRyxNQUFNLGdDQUFnQztvQkFDM0QsT0FDSzt3QkFDRDFkLE9BQU8wZCxPQUFPLElBQUkvYzt3QkFDbEIsSUFBSUEsTUFBTSxLQUFLOzRCQUNYWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFdUcsV0FBVzt3QkFDaEMsT0FDSyxJQUFJZCxRQUFRdEcsSUFBSTs0QkFDakJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVzRyxjQUFjOzRCQUMvQjlILE9BQU9VLENBQUMsR0FBR0M7d0JBQ2Y7b0JBQ0o7b0JBQ0E7Z0JBQ0osS0FBS2EsRUFBRXNHLGNBQWM7b0JBQ2pCOUgsT0FBTzBkLE9BQU8sSUFBSS9jO29CQUNsQixJQUFJQSxNQUFNWCxPQUFPVSxDQUFDLEVBQUU7d0JBQ2hCVixPQUFPVSxDQUFDLEdBQUc7d0JBQ1hWLE9BQU91QixLQUFLLEdBQUdDLEVBQUVnRixPQUFPO29CQUM1QjtvQkFDQTtnQkFDSixLQUFLaEYsRUFBRXVHLFdBQVc7b0JBQ2QvSCxPQUFPMGQsT0FBTyxJQUFJL2M7b0JBQ2xCLElBQUlBLE1BQU0sS0FBSzt3QkFDWFgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWdGLE9BQU87b0JBQzVCLE9BQ0ssSUFBSVMsUUFBUXRHLElBQUk7d0JBQ2pCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFd0csa0JBQWtCO3dCQUNuQ2hJLE9BQU9VLENBQUMsR0FBR0M7b0JBQ2Y7b0JBQ0E7Z0JBQ0osS0FBS2EsRUFBRXdHLGtCQUFrQjtvQkFDckJoSSxPQUFPMGQsT0FBTyxJQUFJL2M7b0JBQ2xCLElBQUlBLE1BQU1YLE9BQU9VLENBQUMsRUFBRTt3QkFDaEJWLE9BQU91QixLQUFLLEdBQUdDLEVBQUV1RyxXQUFXO3dCQUM1Qi9ILE9BQU9VLENBQUMsR0FBRztvQkFDZjtvQkFDQTtnQkFDSixLQUFLYyxFQUFFMEcsT0FBTztvQkFDVixJQUFJdkgsTUFBTSxLQUFLO3dCQUNYWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFMkcsY0FBYztvQkFDbkMsT0FDSzt3QkFDRG5JLE9BQU95ZCxPQUFPLElBQUk5YztvQkFDdEI7b0JBQ0E7Z0JBQ0osS0FBS2EsRUFBRTJHLGNBQWM7b0JBQ2pCLElBQUl4SCxNQUFNLEtBQUs7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUU0RyxhQUFhO3dCQUM5QnBJLE9BQU95ZCxPQUFPLEdBQUczRCxTQUFTOVosT0FBT0UsR0FBRyxFQUFFRixPQUFPeWQsT0FBTzt3QkFDcEQsSUFBSXpkLE9BQU95ZCxPQUFPLEVBQUU7NEJBQ2hCL1osU0FBUzFELFFBQVEsYUFBYUEsT0FBT3lkLE9BQU87d0JBQ2hEO3dCQUNBemQsT0FBT3lkLE9BQU8sR0FBRztvQkFDckIsT0FDSzt3QkFDRHpkLE9BQU95ZCxPQUFPLElBQUksTUFBTTljO3dCQUN4QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRTBHLE9BQU87b0JBQzVCO29CQUNBO2dCQUNKLEtBQUsxRyxFQUFFNEcsYUFBYTtvQkFDaEIsSUFBSXpILE1BQU0sS0FBSzt3QkFDWHlaLFdBQVdwYSxRQUFRO3dCQUNuQixrREFBa0Q7d0JBQ2xELHlDQUF5Qzt3QkFDekNBLE9BQU95ZCxPQUFPLElBQUksT0FBTzljO3dCQUN6QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRTBHLE9BQU87b0JBQzVCLE9BQ0s7d0JBQ0RsSSxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFaUcsSUFBSTtvQkFDekI7b0JBQ0E7Z0JBQ0osS0FBS2pHLEVBQUUrRSxLQUFLO29CQUNSLElBQUk1RixNQUFNLEtBQUs7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUU2RyxZQUFZO29CQUNqQyxPQUNLO3dCQUNEckksT0FBTzJELEtBQUssSUFBSWhEO29CQUNwQjtvQkFDQTtnQkFDSixLQUFLYSxFQUFFNkcsWUFBWTtvQkFDZixJQUFJMUgsTUFBTSxLQUFLO3dCQUNYWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFOEcsY0FBYztvQkFDbkMsT0FDSzt3QkFDRHRJLE9BQU8yRCxLQUFLLElBQUksTUFBTWhEO3dCQUN0QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRStFLEtBQUs7b0JBQzFCO29CQUNBO2dCQUNKLEtBQUsvRSxFQUFFOEcsY0FBYztvQkFDakIsSUFBSTNILE1BQU0sS0FBSzt3QkFDWCxJQUFJWCxPQUFPMkQsS0FBSyxFQUFFOzRCQUNkRCxTQUFTMUQsUUFBUSxXQUFXQSxPQUFPMkQsS0FBSzt3QkFDNUM7d0JBQ0FELFNBQVMxRCxRQUFRO3dCQUNqQkEsT0FBTzJELEtBQUssR0FBRzt3QkFDZjNELE9BQU91QixLQUFLLEdBQUdDLEVBQUVpRyxJQUFJO29CQUN6QixPQUNLLElBQUk5RyxNQUFNLEtBQUs7d0JBQ2hCWCxPQUFPMkQsS0FBSyxJQUFJO29CQUNwQixPQUNLO3dCQUNEM0QsT0FBTzJELEtBQUssSUFBSSxPQUFPaEQ7d0JBQ3ZCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFK0UsS0FBSztvQkFDMUI7b0JBQ0E7Z0JBQ0osS0FBSy9FLEVBQUUrRyxTQUFTO29CQUNaLElBQUk1SCxNQUFNLEtBQUs7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVpSCxnQkFBZ0I7b0JBQ3JDLE9BQ0ssSUFBSXpCLGFBQWFyRyxJQUFJO3dCQUN0QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWdILGNBQWM7b0JBQ25DLE9BQ0s7d0JBQ0R4SSxPQUFPb2QsWUFBWSxJQUFJemM7b0JBQzNCO29CQUNBO2dCQUNKLEtBQUthLEVBQUVnSCxjQUFjO29CQUNqQixJQUFJLENBQUN4SSxPQUFPcWQsWUFBWSxJQUFJclcsYUFBYXJHLElBQUk7d0JBQ3pDO29CQUNKLE9BQ0ssSUFBSUEsTUFBTSxLQUFLO3dCQUNoQlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWlILGdCQUFnQjtvQkFDckMsT0FDSzt3QkFDRHpJLE9BQU9xZCxZQUFZLElBQUkxYztvQkFDM0I7b0JBQ0E7Z0JBQ0osS0FBS2EsRUFBRWlILGdCQUFnQjtvQkFDbkIsSUFBSTlILE1BQU0sS0FBSzt3QkFDWCtDLFNBQVMxRCxRQUFRLDJCQUEyQjs0QkFDeEN5YSxNQUFNemEsT0FBT29kLFlBQVk7NEJBQ3pCTyxNQUFNM2QsT0FBT3FkLFlBQVk7d0JBQzdCO3dCQUNBcmQsT0FBT29kLFlBQVksR0FBR3BkLE9BQU9xZCxZQUFZLEdBQUc7d0JBQzVDcmQsT0FBT3VCLEtBQUssR0FBR0MsRUFBRWlHLElBQUk7b0JBQ3pCLE9BQ0s7d0JBQ0R6SCxPQUFPcWQsWUFBWSxJQUFJLE1BQU0xYzt3QkFDN0JYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVnSCxjQUFjO29CQUNuQztvQkFDQTtnQkFDSixLQUFLaEgsRUFBRWtILFFBQVE7b0JBQ1gsSUFBSXZCLFFBQVFOLFVBQVVsRyxJQUFJO3dCQUN0QlgsT0FBT3VhLE9BQU8sSUFBSTVaO29CQUN0QixPQUNLO3dCQUNEMlosT0FBT3RhO3dCQUNQLElBQUlXLE1BQU0sS0FBSzs0QkFDWDBhLFFBQVFyYjt3QkFDWixPQUNLLElBQUlXLE1BQU0sS0FBSzs0QkFDaEJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVtSCxjQUFjO3dCQUNuQyxPQUNLOzRCQUNELElBQUksQ0FBQzNCLGFBQWFyRyxJQUFJO2dDQUNsQnlaLFdBQVdwYSxRQUFROzRCQUN2Qjs0QkFDQUEsT0FBT3VCLEtBQUssR0FBR0MsRUFBRW9ILE1BQU07d0JBQzNCO29CQUNKO29CQUNBO2dCQUNKLEtBQUtwSCxFQUFFbUgsY0FBYztvQkFDakIsSUFBSWhJLE1BQU0sS0FBSzt3QkFDWDBhLFFBQVFyYixRQUFRO3dCQUNoQjhiLFNBQVM5YjtvQkFDYixPQUNLO3dCQUNEb2EsV0FBV3BhLFFBQVE7d0JBQ25CQSxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFb0gsTUFBTTtvQkFDM0I7b0JBQ0E7Z0JBQ0osS0FBS3BILEVBQUVvSCxNQUFNO29CQUNULHVDQUF1QztvQkFDdkMsSUFBSTVCLGFBQWFyRyxJQUFJO3dCQUNqQjtvQkFDSixPQUNLLElBQUlBLE1BQU0sS0FBSzt3QkFDaEIwYSxRQUFRcmI7b0JBQ1osT0FDSyxJQUFJVyxNQUFNLEtBQUs7d0JBQ2hCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFbUgsY0FBYztvQkFDbkMsT0FDSyxJQUFJeEIsUUFBUVAsV0FBV2pHLElBQUk7d0JBQzVCWCxPQUFPa2IsVUFBVSxHQUFHdmE7d0JBQ3BCWCxPQUFPbWIsV0FBVyxHQUFHO3dCQUNyQm5iLE9BQU91QixLQUFLLEdBQUdDLEVBQUVxSCxXQUFXO29CQUNoQyxPQUNLO3dCQUNEdVIsV0FBV3BhLFFBQVE7b0JBQ3ZCO29CQUNBO2dCQUNKLEtBQUt3QixFQUFFcUgsV0FBVztvQkFDZCxJQUFJbEksTUFBTSxLQUFLO3dCQUNYWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFdUgsWUFBWTtvQkFDakMsT0FDSyxJQUFJcEksTUFBTSxLQUFLO3dCQUNoQnlaLFdBQVdwYSxRQUFRO3dCQUNuQkEsT0FBT21iLFdBQVcsR0FBR25iLE9BQU9rYixVQUFVO3dCQUN0Q0QsT0FBT2piO3dCQUNQcWIsUUFBUXJiO29CQUNaLE9BQ0ssSUFBSWdILGFBQWFyRyxJQUFJO3dCQUN0QlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRXNILHFCQUFxQjtvQkFDMUMsT0FDSyxJQUFJM0IsUUFBUU4sVUFBVWxHLElBQUk7d0JBQzNCWCxPQUFPa2IsVUFBVSxJQUFJdmE7b0JBQ3pCLE9BQ0s7d0JBQ0R5WixXQUFXcGEsUUFBUTtvQkFDdkI7b0JBQ0E7Z0JBQ0osS0FBS3dCLEVBQUVzSCxxQkFBcUI7b0JBQ3hCLElBQUluSSxNQUFNLEtBQUs7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUV1SCxZQUFZO29CQUNqQyxPQUNLLElBQUkvQixhQUFhckcsSUFBSTt3QkFDdEI7b0JBQ0osT0FDSzt3QkFDRHlaLFdBQVdwYSxRQUFRO3dCQUNuQkEsT0FBT29CLEdBQUcsQ0FBQ3NaLFVBQVUsQ0FBQzFhLE9BQU9rYixVQUFVLENBQUMsR0FBRzt3QkFDM0NsYixPQUFPbWIsV0FBVyxHQUFHO3dCQUNyQnpYLFNBQVMxRCxRQUFRLGVBQWU7NEJBQzVCeWEsTUFBTXphLE9BQU9rYixVQUFVOzRCQUN2QnRWLE9BQU87d0JBQ1g7d0JBQ0E1RixPQUFPa2IsVUFBVSxHQUFHO3dCQUNwQixJQUFJdmEsTUFBTSxLQUFLOzRCQUNYMGEsUUFBUXJiO3dCQUNaLE9BQ0ssSUFBSW1ILFFBQVFQLFdBQVdqRyxJQUFJOzRCQUM1QlgsT0FBT2tiLFVBQVUsR0FBR3ZhOzRCQUNwQlgsT0FBT3VCLEtBQUssR0FBR0MsRUFBRXFILFdBQVc7d0JBQ2hDLE9BQ0s7NEJBQ0R1UixXQUFXcGEsUUFBUTs0QkFDbkJBLE9BQU91QixLQUFLLEdBQUdDLEVBQUVvSCxNQUFNO3dCQUMzQjtvQkFDSjtvQkFDQTtnQkFDSixLQUFLcEgsRUFBRXVILFlBQVk7b0JBQ2YsSUFBSS9CLGFBQWFyRyxJQUFJO3dCQUNqQjtvQkFDSixPQUNLLElBQUlzRyxRQUFRdEcsSUFBSTt3QkFDakJYLE9BQU9VLENBQUMsR0FBR0M7d0JBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUV3SCxtQkFBbUI7b0JBQ3hDLE9BQ0s7d0JBQ0RvUixXQUFXcGEsUUFBUTt3QkFDbkJBLE9BQU91QixLQUFLLEdBQUdDLEVBQUUwSCxxQkFBcUI7d0JBQ3RDbEosT0FBT21iLFdBQVcsR0FBR3hhO29CQUN6QjtvQkFDQTtnQkFDSixLQUFLYSxFQUFFd0gsbUJBQW1CO29CQUN0QixJQUFJckksTUFBTVgsT0FBT1UsQ0FBQyxFQUFFO3dCQUNoQixJQUFJQyxNQUFNLEtBQUs7NEJBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUUySCxxQkFBcUI7d0JBQzFDLE9BQ0s7NEJBQ0RuSixPQUFPbWIsV0FBVyxJQUFJeGE7d0JBQzFCO3dCQUNBO29CQUNKO29CQUNBc2EsT0FBT2piO29CQUNQQSxPQUFPVSxDQUFDLEdBQUc7b0JBQ1hWLE9BQU91QixLQUFLLEdBQUdDLEVBQUV5SCxtQkFBbUI7b0JBQ3BDO2dCQUNKLEtBQUt6SCxFQUFFeUgsbUJBQW1CO29CQUN0QixJQUFJakMsYUFBYXJHLElBQUk7d0JBQ2pCWCxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFb0gsTUFBTTtvQkFDM0IsT0FDSyxJQUFJakksTUFBTSxLQUFLO3dCQUNoQjBhLFFBQVFyYjtvQkFDWixPQUNLLElBQUlXLE1BQU0sS0FBSzt3QkFDaEJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUVtSCxjQUFjO29CQUNuQyxPQUNLLElBQUl4QixRQUFRUCxXQUFXakcsSUFBSTt3QkFDNUJ5WixXQUFXcGEsUUFBUTt3QkFDbkJBLE9BQU9rYixVQUFVLEdBQUd2YTt3QkFDcEJYLE9BQU9tYixXQUFXLEdBQUc7d0JBQ3JCbmIsT0FBT3VCLEtBQUssR0FBR0MsRUFBRXFILFdBQVc7b0JBQ2hDLE9BQ0s7d0JBQ0R1UixXQUFXcGEsUUFBUTtvQkFDdkI7b0JBQ0E7Z0JBQ0osS0FBS3dCLEVBQUUwSCxxQkFBcUI7b0JBQ3hCLElBQUksQ0FBQ2hDLFlBQVl2RyxJQUFJO3dCQUNqQixJQUFJQSxNQUFNLEtBQUs7NEJBQ1hYLE9BQU91QixLQUFLLEdBQUdDLEVBQUU0SCxxQkFBcUI7d0JBQzFDLE9BQ0s7NEJBQ0RwSixPQUFPbWIsV0FBVyxJQUFJeGE7d0JBQzFCO3dCQUNBO29CQUNKO29CQUNBc2EsT0FBT2piO29CQUNQLElBQUlXLE1BQU0sS0FBSzt3QkFDWDBhLFFBQVFyYjtvQkFDWixPQUNLO3dCQUNEQSxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFb0gsTUFBTTtvQkFDM0I7b0JBQ0E7Z0JBQ0osS0FBS3BILEVBQUU2SCxTQUFTO29CQUNaLElBQUksQ0FBQ3JKLE9BQU91YSxPQUFPLEVBQUU7d0JBQ2pCLElBQUl2VCxhQUFhckcsSUFBSTs0QkFDakI7d0JBQ0osT0FDSyxJQUFJMkcsU0FBU1YsV0FBV2pHLElBQUk7NEJBQzdCLElBQUlYLE9BQU80RCxNQUFNLEVBQUU7Z0NBQ2Y1RCxPQUFPNEQsTUFBTSxJQUFJLE9BQU9qRDtnQ0FDeEJYLE9BQU91QixLQUFLLEdBQUdDLEVBQUUrSCxNQUFNOzRCQUMzQixPQUNLO2dDQUNENlEsV0FBV3BhLFFBQVE7NEJBQ3ZCO3dCQUNKLE9BQ0s7NEJBQ0RBLE9BQU91YSxPQUFPLEdBQUc1Wjt3QkFDckI7b0JBQ0osT0FDSyxJQUFJQSxNQUFNLEtBQUs7d0JBQ2hCbWIsU0FBUzliO29CQUNiLE9BQ0ssSUFBSW1ILFFBQVFOLFVBQVVsRyxJQUFJO3dCQUMzQlgsT0FBT3VhLE9BQU8sSUFBSTVaO29CQUN0QixPQUNLLElBQUlYLE9BQU80RCxNQUFNLEVBQUU7d0JBQ3BCNUQsT0FBTzRELE1BQU0sSUFBSSxPQUFPNUQsT0FBT3VhLE9BQU87d0JBQ3RDdmEsT0FBT3VhLE9BQU8sR0FBRzt3QkFDakJ2YSxPQUFPdUIsS0FBSyxHQUFHQyxFQUFFK0gsTUFBTTtvQkFDM0IsT0FDSzt3QkFDRCxJQUFJLENBQUN2QyxhQUFhckcsSUFBSTs0QkFDbEJ5WixXQUFXcGEsUUFBUTt3QkFDdkI7d0JBQ0FBLE9BQU91QixLQUFLLEdBQUdDLEVBQUU4SCxtQkFBbUI7b0JBQ3hDO29CQUNBO2dCQUNKLEtBQUs5SCxFQUFFOEgsbUJBQW1CO29CQUN0QixJQUFJdEMsYUFBYXJHLElBQUk7d0JBQ2pCO29CQUNKO29CQUNBLElBQUlBLE1BQU0sS0FBSzt3QkFDWG1iLFNBQVM5YjtvQkFDYixPQUNLO3dCQUNEb2EsV0FBV3BhLFFBQVE7b0JBQ3ZCO29CQUNBO2dCQUNKLEtBQUt3QixFQUFFa0csV0FBVztnQkFDbEIsS0FBS2xHLEVBQUUySCxxQkFBcUI7Z0JBQzVCLEtBQUszSCxFQUFFNEgscUJBQXFCO29CQUN4QixJQUFJd1U7b0JBQ0osSUFBSUM7b0JBQ0osT0FBUTdkLE9BQU91QixLQUFLO3dCQUNoQixLQUFLQyxFQUFFa0csV0FBVzs0QkFDZGtXLGNBQWNwYyxFQUFFaUcsSUFBSTs0QkFDcEJvVyxTQUFTOzRCQUNUO3dCQUNKLEtBQUtyYyxFQUFFMkgscUJBQXFCOzRCQUN4QnlVLGNBQWNwYyxFQUFFd0gsbUJBQW1COzRCQUNuQzZVLFNBQVM7NEJBQ1Q7d0JBQ0osS0FBS3JjLEVBQUU0SCxxQkFBcUI7NEJBQ3hCd1UsY0FBY3BjLEVBQUUwSCxxQkFBcUI7NEJBQ3JDMlUsU0FBUzs0QkFDVDtvQkFDUjtvQkFDQSxJQUFJbGQsTUFBTSxLQUFLO3dCQUNYLElBQUlYLE9BQU9FLEdBQUcsQ0FBQzRkLGdCQUFnQixFQUFFOzRCQUM3QixJQUFJQyxlQUFlM0IsWUFBWXBjOzRCQUMvQkEsT0FBT3FjLE1BQU0sR0FBRzs0QkFDaEJyYyxPQUFPdUIsS0FBSyxHQUFHcWM7NEJBQ2Y1ZCxPQUFPZ0UsS0FBSyxDQUFDK1o7d0JBQ2pCLE9BQ0s7NEJBQ0QvZCxNQUFNLENBQUM2ZCxPQUFPLElBQUl6QixZQUFZcGM7NEJBQzlCQSxPQUFPcWMsTUFBTSxHQUFHOzRCQUNoQnJjLE9BQU91QixLQUFLLEdBQUdxYzt3QkFDbkI7b0JBQ0osT0FDSyxJQUFJelcsUUFBUW5ILE9BQU9xYyxNQUFNLENBQUM5WSxNQUFNLEdBQUd3RCxhQUFhRCxhQUFhbkcsSUFBSTt3QkFDbEVYLE9BQU9xYyxNQUFNLElBQUkxYjtvQkFDckIsT0FDSzt3QkFDRHlaLFdBQVdwYSxRQUFRO3dCQUNuQkEsTUFBTSxDQUFDNmQsT0FBTyxJQUFJLE1BQU03ZCxPQUFPcWMsTUFBTSxHQUFHMWI7d0JBQ3hDWCxPQUFPcWMsTUFBTSxHQUFHO3dCQUNoQnJjLE9BQU91QixLQUFLLEdBQUdxYztvQkFDbkI7b0JBQ0E7Z0JBQ0o7b0JBQVMsd0JBQXdCLEdBQUc7d0JBQ2hDLE1BQU0sSUFBSXpELE1BQU1uYSxRQUFRLG9CQUFvQkEsT0FBT3VCLEtBQUs7b0JBQzVEO1lBQ0o7UUFDSixFQUFFLFFBQVE7UUFDVixJQUFJdkIsT0FBT29DLFFBQVEsSUFBSXBDLE9BQU9ZLG1CQUFtQixFQUFFO1lBQy9DcUMsa0JBQWtCakQ7UUFDdEI7UUFDQSxPQUFPQTtJQUNYO0lBQ0Esb0RBQW9ELEdBQ3BELHdCQUF3QixHQUN4QixJQUFJLENBQUN5WixPQUFPb0QsYUFBYSxFQUFFO1FBQ3RCO1lBQ0csSUFBSW1CLHFCQUFxQnZFLE9BQU9DLFlBQVk7WUFDNUMsSUFBSXVFLFFBQVE5YSxLQUFLOGEsS0FBSztZQUN0QixJQUFJcEIsZ0JBQWdCO2dCQUNoQixJQUFJcUIsV0FBVztnQkFDZixJQUFJQyxZQUFZLEVBQUU7Z0JBQ2xCLElBQUlDO2dCQUNKLElBQUlDO2dCQUNKLElBQUlDLFFBQVEsQ0FBQztnQkFDYixJQUFJL2EsU0FBUzRDLFVBQVU1QyxNQUFNO2dCQUM3QixJQUFJLENBQUNBLFFBQVE7b0JBQ1QsT0FBTztnQkFDWDtnQkFDQSxJQUFJeVosU0FBUztnQkFDYixNQUFPLEVBQUVzQixRQUFRL2EsT0FBUTtvQkFDckIsSUFBSWdiLFlBQVlDLE9BQU9yWSxTQUFTLENBQUNtWSxNQUFNO29CQUN2QyxJQUFJLENBQUNHLFNBQVNGLGNBQWMscUNBQXFDO29CQUM3REEsWUFBWSxLQUFLLGlDQUFpQztvQkFDbERBLFlBQVksWUFBWSxpQ0FBaUM7b0JBQ3pETixNQUFNTSxlQUFlQSxVQUFVLGlCQUFpQjtzQkFDbEQ7d0JBQ0UsTUFBTUcsV0FBVyx5QkFBeUJIO29CQUM5QztvQkFDQSxJQUFJQSxhQUFhLFFBQVE7d0JBQ3JCLGlCQUFpQjt3QkFDakJKLFVBQVVuYixJQUFJLENBQUN1YjtvQkFDbkIsT0FDSzt3QkFDRCwrQ0FBK0M7d0JBQy9DLHVFQUF1RTt3QkFDdkVBLGFBQWE7d0JBQ2JILGdCQUFnQixDQUFDRyxhQUFhLEVBQUMsSUFBSzt3QkFDcENGLGVBQWUsWUFBYSxRQUFTO3dCQUNyQ0YsVUFBVW5iLElBQUksQ0FBQ29iLGVBQWVDO29CQUNsQztvQkFDQSxJQUFJQyxRQUFRLE1BQU0vYSxVQUFVNGEsVUFBVTVhLE1BQU0sR0FBRzJhLFVBQVU7d0JBQ3JEbEIsVUFBVWdCLG1CQUFtQnZaLEtBQUssQ0FBQyxNQUFNMFo7d0JBQ3pDQSxVQUFVNWEsTUFBTSxHQUFHO29CQUN2QjtnQkFDSjtnQkFDQSxPQUFPeVo7WUFDWDtZQUNBLHdCQUF3QixHQUN4QixJQUFJcGIsT0FBT3VELGNBQWMsRUFBRTtnQkFDdkJ2RCxPQUFPdUQsY0FBYyxDQUFDc1UsUUFBUSxpQkFBaUI7b0JBQzNDN1QsT0FBT2lYO29CQUNQblgsY0FBYztvQkFDZGYsVUFBVTtnQkFDZDtZQUNKLE9BQ0s7Z0JBQ0Q4VSxPQUFPb0QsYUFBYSxHQUFHQTtZQUMzQjtRQUNKO0lBQ0o7SUFDQSxPQUFPOWM7QUFDWDtBQUNBLE1BQU1BLE1BQU0sY0FBYyxHQUFHRDtBQUNkIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3NheC1qcy9zYXguanM/ZGM4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCB0byBkZWFsIHdpdGggcG9ydGFiaWxpdHkgaXNzdWVzXG4vLyBPcmlnaW5hbGx5IGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pc2FhY3Mvc2F4LWpzXG5jb25zdCBpbml0aWFsaXplU2F4ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNheCA9IHt9O1xuICAgIHNheC5wYXJzZXIgPSBmdW5jdGlvbiAoc3RyaWN0LCBvcHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpO1xuICAgIH07XG4gICAgc2F4LlNBWFBhcnNlciA9IFNBWFBhcnNlcjtcbiAgICBzYXguU0FYU3RyZWFtID0gU0FYU3RyZWFtO1xuICAgIHNheC5jcmVhdGVTdHJlYW0gPSBjcmVhdGVTdHJlYW07XG4gICAgLy8gV2hlbiB3ZSBwYXNzIHRoZSBNQVhfQlVGRkVSX0xFTkdUSCBwb3NpdGlvbiwgc3RhcnQgY2hlY2tpbmcgZm9yIGJ1ZmZlciBvdmVycnVucy5cbiAgICAvLyBXaGVuIHdlIGNoZWNrLCBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgTUFYX0JVRkZFUl9MRU5HVEggLSAobWF4KGJ1ZmZlciBsZW5ndGhzKSksXG4gICAgLy8gc2luY2UgdGhhdCdzIHRoZSBlYXJsaWVzdCB0aGF0IGEgYnVmZmVyIG92ZXJydW4gY291bGQgb2NjdXIuICBUaGlzIHdheSwgY2hlY2tzIGFyZVxuICAgIC8vIGFzIHJhcmUgYXMgcmVxdWlyZWQsIGJ1dCBhcyBvZnRlbiBhcyBuZWNlc3NhcnkgdG8gZW5zdXJlIG5ldmVyIGNyb3NzaW5nIHRoaXMgYm91bmQuXG4gICAgLy8gRnVydGhlcm1vcmUsIGJ1ZmZlcnMgYXJlIG9ubHkgdGVzdGVkIGF0IG1vc3Qgb25jZSBwZXIgd3JpdGUoKSwgc28gcGFzc2luZyBhIHZlcnlcbiAgICAvLyBsYXJnZSBzdHJpbmcgaW50byB3cml0ZSgpIG1pZ2h0IGhhdmUgdW5kZXNpcmFibGUgZWZmZWN0cywgYnV0IHRoaXMgaXMgbWFuYWdlYWJsZSBieVxuICAgIC8vIHRoZSBjYWxsZXIsIHNvIGl0IGlzIGFzc3VtZWQgdG8gYmUgc2FmZS4gIFRodXMsIGEgY2FsbCB0byB3cml0ZSgpIG1heSwgaW4gdGhlIGV4dHJlbWVcbiAgICAvLyBlZGdlIGNhc2UsIHJlc3VsdCBpbiBjcmVhdGluZyBhdCBtb3N0IG9uZSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBzdHJpbmcgcGFzc2VkIGluLlxuICAgIC8vIFNldCB0byBJbmZpbml0eSB0byBoYXZlIHVubGltaXRlZCBidWZmZXJzLlxuICAgIHNheC5NQVhfQlVGRkVSX0xFTkdUSCA9IDY0ICogMTAyNDtcbiAgICBjb25zdCBidWZmZXJzID0gW1xuICAgICAgICBcImNvbW1lbnRcIixcbiAgICAgICAgXCJzZ21sRGVjbFwiLFxuICAgICAgICBcInRleHROb2RlXCIsXG4gICAgICAgIFwidGFnTmFtZVwiLFxuICAgICAgICBcImRvY3R5cGVcIixcbiAgICAgICAgXCJwcm9jSW5zdE5hbWVcIixcbiAgICAgICAgXCJwcm9jSW5zdEJvZHlcIixcbiAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgXCJhdHRyaWJOYW1lXCIsXG4gICAgICAgIFwiYXR0cmliVmFsdWVcIixcbiAgICAgICAgXCJjZGF0YVwiLFxuICAgICAgICBcInNjcmlwdFwiLFxuICAgIF07XG4gICAgc2F4LkVWRU5UUyA9IFtcbiAgICAgICAgXCJ0ZXh0XCIsXG4gICAgICAgIFwicHJvY2Vzc2luZ2luc3RydWN0aW9uXCIsXG4gICAgICAgIFwic2dtbGRlY2xhcmF0aW9uXCIsXG4gICAgICAgIFwiZG9jdHlwZVwiLFxuICAgICAgICBcImNvbW1lbnRcIixcbiAgICAgICAgXCJvcGVudGFnc3RhcnRcIixcbiAgICAgICAgXCJhdHRyaWJ1dGVcIixcbiAgICAgICAgXCJvcGVudGFnXCIsXG4gICAgICAgIFwiY2xvc2V0YWdcIixcbiAgICAgICAgXCJvcGVuY2RhdGFcIixcbiAgICAgICAgXCJjZGF0YVwiLFxuICAgICAgICBcImNsb3NlY2RhdGFcIixcbiAgICAgICAgXCJlcnJvclwiLFxuICAgICAgICBcImVuZFwiLFxuICAgICAgICBcInJlYWR5XCIsXG4gICAgICAgIFwic2NyaXB0XCIsXG4gICAgICAgIFwib3Blbm5hbWVzcGFjZVwiLFxuICAgICAgICBcImNsb3NlbmFtZXNwYWNlXCIsXG4gICAgXTtcbiAgICBmdW5jdGlvbiBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyc2VyID0gdGhpcztcbiAgICAgICAgY2xlYXJCdWZmZXJzKHBhcnNlcik7XG4gICAgICAgIHBhcnNlci5xID0gcGFyc2VyLmMgPSBcIlwiO1xuICAgICAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSDtcbiAgICAgICAgcGFyc2VyLm9wdCA9IG9wdCB8fCB7fTtcbiAgICAgICAgcGFyc2VyLm9wdC5sb3dlcmNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSB8fCBwYXJzZXIub3B0Lmxvd2VyY2FzZXRhZ3M7XG4gICAgICAgIHBhcnNlci5sb29zZUNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSA/IFwidG9Mb3dlckNhc2VcIiA6IFwidG9VcHBlckNhc2VcIjtcbiAgICAgICAgcGFyc2VyLnRhZ3MgPSBbXTtcbiAgICAgICAgcGFyc2VyLmNsb3NlZCA9IHBhcnNlci5jbG9zZWRSb290ID0gcGFyc2VyLnNhd1Jvb3QgPSBmYWxzZTtcbiAgICAgICAgcGFyc2VyLnRhZyA9IHBhcnNlci5lcnJvciA9IG51bGw7XG4gICAgICAgIHBhcnNlci5zdHJpY3QgPSAhIXN0cmljdDtcbiAgICAgICAgcGFyc2VyLm5vc2NyaXB0ID0gISEoc3RyaWN0IHx8IHBhcnNlci5vcHQubm9zY3JpcHQpO1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkJFR0lOO1xuICAgICAgICBwYXJzZXIuc3RyaWN0RW50aXRpZXMgPSBwYXJzZXIub3B0LnN0cmljdEVudGl0aWVzO1xuICAgICAgICBwYXJzZXIuRU5USVRJRVMgPSBwYXJzZXIuc3RyaWN0RW50aXRpZXNcbiAgICAgICAgICAgID8gT2JqZWN0LmNyZWF0ZShzYXguWE1MX0VOVElUSUVTKVxuICAgICAgICAgICAgOiBPYmplY3QuY3JlYXRlKHNheC5FTlRJVElFUyk7XG4gICAgICAgIHBhcnNlci5hdHRyaWJMaXN0ID0gW107XG4gICAgICAgIC8vIG5hbWVzcGFjZXMgZm9ybSBhIHByb3RvdHlwZSBjaGFpbi5cbiAgICAgICAgLy8gaXQgYWx3YXlzIHBvaW50cyBhdCB0aGUgY3VycmVudCB0YWcsXG4gICAgICAgIC8vIHdoaWNoIHByb3RvcyB0byBpdHMgcGFyZW50IHRhZy5cbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHBhcnNlci5ucyA9IE9iamVjdC5jcmVhdGUocm9vdE5TKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtb3N0bHkganVzdCBmb3IgZXJyb3IgcmVwb3J0aW5nXG4gICAgICAgIHBhcnNlci50cmFja1Bvc2l0aW9uID0gcGFyc2VyLm9wdC5wb3NpdGlvbiAhPT0gZmFsc2U7XG4gICAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgcGFyc2VyLnBvc2l0aW9uID0gcGFyc2VyLmxpbmUgPSBwYXJzZXIuY29sdW1uID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbWl0KHBhcnNlciwgXCJvbnJlYWR5XCIpO1xuICAgIH1cbiAgICBpZiAoIU9iamVjdC5jcmVhdGUpIHtcbiAgICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBGKCkgeyB9XG4gICAgICAgICAgICBGLnByb3RvdHlwZSA9IG87XG4gICAgICAgICAgICB2YXIgbmV3ZiA9IG5ldyBGKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3ZjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFPYmplY3Qua2V5cykge1xuICAgICAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvKVxuICAgICAgICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KGkpKVxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goaSk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tCdWZmZXJMZW5ndGgocGFyc2VyKSB7XG4gICAgICAgIHZhciBtYXhBbGxvd2VkID0gTWF0aC5tYXgoc2F4Lk1BWF9CVUZGRVJfTEVOR1RILCAxMCk7XG4gICAgICAgIHZhciBtYXhBY3R1YWwgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gcGFyc2VyW2J1ZmZlcnNbaV1dLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPiBtYXhBbGxvd2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gVGV4dC9jZGF0YSBub2RlcyBjYW4gZ2V0IGJpZywgYW5kIHNpbmNlIHRoZXkncmUgYnVmZmVyZWQsXG4gICAgICAgICAgICAgICAgLy8gd2UgY2FuIGdldCBoZXJlIHVuZGVyIG5vcm1hbCBjb25kaXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIEF2b2lkIGlzc3VlcyBieSBlbWl0dGluZyB0aGUgdGV4dCBub2RlIG5vdyxcbiAgICAgICAgICAgICAgICAvLyBzbyBhdCBsZWFzdCBpdCB3b24ndCBnZXQgYW55IGJpZ2dlci5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ1ZmZlcnNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHROb2RlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVRleHQocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2RhdGFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JpcHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbnNjcmlwdFwiLCBwYXJzZXIuc2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihwYXJzZXIsIFwiTWF4IGJ1ZmZlciBsZW5ndGggZXhjZWVkZWQ6IFwiICsgYnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF4QWN0dWFsID0gTWF0aC5tYXgobWF4QWN0dWFsLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciB0aGUgZWFybGllc3QgcG9zc2libGUgYnVmZmVyIG92ZXJydW4uXG4gICAgICAgIHZhciBtID0gc2F4Lk1BWF9CVUZGRVJfTEVOR1RIIC0gbWF4QWN0dWFsO1xuICAgICAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IG0gKyBwYXJzZXIucG9zaXRpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFyQnVmZmVycyhwYXJzZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcnNbaV1dID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaEJ1ZmZlcnMocGFyc2VyKSB7XG4gICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBpZiAocGFyc2VyLmNkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jZGF0YVwiLCBwYXJzZXIuY2RhdGEpO1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCAhPT0gXCJcIikge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpO1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU0FYUGFyc2VyLnByb3RvdHlwZSA9IHtcbiAgICAgICAgZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbmQodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiB3cml0ZSxcbiAgICAgICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JpdGUobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZsdXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmbHVzaEJ1ZmZlcnModGhpcyk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICB2YXIgU3RyZWFtID0gUmVhZGFibGVTdHJlYW07XG4gICAgaWYgKCFTdHJlYW0pXG4gICAgICAgIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB2YXIgc3RyZWFtV3JhcHMgPSBzYXguRVZFTlRTLmZpbHRlcihmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgcmV0dXJuIGV2ICE9PSBcImVycm9yXCIgJiYgZXYgIT09IFwiZW5kXCI7XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gY3JlYXRlU3RyZWFtKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gU0FYU3RyZWFtKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhTdHJlYW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdCk7XG4gICAgICAgIH1cbiAgICAgICAgU3RyZWFtLmFwcGx5KHRoaXMpO1xuICAgICAgICB0aGlzLl9wYXJzZXIgPSBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KTtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLl9wYXJzZXIub25lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZS5lbWl0KFwiZW5kXCIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9wYXJzZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcikge1xuICAgICAgICAgICAgbWUuZW1pdChcImVycm9yXCIsIGVyKTtcbiAgICAgICAgICAgIC8vIGlmIGRpZG4ndCB0aHJvdywgdGhlbiBtZWFucyBlcnJvciB3YXMgaGFuZGxlZC5cbiAgICAgICAgICAgIC8vIGdvIGFoZWFkIGFuZCBjbGVhciBlcnJvciwgc28gd2UgY2FuIHdyaXRlIGFnYWluLlxuICAgICAgICAgICAgbWUuX3BhcnNlci5lcnJvciA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2RlY29kZXIgPSBudWxsO1xuICAgICAgICBzdHJlYW1XcmFwcy5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lLCBcIm9uXCIgKyBldiwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX3BhcnNlcltcIm9uXCIgKyBldl07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVtb3ZlQWxsTGlzdGVuZXJzKGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdID0gaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lLm9uKGV2LCBoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgU0FYU3RyZWFtLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RyZWFtLnByb3RvdHlwZSwge1xuICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgICAgdmFsdWU6IFNBWFN0cmVhbSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBTQVhTdHJlYW0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VyLndyaXRlKGRhdGEudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuZW1pdChcImRhdGFcIiwgZGF0YSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgU0FYU3RyZWFtLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShjaHVuayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGFyc2VyLmVuZCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFNBWFN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgaWYgKCFtZS5fcGFyc2VyW1wib25cIiArIGV2XSAmJiBzdHJlYW1XcmFwcy5pbmRleE9mKGV2KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICA/IFthcmd1bWVudHNbMF1dXG4gICAgICAgICAgICAgICAgICAgIDogQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBldik7XG4gICAgICAgICAgICAgICAgbWUuZW1pdC5hcHBseShtZSwgYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwobWUsIGV2LCBoYW5kbGVyKTtcbiAgICB9O1xuICAgIC8vIHRoaXMgcmVhbGx5IG5lZWRzIHRvIGJlIHJlcGxhY2VkIHdpdGggY2hhcmFjdGVyIGNsYXNzZXMuXG4gICAgLy8gWE1MIGFsbG93cyBhbGwgbWFubmVyIG9mIHJpZGljdWxvdXMgbnVtYmVycyBhbmQgZGlnaXRzLlxuICAgIHZhciBDREFUQSA9IFwiW0NEQVRBW1wiO1xuICAgIHZhciBET0NUWVBFID0gXCJET0NUWVBFXCI7XG4gICAgdmFyIFhNTF9OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiO1xuICAgIHZhciBYTUxOU19OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCI7XG4gICAgdmFyIHJvb3ROUyA9IHsgeG1sOiBYTUxfTkFNRVNQQUNFLCB4bWxuczogWE1MTlNfTkFNRVNQQUNFIH07XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVN0YXJ0Q2hhclxuICAgIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gd29ya3Mgb24gc3RyaW5ncywgYSBzaW5nbGUgY2hhcmFjdGVyIGF0IGEgdGltZVxuICAgIC8vIGFzIHN1Y2gsIGl0IGNhbm5vdCBldmVyIHN1cHBvcnQgYXN0cmFsLXBsYW5lIGNoYXJhY3RlcnMgKDEwMDAwLUVGRkZGKVxuICAgIC8vIHdpdGhvdXQgYSBzaWduaWZpY2FudCBicmVha2luZyBjaGFuZ2UgdG8gZWl0aGVyIHRoaXMgIHBhcnNlciwgb3IgdGhlXG4gICAgLy8gSmF2YVNjcmlwdCBsYW5ndWFnZS4gIEltcGxlbWVudGF0aW9uIG9mIGFuIGVtb2ppLWNhcGFibGUgeG1sIHBhcnNlclxuICAgIC8vIGlzIGxlZnQgYXMgYW4gZXhlcmNpc2UgZm9yIHRoZSByZWFkZXIuXG4gICAgdmFyIG5hbWVTdGFydCA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdLztcbiAgICB2YXIgbmFtZUJvZHkgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS87XG4gICAgdmFyIGVudGl0eVN0YXJ0ID0gL1sjOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdLztcbiAgICB2YXIgZW50aXR5Qm9keSA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS87XG4gICAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09IFwiIFwiIHx8IGMgPT09IFwiXFxuXCIgfHwgYyA9PT0gXCJcXHJcIiB8fCBjID09PSBcIlxcdFwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1F1b3RlKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09ICdcIicgfHwgYyA9PT0gXCInXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQXR0cmliRW5kKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09IFwiPlwiIHx8IGlzV2hpdGVzcGFjZShjKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNNYXRjaChyZWdleCwgYykge1xuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChjKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm90TWF0Y2gocmVnZXgsIGMpIHtcbiAgICAgICAgcmV0dXJuICFpc01hdGNoKHJlZ2V4LCBjKTtcbiAgICB9XG4gICAgdmFyIFMgPSAwO1xuICAgIHNheC5TVEFURSA9IHtcbiAgICAgICAgQkVHSU46IFMrKyxcbiAgICAgICAgQkVHSU5fV0hJVEVTUEFDRTogUysrLFxuICAgICAgICBURVhUOiBTKyssXG4gICAgICAgIFRFWFRfRU5USVRZOiBTKyssXG4gICAgICAgIE9QRU5fV0FLQTogUysrLFxuICAgICAgICBTR01MX0RFQ0w6IFMrKyxcbiAgICAgICAgU0dNTF9ERUNMX1FVT1RFRDogUysrLFxuICAgICAgICBET0NUWVBFOiBTKyssXG4gICAgICAgIERPQ1RZUEVfUVVPVEVEOiBTKyssXG4gICAgICAgIERPQ1RZUEVfRFREOiBTKyssXG4gICAgICAgIERPQ1RZUEVfRFREX1FVT1RFRDogUysrLFxuICAgICAgICBDT01NRU5UX1NUQVJUSU5HOiBTKyssXG4gICAgICAgIENPTU1FTlQ6IFMrKyxcbiAgICAgICAgQ09NTUVOVF9FTkRJTkc6IFMrKyxcbiAgICAgICAgQ09NTUVOVF9FTkRFRDogUysrLFxuICAgICAgICBDREFUQTogUysrLFxuICAgICAgICBDREFUQV9FTkRJTkc6IFMrKyxcbiAgICAgICAgQ0RBVEFfRU5ESU5HXzI6IFMrKyxcbiAgICAgICAgUFJPQ19JTlNUOiBTKyssXG4gICAgICAgIFBST0NfSU5TVF9CT0RZOiBTKyssXG4gICAgICAgIFBST0NfSU5TVF9FTkRJTkc6IFMrKyxcbiAgICAgICAgT1BFTl9UQUc6IFMrKyxcbiAgICAgICAgT1BFTl9UQUdfU0xBU0g6IFMrKyxcbiAgICAgICAgQVRUUklCOiBTKyssXG4gICAgICAgIEFUVFJJQl9OQU1FOiBTKyssXG4gICAgICAgIEFUVFJJQl9OQU1FX1NBV19XSElURTogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUU6IFMrKyxcbiAgICAgICAgQVRUUklCX1ZBTFVFX1FVT1RFRDogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUVfQ0xPU0VEOiBTKyssXG4gICAgICAgIEFUVFJJQl9WQUxVRV9VTlFVT1RFRDogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUVfRU5USVRZX1E6IFMrKyxcbiAgICAgICAgQVRUUklCX1ZBTFVFX0VOVElUWV9VOiBTKyssXG4gICAgICAgIENMT1NFX1RBRzogUysrLFxuICAgICAgICBDTE9TRV9UQUdfU0FXX1dISVRFOiBTKyssXG4gICAgICAgIFNDUklQVDogUysrLFxuICAgICAgICBTQ1JJUFRfRU5ESU5HOiBTKyssIC8vIDxzY3JpcHQ+IC4uLiA8XG4gICAgfTtcbiAgICBzYXguWE1MX0VOVElUSUVTID0ge1xuICAgICAgICBhbXA6IFwiJlwiLFxuICAgICAgICBndDogXCI+XCIsXG4gICAgICAgIGx0OiBcIjxcIixcbiAgICAgICAgcXVvdDogJ1wiJyxcbiAgICAgICAgYXBvczogXCInXCIsXG4gICAgfTtcbiAgICBzYXguRU5USVRJRVMgPSB7XG4gICAgICAgIGFtcDogXCImXCIsXG4gICAgICAgIGd0OiBcIj5cIixcbiAgICAgICAgbHQ6IFwiPFwiLFxuICAgICAgICBxdW90OiAnXCInLFxuICAgICAgICBhcG9zOiBcIidcIixcbiAgICAgICAgQUVsaWc6IDE5OCxcbiAgICAgICAgQWFjdXRlOiAxOTMsXG4gICAgICAgIEFjaXJjOiAxOTQsXG4gICAgICAgIEFncmF2ZTogMTkyLFxuICAgICAgICBBcmluZzogMTk3LFxuICAgICAgICBBdGlsZGU6IDE5NSxcbiAgICAgICAgQXVtbDogMTk2LFxuICAgICAgICBDY2VkaWw6IDE5OSxcbiAgICAgICAgRVRIOiAyMDgsXG4gICAgICAgIEVhY3V0ZTogMjAxLFxuICAgICAgICBFY2lyYzogMjAyLFxuICAgICAgICBFZ3JhdmU6IDIwMCxcbiAgICAgICAgRXVtbDogMjAzLFxuICAgICAgICBJYWN1dGU6IDIwNSxcbiAgICAgICAgSWNpcmM6IDIwNixcbiAgICAgICAgSWdyYXZlOiAyMDQsXG4gICAgICAgIEl1bWw6IDIwNyxcbiAgICAgICAgTnRpbGRlOiAyMDksXG4gICAgICAgIE9hY3V0ZTogMjExLFxuICAgICAgICBPY2lyYzogMjEyLFxuICAgICAgICBPZ3JhdmU6IDIxMCxcbiAgICAgICAgT3NsYXNoOiAyMTYsXG4gICAgICAgIE90aWxkZTogMjEzLFxuICAgICAgICBPdW1sOiAyMTQsXG4gICAgICAgIFRIT1JOOiAyMjIsXG4gICAgICAgIFVhY3V0ZTogMjE4LFxuICAgICAgICBVY2lyYzogMjE5LFxuICAgICAgICBVZ3JhdmU6IDIxNyxcbiAgICAgICAgVXVtbDogMjIwLFxuICAgICAgICBZYWN1dGU6IDIyMSxcbiAgICAgICAgYWFjdXRlOiAyMjUsXG4gICAgICAgIGFjaXJjOiAyMjYsXG4gICAgICAgIGFlbGlnOiAyMzAsXG4gICAgICAgIGFncmF2ZTogMjI0LFxuICAgICAgICBhcmluZzogMjI5LFxuICAgICAgICBhdGlsZGU6IDIyNyxcbiAgICAgICAgYXVtbDogMjI4LFxuICAgICAgICBjY2VkaWw6IDIzMSxcbiAgICAgICAgZWFjdXRlOiAyMzMsXG4gICAgICAgIGVjaXJjOiAyMzQsXG4gICAgICAgIGVncmF2ZTogMjMyLFxuICAgICAgICBldGg6IDI0MCxcbiAgICAgICAgZXVtbDogMjM1LFxuICAgICAgICBpYWN1dGU6IDIzNyxcbiAgICAgICAgaWNpcmM6IDIzOCxcbiAgICAgICAgaWdyYXZlOiAyMzYsXG4gICAgICAgIGl1bWw6IDIzOSxcbiAgICAgICAgbnRpbGRlOiAyNDEsXG4gICAgICAgIG9hY3V0ZTogMjQzLFxuICAgICAgICBvY2lyYzogMjQ0LFxuICAgICAgICBvZ3JhdmU6IDI0MixcbiAgICAgICAgb3NsYXNoOiAyNDgsXG4gICAgICAgIG90aWxkZTogMjQ1LFxuICAgICAgICBvdW1sOiAyNDYsXG4gICAgICAgIHN6bGlnOiAyMjMsXG4gICAgICAgIHRob3JuOiAyNTQsXG4gICAgICAgIHVhY3V0ZTogMjUwLFxuICAgICAgICB1Y2lyYzogMjUxLFxuICAgICAgICB1Z3JhdmU6IDI0OSxcbiAgICAgICAgdXVtbDogMjUyLFxuICAgICAgICB5YWN1dGU6IDI1MyxcbiAgICAgICAgeXVtbDogMjU1LFxuICAgICAgICBjb3B5OiAxNjksXG4gICAgICAgIHJlZzogMTc0LFxuICAgICAgICBuYnNwOiAxNjAsXG4gICAgICAgIGlleGNsOiAxNjEsXG4gICAgICAgIGNlbnQ6IDE2MixcbiAgICAgICAgcG91bmQ6IDE2MyxcbiAgICAgICAgY3VycmVuOiAxNjQsXG4gICAgICAgIHllbjogMTY1LFxuICAgICAgICBicnZiYXI6IDE2NixcbiAgICAgICAgc2VjdDogMTY3LFxuICAgICAgICB1bWw6IDE2OCxcbiAgICAgICAgb3JkZjogMTcwLFxuICAgICAgICBsYXF1bzogMTcxLFxuICAgICAgICBub3Q6IDE3MixcbiAgICAgICAgc2h5OiAxNzMsXG4gICAgICAgIG1hY3I6IDE3NSxcbiAgICAgICAgZGVnOiAxNzYsXG4gICAgICAgIHBsdXNtbjogMTc3LFxuICAgICAgICBzdXAxOiAxODUsXG4gICAgICAgIHN1cDI6IDE3OCxcbiAgICAgICAgc3VwMzogMTc5LFxuICAgICAgICBhY3V0ZTogMTgwLFxuICAgICAgICBtaWNybzogMTgxLFxuICAgICAgICBwYXJhOiAxODIsXG4gICAgICAgIG1pZGRvdDogMTgzLFxuICAgICAgICBjZWRpbDogMTg0LFxuICAgICAgICBvcmRtOiAxODYsXG4gICAgICAgIHJhcXVvOiAxODcsXG4gICAgICAgIGZyYWMxNDogMTg4LFxuICAgICAgICBmcmFjMTI6IDE4OSxcbiAgICAgICAgZnJhYzM0OiAxOTAsXG4gICAgICAgIGlxdWVzdDogMTkxLFxuICAgICAgICB0aW1lczogMjE1LFxuICAgICAgICBkaXZpZGU6IDI0NyxcbiAgICAgICAgT0VsaWc6IDMzOCxcbiAgICAgICAgb2VsaWc6IDMzOSxcbiAgICAgICAgU2Nhcm9uOiAzNTIsXG4gICAgICAgIHNjYXJvbjogMzUzLFxuICAgICAgICBZdW1sOiAzNzYsXG4gICAgICAgIGZub2Y6IDQwMixcbiAgICAgICAgY2lyYzogNzEwLFxuICAgICAgICB0aWxkZTogNzMyLFxuICAgICAgICBBbHBoYTogOTEzLFxuICAgICAgICBCZXRhOiA5MTQsXG4gICAgICAgIEdhbW1hOiA5MTUsXG4gICAgICAgIERlbHRhOiA5MTYsXG4gICAgICAgIEVwc2lsb246IDkxNyxcbiAgICAgICAgWmV0YTogOTE4LFxuICAgICAgICBFdGE6IDkxOSxcbiAgICAgICAgVGhldGE6IDkyMCxcbiAgICAgICAgSW90YTogOTIxLFxuICAgICAgICBLYXBwYTogOTIyLFxuICAgICAgICBMYW1iZGE6IDkyMyxcbiAgICAgICAgTXU6IDkyNCxcbiAgICAgICAgTnU6IDkyNSxcbiAgICAgICAgWGk6IDkyNixcbiAgICAgICAgT21pY3JvbjogOTI3LFxuICAgICAgICBQaTogOTI4LFxuICAgICAgICBSaG86IDkyOSxcbiAgICAgICAgU2lnbWE6IDkzMSxcbiAgICAgICAgVGF1OiA5MzIsXG4gICAgICAgIFVwc2lsb246IDkzMyxcbiAgICAgICAgUGhpOiA5MzQsXG4gICAgICAgIENoaTogOTM1LFxuICAgICAgICBQc2k6IDkzNixcbiAgICAgICAgT21lZ2E6IDkzNyxcbiAgICAgICAgYWxwaGE6IDk0NSxcbiAgICAgICAgYmV0YTogOTQ2LFxuICAgICAgICBnYW1tYTogOTQ3LFxuICAgICAgICBkZWx0YTogOTQ4LFxuICAgICAgICBlcHNpbG9uOiA5NDksXG4gICAgICAgIHpldGE6IDk1MCxcbiAgICAgICAgZXRhOiA5NTEsXG4gICAgICAgIHRoZXRhOiA5NTIsXG4gICAgICAgIGlvdGE6IDk1MyxcbiAgICAgICAga2FwcGE6IDk1NCxcbiAgICAgICAgbGFtYmRhOiA5NTUsXG4gICAgICAgIG11OiA5NTYsXG4gICAgICAgIG51OiA5NTcsXG4gICAgICAgIHhpOiA5NTgsXG4gICAgICAgIG9taWNyb246IDk1OSxcbiAgICAgICAgcGk6IDk2MCxcbiAgICAgICAgcmhvOiA5NjEsXG4gICAgICAgIHNpZ21hZjogOTYyLFxuICAgICAgICBzaWdtYTogOTYzLFxuICAgICAgICB0YXU6IDk2NCxcbiAgICAgICAgdXBzaWxvbjogOTY1LFxuICAgICAgICBwaGk6IDk2NixcbiAgICAgICAgY2hpOiA5NjcsXG4gICAgICAgIHBzaTogOTY4LFxuICAgICAgICBvbWVnYTogOTY5LFxuICAgICAgICB0aGV0YXN5bTogOTc3LFxuICAgICAgICB1cHNpaDogOTc4LFxuICAgICAgICBwaXY6IDk4MixcbiAgICAgICAgZW5zcDogODE5NCxcbiAgICAgICAgZW1zcDogODE5NSxcbiAgICAgICAgdGhpbnNwOiA4MjAxLFxuICAgICAgICB6d25qOiA4MjA0LFxuICAgICAgICB6d2o6IDgyMDUsXG4gICAgICAgIGxybTogODIwNixcbiAgICAgICAgcmxtOiA4MjA3LFxuICAgICAgICBuZGFzaDogODIxMSxcbiAgICAgICAgbWRhc2g6IDgyMTIsXG4gICAgICAgIGxzcXVvOiA4MjE2LFxuICAgICAgICByc3F1bzogODIxNyxcbiAgICAgICAgc2JxdW86IDgyMTgsXG4gICAgICAgIGxkcXVvOiA4MjIwLFxuICAgICAgICByZHF1bzogODIyMSxcbiAgICAgICAgYmRxdW86IDgyMjIsXG4gICAgICAgIGRhZ2dlcjogODIyNCxcbiAgICAgICAgRGFnZ2VyOiA4MjI1LFxuICAgICAgICBidWxsOiA4MjI2LFxuICAgICAgICBoZWxsaXA6IDgyMzAsXG4gICAgICAgIHBlcm1pbDogODI0MCxcbiAgICAgICAgcHJpbWU6IDgyNDIsXG4gICAgICAgIFByaW1lOiA4MjQzLFxuICAgICAgICBsc2FxdW86IDgyNDksXG4gICAgICAgIHJzYXF1bzogODI1MCxcbiAgICAgICAgb2xpbmU6IDgyNTQsXG4gICAgICAgIGZyYXNsOiA4MjYwLFxuICAgICAgICBldXJvOiA4MzY0LFxuICAgICAgICBpbWFnZTogODQ2NSxcbiAgICAgICAgd2VpZXJwOiA4NDcyLFxuICAgICAgICByZWFsOiA4NDc2LFxuICAgICAgICB0cmFkZTogODQ4MixcbiAgICAgICAgYWxlZnN5bTogODUwMSxcbiAgICAgICAgbGFycjogODU5MixcbiAgICAgICAgdWFycjogODU5MyxcbiAgICAgICAgcmFycjogODU5NCxcbiAgICAgICAgZGFycjogODU5NSxcbiAgICAgICAgaGFycjogODU5NixcbiAgICAgICAgY3JhcnI6IDg2MjksXG4gICAgICAgIGxBcnI6IDg2NTYsXG4gICAgICAgIHVBcnI6IDg2NTcsXG4gICAgICAgIHJBcnI6IDg2NTgsXG4gICAgICAgIGRBcnI6IDg2NTksXG4gICAgICAgIGhBcnI6IDg2NjAsXG4gICAgICAgIGZvcmFsbDogODcwNCxcbiAgICAgICAgcGFydDogODcwNixcbiAgICAgICAgZXhpc3Q6IDg3MDcsXG4gICAgICAgIGVtcHR5OiA4NzA5LFxuICAgICAgICBuYWJsYTogODcxMSxcbiAgICAgICAgaXNpbjogODcxMixcbiAgICAgICAgbm90aW46IDg3MTMsXG4gICAgICAgIG5pOiA4NzE1LFxuICAgICAgICBwcm9kOiA4NzE5LFxuICAgICAgICBzdW06IDg3MjEsXG4gICAgICAgIG1pbnVzOiA4NzIyLFxuICAgICAgICBsb3dhc3Q6IDg3MjcsXG4gICAgICAgIHJhZGljOiA4NzMwLFxuICAgICAgICBwcm9wOiA4NzMzLFxuICAgICAgICBpbmZpbjogODczNCxcbiAgICAgICAgYW5nOiA4NzM2LFxuICAgICAgICBhbmQ6IDg3NDMsXG4gICAgICAgIG9yOiA4NzQ0LFxuICAgICAgICBjYXA6IDg3NDUsXG4gICAgICAgIGN1cDogODc0NixcbiAgICAgICAgaW50OiA4NzQ3LFxuICAgICAgICB0aGVyZTQ6IDg3NTYsXG4gICAgICAgIHNpbTogODc2NCxcbiAgICAgICAgY29uZzogODc3MyxcbiAgICAgICAgYXN5bXA6IDg3NzYsXG4gICAgICAgIG5lOiA4ODAwLFxuICAgICAgICBlcXVpdjogODgwMSxcbiAgICAgICAgbGU6IDg4MDQsXG4gICAgICAgIGdlOiA4ODA1LFxuICAgICAgICBzdWI6IDg4MzQsXG4gICAgICAgIHN1cDogODgzNSxcbiAgICAgICAgbnN1YjogODgzNixcbiAgICAgICAgc3ViZTogODgzOCxcbiAgICAgICAgc3VwZTogODgzOSxcbiAgICAgICAgb3BsdXM6IDg4NTMsXG4gICAgICAgIG90aW1lczogODg1NSxcbiAgICAgICAgcGVycDogODg2OSxcbiAgICAgICAgc2RvdDogODkwMSxcbiAgICAgICAgbGNlaWw6IDg5NjgsXG4gICAgICAgIHJjZWlsOiA4OTY5LFxuICAgICAgICBsZmxvb3I6IDg5NzAsXG4gICAgICAgIHJmbG9vcjogODk3MSxcbiAgICAgICAgbGFuZzogOTAwMSxcbiAgICAgICAgcmFuZzogOTAwMixcbiAgICAgICAgbG96OiA5Njc0LFxuICAgICAgICBzcGFkZXM6IDk4MjQsXG4gICAgICAgIGNsdWJzOiA5ODI3LFxuICAgICAgICBoZWFydHM6IDk4MjksXG4gICAgICAgIGRpYW1zOiA5ODMwLFxuICAgIH07XG4gICAgT2JqZWN0LmtleXMoc2F4LkVOVElUSUVTKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIGUgPSBzYXguRU5USVRJRVNba2V5XTtcbiAgICAgICAgdmFyIHMgPSB0eXBlb2YgZSA9PT0gXCJudW1iZXJcIiA/IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiBlO1xuICAgICAgICBzYXguRU5USVRJRVNba2V5XSA9IHM7XG4gICAgfSk7XG4gICAgZm9yICh2YXIgcyBpbiBzYXguU1RBVEUpIHtcbiAgICAgICAgc2F4LlNUQVRFW3NheC5TVEFURVtzXV0gPSBzO1xuICAgIH1cbiAgICAvLyBzaG9ydGhhbmRcbiAgICBTID0gc2F4LlNUQVRFO1xuICAgIGZ1bmN0aW9uIGVtaXQocGFyc2VyLCBldmVudCwgZGF0YSkge1xuICAgICAgICBwYXJzZXJbZXZlbnRdICYmIHBhcnNlcltldmVudF0oZGF0YSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVtaXROb2RlKHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpIHtcbiAgICAgICAgaWYgKHBhcnNlci50ZXh0Tm9kZSlcbiAgICAgICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBlbWl0KHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9zZVRleHQocGFyc2VyKSB7XG4gICAgICAgIHBhcnNlci50ZXh0Tm9kZSA9IHRleHRvcHRzKHBhcnNlci5vcHQsIHBhcnNlci50ZXh0Tm9kZSk7XG4gICAgICAgIGlmIChwYXJzZXIudGV4dE5vZGUpXG4gICAgICAgICAgICBlbWl0KHBhcnNlciwgXCJvbnRleHRcIiwgcGFyc2VyLnRleHROb2RlKTtcbiAgICAgICAgcGFyc2VyLnRleHROb2RlID0gXCJcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGV4dG9wdHMob3B0LCB0ZXh0KSB7XG4gICAgICAgIGlmIChvcHQudHJpbSlcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgaWYgKG9wdC5ub3JtYWxpemUpXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVycm9yKHBhcnNlciwgZXIpIHtcbiAgICAgICAgY2xvc2VUZXh0KHBhcnNlcik7XG4gICAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgZXIgKz1cbiAgICAgICAgICAgICAgICBcIlxcbkxpbmU6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUgK1xuICAgICAgICAgICAgICAgICAgICBcIlxcbkNvbHVtbjogXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uICtcbiAgICAgICAgICAgICAgICAgICAgXCJcXG5DaGFyOiBcIiArXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5jO1xuICAgICAgICB9XG4gICAgICAgIGVyID0gbmV3IEVycm9yKGVyKTtcbiAgICAgICAgcGFyc2VyLmVycm9yID0gZXI7XG4gICAgICAgIGVtaXQocGFyc2VyLCBcIm9uZXJyb3JcIiwgZXIpO1xuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmQocGFyc2VyKSB7XG4gICAgICAgIGlmIChwYXJzZXIuc2F3Um9vdCAmJiAhcGFyc2VyLmNsb3NlZFJvb3QpXG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmNsb3NlZCByb290IHRhZ1wiKTtcbiAgICAgICAgaWYgKHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTiAmJlxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOX1dISVRFU1BBQ0UgJiZcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSAhPT0gUy5URVhUKSB7XG4gICAgICAgICAgICBlcnJvcihwYXJzZXIsIFwiVW5leHBlY3RlZCBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2xvc2VUZXh0KHBhcnNlcik7XG4gICAgICAgIHBhcnNlci5jID0gXCJcIjtcbiAgICAgICAgcGFyc2VyLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIGVtaXQocGFyc2VyLCBcIm9uZW5kXCIpO1xuICAgICAgICBTQVhQYXJzZXIuY2FsbChwYXJzZXIsIHBhcnNlci5zdHJpY3QsIHBhcnNlci5vcHQpO1xuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdHJpY3RGYWlsKHBhcnNlciwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIHBhcnNlciAhPT0gXCJvYmplY3RcIiB8fCAhKHBhcnNlciBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImJhZCBjYWxsIHRvIHN0cmljdEZhaWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIGVycm9yKHBhcnNlciwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbmV3VGFnKHBhcnNlcikge1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG4gICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG4gICAgICAgIHZhciB0YWcgPSAocGFyc2VyLnRhZyA9IHsgbmFtZTogcGFyc2VyLnRhZ05hbWUsIGF0dHJpYnV0ZXM6IHt9IH0pO1xuICAgICAgICAvLyB3aWxsIGJlIG92ZXJyaWRkZW4gaWYgdGFnIGNvbnRhaWxzIGFuIHhtbG5zPVwiZm9vXCIgb3IgeG1sbnM6Zm9vPVwiYmFyXCJcbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHRhZy5ucyA9IHBhcmVudC5ucztcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwO1xuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnc3RhcnRcIiwgdGFnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcW5hbWUobmFtZSwgYXR0cmlidXRlKSB7XG4gICAgICAgIHZhciBpID0gbmFtZS5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgdmFyIHF1YWxOYW1lID0gaSA8IDAgPyBbXCJcIiwgbmFtZV0gOiBuYW1lLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lWzBdO1xuICAgICAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZVsxXTtcbiAgICAgICAgLy8gPHggXCJ4bWxuc1wiPVwiaHR0cDovL2Zvb1wiPlxuICAgICAgICBpZiAoYXR0cmlidXRlICYmIG5hbWUgPT09IFwieG1sbnNcIikge1xuICAgICAgICAgICAgcHJlZml4ID0gXCJ4bWxuc1wiO1xuICAgICAgICAgICAgbG9jYWwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHByZWZpeDogcHJlZml4LCBsb2NhbDogbG9jYWwgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXR0cmliKHBhcnNlcikge1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYk5hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLmF0dHJpYkxpc3QuaW5kZXhPZihwYXJzZXIuYXR0cmliTmFtZSkgIT09IC0xIHx8XG4gICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocGFyc2VyLmF0dHJpYk5hbWUpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci5hdHRyaWJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBwcmVmaXggPSBxbi5wcmVmaXg7XG4gICAgICAgICAgICB2YXIgbG9jYWwgPSBxbi5sb2NhbDtcbiAgICAgICAgICAgIGlmIChwcmVmaXggPT09IFwieG1sbnNcIikge1xuICAgICAgICAgICAgICAgIC8vIG5hbWVzcGFjZSBiaW5kaW5nIGF0dHJpYnV0ZS4gcHVzaCB0aGUgYmluZGluZyBpbnRvIHNjb3BlXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsID09PSBcInhtbFwiICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MX05BTUVTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJ4bWw6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFhNTF9OQU1FU1BBQ0UgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFjdHVhbDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobG9jYWwgPT09IFwieG1sbnNcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTE5TX05BTUVTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJ4bWxuczogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgWE1MTlNfTkFNRVNQQUNFICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY3R1YWw6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZy5ucyA9PT0gcGFyZW50Lm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWcubnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFnLm5zW2xvY2FsXSA9IHBhcnNlci5hdHRyaWJWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWZlciBvbmF0dHJpYnV0ZSBldmVudHMgdW50aWwgYWxsIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlZW5cbiAgICAgICAgICAgIC8vIHNvIGFueSBuZXcgYmluZGluZ3MgY2FuIHRha2UgZWZmZWN0LiBwcmVzZXJ2ZSBhdHRyaWJ1dGUgb3JkZXJcbiAgICAgICAgICAgIC8vIHNvIGRlZmVycmVkIGV2ZW50cyBjYW4gYmUgZW1pdHRlZCBpbiBkb2N1bWVudCBvcmRlclxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaW4gbm9uLXhtbG5zIG1vZGUsIHdlIGNhbiBlbWl0IHRoZSBldmVudCByaWdodCBhd2F5XG4gICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gcGFyc2VyLmF0dHJpYlZhbHVlO1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyc2VyLmF0dHJpYlZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvcGVuVGFnKHBhcnNlciwgc2VsZkNsb3NpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIC8vIGVtaXQgbmFtZXNwYWNlIGJpbmRpbmcgZXZlbnRzXG4gICAgICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZztcbiAgICAgICAgICAgIC8vIGFkZCBuYW1lc3BhY2UgaW5mbyB0byB0YWdcbiAgICAgICAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci50YWdOYW1lKTtcbiAgICAgICAgICAgIHRhZy5wcmVmaXggPSBxbi5wcmVmaXg7XG4gICAgICAgICAgICB0YWcubG9jYWwgPSBxbi5sb2NhbDtcbiAgICAgICAgICAgIHRhZy51cmkgPSB0YWcubnNbcW4ucHJlZml4XSB8fCBcIlwiO1xuICAgICAgICAgICAgaWYgKHRhZy5wcmVmaXggJiYgIXRhZy51cmkpIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiICsgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKTtcbiAgICAgICAgICAgICAgICB0YWcudXJpID0gcW4ucHJlZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgIGlmICh0YWcubnMgJiYgcGFyZW50Lm5zICE9PSB0YWcubnMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3Blbm5hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IHAsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IHRhZy5uc1twXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBoYW5kbGUgZGVmZXJyZWQgb25hdHRyaWJ1dGUgZXZlbnRzXG4gICAgICAgICAgICAvLyBOb3RlOiBkbyBub3QgYXBwbHkgZGVmYXVsdCBucyB0byBhdHRyaWJ1dGVzOlxuICAgICAgICAgICAgLy8gICBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLW5hbWVzLyNkZWZhdWx0aW5nXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBudiA9IHBhcnNlci5hdHRyaWJMaXN0W2ldO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbnZbMF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbnZbMV07XG4gICAgICAgICAgICAgICAgdmFyIHF1YWxOYW1lID0gcW5hbWUobmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lLnByZWZpeDtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZS5sb2NhbDtcbiAgICAgICAgICAgICAgICB2YXIgdXJpID0gcHJlZml4ID09PSBcIlwiID8gXCJcIiA6IHRhZy5uc1twcmVmaXhdIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsOiBsb2NhbCxcbiAgICAgICAgICAgICAgICAgICAgdXJpOiB1cmksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIGFueSBhdHRyaWJ1dGVzIHdpdGggYW4gdW5kZWZpbmVkIG5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAvLyB0aGVuIGZhaWwgb24gdGhlbSBub3cuXG4gICAgICAgICAgICAgICAgaWYgKHByZWZpeCAmJiBwcmVmaXggIT09IFwieG1sbnNcIiAmJiAhdXJpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuYm91bmQgbmFtZXNwYWNlIHByZWZpeDogXCIgKyBKU09OLnN0cmluZ2lmeShwcmVmaXgpKTtcbiAgICAgICAgICAgICAgICAgICAgYS51cmkgPSBwcmVmaXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1tuYW1lXSA9IGE7XG4gICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIudGFnLmlzU2VsZkNsb3NpbmcgPSAhIXNlbGZDbG9zaW5nO1xuICAgICAgICAvLyBwcm9jZXNzIHRoZSB0YWdcbiAgICAgICAgcGFyc2VyLnNhd1Jvb3QgPSB0cnVlO1xuICAgICAgICBwYXJzZXIudGFncy5wdXNoKHBhcnNlci50YWcpO1xuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnXCIsIHBhcnNlci50YWcpO1xuICAgICAgICBpZiAoIXNlbGZDbG9zaW5nKSB7XG4gICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxzY3JpcHQ+IGluIG5vbi1zdHJpY3QgbW9kZS5cbiAgICAgICAgICAgIGlmICghcGFyc2VyLm5vc2NyaXB0ICYmIHBhcnNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2NyaXB0XCIpIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci50YWcgPSBudWxsO1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIjtcbiAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2VUYWcocGFyc2VyKSB7XG4gICAgICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIldlaXJkIGVtcHR5IGNsb3NlIHRhZy5cIik7XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8Lz5cIjtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgaWYgKHBhcnNlci50YWdOYW1lICE9PSBcInNjcmlwdFwiKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZSArIFwiPlwiO1xuICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25zY3JpcHRcIiwgcGFyc2VyLnNjcmlwdCk7XG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXJzdCBtYWtlIHN1cmUgdGhhdCB0aGUgY2xvc2luZyB0YWcgYWN0dWFsbHkgZXhpc3RzLlxuICAgICAgICAvLyA8YT48Yj48L2M+PC9iPjwvYT4gd2lsbCBjbG9zZSBldmVyeXRoaW5nLCBvdGhlcndpc2UuXG4gICAgICAgIHZhciB0ID0gcGFyc2VyLnRhZ3MubGVuZ3RoO1xuICAgICAgICB2YXIgdGFnTmFtZSA9IHBhcnNlci50YWdOYW1lO1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsb3NlVG8gPSB0YWdOYW1lO1xuICAgICAgICB3aGlsZSAodC0tKSB7XG4gICAgICAgICAgICB2YXIgY2xvc2UgPSBwYXJzZXIudGFnc1t0XTtcbiAgICAgICAgICAgIGlmIChjbG9zZS5uYW1lICE9PSBjbG9zZVRvKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFpbCB0aGUgZmlyc3QgdGltZSBpbiBzdHJpY3QgbW9kZVxuICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuZXhwZWN0ZWQgY2xvc2UgdGFnXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlkbid0IGZpbmQgaXQuICB3ZSBhbHJlYWR5IGZhaWxlZCBmb3Igc3RyaWN0LCBzbyBqdXN0IGFib3J0LlxuICAgICAgICBpZiAodCA8IDApIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVubWF0Y2hlZCBjbG9zaW5nIHRhZzogXCIgKyBwYXJzZXIudGFnTmFtZSk7XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWUgKyBcIj5cIjtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIudGFnTmFtZSA9IHRhZ05hbWU7XG4gICAgICAgIHZhciBzID0gcGFyc2VyLnRhZ3MubGVuZ3RoO1xuICAgICAgICB3aGlsZSAocy0tID4gdCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IChwYXJzZXIudGFnID0gcGFyc2VyLnRhZ3MucG9wKCkpO1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnLm5hbWU7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZXRhZ1wiLCBwYXJzZXIudGFnTmFtZSk7XG4gICAgICAgICAgICB2YXIgeCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0YWcubnMpIHtcbiAgICAgICAgICAgICAgICB4W2ldID0gdGFnLm5zW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zICYmIHRhZy5ucyAhPT0gcGFyZW50Lm5zKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG5hbWVzcGFjZSBiaW5kaW5ncyBpbnRyb2R1Y2VkIGJ5IHRhZ1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRhZy5uc1twXTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2xvc2VuYW1lc3BhY2VcIiwgeyBwcmVmaXg6IHAsIHVyaTogbiB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodCA9PT0gMClcbiAgICAgICAgICAgIHBhcnNlci5jbG9zZWRSb290ID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZSA9IFwiXCI7XG4gICAgICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VFbnRpdHkocGFyc2VyKSB7XG4gICAgICAgIHZhciBlbnRpdHkgPSBwYXJzZXIuZW50aXR5O1xuICAgICAgICB2YXIgZW50aXR5TEMgPSBlbnRpdHkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIG51bTtcbiAgICAgICAgdmFyIG51bVN0ciA9IFwiXCI7XG4gICAgICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5XSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHkgPSBlbnRpdHlMQztcbiAgICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMCkgPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmNoYXJBdCgxKSA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMik7XG4gICAgICAgICAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxNik7XG4gICAgICAgICAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudGl0eSA9IGVudGl0eS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDEwKTtcbiAgICAgICAgICAgICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVudGl0eSA9IGVudGl0eS5yZXBsYWNlKC9eMCsvLCBcIlwiKTtcbiAgICAgICAgaWYgKGlzTmFOKG51bSkgfHwgbnVtU3RyLnRvTG93ZXJDYXNlKCkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgZW50aXR5XCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiJlwiICsgcGFyc2VyLmVudGl0eSArIFwiO1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChudW0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKSB7XG4gICAgICAgIGlmIChjID09PSBcIjxcIikge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0E7XG4gICAgICAgICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAvLyBoYXZlIHRvIHByb2Nlc3MgdGhpcyBhcyBhIHRleHQgbm9kZS5cbiAgICAgICAgICAgIC8vIHdlaXJkLCBidXQgaGFwcGVucy5cbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIk5vbi13aGl0ZXNwYWNlIGJlZm9yZSBmaXJzdCB0YWcuXCIpO1xuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlID0gYztcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFyQXQoY2h1bmssIGkpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGlmIChpIDwgY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjaHVuay5jaGFyQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JpdGUoY2h1bmspIHtcbiAgICAgICAgdmFyIHBhcnNlciA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IocGFyc2VyLCBcIkNhbm5vdCB3cml0ZSBhZnRlciBjbG9zZS4gQXNzaWduIGFuIG9ucmVhZHkgaGFuZGxlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5kKHBhcnNlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY2h1bmsgPSBjaHVuay50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGMgPSBcIlwiO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKTtcbiAgICAgICAgICAgIHBhcnNlci5jID0gYztcbiAgICAgICAgICAgIGlmICghYykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUrKztcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChwYXJzZXIuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQkVHSU46XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQkVHSU5fV0hJVEVTUEFDRTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXFx1RkVGRlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkJFR0lOX1dISVRFU1BBQ0U6XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0aSA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGMgJiYgYyAhPT0gXCI8XCIgJiYgYyAhPT0gXCImXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gY2hhckF0KGNodW5rLCBpKyspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICYmIHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IGNodW5rLnN1YnN0cmluZyhzdGFydGksIGkgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI8XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEocGFyc2VyLnNhd1Jvb3QgJiYgcGFyc2VyLmNsb3NlZFJvb3QgJiYgIXBhcnNlci5zdHJpY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykgJiYgKCFwYXJzZXIuc2F3Um9vdCB8fCBwYXJzZXIuY2xvc2VkUm9vdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJUZXh0IGRhdGEgb3V0c2lkZSBvZiByb290IG5vZGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiJlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUX0VOVElUWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5TQ1JJUFQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgbm9uLXN0cmljdFxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuU0NSSVBUX0VORElORzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBRztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gXCI8XCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLk9QRU5fV0FLQTpcbiAgICAgICAgICAgICAgICAgICAgLy8gZWl0aGVyIGEgLywgPywgISwgb3IgdGV4dCBpcyBjb21pbmcgbmV4dC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiIVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGZvciBpdC4uLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBRztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI/XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5lbmNvZGVkIDxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgc29tZSB3aGl0ZXNwYWNlLCB0aGVuIGFkZCB0aGF0IGluLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uICsgMSA8IHBhcnNlci5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWQgPSBwYXJzZXIucG9zaXRpb24gLSBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbmV3IEFycmF5KHBhZCkuam9pbihcIiBcIikgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IFwiPFwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuU0dNTF9ERUNMOlxuICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IENEQVRBKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVuY2RhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VyLnNnbWxEZWNsICsgYyA9PT0gXCItLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwYXJzZXIuc2dtbERlY2wgKyBjKS50b1VwcGVyQ2FzZSgpID09PSBET0NUWVBFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmRvY3R5cGUgfHwgcGFyc2VyLnNhd1Jvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2dtbGRlY2xhcmF0aW9uXCIsIHBhcnNlci5zZ21sRGVjbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlNHTUxfREVDTF9RVU9URUQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0w7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5ET0NUWVBFOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmRvY3R5cGVcIiwgcGFyc2VyLmRvY3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSB0cnVlOyAvLyBqdXN0IHJlbWVtYmVyIHRoYXQgd2Ugc2F3IGl0LlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIltcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVEQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkRPQ1RZUEVfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuRE9DVFlQRV9EVEQ6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5ET0NUWVBFX0RURF9RVU9URUQ6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ESU5HO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VOREVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIuY29tbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jb21tZW50XCIsIHBhcnNlci5jb21tZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9IFwiLVwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgIT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJNYWxmb3JtZWQgY29tbWVudFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IDwhLS0gYmxhaCAtLSBibG9vIC0tPiBpbiBub24tc3RyaWN0IG1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBpcyBhIGNvbW1lbnQgb2YgXCIgYmxhaCAtLSBibG9vIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSBcIi0tXCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdfMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBcIl1cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmNkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2RhdGFcIiwgcGFyc2VyLmNkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNsb3NlY2RhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXVwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlBST0NfSU5TVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiP1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5QUk9DX0lOU1RfQk9EWTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXIucHJvY0luc3RCb2R5ICYmIGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI/XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0VORElORzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25wcm9jZXNzaW5naW5zdHJ1Y3Rpb25cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5wcm9jSW5zdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogcGFyc2VyLnByb2NJbnN0Qm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0Qm9keSArPSBcIj9cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5PUEVOX1RBRzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0g7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGNoYXJhY3RlciBpbiB0YWcgbmFtZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLk9QRU5fVEFHX1NMQVNIOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJGb3J3YXJkLXNsYXNoIGluIG9wZW5pbmcgdGFnIG5vdCBmb2xsb3dlZCBieSA+XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQjpcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZW4ndCByZWFkIHRoZSBhdHRyaWJ1dGUgbmFtZSB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCIvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0g7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJBdHRyaWJ1dGUgd2l0aG91dCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IHBhcnNlci5hdHRyaWJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiQXR0cmlidXRlIHdpdGhvdXQgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25hdHRyaWJ1dGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5hdHRyaWJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyAhPT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIiZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9RO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRyaWIocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9DTE9TRUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfQ0xPU0VEOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiTm8gd2hpdGVzcGFjZSBiZXR3ZWVuIGF0dHJpYnV0ZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0F0dHJpYkVuZChjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiJlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYihwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DTE9TRV9UQUc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdE1hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIHRhZ25hbWUgaW4gY2xvc2luZyB0YWdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR19TQVdfV0hJVEU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkNMT1NFX1RBR19TQVdfV0hJVEU6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVycyBpbiBjbG9zaW5nIHRhZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJ0ZXh0Tm9kZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBcImF0dHJpYlZhbHVlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJhdHRyaWJWYWx1ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIjtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5vcHQudW5wYXJzZWRFbnRpdGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZWRFbnRpdHkgPSBwYXJzZUVudGl0eShwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci53cml0ZShwYXJzZWRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gcGFyc2VFbnRpdHkocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKHBhcnNlci5lbnRpdHkubGVuZ3RoID8gZW50aXR5Qm9keSA6IGVudGl0eVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmVudGl0eSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgaW4gZW50aXR5IG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJbYnVmZmVyXSArPSBcIiZcIiArIHBhcnNlci5lbnRpdHkgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmVudGl0eSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihwYXJzZXIsIFwiVW5rbm93biBzdGF0ZTogXCIgKyBwYXJzZXIuc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAvLyB3aGlsZVxuICAgICAgICBpZiAocGFyc2VyLnBvc2l0aW9uID49IHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICBjaGVja0J1ZmZlckxlbmd0aChwYXJzZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZXI7XG4gICAgfVxuICAgIC8qISBodHRwOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjEuMCBieSBAbWF0aGlhcyAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKCFTdHJpbmcuZnJvbUNvZGVQb2ludCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG4gICAgICAgICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuICAgICAgICAgICAgdmFyIGZyb21Db2RlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1BWF9TSVpFID0gMHg0MDAwO1xuICAgICAgICAgICAgICAgIHZhciBjb2RlVW5pdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaGlnaFN1cnJvZ2F0ZTtcbiAgICAgICAgICAgICAgICB2YXIgbG93U3Vycm9nYXRlO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gTnVtYmVyKGFyZ3VtZW50c1tpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGNvZGVQb2ludCkgfHwgLy8gYE5hTmAsIGArSW5maW5pdHlgLCBvciBgLUluZmluaXR5YFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50IDwgMCB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA+IDB4MTBmZmZmIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3IoY29kZVBvaW50KSAhPT0gY29kZVBvaW50IC8vIG5vdCBhbiBpbnRlZ2VyXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcihcIkludmFsaWQgY29kZSBwb2ludDogXCIgKyBjb2RlUG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCTVAgY29kZSBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzdHJhbCBjb2RlIHBvaW50OyBzcGxpdCBpbiBzdXJyb2dhdGUgaGFsdmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdoU3Vycm9nYXRlID0gKGNvZGVQb2ludCA+PiAxMCkgKyAweGQ4MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dTdXJyb2dhdGUgPSAoY29kZVBvaW50ICUgMHg0MDApICsgMHhkYzAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goaGlnaFN1cnJvZ2F0ZSwgbG93U3Vycm9nYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNvZGVVbml0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlVW5pdHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZywgXCJmcm9tQ29kZVBvaW50XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZyb21Db2RlUG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBTdHJpbmcuZnJvbUNvZGVQb2ludCA9IGZyb21Db2RlUG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIHJldHVybiBzYXg7XG59O1xuY29uc3Qgc2F4ID0gLyoqICNfX1BVUkVfXyAqLyBpbml0aWFsaXplU2F4KCk7XG5leHBvcnQgeyBzYXggfTtcbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplU2F4Iiwic2F4IiwicGFyc2VyIiwic3RyaWN0Iiwib3B0IiwiU0FYUGFyc2VyIiwiU0FYU3RyZWFtIiwiY3JlYXRlU3RyZWFtIiwiTUFYX0JVRkZFUl9MRU5HVEgiLCJidWZmZXJzIiwiRVZFTlRTIiwiY2xlYXJCdWZmZXJzIiwicSIsImMiLCJidWZmZXJDaGVja1Bvc2l0aW9uIiwibG93ZXJjYXNlIiwibG93ZXJjYXNldGFncyIsImxvb3NlQ2FzZSIsInRhZ3MiLCJjbG9zZWQiLCJjbG9zZWRSb290Iiwic2F3Um9vdCIsInRhZyIsImVycm9yIiwibm9zY3JpcHQiLCJzdGF0ZSIsIlMiLCJCRUdJTiIsInN0cmljdEVudGl0aWVzIiwiRU5USVRJRVMiLCJPYmplY3QiLCJjcmVhdGUiLCJYTUxfRU5USVRJRVMiLCJhdHRyaWJMaXN0IiwieG1sbnMiLCJucyIsInJvb3ROUyIsInRyYWNrUG9zaXRpb24iLCJwb3NpdGlvbiIsImxpbmUiLCJjb2x1bW4iLCJlbWl0IiwibyIsIkYiLCJwcm90b3R5cGUiLCJuZXdmIiwia2V5cyIsImEiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiY2hlY2tCdWZmZXJMZW5ndGgiLCJtYXhBbGxvd2VkIiwiTWF0aCIsIm1heCIsIm1heEFjdHVhbCIsImwiLCJsZW5ndGgiLCJsZW4iLCJjbG9zZVRleHQiLCJlbWl0Tm9kZSIsImNkYXRhIiwic2NyaXB0IiwibSIsImZsdXNoQnVmZmVycyIsImVuZCIsIndyaXRlIiwicmVzdW1lIiwiY2xvc2UiLCJmbHVzaCIsIlN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RyZWFtV3JhcHMiLCJmaWx0ZXIiLCJldiIsImFwcGx5IiwiX3BhcnNlciIsIndyaXRhYmxlIiwicmVhZGFibGUiLCJtZSIsIm9uZW5kIiwib25lcnJvciIsImVyIiwiX2RlY29kZXIiLCJmb3JFYWNoIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJzZXQiLCJoIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImRhdGEiLCJ0b1N0cmluZyIsImNodW5rIiwiaGFuZGxlciIsImluZGV4T2YiLCJhcmdzIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJzcGxpY2UiLCJjYWxsIiwiQ0RBVEEiLCJET0NUWVBFIiwiWE1MX05BTUVTUEFDRSIsIlhNTE5TX05BTUVTUEFDRSIsInhtbCIsIm5hbWVTdGFydCIsIm5hbWVCb2R5IiwiZW50aXR5U3RhcnQiLCJlbnRpdHlCb2R5IiwiaXNXaGl0ZXNwYWNlIiwiaXNRdW90ZSIsImlzQXR0cmliRW5kIiwiaXNNYXRjaCIsInJlZ2V4IiwidGVzdCIsIm5vdE1hdGNoIiwiU1RBVEUiLCJCRUdJTl9XSElURVNQQUNFIiwiVEVYVCIsIlRFWFRfRU5USVRZIiwiT1BFTl9XQUtBIiwiU0dNTF9ERUNMIiwiU0dNTF9ERUNMX1FVT1RFRCIsIkRPQ1RZUEVfUVVPVEVEIiwiRE9DVFlQRV9EVEQiLCJET0NUWVBFX0RURF9RVU9URUQiLCJDT01NRU5UX1NUQVJUSU5HIiwiQ09NTUVOVCIsIkNPTU1FTlRfRU5ESU5HIiwiQ09NTUVOVF9FTkRFRCIsIkNEQVRBX0VORElORyIsIkNEQVRBX0VORElOR18yIiwiUFJPQ19JTlNUIiwiUFJPQ19JTlNUX0JPRFkiLCJQUk9DX0lOU1RfRU5ESU5HIiwiT1BFTl9UQUciLCJPUEVOX1RBR19TTEFTSCIsIkFUVFJJQiIsIkFUVFJJQl9OQU1FIiwiQVRUUklCX05BTUVfU0FXX1dISVRFIiwiQVRUUklCX1ZBTFVFIiwiQVRUUklCX1ZBTFVFX1FVT1RFRCIsIkFUVFJJQl9WQUxVRV9DTE9TRUQiLCJBVFRSSUJfVkFMVUVfVU5RVU9URUQiLCJBVFRSSUJfVkFMVUVfRU5USVRZX1EiLCJBVFRSSUJfVkFMVUVfRU5USVRZX1UiLCJDTE9TRV9UQUciLCJDTE9TRV9UQUdfU0FXX1dISVRFIiwiU0NSSVBUIiwiU0NSSVBUX0VORElORyIsImFtcCIsImd0IiwibHQiLCJxdW90IiwiYXBvcyIsIkFFbGlnIiwiQWFjdXRlIiwiQWNpcmMiLCJBZ3JhdmUiLCJBcmluZyIsIkF0aWxkZSIsIkF1bWwiLCJDY2VkaWwiLCJFVEgiLCJFYWN1dGUiLCJFY2lyYyIsIkVncmF2ZSIsIkV1bWwiLCJJYWN1dGUiLCJJY2lyYyIsIklncmF2ZSIsIkl1bWwiLCJOdGlsZGUiLCJPYWN1dGUiLCJPY2lyYyIsIk9ncmF2ZSIsIk9zbGFzaCIsIk90aWxkZSIsIk91bWwiLCJUSE9STiIsIlVhY3V0ZSIsIlVjaXJjIiwiVWdyYXZlIiwiVXVtbCIsIllhY3V0ZSIsImFhY3V0ZSIsImFjaXJjIiwiYWVsaWciLCJhZ3JhdmUiLCJhcmluZyIsImF0aWxkZSIsImF1bWwiLCJjY2VkaWwiLCJlYWN1dGUiLCJlY2lyYyIsImVncmF2ZSIsImV0aCIsImV1bWwiLCJpYWN1dGUiLCJpY2lyYyIsImlncmF2ZSIsIml1bWwiLCJudGlsZGUiLCJvYWN1dGUiLCJvY2lyYyIsIm9ncmF2ZSIsIm9zbGFzaCIsIm90aWxkZSIsIm91bWwiLCJzemxpZyIsInRob3JuIiwidWFjdXRlIiwidWNpcmMiLCJ1Z3JhdmUiLCJ1dW1sIiwieWFjdXRlIiwieXVtbCIsImNvcHkiLCJyZWciLCJuYnNwIiwiaWV4Y2wiLCJjZW50IiwicG91bmQiLCJjdXJyZW4iLCJ5ZW4iLCJicnZiYXIiLCJzZWN0IiwidW1sIiwib3JkZiIsImxhcXVvIiwibm90Iiwic2h5IiwibWFjciIsImRlZyIsInBsdXNtbiIsInN1cDEiLCJzdXAyIiwic3VwMyIsImFjdXRlIiwibWljcm8iLCJwYXJhIiwibWlkZG90IiwiY2VkaWwiLCJvcmRtIiwicmFxdW8iLCJmcmFjMTQiLCJmcmFjMTIiLCJmcmFjMzQiLCJpcXVlc3QiLCJ0aW1lcyIsImRpdmlkZSIsIk9FbGlnIiwib2VsaWciLCJTY2Fyb24iLCJzY2Fyb24iLCJZdW1sIiwiZm5vZiIsImNpcmMiLCJ0aWxkZSIsIkFscGhhIiwiQmV0YSIsIkdhbW1hIiwiRGVsdGEiLCJFcHNpbG9uIiwiWmV0YSIsIkV0YSIsIlRoZXRhIiwiSW90YSIsIkthcHBhIiwiTGFtYmRhIiwiTXUiLCJOdSIsIlhpIiwiT21pY3JvbiIsIlBpIiwiUmhvIiwiU2lnbWEiLCJUYXUiLCJVcHNpbG9uIiwiUGhpIiwiQ2hpIiwiUHNpIiwiT21lZ2EiLCJhbHBoYSIsImJldGEiLCJnYW1tYSIsImRlbHRhIiwiZXBzaWxvbiIsInpldGEiLCJldGEiLCJ0aGV0YSIsImlvdGEiLCJrYXBwYSIsImxhbWJkYSIsIm11IiwibnUiLCJ4aSIsIm9taWNyb24iLCJwaSIsInJobyIsInNpZ21hZiIsInNpZ21hIiwidGF1IiwidXBzaWxvbiIsInBoaSIsImNoaSIsInBzaSIsIm9tZWdhIiwidGhldGFzeW0iLCJ1cHNpaCIsInBpdiIsImVuc3AiLCJlbXNwIiwidGhpbnNwIiwienduaiIsInp3aiIsImxybSIsInJsbSIsIm5kYXNoIiwibWRhc2giLCJsc3F1byIsInJzcXVvIiwic2JxdW8iLCJsZHF1byIsInJkcXVvIiwiYmRxdW8iLCJkYWdnZXIiLCJEYWdnZXIiLCJidWxsIiwiaGVsbGlwIiwicGVybWlsIiwicHJpbWUiLCJQcmltZSIsImxzYXF1byIsInJzYXF1byIsIm9saW5lIiwiZnJhc2wiLCJldXJvIiwiaW1hZ2UiLCJ3ZWllcnAiLCJyZWFsIiwidHJhZGUiLCJhbGVmc3ltIiwibGFyciIsInVhcnIiLCJyYXJyIiwiZGFyciIsImhhcnIiLCJjcmFyciIsImxBcnIiLCJ1QXJyIiwickFyciIsImRBcnIiLCJoQXJyIiwiZm9yYWxsIiwicGFydCIsImV4aXN0IiwiZW1wdHkiLCJuYWJsYSIsImlzaW4iLCJub3RpbiIsIm5pIiwicHJvZCIsInN1bSIsIm1pbnVzIiwibG93YXN0IiwicmFkaWMiLCJwcm9wIiwiaW5maW4iLCJhbmciLCJhbmQiLCJvciIsImNhcCIsImN1cCIsImludCIsInRoZXJlNCIsInNpbSIsImNvbmciLCJhc3ltcCIsIm5lIiwiZXF1aXYiLCJsZSIsImdlIiwic3ViIiwic3VwIiwibnN1YiIsInN1YmUiLCJzdXBlIiwib3BsdXMiLCJvdGltZXMiLCJwZXJwIiwic2RvdCIsImxjZWlsIiwicmNlaWwiLCJsZmxvb3IiLCJyZmxvb3IiLCJsYW5nIiwicmFuZyIsImxveiIsInNwYWRlcyIsImNsdWJzIiwiaGVhcnRzIiwiZGlhbXMiLCJrZXkiLCJlIiwicyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImV2ZW50Iiwibm9kZVR5cGUiLCJ0ZXh0Tm9kZSIsInRleHRvcHRzIiwidGV4dCIsInRyaW0iLCJub3JtYWxpemUiLCJyZXBsYWNlIiwiRXJyb3IiLCJzdHJpY3RGYWlsIiwibWVzc2FnZSIsIm5ld1RhZyIsInRhZ05hbWUiLCJwYXJlbnQiLCJuYW1lIiwiYXR0cmlidXRlcyIsInFuYW1lIiwiYXR0cmlidXRlIiwicXVhbE5hbWUiLCJzcGxpdCIsInByZWZpeCIsImxvY2FsIiwiYXR0cmliIiwiYXR0cmliTmFtZSIsImF0dHJpYlZhbHVlIiwicW4iLCJvcGVuVGFnIiwic2VsZkNsb3NpbmciLCJ1cmkiLCJKU09OIiwic3RyaW5naWZ5IiwicCIsIm52IiwiaXNTZWxmQ2xvc2luZyIsInRvTG93ZXJDYXNlIiwiY2xvc2VUYWciLCJ0IiwiY2xvc2VUbyIsInBvcCIsIngiLCJuIiwicGFyc2VFbnRpdHkiLCJlbnRpdHkiLCJlbnRpdHlMQyIsIm51bSIsIm51bVN0ciIsImNoYXJBdCIsInNsaWNlIiwicGFyc2VJbnQiLCJpc05hTiIsImZyb21Db2RlUG9pbnQiLCJiZWdpbldoaXRlU3BhY2UiLCJzdGFydFRhZ1Bvc2l0aW9uIiwicmVzdWx0Iiwic3RhcnRpIiwic3Vic3RyaW5nIiwic2dtbERlY2wiLCJwcm9jSW5zdE5hbWUiLCJwcm9jSW5zdEJvZHkiLCJwYWQiLCJqb2luIiwidG9VcHBlckNhc2UiLCJjb21tZW50IiwiZG9jdHlwZSIsImJvZHkiLCJyZXR1cm5TdGF0ZSIsImJ1ZmZlciIsInVucGFyc2VkRW50aXRpZXMiLCJwYXJzZWRFbnRpdHkiLCJzdHJpbmdGcm9tQ2hhckNvZGUiLCJmbG9vciIsIk1BWF9TSVpFIiwiY29kZVVuaXRzIiwiaGlnaFN1cnJvZ2F0ZSIsImxvd1N1cnJvZ2F0ZSIsImluZGV4IiwiY29kZVBvaW50IiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJSYW5nZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/signal.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/signal.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   raceWithSignal: () => (/* binding */ raceWithSignal)\n/* harmony export */ });\nasync function raceWithSignal(promise, signal) {\n    if (signal === undefined) {\n        return promise;\n    }\n    let listener;\n    return Promise.race([\n        promise.catch((err)=>{\n            if (!signal?.aborted) {\n                throw err;\n            } else {\n                return undefined;\n            }\n        }),\n        new Promise((_, reject)=>{\n            listener = ()=>{\n                reject(new Error(\"Aborted\"));\n            };\n            signal.addEventListener(\"abort\", listener);\n            // Must be here inside the promise to avoid a race condition\n            if (signal.aborted) {\n                reject(new Error(\"Aborted\"));\n            }\n        })\n    ]).finally(()=>signal.removeEventListener(\"abort\", listener));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2lnbmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxlQUFlQSxlQUFlQyxPQUFPLEVBQUVDLE1BQU07SUFDaEQsSUFBSUEsV0FBV0MsV0FBVztRQUN0QixPQUFPRjtJQUNYO0lBQ0EsSUFBSUc7SUFDSixPQUFPQyxRQUFRQyxJQUFJLENBQUM7UUFDaEJMLFFBQVFNLEtBQUssQ0FBQyxDQUFDQztZQUNYLElBQUksQ0FBQ04sUUFBUU8sU0FBUztnQkFDbEIsTUFBTUQ7WUFDVixPQUNLO2dCQUNELE9BQU9MO1lBQ1g7UUFDSjtRQUNBLElBQUlFLFFBQVEsQ0FBQ0ssR0FBR0M7WUFDWlAsV0FBVztnQkFDUE8sT0FBTyxJQUFJQyxNQUFNO1lBQ3JCO1lBQ0FWLE9BQU9XLGdCQUFnQixDQUFDLFNBQVNUO1lBQ2pDLDREQUE0RDtZQUM1RCxJQUFJRixPQUFPTyxPQUFPLEVBQUU7Z0JBQ2hCRSxPQUFPLElBQUlDLE1BQU07WUFDckI7UUFDSjtLQUNILEVBQUVFLE9BQU8sQ0FBQyxJQUFNWixPQUFPYSxtQkFBbUIsQ0FBQyxTQUFTWDtBQUN6RCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zaWduYWwuanM/MjkwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgc2lnbmFsKSB7XG4gICAgaWYgKHNpZ25hbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBsZXQgbGlzdGVuZXI7XG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgIHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKCFzaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0ZWRcIikpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgLy8gTXVzdCBiZSBoZXJlIGluc2lkZSB0aGUgcHJvbWlzZSB0byBhdm9pZCBhIHJhY2UgY29uZGl0aW9uXG4gICAgICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQWJvcnRlZFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgIF0pLmZpbmFsbHkoKCkgPT4gc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcikpO1xufVxuIl0sIm5hbWVzIjpbInJhY2VXaXRoU2lnbmFsIiwicHJvbWlzZSIsInNpZ25hbCIsInVuZGVmaW5lZCIsImxpc3RlbmVyIiwiUHJvbWlzZSIsInJhY2UiLCJjYXRjaCIsImVyciIsImFib3J0ZWQiLCJfIiwicmVqZWN0IiwiRXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZmluYWxseSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _signal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./signal.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/signal.js\");\n\n\n\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(params){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"signal\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = params.generator;\n        this.config = params.config;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.signal = params.signal ?? this.config?.signal;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)(params.config), async ()=>{\n                this.firstResult = params.generator.next();\n                if (params.startSetup) {\n                    this.firstResult.then(params.startSetup).then(resolve, reject);\n                } else {\n                    this.firstResult.then((_result)=>resolve(undefined), reject);\n                }\n            }, true);\n        });\n    }\n    async next(...args) {\n        this.signal?.throwIfAborted();\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.runWithConfig((0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)(this.config), this.signal ? async ()=>{\n            return (0,_signal_js__WEBPACK_IMPORTED_MODULE_2__.raceWithSignal)(this.generator.next(...args), this.signal);\n        } : async ()=>{\n            return this.generator.next(...args);\n        }, true);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, signal, ...args) {\n    const gen = new AsyncGeneratorWithSetup({\n        generator,\n        startSetup,\n        signal\n    });\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdFO0FBQ1k7QUFDL0I7QUFDN0M7OztDQUdDLEdBQ00sTUFBTUcsK0JBQStCQztJQUN4Q0MsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNQyxPQUFPO1FBQ1QsSUFBSSxDQUFDSCxZQUFZO1FBQ2pCLElBQUk7WUFDQSxNQUFNSSxTQUFTLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLElBQUk7WUFDckMsSUFBSUQsT0FBT0UsSUFBSSxFQUFFO2dCQUNiLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxXQUFXLElBQUksMENBQTBDO2dCQUNyRSxPQUFPO29CQUNIRCxNQUFNO29CQUNOUCxPQUFPUztnQkFDWDtZQUNKLE9BQ0s7Z0JBQ0QsT0FBTztvQkFDSEYsTUFBTTtvQkFDTlAsT0FBT0ssT0FBT0wsS0FBSztnQkFDdkI7WUFDSjtRQUNKLEVBQ0EsT0FBT1UsR0FBRztZQUNOLElBQUksQ0FBQ1IsTUFBTSxDQUFDTSxXQUFXLElBQUksMkNBQTJDO1lBQ3RFLE1BQU1FO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFNBQVM7UUFDWCxJQUFJLENBQUNWLFlBQVk7UUFDakIseURBQXlEO1FBQ3pELElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFDWixNQUFNLENBQUNNLFdBQVcsSUFBSSxxQkFBcUI7WUFDaEQsTUFBTUssZUFBZSxlQUFlO1FBQ3hDO1FBQ0EsT0FBTztZQUFFTixNQUFNO1lBQU1QLE9BQU9TO1FBQVU7SUFDMUM7SUFDQSw4REFBOEQ7SUFDOUQsTUFBTU0sTUFBTUwsQ0FBQyxFQUFFO1FBQ1gsSUFBSSxDQUFDVCxZQUFZO1FBQ2pCLElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFDWixNQUFNLENBQUNNLFdBQVcsSUFBSSxxQkFBcUI7WUFDaEQsTUFBTUssZUFBZSxlQUFlO1FBQ3hDO1FBQ0EsTUFBTUg7SUFDVjtJQUNBLENBQUNNLE9BQU9DLGFBQWEsQ0FBQyxHQUFHO1FBQ3JCLE9BQU8sSUFBSTtJQUNmO0lBQ0EsNkRBQTZEO0lBQzdELHNFQUFzRTtJQUN0RSxNQUFNLENBQUNELE9BQU9FLFlBQVksQ0FBQyxHQUFHO1FBQzFCLE1BQU0sSUFBSSxDQUFDUCxNQUFNO0lBQ3JCO0lBQ0EsT0FBT1EsbUJBQW1CQyxNQUFNLEVBQUU7UUFDOUIsOEdBQThHO1FBQzlHLE1BQU1sQixTQUFTa0IsT0FBT2pCLFNBQVM7UUFDL0IsT0FBTyxJQUFJWix1QkFBdUI7WUFDOUI4QixPQUFNQyxVQUFVO2dCQUNaLE9BQU9DO2dCQUNQLFNBQVNBO29CQUNMLE9BQU9yQixPQUFPSSxJQUFJLEdBQUdrQixJQUFJLENBQUMsQ0FBQyxFQUFFakIsSUFBSSxFQUFFUCxLQUFLLEVBQUU7d0JBQ3RDLDJEQUEyRDt3QkFDM0QsSUFBSU8sTUFBTTs0QkFDTmUsV0FBV0csS0FBSzs0QkFDaEI7d0JBQ0o7d0JBQ0EscURBQXFEO3dCQUNyREgsV0FBV0ksT0FBTyxDQUFDMUI7d0JBQ25CLE9BQU91QjtvQkFDWDtnQkFDSjtZQUNKO1lBQ0FUO2dCQUNJWixPQUFPTSxXQUFXO1lBQ3RCO1FBQ0o7SUFDSjtJQUNBLE9BQU9tQixtQkFBbUJDLFNBQVMsRUFBRTtRQUNqQyxPQUFPLElBQUlyQyx1QkFBdUI7WUFDOUIsTUFBTXNDLE1BQUtQLFVBQVU7Z0JBQ2pCLE1BQU0sRUFBRXRCLEtBQUssRUFBRU8sSUFBSSxFQUFFLEdBQUcsTUFBTXFCLFVBQVV4QixJQUFJO2dCQUM1QywyREFBMkQ7Z0JBQzNELElBQUlHLE1BQU07b0JBQ05lLFdBQVdHLEtBQUs7Z0JBQ3BCO2dCQUNBLGtHQUFrRztnQkFDbEdILFdBQVdJLE9BQU8sQ0FBQzFCO1lBQ3ZCO1lBQ0EsTUFBTWMsUUFBT2dCLE1BQU07Z0JBQ2YsTUFBTUYsVUFBVWpCLE1BQU0sQ0FBQ21CO1lBQzNCO1FBQ0o7SUFDSjtBQUNKO0FBQ08sU0FBU0MsS0FBS0MsSUFBSSxFQUFFQyxTQUFTLENBQUM7SUFDakMsTUFBTUMsVUFBVUMsTUFBTUMsSUFBSSxDQUFDO1FBQUVIO0lBQU8sR0FBRyxJQUFNLEVBQUU7SUFDL0MsT0FBT0MsUUFBUUcsR0FBRyxDQUFDLGdCQUFnQkMsU0FBU0MsTUFBTTtRQUM5QyxNQUFPLEtBQU07WUFDVCxJQUFJQSxPQUFPTixNQUFNLEtBQUssR0FBRztnQkFDckIsTUFBTTVCLFNBQVMsTUFBTTJCLEtBQUs1QixJQUFJO2dCQUM5QixLQUFLLE1BQU1tQyxVQUFVTCxRQUFTO29CQUMxQkssT0FBT0MsSUFBSSxDQUFDbkM7Z0JBQ2hCO1lBQ0osT0FDSyxJQUFJa0MsTUFBTSxDQUFDLEVBQUUsQ0FBQ2hDLElBQUksRUFBRTtnQkFDckI7WUFDSixPQUNLO2dCQUNELG9FQUFvRTtnQkFDcEUsTUFBTWdDLE9BQU9FLEtBQUssR0FBR3pDLEtBQUs7WUFDOUI7UUFDSjtJQUNKO0FBQ0o7QUFDTyxTQUFTMEMsT0FBT0MsS0FBSyxFQUFFQyxNQUFNO0lBQ2hDLElBQUlULE1BQU1VLE9BQU8sQ0FBQ0YsVUFBVVIsTUFBTVUsT0FBTyxDQUFDRCxTQUFTO1FBQy9DLE9BQU9ELE1BQU1ELE1BQU0sQ0FBQ0U7SUFDeEIsT0FDSyxJQUFJLE9BQU9ELFVBQVUsWUFBWSxPQUFPQyxXQUFXLFVBQVU7UUFDOUQsT0FBUUQsUUFBUUM7SUFDcEIsT0FDSyxJQUFJLE9BQU9ELFVBQVUsWUFBWSxPQUFPQyxXQUFXLFVBQVU7UUFDOUQsT0FBUUQsUUFBUUM7SUFDcEIsT0FDSyxJQUNMLDhEQUE4RDtJQUM5RCxZQUFZRCxTQUNSLDhEQUE4RDtJQUM5RCxPQUFPQSxNQUFNRCxNQUFNLEtBQUssWUFBWTtRQUNwQyw4REFBOEQ7UUFDOUQsT0FBT0MsTUFBTUQsTUFBTSxDQUFDRTtJQUN4QixPQUNLLElBQUksT0FBT0QsVUFBVSxZQUFZLE9BQU9DLFdBQVcsVUFBVTtRQUM5RCw4REFBOEQ7UUFDOUQsTUFBTUUsUUFBUTtZQUFFLEdBQUdILEtBQUs7UUFBQztRQUN6Qiw4REFBOEQ7UUFDOUQsS0FBSyxNQUFNLENBQUNJLEtBQUsvQyxNQUFNLElBQUlMLE9BQU9xRCxPQUFPLENBQUNKLFFBQVM7WUFDL0MsSUFBSUcsT0FBT0QsU0FBUyxDQUFDWCxNQUFNVSxPQUFPLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxHQUFHO2dCQUM1Q0QsS0FBSyxDQUFDQyxJQUFJLEdBQUdMLE9BQU9JLEtBQUssQ0FBQ0MsSUFBSSxFQUFFL0M7WUFDcEMsT0FDSztnQkFDRDhDLEtBQUssQ0FBQ0MsSUFBSSxHQUFHL0M7WUFDakI7UUFDSjtRQUNBLE9BQU84QztJQUNYLE9BQ0s7UUFDRCxNQUFNLElBQUlHLE1BQU0sQ0FBQyxjQUFjLEVBQUUsT0FBT04sTUFBTSxLQUFLLEVBQUUsT0FBT0MsT0FBTyxDQUFDO0lBQ3hFO0FBQ0o7QUFDTyxNQUFNTTtJQUNUekQsWUFBWTBELE1BQU0sQ0FBRTtRQUNoQnhELE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUM0QixTQUFTLEdBQUd1QixPQUFPdkIsU0FBUztRQUNqQyxJQUFJLENBQUN3QixNQUFNLEdBQUdELE9BQU9DLE1BQU07UUFDM0IsOERBQThEO1FBQzlELElBQUksQ0FBQ0MsTUFBTSxHQUFHRixPQUFPRSxNQUFNLElBQUksSUFBSSxDQUFDRCxNQUFNLEVBQUVDO1FBQzVDLHVFQUF1RTtRQUN2RSxzRUFBc0U7UUFDdEUsdUVBQXVFO1FBQ3ZFLGtDQUFrQztRQUNsQyxJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQy9CLEtBQUtwRSxvRkFBa0NBLENBQUNxRSxhQUFhLENBQUN0RSw0RUFBc0JBLENBQUMrRCxPQUFPQyxNQUFNLEdBQUc7Z0JBQ3pGLElBQUksQ0FBQ08sV0FBVyxHQUFHUixPQUFPdkIsU0FBUyxDQUFDeEIsSUFBSTtnQkFDeEMsSUFBSStDLE9BQU9TLFVBQVUsRUFBRTtvQkFDbkIsSUFBSSxDQUFDRCxXQUFXLENBQUNuQyxJQUFJLENBQUMyQixPQUFPUyxVQUFVLEVBQUVwQyxJQUFJLENBQUNnQyxTQUFTQztnQkFDM0QsT0FDSztvQkFDRCxJQUFJLENBQUNFLFdBQVcsQ0FBQ25DLElBQUksQ0FBQyxDQUFDcUMsVUFBWUwsUUFBUS9DLFlBQVlnRDtnQkFDM0Q7WUFDSixHQUFHO1FBQ1A7SUFDSjtJQUNBLE1BQU1yRCxLQUFLLEdBQUcwRCxJQUFJLEVBQUU7UUFDaEIsSUFBSSxDQUFDVCxNQUFNLEVBQUVVO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQ0MsZUFBZSxFQUFFO1lBQ3ZCLElBQUksQ0FBQ0EsZUFBZSxHQUFHO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDTCxXQUFXO1FBQzNCO1FBQ0EsT0FBT3RFLG9GQUFrQ0EsQ0FBQ3FFLGFBQWEsQ0FBQ3RFLDRFQUFzQkEsQ0FBQyxJQUFJLENBQUNnRSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxNQUFNLEdBQ2xHO1lBQ0UsT0FBTy9ELDBEQUFjQSxDQUFDLElBQUksQ0FBQ3NDLFNBQVMsQ0FBQ3hCLElBQUksSUFBSTBELE9BQU8sSUFBSSxDQUFDVCxNQUFNO1FBQ25FLElBQ0U7WUFDRSxPQUFPLElBQUksQ0FBQ3pCLFNBQVMsQ0FBQ3hCLElBQUksSUFBSTBEO1FBQ2xDLEdBQUc7SUFDWDtJQUNBLE1BQU1uRCxPQUFPWCxLQUFLLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM0QixTQUFTLENBQUNqQixNQUFNLENBQUNYO0lBQ2pDO0lBQ0EsTUFBTWUsTUFBTUwsQ0FBQyxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNrQixTQUFTLENBQUNiLEtBQUssQ0FBQ0w7SUFDaEM7SUFDQSxDQUFDTSxPQUFPQyxhQUFhLENBQUMsR0FBRztRQUNyQixPQUFPLElBQUk7SUFDZjtJQUNBLDZEQUE2RDtJQUM3RCxzRUFBc0U7SUFDdEUsTUFBTSxDQUFDRCxPQUFPRSxZQUFZLENBQUMsR0FBRztRQUMxQixNQUFNLElBQUksQ0FBQ1AsTUFBTTtJQUNyQjtBQUNKO0FBQ08sZUFBZXNELHVCQUF1QkMsRUFBRSxFQUFFdEMsU0FBUyxFQUFFZ0MsVUFBVSxFQUFFUCxNQUFNLEVBQUUsR0FBR1MsSUFBSTtJQUNuRixNQUFNSyxNQUFNLElBQUlqQix3QkFBd0I7UUFDcEN0QjtRQUNBZ0M7UUFDQVA7SUFDSjtJQUNBLE1BQU1DLFFBQVEsTUFBTWEsSUFBSWIsS0FBSztJQUM3QixPQUFPO1FBQUVjLFFBQVFGLEdBQUdDLEtBQUtiLFVBQVVRO1FBQU9SO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzPzkyMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlja1J1bm5hYmxlQ29uZmlnS2V5cyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IHJhY2VXaXRoU2lnbmFsIH0gZnJvbSBcIi4vc2lnbmFsLmpzXCI7XG4vKlxuICogU3VwcG9ydCBhc3luYyBpdGVyYXRvciBzeW50YXggZm9yIFJlYWRhYmxlU3RyZWFtcyBpbiBhbGwgZW52aXJvbm1lbnRzLlxuICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZXhwb3J0IGNsYXNzIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gZXh0ZW5kcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlYWRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbnN1cmVSZWFkZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyID0gdGhpcy5nZXRSZWFkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgY2xvc2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIC8vIElmIHdyYXBwZWQgaW4gYSBOb2RlIHN0cmVhbSwgY2FuY2VsIGlzIGFscmVhZHkgY2FsbGVkLlxuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIGlmICh0aGlzLmxvY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpOyAvLyBjYW5jZWwgZmlyc3QsIGJ1dCBkb24ndCBhd2FpdCB5ZXRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayBmaXJzdFxuICAgICAgICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTsgLy8gbm93IGF3YWl0IGl0XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlIE5vdCBwcmVzZW50IGluIE5vZGUgMTggdHlwZXMsIHJlcXVpcmVkIGluIGxhdGVzdCBOb2RlIDIyXG4gICAgYXN5bmMgW1N5bWJvbC5hc3luY0Rpc3Bvc2VdKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJldHVybigpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICAvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TdHJlYW1zX0FQSS9Vc2luZ19yZWFkYWJsZV9zdHJlYW1zI3JlYWRpbmdfdGhlX3N0cmVhbVxuICAgICAgICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwdW1wKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIHRoZSBuZXh0IGRhdGEgY2h1bmsgaW50byBvdXIgdGFyZ2V0IHN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21Bc3luY0dlbmVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIGFzeW5jIHB1bGwoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpeDogYGVsc2UgaWYgKHZhbHVlKWAgd2lsbCBoYW5nIHRoZSBzdHJlYW1pbmcgd2hlbiBudWxsaXNoIHZhbHVlIChlLmcuIGVtcHR5IHN0cmluZykgaXMgcHVsbGVkXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyBjYW5jZWwocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdG9yLnJldHVybihyZWFzb24pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGF0ZWUoaXRlciwgbGVuZ3RoID0gMikge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IFtdKTtcbiAgICByZXR1cm4gYnVmZmVycy5tYXAoYXN5bmMgZnVuY3Rpb24qIG1ha2VJdGVyKGJ1ZmZlcikge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpdGVyLm5leHQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVyWzBdLmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIHlpZWxkIGJ1ZmZlci5zaGlmdCgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KGZpcnN0LCBzZWNvbmQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmaXJzdCkgJiYgQXJyYXkuaXNBcnJheShzZWNvbmQpKSB7XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiAoZmlyc3QgKyBzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwiY29uY2F0XCIgaW4gZmlyc3QgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHlwZW9mIGZpcnN0LmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY2h1bmsgPSB7IC4uLmZpcnN0IH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNlY29uZCkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gY2h1bmsgJiYgIUFycmF5LmlzQXJyYXkoY2h1bmtba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBjaHVua1trZXldID0gY29uY2F0KGNodW5rW2tleV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb25jYXQgJHt0eXBlb2YgZmlyc3R9IGFuZCAke3R5cGVvZiBzZWNvbmR9YCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2VuZXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHVwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaWduYWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRVc2VkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBwYXJhbXMuZ2VuZXJhdG9yO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHBhcmFtcy5jb25maWc7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHRoaXMuc2lnbmFsID0gcGFyYW1zLnNpZ25hbCA/PyB0aGlzLmNvbmZpZz8uc2lnbmFsO1xuICAgICAgICAvLyBzZXR1cCBpcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmx5IGFmdGVyIHRoZSBmaXJzdCBpdGVyYXRvciB2YWx1ZVxuICAgICAgICAvLyBpcyBhdmFpbGFibGUuIHRoaXMgaXMgdXNlZnVsIHdoZW4gc2V0dXAgb2Ygc2V2ZXJhbCBwaXBlZCBnZW5lcmF0b3JzXG4gICAgICAgIC8vIG5lZWRzIHRvIGhhcHBlbiBpbiBsb2dpY2FsIG9yZGVyLCBpZS4gaW4gdGhlIG9yZGVyIGluIHdoaWNoIGlucHV0IHRvXG4gICAgICAgIC8vIHRvIGVhY2ggZ2VuZXJhdG9yIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgdGhpcy5zZXR1cCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKHBpY2tSdW5uYWJsZUNvbmZpZ0tleXMocGFyYW1zLmNvbmZpZyksIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0ID0gcGFyYW1zLmdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5zdGFydFNldHVwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQudGhlbihwYXJhbXMuc3RhcnRTZXR1cCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdC50aGVuKChfcmVzdWx0KSA9PiByZXNvbHZlKHVuZGVmaW5lZCksIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBuZXh0KC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgIGlmICghdGhpcy5maXJzdFJlc3VsdFVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHRVc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0UmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGlja1J1bm5hYmxlQ29uZmlnS2V5cyh0aGlzLmNvbmZpZyksIHRoaXMuc2lnbmFsXG4gICAgICAgICAgICA/IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFjZVdpdGhTaWduYWwodGhpcy5nZW5lcmF0b3IubmV4dCguLi5hcmdzKSwgdGhpcy5zaWduYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLm5leHQoLi4uYXJncyk7XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5yZXR1cm4odmFsdWUpO1xuICAgIH1cbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci50aHJvdyhlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlIE5vdCBwcmVzZW50IGluIE5vZGUgMTggdHlwZXMsIHJlcXVpcmVkIGluIGxhdGVzdCBOb2RlIDIyXG4gICAgYXN5bmMgW1N5bWJvbC5hc3luY0Rpc3Bvc2VdKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJldHVybigpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwaXBlR2VuZXJhdG9yV2l0aFNldHVwKHRvLCBnZW5lcmF0b3IsIHN0YXJ0U2V0dXAsIHNpZ25hbCwgLi4uYXJncykge1xuICAgIGNvbnN0IGdlbiA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgIGdlbmVyYXRvcixcbiAgICAgICAgc3RhcnRTZXR1cCxcbiAgICAgICAgc2lnbmFsLFxuICAgIH0pO1xuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgZ2VuLnNldHVwO1xuICAgIHJldHVybiB7IG91dHB1dDogdG8oZ2VuLCBzZXR1cCwgLi4uYXJncyksIHNldHVwIH07XG59XG4iXSwibmFtZXMiOlsicGlja1J1bm5hYmxlQ29uZmlnS2V5cyIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJyYWNlV2l0aFNpZ25hbCIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImVuc3VyZVJlYWRlciIsInJlYWRlciIsImdldFJlYWRlciIsIm5leHQiLCJyZXN1bHQiLCJyZWFkIiwiZG9uZSIsInJlbGVhc2VMb2NrIiwidW5kZWZpbmVkIiwiZSIsInJldHVybiIsImxvY2tlZCIsImNhbmNlbFByb21pc2UiLCJjYW5jZWwiLCJ0aHJvdyIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJhc3luY0Rpc3Bvc2UiLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJzdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJwdW1wIiwidGhlbiIsImNsb3NlIiwiZW5xdWV1ZSIsImZyb21Bc3luY0dlbmVyYXRvciIsImdlbmVyYXRvciIsInB1bGwiLCJyZWFzb24iLCJhdGVlIiwiaXRlciIsImxlbmd0aCIsImJ1ZmZlcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJtYWtlSXRlciIsImJ1ZmZlciIsInB1c2giLCJzaGlmdCIsImNvbmNhdCIsImZpcnN0Iiwic2Vjb25kIiwiaXNBcnJheSIsImNodW5rIiwia2V5IiwiZW50cmllcyIsIkVycm9yIiwiQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAiLCJwYXJhbXMiLCJjb25maWciLCJzaWduYWwiLCJzZXR1cCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicnVuV2l0aENvbmZpZyIsImZpcnN0UmVzdWx0Iiwic3RhcnRTZXR1cCIsIl9yZXN1bHQiLCJhcmdzIiwidGhyb3dJZkFib3J0ZWQiLCJmaXJzdFJlc3VsdFVzZWQiLCJwaXBlR2VuZXJhdG9yV2l0aFNldHVwIiwidG8iLCJnZW4iLCJvdXRwdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRTtBQUN0QjtBQUNoRCxNQUFNRyxRQUFRLENBQUM7QUFDZixNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJRix5REFBV0EsQ0FBQyxDQUFDO0FBQ3pDLGVBQWVHLFlBQVlDLFFBQVE7SUFDdEMsSUFBSSxDQUFFQSxDQUFBQSxZQUFZSCxLQUFJLEdBQUk7UUFDdEJBLEtBQUssQ0FBQ0csU0FBUyxHQUFHRixPQUNiRyxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUQsU0FBUyxLQUFLLENBQUMsRUFDdERFLElBQUksQ0FBQyxDQUFDQyxNQUFRQSxJQUFJQyxJQUFJLElBQ3RCRixJQUFJLENBQUMsQ0FBQ0csT0FBUyxJQUFJWCxzREFBUUEsQ0FBQ1csT0FDNUJDLEtBQUssQ0FBQyxDQUFDQztZQUNSLE9BQU9WLEtBQUssQ0FBQ0csU0FBUztZQUN0QixNQUFNTztRQUNWO0lBQ0o7SUFDQSxPQUFPLE1BQU1WLEtBQUssQ0FBQ0csU0FBUztBQUNoQztBQUNPLGVBQWVRLGlCQUFpQkMsS0FBSztJQUN4QyxPQUFPVixZQUFZSix5RUFBdUJBLENBQUNjO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzPzhlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCB9IGZyb20gXCJqcy10aWt0b2tlbi9saXRlXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuY29uc3QgY2FjaGUgPSB7fTtcbmNvbnN0IGNhbGxlciA9IC8qICNfX1BVUkVfXyAqLyBuZXcgQXN5bmNDYWxsZXIoe30pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nKSB7XG4gICAgaWYgKCEoZW5jb2RpbmcgaW4gY2FjaGUpKSB7XG4gICAgICAgIGNhY2hlW2VuY29kaW5nXSA9IGNhbGxlclxuICAgICAgICAgICAgLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYClcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gbmV3IFRpa3Rva2VuKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbZW5jb2RpbmddO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjYWNoZVtlbmNvZGluZ107XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jb2RpbmdGb3JNb2RlbChtb2RlbCkge1xuICAgIHJldHVybiBnZXRFbmNvZGluZyhnZXRFbmNvZGluZ05hbWVGb3JNb2RlbChtb2RlbCkpO1xufVxuIl0sIm5hbWVzIjpbIlRpa3Rva2VuIiwiZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwiLCJBc3luY0NhbGxlciIsImNhY2hlIiwiY2FsbGVyIiwiZ2V0RW5jb2RpbmciLCJlbmNvZGluZyIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY2F0Y2giLCJlIiwiZW5jb2RpbmdGb3JNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isZodSchema: () => (/* binding */ isZodSchema)\n/* harmony export */ });\n/**\n * Given either a Zod schema, or plain object, determine if the input is a Zod schema.\n *\n * @param {z.ZodType<RunOutput> | Record<string, any>} input\n * @returns {boolean} Whether or not the provided input is a Zod schema.\n */ function isZodSchema(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ninput) {\n    // Check for a characteristic method of Zod schemas\n    return typeof input?.parse === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdHlwZXMvaXNfem9kX3NjaGVtYS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FDTSxTQUFTQSxZQUNoQiw4REFBOEQ7QUFDOURDLEtBQUs7SUFDRCxtREFBbUQ7SUFDbkQsT0FBTyxPQUFPQSxPQUFPQyxVQUFVO0FBQ25DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3R5cGVzL2lzX3pvZF9zY2hlbWEuanM/Njk4MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdpdmVuIGVpdGhlciBhIFpvZCBzY2hlbWEsIG9yIHBsYWluIG9iamVjdCwgZGV0ZXJtaW5lIGlmIHRoZSBpbnB1dCBpcyBhIFpvZCBzY2hlbWEuXG4gKlxuICogQHBhcmFtIHt6LlpvZFR5cGU8UnVuT3V0cHV0PiB8IFJlY29yZDxzdHJpbmcsIGFueT59IGlucHV0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVkIGlucHV0IGlzIGEgWm9kIHNjaGVtYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kU2NoZW1hKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmlucHV0KSB7XG4gICAgLy8gQ2hlY2sgZm9yIGEgY2hhcmFjdGVyaXN0aWMgbWV0aG9kIG9mIFpvZCBzY2hlbWFzXG4gICAgcmV0dXJuIHR5cGVvZiBpbnB1dD8ucGFyc2UgPT09IFwiZnVuY3Rpb25cIjtcbn1cbiJdLCJuYW1lcyI6WyJpc1pvZFNjaGVtYSIsImlucHV0IiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/types/is_zod_schema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/embeddings.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/embeddings.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* reexport safe */ _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/embeddings.js */ \"(rsc)/./node_modules/@langchain/core/dist/embeddings.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanM/ZmEyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvZW1iZWRkaW5ncy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/base.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/base.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelNameForTiktoken),\n/* harmony export */   isOpenAITool: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvYmFzZS5qcz83NjUwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/chat_models.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/chat_models.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/chat_models.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanM/YzJhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/llms.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/llms.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLM: () => (/* reexport safe */ _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLM),\n/* harmony export */   LLM: () => (/* reexport safe */ _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.LLM)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/llms.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanM/ZDE1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2xhbmd1YWdlX21vZGVscy9sbG1zLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/messages.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/core/messages.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   RemoveMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.RemoveMessage),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeLists),\n/* harmony export */   _mergeObj: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeObj),\n/* harmony export */   _mergeStatus: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeStatus),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToChunk),\n/* harmony export */   defaultTextSplitter: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.defaultTextSplitter),\n/* harmony export */   filterMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.filterMessages),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessageChunk),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   isChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isChatMessage),\n/* harmony export */   isChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isChatMessageChunk),\n/* harmony export */   isFunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isFunctionMessage),\n/* harmony export */   isFunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isFunctionMessageChunk),\n/* harmony export */   isHumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isHumanMessage),\n/* harmony export */   isHumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isHumanMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAIToolCallArray),\n/* harmony export */   isSystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isSystemMessage),\n/* harmony export */   isSystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isSystemMessageChunk),\n/* harmony export */   isToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isToolMessage),\n/* harmony export */   isToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isToolMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent),\n/* harmony export */   mergeMessageRuns: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeMessageRuns),\n/* harmony export */   trimMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.trimMessages)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9tZXNzYWdlcy5qcz84MjkwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9tZXNzYWdlcy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/output_parsers.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/output_parsers.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/output_parsers/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzLmpzPzE5MzYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L291dHB1dF9wYXJzZXJzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/output_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/output_parsers/openai_tools.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/output_parsers/openai_tools.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputKeyToolsParser: () => (/* reexport safe */ _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputKeyToolsParser),\n/* harmony export */   JsonOutputToolsParser: () => (/* reexport safe */ _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputToolsParser),\n/* harmony export */   convertLangChainToolCallToOpenAI: () => (/* reexport safe */ _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.convertLangChainToolCallToOpenAI),\n/* harmony export */   makeInvalidToolCall: () => (/* reexport safe */ _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.makeInvalidToolCall),\n/* harmony export */   parseToolCall: () => (/* reexport safe */ _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.parseToolCall)\n/* harmony export */ });\n/* harmony import */ var _dist_output_parsers_openai_tools_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/output_parsers/openai_tools/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/openai_tools/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzL29wZW5haV90b29scy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzL29wZW5haV90b29scy5qcz82YjM2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/output_parsers/openai_tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/outputs.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/outputs.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.RUN_KEY)\n/* harmony export */ });\n/* harmony import */ var _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvb3V0cHV0cy5qcz9hZjQzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9vdXRwdXRzLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/runnables.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/runnables.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableToolLike),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeConfigs),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig),\n/* harmony export */   pickRunnableConfigKeys: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.pickRunnableConfigKeys)\n/* harmony export */ });\n/* harmony import */ var _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzLmpzPzdhYjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L3J1bm5hYmxlcy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/runnables.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/tools.js":
/*!***********************************************!*\
  !*** ./node_modules/@langchain/core/tools.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseToolkit: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseToolkit),\n/* harmony export */   DynamicStructuredTool: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.DynamicStructuredTool),\n/* harmony export */   DynamicTool: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.DynamicTool),\n/* harmony export */   StructuredTool: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredTool),\n/* harmony export */   Tool: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.Tool),\n/* harmony export */   ToolInputParsingException: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolInputParsingException),\n/* harmony export */   tool: () => (/* reexport safe */ _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__.tool)\n/* harmony export */ });\n/* harmony import */ var _dist_tools_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/tools/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3Rvb2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS90b29scy5qcz84ODg5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC90b29scy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/chunk_array.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/chunk_array.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* reexport safe */ _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__.chunkArray)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/chunk_array.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheS5qcz81ZjgyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/env.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/utils/env.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcz80NjcxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvZW52LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/function_calling.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/utils/function_calling.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAITool),\n/* harmony export */   isLangChainTool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isLangChainTool),\n/* harmony export */   isRunnableToolLike: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isRunnableToolLike),\n/* harmony export */   isStructuredTool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredTool),\n/* harmony export */   isStructuredToolParams: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.isStructuredToolParams)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/function_calling.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcz84Yzg5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/azure/chat_models.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* binding */ AzureChatOpenAI)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n\n\n\n\n/**\n * Azure OpenAI chat model integration.\n *\n * Setup:\n * Install `@langchain/openai` and set the following environment variables:\n *\n * ```bash\n * npm install @langchain/openai\n * export AZURE_OPENAI_API_KEY=\"your-api-key\"\n * export AZURE_OPENAI_API_DEPLOYMENT_NAME=\"your-deployment-name\"\n * export AZURE_OPENAI_API_VERSION=\"your-version\"\n * export AZURE_OPENAI_BASE_PATH=\"your-base-path\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_openai.AzureChatOpenAI.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_openai.ChatOpenAICallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.bind`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.bind`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.bind({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     tool_choice: \"auto\",\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { AzureChatOpenAI } from '@langchain/openai';\n *\n * const llm = new AzureChatOpenAI({\n *   azureOpenAIApiKey: process.env.AZURE_OPENAI_API_KEY, // In Node.js defaults to process.env.AZURE_OPENAI_API_KEY\n *   azureOpenAIApiInstanceName: process.env.AZURE_OPENAI_API_INSTANCE_NAME, // In Node.js defaults to process.env.AZURE_OPENAI_API_INSTANCE_NAME\n *   azureOpenAIApiDeploymentName: process.env.AZURE_OPENAI_API_DEPLOYMENT_NAME, // In Node.js defaults to process.env.AZURE_OPENAI_API_DEPLOYMENT_NAME\n *   azureOpenAIApiVersion: process.env.AZURE_OPENAI_API_VERSION, // In Node.js defaults to process.env.AZURE_OPENAI_API_VERSION\n *   temperature: 0,\n *   maxTokens: undefined,\n *   timeout: undefined,\n *   maxRetries: 2,\n *   // apiKey: \"...\",\n *   // baseUrl: \"...\",\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"chatcmpl-9u4Mpu44CbPjwYFkTbeoZgvzB00Tz\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"tokenUsage\": {\n *       \"completionTokens\": 5,\n *       \"promptTokens\": 28,\n *       \"totalTokens\": 33\n *     },\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_3aa7262c27\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4NWB7yUeHCKdLr6jP3HpaOYHTqs\",\n *   \"content\": \"\"\n * }\n * AIMessageChunk {\n *   \"content\": \"J\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore\"\n * }\n * AIMessageChunk {\n *   \"content\": \" la\"\n * }\n * AIMessageChunk {\n *   \"content\": \" programmation\",,\n * }\n * AIMessageChunk {\n *   \"content\": \".\",,\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"response_metadata\": {\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_c9aa9c0491\"\n *   },\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4PnX6Fy7OmK46DASy0bH6cxn5Xu\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"prompt\": 0,\n *     \"completion\": 0,\n *     \"finish_reason\": \"stop\",\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools([GetWeather, GetPopulation]);\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_uPU4FiFzoKAtMxfmPnfQL6UK'\n *   },\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_UNkEwuQsHrGYqgDQuH9nPAtX'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_kL3OXxaq9OjIKqRTpvjaCH14'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_s9KQB1UWj45LLGaEnjz0179q'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().nullable().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, { name: \"Joke\" });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: 'Why was the cat sitting on the computer?',\n *   punchline: 'Because it wanted to keep an eye on the mouse!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Object Response Format</strong></summary>\n *\n * ```typescript\n * const jsonLlm = llm.bind({ response_format: { type: \"json_object\" } });\n * const jsonLlmAiMsg = await jsonLlm.invoke(\n *   \"Return a JSON object with key 'randomInts' and a value of 10 random ints in [0-99]\"\n * );\n * console.log(jsonLlmAiMsg.content);\n * ```\n *\n * ```txt\n * {\n *   \"randomInts\": [23, 87, 45, 12, 78, 34, 56, 90, 11, 67]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in the image appears to be clear and sunny. The sky is mostly blue with a few scattered white clouds, indicating fair weather. The bright sunlight is casting shadows on the green, grassy hill, suggesting it is a pleasant day with good visibility. There are no signs of rain or stormy conditions.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 28, output_tokens: 5, total_tokens: 33 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Logprobs</strong></summary>\n *\n * ```typescript\n * const logprobsLlm = new ChatOpenAI({ logprobs: true });\n * const aiMsgForLogprobs = await logprobsLlm.invoke(input);\n * console.log(aiMsgForLogprobs.response_metadata.logprobs);\n * ```\n *\n * ```txt\n * {\n *   content: [\n *     {\n *       token: 'J',\n *       logprob: -0.000050616763,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: \"'\",\n *       logprob: -0.01868736,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: 'ad',\n *       logprob: -0.0000030545007,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ore', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: ' la',\n *       logprob: -0.515404,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: ' programm',\n *       logprob: -0.0000118755715,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ation', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: '.',\n *       logprob: -0.0000037697225,\n *       bytes: [Array],\n *       top_logprobs: []\n *     }\n *   ],\n *   refusal: null\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   tokenUsage: { completionTokens: 5, promptTokens: 28, totalTokens: 33 },\n *   finish_reason: 'stop',\n *   system_fingerprint: 'fp_3aa7262c27'\n * }\n * ```\n * </details>\n */ class AzureChatOpenAI extends _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.ChatOpenAI {\n    _llmType() {\n        return \"azure_openai\";\n    }\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\",\n            deploymentName: \"deployment_name\",\n            azureOpenAIEndpoint: \"azure_endpoint\",\n            azureOpenAIApiVersion: \"openai_api_version\",\n            azureOpenAIBasePath: \"openai_api_base\",\n            azureOpenAIApiDeploymentName: \"deployment_name\"\n        };\n    }\n    get lc_secrets() {\n        return {\n            ...super.lc_secrets,\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\"\n        };\n    }\n    get lc_serializable_keys() {\n        return [\n            ...super.lc_serializable_keys,\n            \"azureOpenAIApiKey\",\n            \"azureOpenAIApiVersion\",\n            \"azureOpenAIBasePath\",\n            \"azureOpenAIEndpoint\",\n            \"azureOpenAIApiInstanceName\",\n            \"azureOpenAIApiDeploymentName\",\n            \"deploymentName\",\n            \"openAIApiKey\",\n            \"openAIApiVersion\"\n        ];\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIEndpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? fields?.openAIApiKey ?? fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName = fields?.azureOpenAIApiDeploymentName ?? fields?.deploymentName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\");\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? fields?.openAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIEndpoint = fields?.azureOpenAIEndpoint ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_ENDPOINT\");\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n        if (!this.azureOpenAIApiKey && !this.apiKey && !this.azureADTokenProvider) {\n            throw new Error(\"Azure OpenAI API key or Token Provider not found\");\n        }\n    }\n    getLsParams(options) {\n        const params = super.getLsParams(options);\n        params.ls_provider = \"azure\";\n        return params;\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL,\n                azureOpenAIEndpoint: this.azureOpenAIEndpoint\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_2__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            let env = (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnv)();\n            if (env === \"node\" || env === \"deno\") {\n                env = `(${env}/${process.version}; ${process.platform}; ${process.arch})`;\n            }\n            const specifiedUserAgent = params.defaultHeaders?.[\"User-Agent\"];\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": `langchainjs-azure-openai/2.0.0 (${env})${specifiedUserAgent ? ` ${specifiedUserAgent}` : \"\"}`\n            };\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_3__.AzureOpenAI({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                deployment: this.azureOpenAIApiDeploymentName,\n                ...params\n            });\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return requestOptions;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIEndpoint) {\n                json.kwargs.azure_endpoint = this.azureOpenAIEndpoint;\n            }\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIBasePath) {\n                const parts = this.azureOpenAIBasePath.split(\"/openai/deployments/\");\n                if (parts.length === 2 && parts[0].startsWith(\"http\")) {\n                    const [endpoint] = parts;\n                    json.kwargs.azure_endpoint = endpoint;\n                }\n            }\n            if (!json.kwargs.azure_endpoint && this.azureOpenAIApiInstanceName) {\n                json.kwargs.azure_endpoint = `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`;\n            }\n            if (!json.kwargs.deployment_name && this.azureOpenAIApiDeploymentName) {\n                json.kwargs.deployment_name = this.azureOpenAIApiDeploymentName;\n            }\n            if (!json.kwargs.deployment_name && this.azureOpenAIBasePath) {\n                const parts = this.azureOpenAIBasePath.split(\"/openai/deployments/\");\n                if (parts.length === 2) {\n                    const [, deployment] = parts;\n                    json.kwargs.deployment_name = deployment;\n                }\n            }\n            if (json.kwargs.azure_endpoint && json.kwargs.deployment_name && json.kwargs.openai_api_base) {\n                delete json.kwargs.openai_api_base;\n            }\n            if (json.kwargs.azure_openai_api_instance_name && json.kwargs.azure_endpoint) {\n                delete json.kwargs.azure_openai_api_instance_name;\n            }\n        }\n        return json;\n    }\n    withStructuredOutput(outputSchema, config) {\n        const ensuredConfig = {\n            ...config\n        };\n        // Not all Azure gpt-4o deployments models support jsonSchema yet\n        if (this.model.startsWith(\"gpt-4o\")) {\n            if (ensuredConfig?.method === undefined) {\n                ensuredConfig.method = \"functionCalling\";\n            }\n        }\n        return super.withStructuredOutput(outputSchema, ensuredConfig);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwRDtBQUNpQjtBQUMzQjtBQUNBO0FBQ2hEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EyWkMsR0FDTSxNQUFNTSx3QkFBd0JGLHVEQUFVQTtJQUMzQ0csV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPO1lBQ0gsR0FBRyxLQUFLLENBQUNBLFVBQVU7WUFDbkJDLGNBQWM7WUFDZEMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7WUFDaEJDLGdCQUFnQjtZQUNoQkMscUJBQXFCO1lBQ3JCQyx1QkFBdUI7WUFDdkJDLHFCQUFxQjtZQUNyQkMsOEJBQThCO1FBQ2xDO0lBQ0o7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxtQkFBbUI7UUFDdkI7SUFDSjtJQUNBLElBQUlDLHVCQUF1QjtRQUN2QixPQUFPO2VBQ0EsS0FBSyxDQUFDQTtZ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aUVBQWlFO1FBQ2pFLElBQUksSUFBSSxDQUFDRSxLQUFLLENBQUNSLFVBQVUsQ0FBQyxXQUFXO1lBQ2pDLElBQUlPLGVBQWVFLFdBQVdDLFdBQVc7Z0JBQ3JDSCxjQUFjRSxNQUFNLEdBQUc7WUFDM0I7UUFDSjtRQUNBLE9BQU8sS0FBSyxDQUFDTCxxQkFBcUJDLGNBQWNFO0lBQ3BEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9jaGF0X21vZGVscy5qcz9iMzYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF6dXJlT3BlbkFJIGFzIEF6dXJlT3BlbkFJQ2xpZW50IH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgZ2V0RW52LCBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IENoYXRPcGVuQUksIH0gZnJvbSBcIi4uL2NoYXRfbW9kZWxzLmpzXCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludCB9IGZyb20gXCIuLi91dGlscy9henVyZS5qc1wiO1xuLyoqXG4gKiBBenVyZSBPcGVuQUkgY2hhdCBtb2RlbCBpbnRlZ3JhdGlvbi5cbiAqXG4gKiBTZXR1cDpcbiAqIEluc3RhbGwgYEBsYW5nY2hhaW4vb3BlbmFpYCBhbmQgc2V0IHRoZSBmb2xsb3dpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzOlxuICpcbiAqIGBgYGJhc2hcbiAqIG5wbSBpbnN0YWxsIEBsYW5nY2hhaW4vb3BlbmFpXG4gKiBleHBvcnQgQVpVUkVfT1BFTkFJX0FQSV9LRVk9XCJ5b3VyLWFwaS1rZXlcIlxuICogZXhwb3J0IEFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FPVwieW91ci1kZXBsb3ltZW50LW5hbWVcIlxuICogZXhwb3J0IEFaVVJFX09QRU5BSV9BUElfVkVSU0lPTj1cInlvdXItdmVyc2lvblwiXG4gKiBleHBvcnQgQVpVUkVfT1BFTkFJX0JBU0VfUEFUSD1cInlvdXItYmFzZS1wYXRoXCJcbiAqIGBgYFxuICpcbiAqICMjIFtDb25zdHJ1Y3RvciBhcmdzXShodHRwczovL2FwaS5qcy5sYW5nY2hhaW4uY29tL2NsYXNzZXMvbGFuZ2NoYWluX29wZW5haS5BenVyZUNoYXRPcGVuQUkuaHRtbCNjb25zdHJ1Y3RvcilcbiAqXG4gKiAjIyBbUnVudGltZSBhcmdzXShodHRwczovL2FwaS5qcy5sYW5nY2hhaW4uY29tL2ludGVyZmFjZXMvbGFuZ2NoYWluX29wZW5haS5DaGF0T3BlbkFJQ2FsbE9wdGlvbnMuaHRtbClcbiAqXG4gKiBSdW50aW1lIGFyZ3MgY2FuIGJlIHBhc3NlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIGFueSBvZiB0aGUgYmFzZSBydW5uYWJsZSBtZXRob2RzIGAuaW52b2tlYC4gYC5zdHJlYW1gLCBgLmJhdGNoYCwgZXRjLlxuICogVGhleSBjYW4gYWxzbyBiZSBwYXNzZWQgdmlhIGAuYmluZGAsIG9yIHRoZSBzZWNvbmQgYXJnIGluIGAuYmluZFRvb2xzYCwgbGlrZSBzaG93biBpbiB0aGUgZXhhbXBsZXMgYmVsb3c6XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gV2hlbiBjYWxsaW5nIGAuYmluZGAsIGNhbGwgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnRcbiAqIGNvbnN0IGxsbVdpdGhBcmdzQm91bmQgPSBsbG0uYmluZCh7XG4gKiAgIHN0b3A6IFtcIlxcblwiXSxcbiAqICAgdG9vbHM6IFsuLi5dLFxuICogfSk7XG4gKlxuICogLy8gV2hlbiBjYWxsaW5nIGAuYmluZFRvb2xzYCwgY2FsbCBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHRoZSBzZWNvbmQgYXJndW1lbnRcbiAqIGNvbnN0IGxsbVdpdGhUb29scyA9IGxsbS5iaW5kVG9vbHMoXG4gKiAgIFsuLi5dLFxuICogICB7XG4gKiAgICAgdG9vbF9jaG9pY2U6IFwiYXV0b1wiLFxuICogICB9XG4gKiApO1xuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZXNcbiAqXG4gKiA8ZGV0YWlscyBvcGVuPlxuICogPHN1bW1hcnk+PHN0cm9uZz5JbnN0YW50aWF0ZTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBBenVyZUNoYXRPcGVuQUkgfSBmcm9tICdAbGFuZ2NoYWluL29wZW5haSc7XG4gKlxuICogY29uc3QgbGxtID0gbmV3IEF6dXJlQ2hhdE9wZW5BSSh7XG4gKiAgIGF6dXJlT3BlbkFJQXBpS2V5OiBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfQVBJX0tFWSwgLy8gSW4gTm9kZS5qcyBkZWZhdWx0cyB0byBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfQVBJX0tFWVxuICogICBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZTogcHJvY2Vzcy5lbnYuQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FLCAvLyBJbiBOb2RlLmpzIGRlZmF1bHRzIHRvIHByb2Nlc3MuZW52LkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVxuICogICBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lOiBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRSwgLy8gSW4gTm9kZS5qcyBkZWZhdWx0cyB0byBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRVxuICogICBhenVyZU9wZW5BSUFwaVZlcnNpb246IHByb2Nlc3MuZW52LkFaVVJFX09QRU5BSV9BUElfVkVSU0lPTiwgLy8gSW4gTm9kZS5qcyBkZWZhdWx0cyB0byBwcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05cbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIG1heFRva2VuczogdW5kZWZpbmVkLFxuICogICB0aW1lb3V0OiB1bmRlZmluZWQsXG4gKiAgIG1heFJldHJpZXM6IDIsXG4gKiAgIC8vIGFwaUtleTogXCIuLi5cIixcbiAqICAgLy8gYmFzZVVybDogXCIuLi5cIixcbiAqICAgLy8gb3RoZXIgcGFyYW1zLi4uXG4gKiB9KTtcbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5JbnZva2luZzwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBpbnB1dCA9IGBUcmFuc2xhdGUgXCJJIGxvdmUgcHJvZ3JhbW1pbmdcIiBpbnRvIEZyZW5jaC5gO1xuICpcbiAqIC8vIE1vZGVscyBhbHNvIGFjY2VwdCBhIGxpc3Qgb2YgY2hhdCBtZXNzYWdlcyBvciBhIGZvcm1hdHRlZCBwcm9tcHRcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxsbS5pbnZva2UoaW5wdXQpO1xuICogY29uc29sZS5sb2cocmVzdWx0KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlIHtcbiAqICAgXCJpZFwiOiBcImNoYXRjbXBsLTl1NE1wdTQ0Q2JQandZRmtUYmVvWmd2ekIwMFR6XCIsXG4gKiAgIFwiY29udGVudFwiOiBcIkonYWRvcmUgbGEgcHJvZ3JhbW1hdGlvbi5cIixcbiAqICAgXCJyZXNwb25zZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJ0b2tlblVzYWdlXCI6IHtcbiAqICAgICAgIFwiY29tcGxldGlvblRva2Vuc1wiOiA1LFxuICogICAgICAgXCJwcm9tcHRUb2tlbnNcIjogMjgsXG4gKiAgICAgICBcInRvdGFsVG9rZW5zXCI6IDMzXG4gKiAgICAgfSxcbiAqICAgICBcImZpbmlzaF9yZWFzb25cIjogXCJzdG9wXCIsXG4gKiAgICAgXCJzeXN0ZW1fZmluZ2VycHJpbnRcIjogXCJmcF8zYWE3MjYyYzI3XCJcbiAqICAgfSxcbiAqICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMjgsXG4gKiAgICAgXCJvdXRwdXRfdG9rZW5zXCI6IDUsXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogMzNcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPlN0cmVhbWluZyBDaHVua3M8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBhd2FpdCBsbG0uc3RyZWFtKGlucHV0KSkge1xuICogICBjb25zb2xlLmxvZyhjaHVuayk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJpZFwiOiBcImNoYXRjbXBsLTl1NE5XQjd5VWVIQ0tkTHI2alAzSHBhT1lIVHFzXCIsXG4gKiAgIFwiY29udGVudFwiOiBcIlwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIkpcIlxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCInYWRvcmVcIlxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCIgbGFcIlxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCIgcHJvZ3JhbW1hdGlvblwiLCxcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiLlwiLCxcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiXCIsXG4gKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwiZmluaXNoX3JlYXNvblwiOiBcInN0b3BcIixcbiAqICAgICBcInN5c3RlbV9maW5nZXJwcmludFwiOiBcImZwX2M5YWE5YzA0OTFcIlxuICogICB9LFxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCJcIixcbiAqICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMjgsXG4gKiAgICAgXCJvdXRwdXRfdG9rZW5zXCI6IDUsXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogMzNcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkFnZ3JlZ2F0ZSBTdHJlYW1lZCBDaHVua3M8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMnO1xuICogaW1wb3J0IHsgY29uY2F0IH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3N0cmVhbSc7XG4gKlxuICogY29uc3Qgc3RyZWFtID0gYXdhaXQgbGxtLnN0cmVhbShpbnB1dCk7XG4gKiBsZXQgZnVsbDogQUlNZXNzYWdlQ2h1bmsgfCB1bmRlZmluZWQ7XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICogICBmdWxsID0gIWZ1bGwgPyBjaHVuayA6IGNvbmNhdChmdWxsLCBjaHVuayk7XG4gKiB9XG4gKiBjb25zb2xlLmxvZyhmdWxsKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImlkXCI6IFwiY2hhdGNtcGwtOXU0UG5YNkZ5N09tSzQ2REFTeTBiSDZjeG41WHVcIixcbiAqICAgXCJjb250ZW50XCI6IFwiSidhZG9yZSBsYSBwcm9ncmFtbWF0aW9uLlwiLFxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcInByb21wdFwiOiAwLFxuICogICAgIFwiY29tcGxldGlvblwiOiAwLFxuICogICAgIFwiZmluaXNoX3JlYXNvblwiOiBcInN0b3BcIixcbiAqICAgfSxcbiAqICAgXCJ1c2FnZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJpbnB1dF90b2tlbnNcIjogMjgsXG4gKiAgICAgXCJvdXRwdXRfdG9rZW5zXCI6IDUsXG4gKiAgICAgXCJ0b3RhbF90b2tlbnNcIjogMzNcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkJpbmQgdG9vbHM8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4gKlxuICogY29uc3QgR2V0V2VhdGhlciA9IHtcbiAqICAgbmFtZTogXCJHZXRXZWF0aGVyXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCB3ZWF0aGVyIGluIGEgZ2l2ZW4gbG9jYXRpb25cIixcbiAqICAgc2NoZW1hOiB6Lm9iamVjdCh7XG4gKiAgICAgbG9jYXRpb246IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgY2l0eSBhbmQgc3RhdGUsIGUuZy4gU2FuIEZyYW5jaXNjbywgQ0FcIilcbiAqICAgfSksXG4gKiB9XG4gKlxuICogY29uc3QgR2V0UG9wdWxhdGlvbiA9IHtcbiAqICAgbmFtZTogXCJHZXRQb3B1bGF0aW9uXCIsXG4gKiAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCBwb3B1bGF0aW9uIGluIGEgZ2l2ZW4gbG9jYXRpb25cIixcbiAqICAgc2NoZW1hOiB6Lm9iamVjdCh7XG4gKiAgICAgbG9jYXRpb246IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgY2l0eSBhbmQgc3RhdGUsIGUuZy4gU2FuIEZyYW5jaXNjbywgQ0FcIilcbiAqICAgfSksXG4gKiB9XG4gKlxuICogY29uc3QgbGxtV2l0aFRvb2xzID0gbGxtLmJpbmRUb29scyhbR2V0V2VhdGhlciwgR2V0UG9wdWxhdGlvbl0pO1xuICogY29uc3QgYWlNc2cgPSBhd2FpdCBsbG1XaXRoVG9vbHMuaW52b2tlKFxuICogICBcIldoaWNoIGNpdHkgaXMgaG90dGVyIHRvZGF5IGFuZCB3aGljaCBpcyBiaWdnZXI6IExBIG9yIE5ZP1wiXG4gKiApO1xuICogY29uc29sZS5sb2coYWlNc2cudG9vbF9jYWxscyk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIFtcbiAqICAge1xuICogICAgIG5hbWU6ICdHZXRXZWF0aGVyJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTG9zIEFuZ2VsZXMsIENBJyB9LFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnLFxuICogICAgIGlkOiAnY2FsbF91UFU0RmlGem9LQXRNeGZtUG5mUUw2VUsnXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBuYW1lOiAnR2V0V2VhdGhlcicsXG4gKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ05ldyBZb3JrLCBOWScgfSxcbiAqICAgICB0eXBlOiAndG9vbF9jYWxsJyxcbiAqICAgICBpZDogJ2NhbGxfVU5rRXd1UXNIckdZcWdEUXVIOW5QQXRYJ1xuICogICB9LFxuICogICB7XG4gKiAgICAgbmFtZTogJ0dldFBvcHVsYXRpb24nLFxuICogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdMb3MgQW5nZWxlcywgQ0EnIH0sXG4gKiAgICAgdHlwZTogJ3Rvb2xfY2FsbCcsXG4gKiAgICAgaWQ6ICdjYWxsX2tMM09YeGFxOU9qSUtxUlRwdmphQ0gxNCdcbiAqICAgfSxcbiAqICAge1xuICogICAgIG5hbWU6ICdHZXRQb3B1bGF0aW9uJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTmV3IFlvcmssIE5ZJyB9LFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnLFxuICogICAgIGlkOiAnY2FsbF9zOUtRQjFVV2o0NUxMR2FFbmp6MDE3OXEnXG4gKiAgIH1cbiAqIF1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5TdHJ1Y3R1cmVkIE91dHB1dDwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbiAqXG4gKiBjb25zdCBKb2tlID0gei5vYmplY3Qoe1xuICogICBzZXR1cDogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBzZXR1cCBvZiB0aGUgam9rZVwiKSxcbiAqICAgcHVuY2hsaW5lOiB6LnN0cmluZygpLmRlc2NyaWJlKFwiVGhlIHB1bmNobGluZSB0byB0aGUgam9rZVwiKSxcbiAqICAgcmF0aW5nOiB6Lm51bWJlcigpLm51bGxhYmxlKCkuZGVzY3JpYmUoXCJIb3cgZnVubnkgdGhlIGpva2UgaXMsIGZyb20gMSB0byAxMFwiKVxuICogfSkuZGVzY3JpYmUoJ0pva2UgdG8gdGVsbCB1c2VyLicpO1xuICpcbiAqIGNvbnN0IHN0cnVjdHVyZWRMbG0gPSBsbG0ud2l0aFN0cnVjdHVyZWRPdXRwdXQoSm9rZSwgeyBuYW1lOiBcIkpva2VcIiB9KTtcbiAqIGNvbnN0IGpva2VSZXN1bHQgPSBhd2FpdCBzdHJ1Y3R1cmVkTGxtLmludm9rZShcIlRlbGwgbWUgYSBqb2tlIGFib3V0IGNhdHNcIik7XG4gKiBjb25zb2xlLmxvZyhqb2tlUmVzdWx0KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICBzZXR1cDogJ1doeSB3YXMgdGhlIGNhdCBzaXR0aW5nIG9uIHRoZSBjb21wdXRlcj8nLFxuICogICBwdW5jaGxpbmU6ICdCZWNhdXNlIGl0IHdhbnRlZCB0byBrZWVwIGFuIGV5ZSBvbiB0aGUgbW91c2UhJyxcbiAqICAgcmF0aW5nOiA3XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+SlNPTiBPYmplY3QgUmVzcG9uc2UgRm9ybWF0PC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGpzb25MbG0gPSBsbG0uYmluZCh7IHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfSB9KTtcbiAqIGNvbnN0IGpzb25MbG1BaU1zZyA9IGF3YWl0IGpzb25MbG0uaW52b2tlKFxuICogICBcIlJldHVybiBhIEpTT04gb2JqZWN0IHdpdGgga2V5ICdyYW5kb21JbnRzJyBhbmQgYSB2YWx1ZSBvZiAxMCByYW5kb20gaW50cyBpbiBbMC05OV1cIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKGpzb25MbG1BaU1zZy5jb250ZW50KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICBcInJhbmRvbUludHNcIjogWzIzLCA4NywgNDUsIDEyLCA3OCwgMzQsIDU2LCA5MCwgMTEsIDY3XVxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPk11bHRpbW9kYWw8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSAnQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzJztcbiAqXG4gKiBjb25zdCBpbWFnZVVybCA9IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIjtcbiAqIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKS50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSk7XG4gKiBjb25zdCBiYXNlNjRJbWFnZSA9IEJ1ZmZlci5mcm9tKGltYWdlRGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICpcbiAqIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHtcbiAqICAgY29udGVudDogW1xuICogICAgIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IFwiZGVzY3JpYmUgdGhlIHdlYXRoZXIgaW4gdGhpcyBpbWFnZVwiIH0sXG4gKiAgICAge1xuICogICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAqICAgICAgIGltYWdlX3VybDogeyB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YCB9LFxuICogICAgIH0sXG4gKiAgIF1cbiAqIH0pO1xuICpcbiAqIGNvbnN0IGltYWdlRGVzY3JpcHRpb25BaU1zZyA9IGF3YWl0IGxsbS5pbnZva2UoW21lc3NhZ2VdKTtcbiAqIGNvbnNvbGUubG9nKGltYWdlRGVzY3JpcHRpb25BaU1zZy5jb250ZW50KTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogVGhlIHdlYXRoZXIgaW4gdGhlIGltYWdlIGFwcGVhcnMgdG8gYmUgY2xlYXIgYW5kIHN1bm55LiBUaGUgc2t5IGlzIG1vc3RseSBibHVlIHdpdGggYSBmZXcgc2NhdHRlcmVkIHdoaXRlIGNsb3VkcywgaW5kaWNhdGluZyBmYWlyIHdlYXRoZXIuIFRoZSBicmlnaHQgc3VubGlnaHQgaXMgY2FzdGluZyBzaGFkb3dzIG9uIHRoZSBncmVlbiwgZ3Jhc3N5IGhpbGwsIHN1Z2dlc3RpbmcgaXQgaXMgYSBwbGVhc2FudCBkYXkgd2l0aCBnb29kIHZpc2liaWxpdHkuIFRoZXJlIGFyZSBubyBzaWducyBvZiByYWluIG9yIHN0b3JteSBjb25kaXRpb25zLlxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPlVzYWdlIE1ldGFkYXRhPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFpTXNnRm9yTWV0YWRhdGEgPSBhd2FpdCBsbG0uaW52b2tlKGlucHV0KTtcbiAqIGNvbnNvbGUubG9nKGFpTXNnRm9yTWV0YWRhdGEudXNhZ2VfbWV0YWRhdGEpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiB7IGlucHV0X3Rva2VuczogMjgsIG91dHB1dF90b2tlbnM6IDUsIHRvdGFsX3Rva2VuczogMzMgfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkxvZ3Byb2JzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGxvZ3Byb2JzTGxtID0gbmV3IENoYXRPcGVuQUkoeyBsb2dwcm9iczogdHJ1ZSB9KTtcbiAqIGNvbnN0IGFpTXNnRm9yTG9ncHJvYnMgPSBhd2FpdCBsb2dwcm9ic0xsbS5pbnZva2UoaW5wdXQpO1xuICogY29uc29sZS5sb2coYWlNc2dGb3JMb2dwcm9icy5yZXNwb25zZV9tZXRhZGF0YS5sb2dwcm9icyk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHtcbiAqICAgY29udGVudDogW1xuICogICAgIHtcbiAqICAgICAgIHRva2VuOiAnSicsXG4gKiAgICAgICBsb2dwcm9iOiAtMC4wMDAwNTA2MTY3NjMsXG4gKiAgICAgICBieXRlczogW0FycmF5XSxcbiAqICAgICAgIHRvcF9sb2dwcm9iczogW11cbiAqICAgICB9LFxuICogICAgIHtcbiAqICAgICAgIHRva2VuOiBcIidcIixcbiAqICAgICAgIGxvZ3Byb2I6IC0wLjAxODY4NzM2LFxuICogICAgICAgYnl0ZXM6IFtBcnJheV0sXG4gKiAgICAgICB0b3BfbG9ncHJvYnM6IFtdXG4gKiAgICAgfSxcbiAqICAgICB7XG4gKiAgICAgICB0b2tlbjogJ2FkJyxcbiAqICAgICAgIGxvZ3Byb2I6IC0wLjAwMDAwMzA1NDUwMDcsXG4gKiAgICAgICBieXRlczogW0FycmF5XSxcbiAqICAgICAgIHRvcF9sb2dwcm9iczogW11cbiAqICAgICB9LFxuICogICAgIHsgdG9rZW46ICdvcmUnLCBsb2dwcm9iOiAwLCBieXRlczogW0FycmF5XSwgdG9wX2xvZ3Byb2JzOiBbXSB9LFxuICogICAgIHtcbiAqICAgICAgIHRva2VuOiAnIGxhJyxcbiAqICAgICAgIGxvZ3Byb2I6IC0wLjUxNTQwNCxcbiAqICAgICAgIGJ5dGVzOiBbQXJyYXldLFxuICogICAgICAgdG9wX2xvZ3Byb2JzOiBbXVxuICogICAgIH0sXG4gKiAgICAge1xuICogICAgICAgdG9rZW46ICcgcHJvZ3JhbW0nLFxuICogICAgICAgbG9ncHJvYjogLTAuMDAwMDExODc1NTcxNSxcbiAqICAgICAgIGJ5dGVzOiBbQXJyYXldLFxuICogICAgICAgdG9wX2xvZ3Byb2JzOiBbXVxuICogICAgIH0sXG4gKiAgICAgeyB0b2tlbjogJ2F0aW9uJywgbG9ncHJvYjogMCwgYnl0ZXM6IFtBcnJheV0sIHRvcF9sb2dwcm9iczogW10gfSxcbiAqICAgICB7XG4gKiAgICAgICB0b2tlbjogJy4nLFxuICogICAgICAgbG9ncHJvYjogLTAuMDAwMDAzNzY5NzIyNSxcbiAqICAgICAgIGJ5dGVzOiBbQXJyYXldLFxuICogICAgICAgdG9wX2xvZ3Byb2JzOiBbXVxuICogICAgIH1cbiAqICAgXSxcbiAqICAgcmVmdXNhbDogbnVsbFxuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPlJlc3BvbnNlIE1ldGFkYXRhPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFpTXNnRm9yUmVzcG9uc2VNZXRhZGF0YSA9IGF3YWl0IGxsbS5pbnZva2UoaW5wdXQpO1xuICogY29uc29sZS5sb2coYWlNc2dGb3JSZXNwb25zZU1ldGFkYXRhLnJlc3BvbnNlX21ldGFkYXRhKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICB0b2tlblVzYWdlOiB7IGNvbXBsZXRpb25Ub2tlbnM6IDUsIHByb21wdFRva2VuczogMjgsIHRvdGFsVG9rZW5zOiAzMyB9LFxuICogICBmaW5pc2hfcmVhc29uOiAnc3RvcCcsXG4gKiAgIHN5c3RlbV9maW5nZXJwcmludDogJ2ZwXzNhYTcyNjJjMjcnXG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqL1xuZXhwb3J0IGNsYXNzIEF6dXJlQ2hhdE9wZW5BSSBleHRlbmRzIENoYXRPcGVuQUkge1xuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhenVyZV9vcGVuYWlcIjtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5sY19hbGlhc2VzLFxuICAgICAgICAgICAgb3BlbkFJQXBpS2V5OiBcIm9wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBvcGVuQUlBcGlWZXJzaW9uOiBcIm9wZW5haV9hcGlfdmVyc2lvblwiLFxuICAgICAgICAgICAgb3BlbkFJQmFzZVBhdGg6IFwib3BlbmFpX2FwaV9iYXNlXCIsXG4gICAgICAgICAgICBkZXBsb3ltZW50TmFtZTogXCJkZXBsb3ltZW50X25hbWVcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJRW5kcG9pbnQ6IFwiYXp1cmVfZW5kcG9pbnRcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpVmVyc2lvbjogXCJvcGVuYWlfYXBpX3ZlcnNpb25cIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IFwib3BlbmFpX2FwaV9iYXNlXCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lOiBcImRlcGxveW1lbnRfbmFtZVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX3NlY3JldHMsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaUtleTogXCJBWlVSRV9PUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgbGNfc2VyaWFsaXphYmxlX2tleXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi5zdXBlci5sY19zZXJpYWxpemFibGVfa2V5cyxcbiAgICAgICAgICAgIFwiYXp1cmVPcGVuQUlBcGlLZXlcIixcbiAgICAgICAgICAgIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsXG4gICAgICAgICAgICBcImF6dXJlT3BlbkFJQmFzZVBhdGhcIixcbiAgICAgICAgICAgIFwiYXp1cmVPcGVuQUlFbmRwb2ludFwiLFxuICAgICAgICAgICAgXCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZVwiLFxuICAgICAgICAgICAgXCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lXCIsXG4gICAgICAgICAgICBcImRlcGxveW1lbnROYW1lXCIsXG4gICAgICAgICAgICBcIm9wZW5BSUFwaUtleVwiLFxuICAgICAgICAgICAgXCJvcGVuQUlBcGlWZXJzaW9uXCIsXG4gICAgICAgIF07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVBRFRva2VuUHJvdmlkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUJhc2VQYXRoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJRW5kcG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8uZGVwbG95bWVudE5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfVkVSU0lPTlwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlCYXNlUGF0aCA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQkFTRV9QQVRIXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJRW5kcG9pbnQgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUVuZHBvaW50ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9FTkRQT0lOVFwiKTtcbiAgICAgICAgdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlciA9IGZpZWxkcz8uYXp1cmVBRFRva2VuUHJvdmlkZXI7XG4gICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUtleSAmJiAhdGhpcy5hcGlLZXkgJiYgIXRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkga2V5IG9yIFRva2VuIFByb3ZpZGVyIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMc1BhcmFtcyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHN1cGVyLmdldExzUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBwYXJhbXMubHNfcHJvdmlkZXIgPSBcImF6dXJlXCI7XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBhenVyZUFEVG9rZW5Qcm92aWRlcjogdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJRW5kcG9pbnQ6IHRoaXMuYXp1cmVPcGVuQUlFbmRwb2ludCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBpS2V5ID0gb3BlbkFJRW5kcG9pbnRDb25maWcuYXp1cmVPcGVuQUlBcGlLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGVudiA9IGdldEVudigpO1xuICAgICAgICAgICAgaWYgKGVudiA9PT0gXCJub2RlXCIgfHwgZW52ID09PSBcImRlbm9cIikge1xuICAgICAgICAgICAgICAgIGVudiA9IGAoJHtlbnZ9LyR7cHJvY2Vzcy52ZXJzaW9ufTsgJHtwcm9jZXNzLnBsYXRmb3JtfTsgJHtwcm9jZXNzLmFyY2h9KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzcGVjaWZpZWRVc2VyQWdlbnQgPSBwYXJhbXMuZGVmYXVsdEhlYWRlcnM/LltcIlVzZXItQWdlbnRcIl07XG4gICAgICAgICAgICBwYXJhbXMuZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBgbGFuZ2NoYWluanMtYXp1cmUtb3BlbmFpLzIuMC4wICgke2Vudn0pJHtzcGVjaWZpZWRVc2VyQWdlbnQgPyBgICR7c3BlY2lmaWVkVXNlckFnZW50fWAgOiBcIlwifWAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgQXp1cmVPcGVuQUlDbGllbnQoe1xuICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIGF6dXJlQURUb2tlblByb3ZpZGVyOiB0aGlzLmF6dXJlQURUb2tlblByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIGRlcGxveW1lbnQ6IHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSxcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7XG4gICAgICAgIGZ1bmN0aW9uIGlzUmVjb3JkKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVjb3JkKGpzb24pICYmIGlzUmVjb3JkKGpzb24ua3dhcmdzKSkge1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5haV9iYXNlX3BhdGg7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV9kZXBsb3ltZW50X25hbWU7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV9rZXk7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV92ZXJzaW9uO1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5fYWlfYmFzZV9wYXRoO1xuICAgICAgICAgICAgaWYgKCFqc29uLmt3YXJncy5henVyZV9lbmRwb2ludCAmJiB0aGlzLmF6dXJlT3BlbkFJRW5kcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBqc29uLmt3YXJncy5henVyZV9lbmRwb2ludCA9IHRoaXMuYXp1cmVPcGVuQUlFbmRwb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghanNvbi5rd2FyZ3MuYXp1cmVfZW5kcG9pbnQgJiYgdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGguc3BsaXQoXCIvb3BlbmFpL2RlcGxveW1lbnRzL1wiKTtcbiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyICYmIHBhcnRzWzBdLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtlbmRwb2ludF0gPSBwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAganNvbi5rd2FyZ3MuYXp1cmVfZW5kcG9pbnQgPSBlbmRwb2ludDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWpzb24ua3dhcmdzLmF6dXJlX2VuZHBvaW50ICYmIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBqc29uLmt3YXJncy5henVyZV9lbmRwb2ludCA9IGBodHRwczovLyR7dGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZX0ub3BlbmFpLmF6dXJlLmNvbS9gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFqc29uLmt3YXJncy5kZXBsb3ltZW50X25hbWUgJiYgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAganNvbi5rd2FyZ3MuZGVwbG95bWVudF9uYW1lID0gdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFqc29uLmt3YXJncy5kZXBsb3ltZW50X25hbWUgJiYgdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGguc3BsaXQoXCIvb3BlbmFpL2RlcGxveW1lbnRzL1wiKTtcbiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFssIGRlcGxveW1lbnRdID0gcGFydHM7XG4gICAgICAgICAgICAgICAgICAgIGpzb24ua3dhcmdzLmRlcGxveW1lbnRfbmFtZSA9IGRlcGxveW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpzb24ua3dhcmdzLmF6dXJlX2VuZHBvaW50ICYmXG4gICAgICAgICAgICAgICAganNvbi5rd2FyZ3MuZGVwbG95bWVudF9uYW1lICYmXG4gICAgICAgICAgICAgICAganNvbi5rd2FyZ3Mub3BlbmFpX2FwaV9iYXNlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLm9wZW5haV9hcGlfYmFzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYXBpX2luc3RhbmNlX25hbWUgJiZcbiAgICAgICAgICAgICAgICBqc29uLmt3YXJncy5henVyZV9lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYXBpX2luc3RhbmNlX25hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICAgIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGVuc3VyZWRDb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuICAgICAgICAvLyBOb3QgYWxsIEF6dXJlIGdwdC00byBkZXBsb3ltZW50cyBtb2RlbHMgc3VwcG9ydCBqc29uU2NoZW1hIHlldFxuICAgICAgICBpZiAodGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ3B0LTRvXCIpKSB7XG4gICAgICAgICAgICBpZiAoZW5zdXJlZENvbmZpZz8ubWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBlbnN1cmVkQ29uZmlnLm1ldGhvZCA9IFwiZnVuY3Rpb25DYWxsaW5nXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLndpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgZW5zdXJlZENvbmZpZyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkF6dXJlT3BlbkFJIiwiQXp1cmVPcGVuQUlDbGllbnQiLCJnZXRFbnYiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQ2hhdE9wZW5BSSIsImdldEVuZHBvaW50IiwiQXp1cmVDaGF0T3BlbkFJIiwiX2xsbVR5cGUiLCJsY19hbGlhc2VzIiwib3BlbkFJQXBpS2V5Iiwib3BlbkFJQXBpVmVyc2lvbiIsIm9wZW5BSUJhc2VQYXRoIiwiZGVwbG95bWVudE5hbWUiLCJhenVyZU9wZW5BSUVuZHBvaW50IiwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uIiwiYXp1cmVPcGVuQUlCYXNlUGF0aCIsImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUiLCJsY19zZWNyZXRzIiwiYXp1cmVPcGVuQUlBcGlLZXkiLCJsY19zZXJpYWxpemFibGVfa2V5cyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFwaUtleSIsImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIiwiYXp1cmVBRFRva2VuUHJvdmlkZXIiLCJFcnJvciIsImdldExzUGFyYW1zIiwib3B0aW9ucyIsInBhcmFtcyIsImxzX3Byb3ZpZGVyIiwiX2dldENsaWVudE9wdGlvbnMiLCJjbGllbnQiLCJvcGVuQUlFbmRwb2ludENvbmZpZyIsImJhc2VVUkwiLCJjbGllbnRDb25maWciLCJlbmRwb2ludCIsInRpbWVvdXQiLCJtYXhSZXRyaWVzIiwiZW52IiwicHJvY2VzcyIsInZlcnNpb24iLCJwbGF0Zm9ybSIsImFyY2giLCJzcGVjaWZpZWRVc2VyQWdlbnQiLCJkZWZhdWx0SGVhZGVycyIsImFwaVZlcnNpb24iLCJkZXBsb3ltZW50IiwicmVxdWVzdE9wdGlvbnMiLCJoZWFkZXJzIiwicXVlcnkiLCJ0b0pTT04iLCJqc29uIiwiaXNSZWNvcmQiLCJvYmoiLCJrd2FyZ3MiLCJhenVyZV9vcGVuYWlfYmFzZV9wYXRoIiwiYXp1cmVfb3BlbmFpX2FwaV9kZXBsb3ltZW50X25hbWUiLCJhenVyZV9vcGVuYWlfYXBpX2tleSIsImF6dXJlX29wZW5haV9hcGlfdmVyc2lvbiIsImF6dXJlX29wZW5fYWlfYmFzZV9wYXRoIiwiYXp1cmVfZW5kcG9pbnQiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwic3RhcnRzV2l0aCIsImRlcGxveW1lbnRfbmFtZSIsIm9wZW5haV9hcGlfYmFzZSIsImF6dXJlX29wZW5haV9hcGlfaW5zdGFuY2VfbmFtZSIsIndpdGhTdHJ1Y3R1cmVkT3V0cHV0Iiwib3V0cHV0U2NoZW1hIiwiY29uZmlnIiwiZW5zdXJlZENvbmZpZyIsIm1vZGVsIiwibWV0aG9kIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/azure/embeddings.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/azure/embeddings.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureOpenAIEmbeddings: () => (/* binding */ AzureOpenAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../embeddings.js */ \"(rsc)/./node_modules/@langchain/openai/dist/embeddings.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\nclass AzureOpenAIEmbeddings extends _embeddings_js__WEBPACK_IMPORTED_MODULE_1__.OpenAIEmbeddings {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.batchSize = fields?.batchSize ?? 1;\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? fields?.openAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName = (fields?.azureOpenAIApiEmbeddingsDeploymentName || fields?.azureOpenAIApiDeploymentName) ?? ((0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME\") || (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n    }\n    async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_2__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": params.defaultHeaders?.[\"User-Agent\"] ? `${params.defaultHeaders[\"User-Agent\"]}: langchainjs-azure-openai-v2` : `langchainjs-azure-openai-v2`\n            };\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_4__.AzureOpenAI({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                deployment: this.azureOpenAIApiDeploymentName,\n                ...params\n            });\n        }\n        const requestOptions = {};\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_3__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRDtBQUNRO0FBQ2Y7QUFDSjtBQUNXO0FBQ3BELE1BQU1NLDhCQUE4QkgsNERBQWdCQTtJQUN2REksWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx5QkFBeUI7WUFDakRDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCO1lBQ2hEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSw4QkFBOEI7WUFDdERDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdDQUFnQztZQUN4REMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsUUFBUU8sYUFBYTtRQUN0QyxJQUFJLENBQUNDLGlCQUFpQixHQUNsQlIsUUFBUVEscUJBQ0pSLFFBQVFTLFVBQ1JmLGlGQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNnQixxQkFBcUIsR0FDdEJWLFFBQVFVLHlCQUNKVixRQUFRVyxvQkFDUmpCLGlGQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNrQixtQkFBbUIsR0FDcEJaLFFBQVFZLHVCQUNKbEIsaUZBQXNCQSxDQUFDO1FBQy9CLElBQUksQ0FBQ21CLDBCQUEwQixHQUMzQmIsUUFBUWEsOEJBQ0puQixpRkFBc0JBLENBQUM7UUFDL0IsSUFBSSxDQUFDb0IsNEJBQTRCLEdBQzdCLENBQUNkLFFBQVFlLDBDQUNMZixRQUFRYyw0QkFBMkIsS0FDbENwQixDQUFBQSxpRkFBc0JBLENBQUMsa0RBQ3BCQSxpRkFBc0JBLENBQUMsbUNBQWtDO1FBQ3JFLElBQUksQ0FBQ3NCLG9CQUFvQixHQUFHaEIsUUFBUWdCO0lBQ3hDO0lBQ0EsTUFBTUMsbUJBQW1CQyxPQUFPLEVBQUU7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsTUFBTUMsdUJBQXVCO2dCQUN6Qk4sOEJBQThCLElBQUksQ0FBQ0EsNEJBQTRCO2dCQUMvREQsNEJBQTRCLElBQUksQ0FBQ0EsMEJBQTBCO2dCQUMzREwsbUJBQW1CLElBQUksQ0FBQ0EsaUJBQWlCO2dCQUN6Q0kscUJBQXFCLElBQUksQ0FBQ0EsbUJBQW1CO2dCQUM3Q0ksc0JBQXNCLElBQUksQ0FBQ0Esb0JBQW9CO2dCQUMvQ0ssU0FBUyxJQUFJLENBQUNDLFlBQVksQ0FBQ0QsT0FBTztZQUN0QztZQUNBLE1BQU1FLFdBQVczQiw0REFBV0EsQ0FBQ3dCO1lBQzdCLE1BQU1JLFNBQVM7Z0JBQ1gsR0FBRyxJQUFJLENBQUNGLFlBQVk7Z0JBQ3BCRCxTQUFTRTtnQkFDVEUsU0FBUyxJQUFJLENBQUNBLE9BQU87Z0JBQ3JCQyxZQUFZO1lBQ2hCO1lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ1Ysb0JBQW9CLEVBQUU7Z0JBQzVCUSxPQUFPZixNQUFNLEdBQUdXLHFCQUFxQlosaUJBQWlCO1lBQzFEO1lBQ0EsSUFBSSxDQUFDZ0IsT0FBT0gsT0FBTyxFQUFFO2dCQUNqQixPQUFPRyxPQUFPSCxPQUFPO1lBQ3pCO1lBQ0FHLE9BQU9HLGNBQWMsR0FBRztnQkFDcEIsR0FBR0gsT0FBT0csY0FBYztnQkFDeEIsY0FBY0gsT0FBT0csY0FBYyxFQUFFLENBQUMsYUFBYSxHQUM3QyxDQUFDLEVBQUVILE9BQU9HLGNBQWMsQ0FBQyxhQUFhLENBQUMsNkJBQTZCLENBQUMsR0FDckUsQ0FBQywyQkFBMkIsQ0FBQztZQUN2QztZQUNBLElBQUksQ0FBQ1IsTUFBTSxHQUFHLElBQUkxQiwrQ0FBaUJBLENBQUM7Z0JBQ2hDbUMsWUFBWSxJQUFJLENBQUNsQixxQkFBcUI7Z0JBQ3RDTSxzQkFBc0IsSUFBSSxDQUFDQSxvQkFBb0I7Z0JBQy9DYSxZQUFZLElBQUksQ0FBQ2YsNEJBQTRCO2dCQUM3QyxHQUFHVSxNQUFNO1lBQ2I7UUFDSjtRQUNBLE1BQU1NLGlCQUFpQixDQUFDO1FBQ3hCLElBQUksSUFBSSxDQUFDdEIsaUJBQWlCLEVBQUU7WUFDeEJzQixlQUFlQyxPQUFPLEdBQUc7Z0JBQ3JCLFdBQVcsSUFBSSxDQUFDdkIsaUJBQWlCO2dCQUNqQyxHQUFHc0IsZUFBZUMsT0FBTztZQUM3QjtZQUNBRCxlQUFlRSxLQUFLLEdBQUc7Z0JBQ25CLGVBQWUsSUFBSSxDQUFDdEIscUJBQXFCO2dCQUN6QyxHQUFHb0IsZUFBZUUsS0FBSztZQUMzQjtRQUNKO1FBQ0EsT0FBTyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDO1lBQ3BCLElBQUk7Z0JBQ0EsTUFBTUMsTUFBTSxNQUFNLElBQUksQ0FBQ2hCLE1BQU0sQ0FBQ2lCLFVBQVUsQ0FBQ0MsTUFBTSxDQUFDbkIsU0FBU1k7Z0JBQ3pELE9BQU9LO1lBQ1gsRUFDQSxPQUFPRyxHQUFHO2dCQUNOLE1BQU1DLFFBQVExQyx1RUFBcUJBLENBQUN5QztnQkFDcEMsTUFBTUM7WUFDVjtRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L2F6dXJlL2VtYmVkZGluZ3MuanM/MmQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBenVyZU9wZW5BSSBhcyBBenVyZU9wZW5BSUNsaWVudCwgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IE9wZW5BSUVtYmVkZGluZ3MgfSBmcm9tIFwiLi4vZW1iZWRkaW5ncy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnQgfSBmcm9tIFwiLi4vdXRpbHMvYXp1cmUuanNcIjtcbmltcG9ydCB7IHdyYXBPcGVuQUlDbGllbnRFcnJvciB9IGZyb20gXCIuLi91dGlscy9vcGVuYWkuanNcIjtcbmV4cG9ydCBjbGFzcyBBenVyZU9wZW5BSUVtYmVkZGluZ3MgZXh0ZW5kcyBPcGVuQUlFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlQURUb2tlblByb3ZpZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlCYXNlUGF0aFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IGZpZWxkcz8uYmF0Y2hTaXplID8/IDE7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8uYXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8ub3BlbkFJQXBpVmVyc2lvbiA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05cIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQmFzZVBhdGggPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0JBU0VfUEFUSFwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID1cbiAgICAgICAgICAgIChmaWVsZHM/LmF6dXJlT3BlbkFJQXBpRW1iZWRkaW5nc0RlcGxveW1lbnROYW1lIHx8XG4gICAgICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSA/P1xuICAgICAgICAgICAgICAgIChnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9FTUJFRERJTkdTX0RFUExPWU1FTlRfTkFNRVwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVcIikpO1xuICAgICAgICB0aGlzLmF6dXJlQURUb2tlblByb3ZpZGVyID0gZmllbGRzPy5henVyZUFEVG9rZW5Qcm92aWRlcjtcbiAgICB9XG4gICAgYXN5bmMgZW1iZWRkaW5nV2l0aFJldHJ5KHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBhenVyZUFEVG9rZW5Qcm92aWRlcjogdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQob3BlbkFJRW5kcG9pbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5hcGlLZXkgPSBvcGVuQUlFbmRwb2ludENvbmZpZy5henVyZU9wZW5BSUFwaUtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcGFyYW1zLmJhc2VVUkwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmJhc2VVUkw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMuZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBwYXJhbXMuZGVmYXVsdEhlYWRlcnM/LltcIlVzZXItQWdlbnRcIl1cbiAgICAgICAgICAgICAgICAgICAgPyBgJHtwYXJhbXMuZGVmYXVsdEhlYWRlcnNbXCJVc2VyLUFnZW50XCJdfTogbGFuZ2NoYWluanMtYXp1cmUtb3BlbmFpLXYyYFxuICAgICAgICAgICAgICAgICAgICA6IGBsYW5nY2hhaW5qcy1henVyZS1vcGVuYWktdjJgLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEF6dXJlT3BlbkFJQ2xpZW50KHtcbiAgICAgICAgICAgICAgICBhcGlWZXJzaW9uOiB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbixcbiAgICAgICAgICAgICAgICBhenVyZUFEVG9rZW5Qcm92aWRlcjogdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICBkZXBsb3ltZW50OiB0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUsXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmVtYmVkZGluZ3MuY3JlYXRlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBPcGVuQUlDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkF6dXJlT3BlbkFJIiwiQXp1cmVPcGVuQUlDbGllbnQiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiT3BlbkFJRW1iZWRkaW5ncyIsImdldEVuZHBvaW50Iiwid3JhcE9wZW5BSUNsaWVudEVycm9yIiwiQXp1cmVPcGVuQUlFbWJlZGRpbmdzIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYmF0Y2hTaXplIiwiYXp1cmVPcGVuQUlBcGlLZXkiLCJhcGlLZXkiLCJhenVyZU9wZW5BSUFwaVZlcnNpb24iLCJvcGVuQUlBcGlWZXJzaW9uIiwiYXp1cmVPcGVuQUlCYXNlUGF0aCIsImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIiwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSIsImF6dXJlT3BlbkFJQXBpRW1iZWRkaW5nc0RlcGxveW1lbnROYW1lIiwiYXp1cmVBRFRva2VuUHJvdmlkZXIiLCJlbWJlZGRpbmdXaXRoUmV0cnkiLCJyZXF1ZXN0IiwiY2xpZW50Iiwib3BlbkFJRW5kcG9pbnRDb25maWciLCJiYXNlVVJMIiwiY2xpZW50Q29uZmlnIiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJ0aW1lb3V0IiwibWF4UmV0cmllcyIsImRlZmF1bHRIZWFkZXJzIiwiYXBpVmVyc2lvbiIsImRlcGxveW1lbnQiLCJyZXF1ZXN0T3B0aW9ucyIsImhlYWRlcnMiLCJxdWVyeSIsImNhbGxlciIsImNhbGwiLCJyZXMiLCJlbWJlZGRpbmdzIiwiY3JlYXRlIiwiZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/azure/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/azure/llms.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureOpenAI: () => (/* binding */ AzureOpenAI)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _llms_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/llms.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n\n\n\n\nclass AzureOpenAI extends _llms_js__WEBPACK_IMPORTED_MODULE_1__.OpenAI {\n    get lc_aliases() {\n        return {\n            ...super.lc_aliases,\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\",\n            deploymentName: \"deployment_name\",\n            azureOpenAIEndpoint: \"azure_endpoint\",\n            azureOpenAIApiVersion: \"openai_api_version\",\n            azureOpenAIBasePath: \"openai_api_base\",\n            azureOpenAIApiDeploymentName: \"deployment_name\"\n        };\n    }\n    get lc_secrets() {\n        return {\n            ...super.lc_secrets,\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\"\n        };\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureADTokenProvider\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIEndpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.azureOpenAIApiDeploymentName = (fields?.azureOpenAIApiCompletionsDeploymentName || fields?.azureOpenAIApiDeploymentName) ?? ((0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME\") || (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? fields?.openAIApiKey ?? fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? fields?.openAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.azureOpenAIEndpoint = fields?.azureOpenAIEndpoint ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_ENDPOINT\");\n        this.azureADTokenProvider = fields?.azureADTokenProvider;\n        if (!this.azureOpenAIApiKey && !this.apiKey && !this.azureADTokenProvider) {\n            throw new Error(\"Azure OpenAI API key or Token Provider not found\");\n        }\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                azureADTokenProvider: this.azureADTokenProvider,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_2__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!this.azureADTokenProvider) {\n                params.apiKey = openAIEndpointConfig.azureOpenAIApiKey;\n            }\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            params.defaultHeaders = {\n                ...params.defaultHeaders,\n                \"User-Agent\": params.defaultHeaders?.[\"User-Agent\"] ? `${params.defaultHeaders[\"User-Agent\"]}: langchainjs-azure-openai-v2` : `langchainjs-azure-openai-v2`\n            };\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_3__.AzureOpenAI({\n                apiVersion: this.azureOpenAIApiVersion,\n                azureADTokenProvider: this.azureADTokenProvider,\n                ...params\n            });\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return requestOptions;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n        }\n        return json;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBEO0FBQ1M7QUFDL0I7QUFDWTtBQUN6QyxNQUFNQSxvQkFBb0JHLDRDQUFNQTtJQUNuQyxJQUFJRSxhQUFhO1FBQ2IsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxjQUFjO1lBQ2RDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1lBQ2hCQyxnQkFBZ0I7WUFDaEJDLHFCQUFxQjtZQUNyQkMsdUJBQXVCO1lBQ3ZCQyxxQkFBcUI7WUFDckJDLDhCQUE4QjtRQUNsQztJQUNKO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsVUFBVTtZQUNuQkMsbUJBQW1CO1FBQ3ZCO0lBQ0o7SUFDQUMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx5QkFBeUI7WUFDakRDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCO1lBQ2hEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSw4QkFBOEI7WUFDdERDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdDQUFnQztZQUN4REMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FB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LGVBQWVDLE9BQU8sR0FBRztnQkFDckIsV0FBVyxJQUFJLENBQUMzQixpQkFBaUI7Z0JBQ2pDLEdBQUcwQixlQUFlQyxPQUFPO1lBQzdCO1lBQ0FELGVBQWVFLEtBQUssR0FBRztnQkFDbkIsZUFBZSxJQUFJLENBQUNoQyxxQkFBcUI7Z0JBQ3pDLEdBQUc4QixlQUFlRSxLQUFLO1lBQzNCO1FBQ0o7UUFDQSxPQUFPRjtJQUNYO0lBQ0EsOERBQThEO0lBQzlERyxTQUFTO1FBQ0wsTUFBTUMsT0FBTyxLQUFLLENBQUNEO1FBQ25CLFNBQVNFLFNBQVNDLEdBQUc7WUFDakIsT0FBTyxPQUFPQSxRQUFRLFlBQVlBLE9BQU87UUFDN0M7UUFDQSxJQUFJRCxTQUFTRCxTQUFTQyxTQUFTRCxLQUFLRyxNQUFNLEdBQUc7WUFDekMsT0FBT0gsS0FBS0csTUFBTSxDQUFDQyxzQkFBc0I7WUFDekMsT0FBT0osS0FBS0csTUFBTSxDQUFDRSxnQ0FBZ0M7WUFDbkQsT0FBT0wsS0FBS0csTUFBTSxDQUFDRyxvQkFBb0I7WUFDdkMsT0FBT04sS0FBS0csTUFBTSxDQUFDSSx3QkFBd0I7WUFDM0MsT0FBT1AsS0FBS0csTUFBTSxDQUFDSyx1QkFBdUI7UUFDOUM7UUFDQSxPQUFPUjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9sbG1zLmpzP2E4ZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXp1cmVPcGVuQUkgYXMgQXp1cmVPcGVuQUlDbGllbnQgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IE9wZW5BSSB9IGZyb20gXCIuLi9sbG1zLmpzXCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludCB9IGZyb20gXCIuLi91dGlscy9henVyZS5qc1wiO1xuZXhwb3J0IGNsYXNzIEF6dXJlT3BlbkFJIGV4dGVuZHMgT3BlbkFJIHtcbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwib3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgICAgIG9wZW5BSUFwaVZlcnNpb246IFwib3BlbmFpX2FwaV92ZXJzaW9uXCIsXG4gICAgICAgICAgICBvcGVuQUlCYXNlUGF0aDogXCJvcGVuYWlfYXBpX2Jhc2VcIixcbiAgICAgICAgICAgIGRlcGxveW1lbnROYW1lOiBcImRlcGxveW1lbnRfbmFtZVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlFbmRwb2ludDogXCJhenVyZV9lbmRwb2ludFwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlWZXJzaW9uOiBcIm9wZW5haV9hcGlfdmVyc2lvblwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlCYXNlUGF0aDogXCJvcGVuYWlfYXBpX2Jhc2VcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWU6IFwiZGVwbG95bWVudF9uYW1lXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIubGNfc2VjcmV0cyxcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiBcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVBRFRva2VuUHJvdmlkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUJhc2VQYXRoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJRW5kcG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID1cbiAgICAgICAgICAgIChmaWVsZHM/LmF6dXJlT3BlbkFJQXBpQ29tcGxldGlvbnNEZXBsb3ltZW50TmFtZSB8fFxuICAgICAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkgPz9cbiAgICAgICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfQ09NUExFVElPTlNfREVQTE9ZTUVOVF9OQU1FXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRVwiKSk7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5hcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfVkVSU0lPTlwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlCYXNlUGF0aCA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQkFTRV9QQVRIXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJRW5kcG9pbnQgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUVuZHBvaW50ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9FTkRQT0lOVFwiKTtcbiAgICAgICAgdGhpcy5henVyZUFEVG9rZW5Qcm92aWRlciA9IGZpZWxkcz8uYXp1cmVBRFRva2VuUHJvdmlkZXI7XG4gICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUtleSAmJiAhdGhpcy5hcGlLZXkgJiYgIXRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkga2V5IG9yIFRva2VuIFByb3ZpZGVyIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0Q2xpZW50T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wZW5BSUVuZHBvaW50Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWU6IHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZTogdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUFwaUtleTogdGhpcy5henVyZU9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUJhc2VQYXRoOiB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGgsXG4gICAgICAgICAgICAgICAgYXp1cmVBRFRva2VuUHJvdmlkZXI6IHRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5jbGllbnRDb25maWcuYmFzZVVSTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBpS2V5ID0gb3BlbkFJRW5kcG9pbnRDb25maWcuYXp1cmVPcGVuQUlBcGlLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmRlZmF1bHRIZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIC4uLnBhcmFtcy5kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgICAgICAgICBcIlVzZXItQWdlbnRcIjogcGFyYW1zLmRlZmF1bHRIZWFkZXJzPy5bXCJVc2VyLUFnZW50XCJdXG4gICAgICAgICAgICAgICAgICAgID8gYCR7cGFyYW1zLmRlZmF1bHRIZWFkZXJzW1wiVXNlci1BZ2VudFwiXX06IGxhbmdjaGFpbmpzLWF6dXJlLW9wZW5haS12MmBcbiAgICAgICAgICAgICAgICAgICAgOiBgbGFuZ2NoYWluanMtYXp1cmUtb3BlbmFpLXYyYCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBBenVyZU9wZW5BSUNsaWVudCh7XG4gICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24sXG4gICAgICAgICAgICAgICAgYXp1cmVBRFRva2VuUHJvdmlkZXI6IHRoaXMuYXp1cmVBRFRva2VuUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIFwiYXBpLWtleVwiOiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMucXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGktdmVyc2lvblwiOiB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbixcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcXVlc3RPcHRpb25zO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QganNvbiA9IHN1cGVyLnRvSlNPTigpO1xuICAgICAgICBmdW5jdGlvbiBpc1JlY29yZChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlY29yZChqc29uKSAmJiBpc1JlY29yZChqc29uLmt3YXJncykpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYmFzZV9wYXRoO1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5haV9hcGlfZGVwbG95bWVudF9uYW1lO1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5haV9hcGlfa2V5O1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5haV9hcGlfdmVyc2lvbjtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuX2FpX2Jhc2VfcGF0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXp1cmVPcGVuQUkiLCJBenVyZU9wZW5BSUNsaWVudCIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJPcGVuQUkiLCJnZXRFbmRwb2ludCIsImxjX2FsaWFzZXMiLCJvcGVuQUlBcGlLZXkiLCJvcGVuQUlBcGlWZXJzaW9uIiwib3BlbkFJQmFzZVBhdGgiLCJkZXBsb3ltZW50TmFtZSIsImF6dXJlT3BlbkFJRW5kcG9pbnQiLCJhenVyZU9wZW5BSUFwaVZlcnNpb24iLCJhenVyZU9wZW5BSUJhc2VQYXRoIiwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSIsImxjX3NlY3JldHMiLCJhenVyZU9wZW5BSUFwaUtleSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImF6dXJlT3BlbkFJQXBpQ29tcGxldGlvbnNEZXBsb3ltZW50TmFtZSIsImFwaUtleSIsImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIiwiYXp1cmVBRFRva2VuUHJvdmlkZXIiLCJFcnJvciIsIl9nZXRDbGllbnRPcHRpb25zIiwib3B0aW9ucyIsImNsaWVudCIsIm9wZW5BSUVuZHBvaW50Q29uZmlnIiwiYmFzZVVSTCIsImNsaWVudENvbmZpZyIsImVuZHBvaW50IiwicGFyYW1zIiwidGltZW91dCIsIm1heFJldHJpZXMiLCJkZWZhdWx0SGVhZGVycyIsImFwaVZlcnNpb24iLCJyZXF1ZXN0T3B0aW9ucyIsImhlYWRlcnMiLCJxdWVyeSIsInRvSlNPTiIsImpzb24iLCJpc1JlY29yZCIsIm9iaiIsImt3YXJncyIsImF6dXJlX29wZW5haV9iYXNlX3BhdGgiLCJhenVyZV9vcGVuYWlfYXBpX2RlcGxveW1lbnRfbmFtZSIsImF6dXJlX29wZW5haV9hcGlfa2V5IiwiYXp1cmVfb3BlbmFpX2FwaV92ZXJzaW9uIiwiYXp1cmVfb3Blbl9haV9iYXNlX3BhdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/chat_models.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/chat_models.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatOpenAI: () => (/* binding */ ChatOpenAI),\n/* harmony export */   _convertMessagesToOpenAIParams: () => (/* binding */ _convertMessagesToOpenAIParams),\n/* harmony export */   messageToOpenAIRole: () => (/* binding */ messageToOpenAIRole)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/@langchain/core/language_models/base.js\");\n/* harmony import */ var _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/runnables */ \"(rsc)/./node_modules/@langchain/core/runnables.js\");\n/* harmony import */ var _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @langchain/core/output_parsers */ \"(rsc)/./node_modules/@langchain/core/output_parsers.js\");\n/* harmony import */ var _langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @langchain/core/output_parsers/openai_tools */ \"(rsc)/./node_modules/@langchain/core/output_parsers/openai_tools.js\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var openai_helpers_zod__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! openai/helpers/zod */ \"(rsc)/./node_modules/openai/helpers/zod.mjs\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n/* harmony import */ var _utils_openai_format_fndef_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/openai-format-fndef.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js\");\n/* harmony import */ var _utils_tools_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/tools.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/tools.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction extractGenericMessageCustomRole(message) {\n    if (message.role !== \"system\" && message.role !== \"developer\" && message.role !== \"assistant\" && message.role !== \"user\" && message.role !== \"function\" && message.role !== \"tool\") {\n        console.warn(`Unknown message role: ${message.role}`);\n    }\n    return message.role;\n}\nfunction messageToOpenAIRole(message) {\n    const type = message._getType();\n    switch(type){\n        case \"system\":\n            return \"system\";\n        case \"ai\":\n            return \"assistant\";\n        case \"human\":\n            return \"user\";\n        case \"function\":\n            return \"function\";\n        case \"tool\":\n            return \"tool\";\n        case \"generic\":\n            {\n                if (!_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) throw new Error(\"Invalid generic chat message\");\n                return extractGenericMessageCustomRole(message);\n            }\n        default:\n            throw new Error(`Unknown message type: ${type}`);\n    }\n}\n// Used in LangSmith, export is important here\nfunction _convertMessagesToOpenAIParams(messages, model) {\n    // TODO: Function messages do not support array content, fix cast\n    return messages.flatMap((message)=>{\n        let role = messageToOpenAIRole(message);\n        if (role === \"system\" && isReasoningModel(model)) {\n            role = \"developer\";\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const completionParam = {\n            role,\n            content: message.content\n        };\n        if (message.name != null) {\n            completionParam.name = message.name;\n        }\n        if (message.additional_kwargs.function_call != null) {\n            completionParam.function_call = message.additional_kwargs.function_call;\n            completionParam.content = \"\";\n        }\n        if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(message) && !!message.tool_calls?.length) {\n            completionParam.tool_calls = message.tool_calls.map(_langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.convertLangChainToolCallToOpenAI);\n            completionParam.content = \"\";\n        } else {\n            if (message.additional_kwargs.tool_calls != null) {\n                completionParam.tool_calls = message.additional_kwargs.tool_calls;\n            }\n            if (message.tool_call_id != null) {\n                completionParam.tool_call_id = message.tool_call_id;\n            }\n        }\n        if (message.additional_kwargs.audio && typeof message.additional_kwargs.audio === \"object\" && \"id\" in message.additional_kwargs.audio) {\n            const audioMessage = {\n                role: \"assistant\",\n                audio: {\n                    id: message.additional_kwargs.audio.id\n                }\n            };\n            return [\n                completionParam,\n                audioMessage\n            ];\n        }\n        return completionParam;\n    });\n}\nconst _FUNCTION_CALL_IDS_MAP_KEY = \"__openai_function_call_ids__\";\nfunction _convertMessagesToOpenAIResponsesParams(messages, model) {\n    return messages.flatMap((lcMsg)=>{\n        let role = messageToOpenAIRole(lcMsg);\n        if (role === \"system\" && isReasoningModel(model)) role = \"developer\";\n        if (role === \"function\") {\n            throw new Error(\"Function messages are not supported in Responses API\");\n        }\n        if (role === \"tool\") {\n            const toolMessage = lcMsg;\n            // Handle computer call output\n            if (toolMessage.additional_kwargs?.type === \"computer_call_output\") {\n                const output = (()=>{\n                    if (typeof toolMessage.content === \"string\") {\n                        return {\n                            type: \"computer_screenshot\",\n                            image_url: toolMessage.content\n                        };\n                    }\n                    if (Array.isArray(toolMessage.content)) {\n                        const oaiScreenshot = toolMessage.content.find((i)=>i.type === \"computer_screenshot\");\n                        if (oaiScreenshot) return oaiScreenshot;\n                        const lcImage = toolMessage.content.find((i)=>i.type === \"image_url\");\n                        if (lcImage) {\n                            return {\n                                type: \"computer_screenshot\",\n                                image_url: typeof lcImage.image_url === \"string\" ? lcImage.image_url : lcImage.image_url.url\n                            };\n                        }\n                    }\n                    throw new Error(\"Invalid computer call output\");\n                })();\n                return {\n                    type: \"computer_call_output\",\n                    output,\n                    call_id: toolMessage.tool_call_id\n                };\n            }\n            return {\n                type: \"function_call_output\",\n                call_id: toolMessage.tool_call_id,\n                id: toolMessage.id,\n                output: typeof toolMessage.content !== \"string\" ? JSON.stringify(toolMessage.content) : toolMessage.content\n            };\n        }\n        if (role === \"assistant\") {\n            const input = [];\n            // reasoning items\n            if (lcMsg.additional_kwargs.reasoning != null) {\n                const isReasoningItem = (item)=>typeof item === \"object\" && item != null && \"type\" in item && item.type === \"reasoning\";\n                if (isReasoningItem(lcMsg.additional_kwargs.reasoning)) {\n                    input.push(lcMsg.additional_kwargs.reasoning);\n                }\n            }\n            // ai content\n            let { content } = lcMsg;\n            if (lcMsg.additional_kwargs.refusal != null) {\n                if (typeof content === \"string\") {\n                    content = [\n                        {\n                            type: \"output_text\",\n                            text: content,\n                            annotations: []\n                        }\n                    ];\n                }\n                content = [\n                    ...content,\n                    {\n                        type: \"refusal\",\n                        refusal: lcMsg.additional_kwargs.refusal\n                    }\n                ];\n            }\n            input.push({\n                type: \"message\",\n                role: \"assistant\",\n                content: typeof content === \"string\" ? content : content.flatMap((item)=>{\n                    if (item.type === \"text\") {\n                        return {\n                            type: \"output_text\",\n                            text: item.text,\n                            // @ts-expect-error TODO: add types for `annotations`\n                            annotations: item.annotations ?? []\n                        };\n                    }\n                    if (item.type === \"output_text\" || item.type === \"refusal\") {\n                        return item;\n                    }\n                    return [];\n                })\n            });\n            // function tool calls and computer use tool calls\n            const functionCallIds = // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            lcMsg.additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY];\n            if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(lcMsg) && !!lcMsg.tool_calls?.length) {\n                input.push(...lcMsg.tool_calls.map((toolCall)=>({\n                        type: \"function_call\",\n                        name: toolCall.name,\n                        arguments: JSON.stringify(toolCall.args),\n                        call_id: toolCall.id,\n                        // @ts-expect-error Might come from a non-Responses API message\n                        id: functionCallIds?.[toolCall.id]\n                    })));\n            } else if (lcMsg.additional_kwargs.tool_calls != null) {\n                input.push(...lcMsg.additional_kwargs.tool_calls.map((toolCall)=>({\n                        type: \"function_call\",\n                        name: toolCall.function.name,\n                        call_id: toolCall.id,\n                        // @ts-expect-error Might come from a non-Responses API message\n                        id: functionCallIds?.[toolCall.id],\n                        arguments: toolCall.function.arguments\n                    })));\n            }\n            const toolOutputs = lcMsg.response_metadata.output?.length ? lcMsg.response_metadata.output : lcMsg.additional_kwargs.tool_outputs;\n            if (toolOutputs != null) {\n                const castToolOutputs = toolOutputs;\n                const reasoningCalls = castToolOutputs?.filter((item)=>item.type === \"reasoning\");\n                const computerCalls = castToolOutputs?.filter((item)=>item.type === \"computer_call\");\n                // NOTE: Reasoning outputs must be passed to the model BEFORE computer calls.\n                if (reasoningCalls.length > 0 && computerCalls.length > 0) {\n                    input.push(...reasoningCalls);\n                }\n                if (computerCalls.length > 0) input.push(...computerCalls);\n            }\n            return input;\n        }\n        if (role === \"user\") {\n            return {\n                type: \"message\",\n                role: \"user\",\n                content: typeof lcMsg.content === \"string\" ? lcMsg.content : lcMsg.content.flatMap((item)=>{\n                    if (item.type === \"text\") {\n                        return {\n                            type: \"input_text\",\n                            text: item.text\n                        };\n                    }\n                    if (item.type === \"image_url\") {\n                        const image_url = typeof item.image_url === \"string\" ? item.image_url : item.image_url.url;\n                        const detail = typeof item.image_url === \"string\" ? \"auto\" : item.image_url.detail;\n                        return {\n                            type: \"input_image\",\n                            image_url,\n                            detail\n                        };\n                    }\n                    if (item.type === \"input_text\" || item.type === \"input_image\" || item.type === \"input_file\") {\n                        return item;\n                    }\n                    return [];\n                })\n            };\n        }\n        return [];\n    });\n}\nfunction _convertOpenAIResponsesMessageToBaseMessage(response) {\n    if (response.error) {\n        // TODO: add support for `addLangChainErrorFields`\n        const error = new Error(response.error.message);\n        error.name = response.error.code;\n        throw error;\n    }\n    const content = [];\n    const tool_calls = [];\n    const invalid_tool_calls = [];\n    const response_metadata = {\n        model: response.model,\n        created_at: response.created_at,\n        id: response.id,\n        incomplete_details: response.incomplete_details,\n        metadata: response.metadata,\n        object: response.object,\n        status: response.status,\n        user: response.user,\n        // for compatibility with chat completion calls.\n        model_name: response.model\n    };\n    const additional_kwargs = {};\n    for (const item of response.output){\n        if (item.type === \"message\") {\n            content.push(...item.content.flatMap((part)=>{\n                if (part.type === \"output_text\") {\n                    if (\"parsed\" in part && part.parsed != null) {\n                        additional_kwargs.parsed = part.parsed;\n                    }\n                    return {\n                        type: \"text\",\n                        text: part.text,\n                        annotations: part.annotations\n                    };\n                }\n                if (part.type === \"refusal\") {\n                    additional_kwargs.refusal = part.refusal;\n                    return [];\n                }\n                return part;\n            }));\n        } else if (item.type === \"function_call\") {\n            const fnAdapter = {\n                function: {\n                    name: item.name,\n                    arguments: item.arguments\n                },\n                id: item.call_id\n            };\n            try {\n                tool_calls.push((0,_langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.parseToolCall)(fnAdapter, {\n                    returnId: true\n                }));\n            } catch (e) {\n                let errMessage;\n                if (typeof e === \"object\" && e != null && \"message\" in e && typeof e.message === \"string\") {\n                    errMessage = e.message;\n                }\n                invalid_tool_calls.push((0,_langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.makeInvalidToolCall)(fnAdapter, errMessage));\n            }\n            additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY] ??= {};\n            additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY][item.call_id] = item.id;\n        } else if (item.type === \"reasoning\") {\n            additional_kwargs.reasoning = item;\n        } else {\n            additional_kwargs.tool_outputs ??= [];\n            additional_kwargs.tool_outputs.push(item);\n        }\n    }\n    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n        id: response.id,\n        content,\n        tool_calls,\n        invalid_tool_calls,\n        usage_metadata: response.usage,\n        additional_kwargs,\n        response_metadata\n    });\n}\nfunction _convertOpenAIResponsesDeltaToBaseMessageChunk(chunk) {\n    const content = [];\n    let generationInfo = {};\n    let usage_metadata;\n    const tool_call_chunks = [];\n    const response_metadata = {};\n    const additional_kwargs = {};\n    let id;\n    if (chunk.type === \"response.output_text.delta\") {\n        content.push({\n            type: \"text\",\n            text: chunk.delta,\n            index: chunk.content_index\n        });\n    } else if (chunk.type === \"response.output_text.annotation.added\") {\n        content.push({\n            type: \"text\",\n            text: \"\",\n            annotations: [\n                chunk.annotation\n            ],\n            index: chunk.content_index\n        });\n    } else if (chunk.type === \"response.output_item.added\" && chunk.item.type === \"message\") {\n        id = chunk.item.id;\n    } else if (chunk.type === \"response.output_item.added\" && chunk.item.type === \"function_call\") {\n        tool_call_chunks.push({\n            type: \"tool_call_chunk\",\n            name: chunk.item.name,\n            args: chunk.item.arguments,\n            id: chunk.item.id,\n            index: chunk.output_index\n        });\n        additional_kwargs[_FUNCTION_CALL_IDS_MAP_KEY] = {\n            [chunk.item.call_id]: chunk.item.id\n        };\n    } else if (chunk.type === \"response.output_item.done\" && (chunk.item.type === \"web_search_call\" || chunk.item.type === \"file_search_call\" || chunk.item.type === \"computer_call\")) {\n        additional_kwargs.tool_outputs = [\n            chunk.item\n        ];\n    } else if (chunk.type === \"response.created\") {\n        response_metadata.id = chunk.response.id;\n        response_metadata.model_name = chunk.response.model;\n        response_metadata.model = chunk.response.model;\n    } else if (chunk.type === \"response.completed\") {\n        const msg = _convertOpenAIResponsesMessageToBaseMessage(chunk.response);\n        usage_metadata = chunk.response.usage;\n        if (chunk.response.text?.format?.type === \"json_schema\") {\n            additional_kwargs.parsed ??= JSON.parse(msg.text);\n        }\n        for (const [key, value] of Object.entries(chunk.response)){\n            if (key !== \"id\") response_metadata[key] = value;\n        }\n    } else if (chunk.type === \"response.function_call_arguments.delta\") {\n        tool_call_chunks.push({\n            type: \"tool_call_chunk\",\n            args: chunk.delta,\n            index: chunk.output_index\n        });\n    } else if (chunk.type === \"response.web_search_call.completed\" || chunk.type === \"response.file_search_call.completed\") {\n        generationInfo = {\n            tool_outputs: {\n                id: chunk.item_id,\n                type: chunk.type.replace(\"response.\", \"\").replace(\".completed\", \"\"),\n                status: \"completed\"\n            }\n        };\n    } else if (chunk.type === \"response.refusal.done\") {\n        additional_kwargs.refusal = chunk.refusal;\n    } else {\n        return null;\n    }\n    return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n        // Legacy reasons, `onLLMNewToken` should pulls this out\n        text: content.map((part)=>part.text).join(\"\"),\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n            id,\n            content,\n            tool_call_chunks,\n            usage_metadata,\n            additional_kwargs,\n            response_metadata\n        }),\n        generationInfo\n    });\n}\nfunction isBuiltInTool(tool) {\n    return \"type\" in tool && tool.type !== \"function\";\n}\nfunction isBuiltInToolChoice(tool_choice) {\n    return tool_choice != null && typeof tool_choice === \"object\" && \"type\" in tool_choice && tool_choice.type !== \"function\";\n}\nfunction _convertChatOpenAIToolTypeToOpenAITool(tool, fields) {\n    if ((0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__.isOpenAITool)(tool)) {\n        if (fields?.strict !== undefined) {\n            return {\n                ...tool,\n                function: {\n                    ...tool.function,\n                    strict: fields.strict\n                }\n            };\n        }\n        return tool;\n    }\n    return (0,_utils_tools_js__WEBPACK_IMPORTED_MODULE_12__._convertToOpenAITool)(tool, fields);\n}\nfunction isReasoningModel(model) {\n    return model?.startsWith(\"o1\") || model?.startsWith(\"o3\");\n}\n/**\n * OpenAI chat model integration.\n *\n * To use with Azure, import the `AzureChatOpenAI` class.\n *\n * Setup:\n * Install `@langchain/openai` and set an environment variable named `OPENAI_API_KEY`.\n *\n * ```bash\n * npm install @langchain/openai\n * export OPENAI_API_KEY=\"your-api-key\"\n * ```\n *\n * ## [Constructor args](https://api.js.langchain.com/classes/langchain_openai.ChatOpenAI.html#constructor)\n *\n * ## [Runtime args](https://api.js.langchain.com/interfaces/langchain_openai.ChatOpenAICallOptions.html)\n *\n * Runtime args can be passed as the second argument to any of the base runnable methods `.invoke`. `.stream`, `.batch`, etc.\n * They can also be passed via `.bind`, or the second arg in `.bindTools`, like shown in the examples below:\n *\n * ```typescript\n * // When calling `.bind`, call options should be passed via the first argument\n * const llmWithArgsBound = llm.bind({\n *   stop: [\"\\n\"],\n *   tools: [...],\n * });\n *\n * // When calling `.bindTools`, call options should be passed via the second argument\n * const llmWithTools = llm.bindTools(\n *   [...],\n *   {\n *     tool_choice: \"auto\",\n *   }\n * );\n * ```\n *\n * ## Examples\n *\n * <details open>\n * <summary><strong>Instantiate</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from '@langchain/openai';\n *\n * const llm = new ChatOpenAI({\n *   model: \"gpt-4o\",\n *   temperature: 0,\n *   maxTokens: undefined,\n *   timeout: undefined,\n *   maxRetries: 2,\n *   // apiKey: \"...\",\n *   // baseUrl: \"...\",\n *   // organization: \"...\",\n *   // other params...\n * });\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Invoking</strong></summary>\n *\n * ```typescript\n * const input = `Translate \"I love programming\" into French.`;\n *\n * // Models also accept a list of chat messages or a formatted prompt\n * const result = await llm.invoke(input);\n * console.log(result);\n * ```\n *\n * ```txt\n * AIMessage {\n *   \"id\": \"chatcmpl-9u4Mpu44CbPjwYFkTbeoZgvzB00Tz\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"tokenUsage\": {\n *       \"completionTokens\": 5,\n *       \"promptTokens\": 28,\n *       \"totalTokens\": 33\n *     },\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_3aa7262c27\"\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Streaming Chunks</strong></summary>\n *\n * ```typescript\n * for await (const chunk of await llm.stream(input)) {\n *   console.log(chunk);\n * }\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4NWB7yUeHCKdLr6jP3HpaOYHTqs\",\n *   \"content\": \"\"\n * }\n * AIMessageChunk {\n *   \"content\": \"J\"\n * }\n * AIMessageChunk {\n *   \"content\": \"'adore\"\n * }\n * AIMessageChunk {\n *   \"content\": \" la\"\n * }\n * AIMessageChunk {\n *   \"content\": \" programmation\",,\n * }\n * AIMessageChunk {\n *   \"content\": \".\",,\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"response_metadata\": {\n *     \"finish_reason\": \"stop\",\n *     \"system_fingerprint\": \"fp_c9aa9c0491\"\n *   },\n * }\n * AIMessageChunk {\n *   \"content\": \"\",\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Aggregate Streamed Chunks</strong></summary>\n *\n * ```typescript\n * import { AIMessageChunk } from '@langchain/core/messages';\n * import { concat } from '@langchain/core/utils/stream';\n *\n * const stream = await llm.stream(input);\n * let full: AIMessageChunk | undefined;\n * for await (const chunk of stream) {\n *   full = !full ? chunk : concat(full, chunk);\n * }\n * console.log(full);\n * ```\n *\n * ```txt\n * AIMessageChunk {\n *   \"id\": \"chatcmpl-9u4PnX6Fy7OmK46DASy0bH6cxn5Xu\",\n *   \"content\": \"J'adore la programmation.\",\n *   \"response_metadata\": {\n *     \"prompt\": 0,\n *     \"completion\": 0,\n *     \"finish_reason\": \"stop\",\n *   },\n *   \"usage_metadata\": {\n *     \"input_tokens\": 28,\n *     \"output_tokens\": 5,\n *     \"total_tokens\": 33\n *   }\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Bind tools</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const GetWeather = {\n *   name: \"GetWeather\",\n *   description: \"Get the current weather in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const GetPopulation = {\n *   name: \"GetPopulation\",\n *   description: \"Get the current population in a given location\",\n *   schema: z.object({\n *     location: z.string().describe(\"The city and state, e.g. San Francisco, CA\")\n *   }),\n * }\n *\n * const llmWithTools = llm.bindTools(\n *   [GetWeather, GetPopulation],\n *   {\n *     // strict: true  // enforce tool args schema is respected\n *   }\n * );\n * const aiMsg = await llmWithTools.invoke(\n *   \"Which city is hotter today and which is bigger: LA or NY?\"\n * );\n * console.log(aiMsg.tool_calls);\n * ```\n *\n * ```txt\n * [\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_uPU4FiFzoKAtMxfmPnfQL6UK'\n *   },\n *   {\n *     name: 'GetWeather',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_UNkEwuQsHrGYqgDQuH9nPAtX'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'Los Angeles, CA' },\n *     type: 'tool_call',\n *     id: 'call_kL3OXxaq9OjIKqRTpvjaCH14'\n *   },\n *   {\n *     name: 'GetPopulation',\n *     args: { location: 'New York, NY' },\n *     type: 'tool_call',\n *     id: 'call_s9KQB1UWj45LLGaEnjz0179q'\n *   }\n * ]\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Structured Output</strong></summary>\n *\n * ```typescript\n * import { z } from 'zod';\n *\n * const Joke = z.object({\n *   setup: z.string().describe(\"The setup of the joke\"),\n *   punchline: z.string().describe(\"The punchline to the joke\"),\n *   rating: z.number().nullable().describe(\"How funny the joke is, from 1 to 10\")\n * }).describe('Joke to tell user.');\n *\n * const structuredLlm = llm.withStructuredOutput(Joke, {\n *   name: \"Joke\",\n *   strict: true, // Optionally enable OpenAI structured outputs\n * });\n * const jokeResult = await structuredLlm.invoke(\"Tell me a joke about cats\");\n * console.log(jokeResult);\n * ```\n *\n * ```txt\n * {\n *   setup: 'Why was the cat sitting on the computer?',\n *   punchline: 'Because it wanted to keep an eye on the mouse!',\n *   rating: 7\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Object Response Format</strong></summary>\n *\n * ```typescript\n * const jsonLlm = llm.bind({ response_format: { type: \"json_object\" } });\n * const jsonLlmAiMsg = await jsonLlm.invoke(\n *   \"Return a JSON object with key 'randomInts' and a value of 10 random ints in [0-99]\"\n * );\n * console.log(jsonLlmAiMsg.content);\n * ```\n *\n * ```txt\n * {\n *   \"randomInts\": [23, 87, 45, 12, 78, 34, 56, 90, 11, 67]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Multimodal</strong></summary>\n *\n * ```typescript\n * import { HumanMessage } from '@langchain/core/messages';\n *\n * const imageUrl = \"https://example.com/image.jpg\";\n * const imageData = await fetch(imageUrl).then(res => res.arrayBuffer());\n * const base64Image = Buffer.from(imageData).toString('base64');\n *\n * const message = new HumanMessage({\n *   content: [\n *     { type: \"text\", text: \"describe the weather in this image\" },\n *     {\n *       type: \"image_url\",\n *       image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n *     },\n *   ]\n * });\n *\n * const imageDescriptionAiMsg = await llm.invoke([message]);\n * console.log(imageDescriptionAiMsg.content);\n * ```\n *\n * ```txt\n * The weather in the image appears to be clear and sunny. The sky is mostly blue with a few scattered white clouds, indicating fair weather. The bright sunlight is casting shadows on the green, grassy hill, suggesting it is a pleasant day with good visibility. There are no signs of rain or stormy conditions.\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Usage Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForMetadata = await llm.invoke(input);\n * console.log(aiMsgForMetadata.usage_metadata);\n * ```\n *\n * ```txt\n * { input_tokens: 28, output_tokens: 5, total_tokens: 33 }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Logprobs</strong></summary>\n *\n * ```typescript\n * const logprobsLlm = new ChatOpenAI({ logprobs: true });\n * const aiMsgForLogprobs = await logprobsLlm.invoke(input);\n * console.log(aiMsgForLogprobs.response_metadata.logprobs);\n * ```\n *\n * ```txt\n * {\n *   content: [\n *     {\n *       token: 'J',\n *       logprob: -0.000050616763,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: \"'\",\n *       logprob: -0.01868736,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: 'ad',\n *       logprob: -0.0000030545007,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ore', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: ' la',\n *       logprob: -0.515404,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     {\n *       token: ' programm',\n *       logprob: -0.0000118755715,\n *       bytes: [Array],\n *       top_logprobs: []\n *     },\n *     { token: 'ation', logprob: 0, bytes: [Array], top_logprobs: [] },\n *     {\n *       token: '.',\n *       logprob: -0.0000037697225,\n *       bytes: [Array],\n *       top_logprobs: []\n *     }\n *   ],\n *   refusal: null\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Response Metadata</strong></summary>\n *\n * ```typescript\n * const aiMsgForResponseMetadata = await llm.invoke(input);\n * console.log(aiMsgForResponseMetadata.response_metadata);\n * ```\n *\n * ```txt\n * {\n *   tokenUsage: { completionTokens: 5, promptTokens: 28, totalTokens: 33 },\n *   finish_reason: 'stop',\n *   system_fingerprint: 'fp_3aa7262c27'\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>JSON Schema Structured Output</strong></summary>\n *\n * ```typescript\n * const llmForJsonSchema = new ChatOpenAI({\n *   model: \"gpt-4o-2024-08-06\",\n * }).withStructuredOutput(\n *   z.object({\n *     command: z.string().describe(\"The command to execute\"),\n *     expectedOutput: z.string().describe(\"The expected output of the command\"),\n *     options: z\n *       .array(z.string())\n *       .describe(\"The options you can pass to the command\"),\n *   }),\n *   {\n *     method: \"jsonSchema\",\n *     strict: true, // Optional when using the `jsonSchema` method\n *   }\n * );\n *\n * const jsonSchemaRes = await llmForJsonSchema.invoke(\n *   \"What is the command to list files in a directory?\"\n * );\n * console.log(jsonSchemaRes);\n * ```\n *\n * ```txt\n * {\n *   command: 'ls',\n *   expectedOutput: 'A list of files and subdirectories within the specified directory.',\n *   options: [\n *     '-a: include directory entries whose names begin with a dot (.).',\n *     '-l: use a long listing format.',\n *     '-h: with -l, print sizes in human readable format (e.g., 1K, 234M, 2G).',\n *     '-t: sort by time, newest first.',\n *     '-r: reverse order while sorting.',\n *     '-S: sort by file size, largest first.',\n *     '-R: list subdirectories recursively.'\n *   ]\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Audio Outputs</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from \"@langchain/openai\";\n *\n * const modelWithAudioOutput = new ChatOpenAI({\n *   model: \"gpt-4o-audio-preview\",\n *   // You may also pass these fields to `.bind` as a call argument.\n *   modalities: [\"text\", \"audio\"], // Specifies that the model should output audio.\n *   audio: {\n *     voice: \"alloy\",\n *     format: \"wav\",\n *   },\n * });\n *\n * const audioOutputResult = await modelWithAudioOutput.invoke(\"Tell me a joke about cats.\");\n * const castMessageContent = audioOutputResult.content[0] as Record<string, any>;\n *\n * console.log({\n *   ...castMessageContent,\n *   data: castMessageContent.data.slice(0, 100) // Sliced for brevity\n * })\n * ```\n *\n * ```txt\n * {\n *   id: 'audio_67117718c6008190a3afad3e3054b9b6',\n *   data: 'UklGRqYwBgBXQVZFZm10IBAAAAABAAEAwF0AAIC7AAACABAATElTVBoAAABJTkZPSVNGVA4AAABMYXZmNTguMjkuMTAwAGRhdGFg',\n *   expires_at: 1729201448,\n *   transcript: 'Sure! Why did the cat sit on the computer? Because it wanted to keep an eye on the mouse!'\n * }\n * ```\n * </details>\n *\n * <br />\n *\n * <details>\n * <summary><strong>Audio Outputs</strong></summary>\n *\n * ```typescript\n * import { ChatOpenAI } from \"@langchain/openai\";\n *\n * const modelWithAudioOutput = new ChatOpenAI({\n *   model: \"gpt-4o-audio-preview\",\n *   // You may also pass these fields to `.bind` as a call argument.\n *   modalities: [\"text\", \"audio\"], // Specifies that the model should output audio.\n *   audio: {\n *     voice: \"alloy\",\n *     format: \"wav\",\n *   },\n * });\n *\n * const audioOutputResult = await modelWithAudioOutput.invoke(\"Tell me a joke about cats.\");\n * const castAudioContent = audioOutputResult.additional_kwargs.audio as Record<string, any>;\n *\n * console.log({\n *   ...castAudioContent,\n *   data: castAudioContent.data.slice(0, 100) // Sliced for brevity\n * })\n * ```\n *\n * ```txt\n * {\n *   id: 'audio_67117718c6008190a3afad3e3054b9b6',\n *   data: 'UklGRqYwBgBXQVZFZm10IBAAAAABAAEAwF0AAIC7AAACABAATElTVBoAAABJTkZPSVNGVA4AAABMYXZmNTguMjkuMTAwAGRhdGFg',\n *   expires_at: 1729201448,\n *   transcript: 'Sure! Why did the cat sit on the computer? Because it wanted to keep an eye on the mouse!'\n * }\n * ```\n * </details>\n *\n * <br />\n */ class ChatOpenAI extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__.BaseChatModel {\n    static lc_name() {\n        return \"ChatOpenAI\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\",\n            \"function_call\",\n            \"functions\",\n            \"tools\",\n            \"tool_choice\",\n            \"promptIndex\",\n            \"response_format\",\n            \"seed\",\n            \"reasoning_effort\"\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            apiKey: \"OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            apiKey: \"openai_api_key\"\n        };\n    }\n    get lc_serializable_keys() {\n        return [\n            \"configuration\",\n            \"logprobs\",\n            \"topLogprobs\",\n            \"prefixMessages\",\n            \"supportsStrictToolCalling\",\n            \"modalities\",\n            \"audio\",\n            \"reasoningEffort\",\n            \"temperature\",\n            \"maxTokens\",\n            \"topP\",\n            \"frequencyPenalty\",\n            \"presencePenalty\",\n            \"n\",\n            \"logitBias\",\n            \"user\",\n            \"streaming\",\n            \"streamUsage\",\n            \"modelName\",\n            \"model\",\n            \"modelKwargs\",\n            \"stop\",\n            \"stopSequences\",\n            \"timeout\",\n            \"openAIApiKey\",\n            \"apiKey\",\n            \"cache\",\n            \"maxConcurrency\",\n            \"maxRetries\",\n            \"verbose\",\n            \"callbacks\",\n            \"tags\",\n            \"metadata\",\n            \"disableStreaming\"\n        ];\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @deprecated Use \"model\" instead */ Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo\"\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"streamUsage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topLogprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"__includeRawResponse\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Whether the model supports the `strict` argument when passing in tools.\n         * If `undefined` the `strict` argument will not be passed to OpenAI.\n         */ Object.defineProperty(this, \"supportsStrictToolCalling\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"audio\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modalities\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"reasoningEffort\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"useResponsesApi\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.openAIApiKey = fields?.apiKey ?? fields?.openAIApiKey ?? fields?.configuration?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.apiKey = this.openAIApiKey;\n        this.organization = fields?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        this.modelName = this.model;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.logprobs = fields?.logprobs;\n        this.topLogprobs = fields?.topLogprobs;\n        this.n = fields?.n ?? this.n;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stopSequences ?? fields?.stop;\n        this.stopSequences = this.stop;\n        this.user = fields?.user;\n        this.__includeRawResponse = fields?.__includeRawResponse;\n        this.audio = fields?.audio;\n        this.modalities = fields?.modalities;\n        this.reasoningEffort = fields?.reasoningEffort;\n        this.maxTokens = fields?.maxCompletionTokens ?? fields?.maxTokens;\n        this.useResponsesApi = fields?.useResponsesApi ?? this.useResponsesApi;\n        if (this.model === \"o1\") {\n            this.disableStreaming = true;\n        }\n        this.streaming = fields?.streaming ?? false;\n        this.streamUsage = fields?.streamUsage ?? this.streamUsage;\n        this.clientConfig = {\n            apiKey: this.apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration\n        };\n        // If `supportsStrictToolCalling` is explicitly set, use that value.\n        // Else leave undefined so it's not passed to OpenAI.\n        if (fields?.supportsStrictToolCalling !== undefined) {\n            this.supportsStrictToolCalling = fields.supportsStrictToolCalling;\n        }\n    }\n    getLsParams(options) {\n        const params = this.invocationParams(options);\n        return {\n            ls_provider: \"openai\",\n            ls_model_name: this.model,\n            ls_model_type: \"chat\",\n            ls_temperature: params.temperature ?? undefined,\n            ls_max_tokens: params.max_tokens ?? undefined,\n            ls_stop: options.stop\n        };\n    }\n    bindTools(tools, kwargs) {\n        let strict;\n        if (kwargs?.strict !== undefined) {\n            strict = kwargs.strict;\n        } else if (this.supportsStrictToolCalling !== undefined) {\n            strict = this.supportsStrictToolCalling;\n        }\n        return this.bind({\n            tools: tools.map((tool)=>isBuiltInTool(tool) ? tool : _convertChatOpenAIToolTypeToOpenAITool(tool, {\n                    strict\n                })),\n            ...kwargs\n        });\n    }\n    createResponseFormat(resFormat) {\n        if (resFormat && resFormat.type === \"json_schema\" && resFormat.json_schema.schema && isZodSchema(resFormat.json_schema.schema)) {\n            return (0,openai_helpers_zod__WEBPACK_IMPORTED_MODULE_13__.zodResponseFormat)(resFormat.json_schema.schema, resFormat.json_schema.name, {\n                description: resFormat.json_schema.description\n            });\n        }\n        return resFormat;\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ invocationParams(options, extra) {\n        let strict;\n        if (options?.strict !== undefined) {\n            strict = options.strict;\n        } else if (this.supportsStrictToolCalling !== undefined) {\n            strict = this.supportsStrictToolCalling;\n        }\n        if (this._useResponseApi(options)) {\n            const params = {\n                model: this.model,\n                temperature: this.temperature,\n                top_p: this.topP,\n                user: this.user,\n                // if include_usage is set or streamUsage then stream must be set to true.\n                stream: this.streaming,\n                previous_response_id: options?.previous_response_id,\n                truncation: options?.truncation,\n                include: options?.include,\n                tools: options?.tools?.length ? options.tools.map((tool)=>{\n                    if (isBuiltInTool(tool)) {\n                        return tool;\n                    } else if ((0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_4__.isOpenAITool)(tool)) {\n                        return {\n                            type: \"function\",\n                            name: tool.function.name,\n                            parameters: tool.function.parameters,\n                            description: tool.function.description,\n                            strict\n                        };\n                    } else {\n                        return null;\n                    }\n                }).filter((tool)=>tool !== null) : undefined,\n                tool_choice: isBuiltInToolChoice(options?.tool_choice) ? options?.tool_choice : (()=>{\n                    const formatted = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_10__.formatToOpenAIToolChoice)(options?.tool_choice);\n                    if (typeof formatted === \"object\" && \"type\" in formatted) {\n                        return {\n                            type: \"function\",\n                            name: formatted.function.name\n                        };\n                    } else {\n                        return undefined;\n                    }\n                })(),\n                text: (()=>{\n                    if (options?.text) return options.text;\n                    const format = this.createResponseFormat(options?.response_format);\n                    if (format?.type === \"json_schema\") {\n                        if (format.json_schema.schema != null) {\n                            return {\n                                format: {\n                                    type: \"json_schema\",\n                                    schema: format.json_schema.schema,\n                                    description: format.json_schema.description,\n                                    name: format.json_schema.name,\n                                    strict: format.json_schema.strict\n                                }\n                            };\n                        }\n                        return undefined;\n                    }\n                    return {\n                        format\n                    };\n                })(),\n                parallel_tool_calls: options?.parallel_tool_calls,\n                max_output_tokens: this.maxTokens === -1 ? undefined : this.maxTokens,\n                ...this.modelKwargs\n            };\n            const reasoningEffort = options?.reasoning_effort ?? this.reasoningEffort;\n            if (reasoningEffort !== undefined) {\n                params.reasoning = {\n                    effort: reasoningEffort\n                };\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return params;\n        }\n        let streamOptionsConfig = {};\n        if (options?.stream_options !== undefined) {\n            streamOptionsConfig = {\n                stream_options: options.stream_options\n            };\n        } else if (this.streamUsage && (this.streaming || extra?.streaming)) {\n            streamOptionsConfig = {\n                stream_options: {\n                    include_usage: true\n                }\n            };\n        }\n        const params = {\n            model: this.model,\n            temperature: this.temperature,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            logprobs: this.logprobs,\n            top_logprobs: this.topLogprobs,\n            n: this.n,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stopSequences,\n            user: this.user,\n            // if include_usage is set or streamUsage then stream must be set to true.\n            stream: this.streaming,\n            functions: options?.functions,\n            function_call: options?.function_call,\n            tools: options?.tools?.length ? options.tools.map((tool)=>_convertChatOpenAIToolTypeToOpenAITool(tool, {\n                    strict\n                })) : undefined,\n            tool_choice: (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_10__.formatToOpenAIToolChoice)(options?.tool_choice),\n            response_format: this.createResponseFormat(options?.response_format),\n            seed: options?.seed,\n            ...streamOptionsConfig,\n            parallel_tool_calls: options?.parallel_tool_calls,\n            ...this.audio || options?.audio ? {\n                audio: this.audio || options?.audio\n            } : {},\n            ...this.modalities || options?.modalities ? {\n                modalities: this.modalities || options?.modalities\n            } : {},\n            ...this.modelKwargs\n        };\n        if (options?.prediction !== undefined) {\n            params.prediction = options.prediction;\n        }\n        const reasoningEffort = options?.reasoning_effort ?? this.reasoningEffort;\n        if (reasoningEffort !== undefined) {\n            params.reasoning_effort = reasoningEffort;\n        }\n        if (isReasoningModel(params.model)) {\n            params.max_completion_tokens = this.maxTokens === -1 ? undefined : this.maxTokens;\n        } else {\n            params.max_tokens = this.maxTokens === -1 ? undefined : this.maxTokens;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return params;\n    }\n    _convertOpenAIChatCompletionMessageToBaseMessage(message, rawResponse) {\n        const rawToolCalls = message.tool_calls;\n        switch(message.role){\n            case \"assistant\":\n                {\n                    const toolCalls = [];\n                    const invalidToolCalls = [];\n                    for (const rawToolCall of rawToolCalls ?? []){\n                        try {\n                            toolCalls.push((0,_langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.parseToolCall)(rawToolCall, {\n                                returnId: true\n                            }));\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        } catch (e) {\n                            invalidToolCalls.push((0,_langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.makeInvalidToolCall)(rawToolCall, e.message));\n                        }\n                    }\n                    const additional_kwargs = {\n                        function_call: message.function_call,\n                        tool_calls: rawToolCalls\n                    };\n                    if (this.__includeRawResponse !== undefined) {\n                        additional_kwargs.__raw_response = rawResponse;\n                    }\n                    const response_metadata = {\n                        model_name: rawResponse.model,\n                        ...rawResponse.system_fingerprint ? {\n                            usage: {\n                                ...rawResponse.usage\n                            },\n                            system_fingerprint: rawResponse.system_fingerprint\n                        } : {}\n                    };\n                    if (message.audio) {\n                        additional_kwargs.audio = message.audio;\n                    }\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n                        content: message.content || \"\",\n                        tool_calls: toolCalls,\n                        invalid_tool_calls: invalidToolCalls,\n                        additional_kwargs,\n                        response_metadata,\n                        id: rawResponse.id\n                    });\n                }\n            default:\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage(message.content || \"\", message.role ?? \"unknown\");\n        }\n    }\n    _convertOpenAIDeltaToBaseMessageChunk(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    delta, rawResponse, defaultRole) {\n        const role = delta.role ?? defaultRole;\n        const content = delta.content ?? \"\";\n        let additional_kwargs;\n        if (delta.function_call) {\n            additional_kwargs = {\n                function_call: delta.function_call\n            };\n        } else if (delta.tool_calls) {\n            additional_kwargs = {\n                tool_calls: delta.tool_calls\n            };\n        } else {\n            additional_kwargs = {};\n        }\n        if (this.__includeRawResponse) {\n            additional_kwargs.__raw_response = rawResponse;\n        }\n        if (delta.audio) {\n            additional_kwargs.audio = {\n                ...delta.audio,\n                index: rawResponse.choices[0].index\n            };\n        }\n        const response_metadata = {\n            usage: {\n                ...rawResponse.usage\n            }\n        };\n        if (role === \"user\") {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk({\n                content,\n                response_metadata\n            });\n        } else if (role === \"assistant\") {\n            const toolCallChunks = [];\n            if (Array.isArray(delta.tool_calls)) {\n                for (const rawToolCall of delta.tool_calls){\n                    toolCallChunks.push({\n                        name: rawToolCall.function?.name,\n                        args: rawToolCall.function?.arguments,\n                        id: rawToolCall.id,\n                        index: rawToolCall.index,\n                        type: \"tool_call_chunk\"\n                    });\n                }\n            }\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                content,\n                tool_call_chunks: toolCallChunks,\n                additional_kwargs,\n                id: rawResponse.id,\n                response_metadata\n            });\n        } else if (role === \"system\") {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk({\n                content,\n                response_metadata\n            });\n        } else if (role === \"developer\") {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk({\n                content,\n                response_metadata,\n                additional_kwargs: {\n                    __openai_role__: \"developer\"\n                }\n            });\n        } else if (role === \"function\") {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk({\n                content,\n                additional_kwargs,\n                name: delta.name,\n                response_metadata\n            });\n        } else if (role === \"tool\") {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk({\n                content,\n                additional_kwargs,\n                tool_call_id: delta.tool_call_id,\n                response_metadata\n            });\n        } else {\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk({\n                content,\n                role,\n                response_metadata\n            });\n        }\n    }\n    /** @ignore */ _identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        if (this._useResponseApi(options)) {\n            const streamIterable = await this.responseApiWithRetry({\n                ...this.invocationParams(options, {\n                    streaming: true\n                }),\n                input: _convertMessagesToOpenAIResponsesParams(messages, this.model),\n                stream: true\n            }, options);\n            for await (const data of streamIterable){\n                const chunk = _convertOpenAIResponsesDeltaToBaseMessageChunk(data);\n                if (chunk == null) continue;\n                yield chunk;\n            }\n            return;\n        }\n        const messagesMapped = _convertMessagesToOpenAIParams(messages, this.model);\n        const params = {\n            ...this.invocationParams(options, {\n                streaming: true\n            }),\n            messages: messagesMapped,\n            stream: true\n        };\n        let defaultRole;\n        const streamIterable = await this.completionWithRetry(params, options);\n        let usage;\n        for await (const data of streamIterable){\n            const choice = data?.choices?.[0];\n            if (data.usage) {\n                usage = data.usage;\n            }\n            if (!choice) {\n                continue;\n            }\n            const { delta } = choice;\n            if (!delta) {\n                continue;\n            }\n            const chunk = this._convertOpenAIDeltaToBaseMessageChunk(delta, data, defaultRole);\n            defaultRole = delta.role ?? defaultRole;\n            const newTokenIndices = {\n                prompt: options.promptIndex ?? 0,\n                completion: choice.index ?? 0\n            };\n            if (typeof chunk.content !== \"string\") {\n                console.log(\"[WARNING]: Received non-string content from OpenAI. This is currently not supported.\");\n                continue;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const generationInfo = {\n                ...newTokenIndices\n            };\n            if (choice.finish_reason != null) {\n                generationInfo.finish_reason = choice.finish_reason;\n                // Only include system fingerprint in the last chunk for now\n                // to avoid concatenation issues\n                generationInfo.system_fingerprint = data.system_fingerprint;\n                generationInfo.model_name = data.model;\n            }\n            if (this.logprobs) {\n                generationInfo.logprobs = choice.logprobs;\n            }\n            const generationChunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n                message: chunk,\n                text: chunk.content,\n                generationInfo\n            });\n            yield generationChunk;\n            await runManager?.handleLLMNewToken(generationChunk.text ?? \"\", newTokenIndices, undefined, undefined, undefined, {\n                chunk: generationChunk\n            });\n        }\n        if (usage) {\n            const inputTokenDetails = {\n                ...usage.prompt_tokens_details?.audio_tokens !== null && {\n                    audio: usage.prompt_tokens_details?.audio_tokens\n                },\n                ...usage.prompt_tokens_details?.cached_tokens !== null && {\n                    cache_read: usage.prompt_tokens_details?.cached_tokens\n                }\n            };\n            const outputTokenDetails = {\n                ...usage.completion_tokens_details?.audio_tokens !== null && {\n                    audio: usage.completion_tokens_details?.audio_tokens\n                },\n                ...usage.completion_tokens_details?.reasoning_tokens !== null && {\n                    reasoning: usage.completion_tokens_details?.reasoning_tokens\n                }\n            };\n            const generationChunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n                message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n                    content: \"\",\n                    response_metadata: {\n                        usage: {\n                            ...usage\n                        }\n                    },\n                    usage_metadata: {\n                        input_tokens: usage.prompt_tokens,\n                        output_tokens: usage.completion_tokens,\n                        total_tokens: usage.total_tokens,\n                        ...Object.keys(inputTokenDetails).length > 0 && {\n                            input_token_details: inputTokenDetails\n                        },\n                        ...Object.keys(outputTokenDetails).length > 0 && {\n                            output_token_details: outputTokenDetails\n                        }\n                    }\n                }),\n                text: \"\"\n            });\n            yield generationChunk;\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    /**\n     * Get the identifying parameters for the model\n     *\n     */ identifyingParams() {\n        return this._identifyingParams();\n    }\n    /** @ignore */ async _responseApiGenerate(messages, options, runManager) {\n        const invocationParams = this.invocationParams(options);\n        if (invocationParams.stream) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            let finalChunk;\n            for await (const chunk of stream){\n                chunk.message.response_metadata = {\n                    ...chunk.generationInfo,\n                    ...chunk.message.response_metadata\n                };\n                finalChunk = finalChunk?.concat(chunk) ?? chunk;\n            }\n            return {\n                generations: finalChunk ? [\n                    finalChunk\n                ] : [],\n                llmOutput: {\n                    estimatedTokenUsage: finalChunk?.message?.usage_metadata\n                }\n            };\n        }\n        const input = _convertMessagesToOpenAIResponsesParams(messages, this.model);\n        const data = await this.responseApiWithRetry({\n            input,\n            ...invocationParams\n        }, {\n            signal: options?.signal,\n            ...options?.options\n        });\n        return {\n            generations: [\n                {\n                    text: data.output_text,\n                    message: _convertOpenAIResponsesMessageToBaseMessage(data)\n                }\n            ],\n            llmOutput: {\n                id: data.id,\n                estimatedTokenUsage: data.usage ? {\n                    promptTokens: data.usage.input_tokens,\n                    completionTokens: data.usage.output_tokens,\n                    totalTokens: data.usage.total_tokens\n                } : undefined\n            }\n        };\n    }\n    _useResponseApi(options) {\n        const usesBuiltInTools = options?.tools?.some(isBuiltInTool);\n        const hasResponsesOnlyKwargs = options?.previous_response_id != null || options?.text != null || options?.truncation != null || options?.include != null;\n        return this.useResponsesApi || usesBuiltInTools || hasResponsesOnlyKwargs;\n    }\n    /** @ignore */ async _generate(messages, options, runManager) {\n        if (this._useResponseApi(options)) {\n            return this._responseApiGenerate(messages, options, runManager);\n        }\n        const usageMetadata = {};\n        const params = this.invocationParams(options);\n        const messagesMapped = _convertMessagesToOpenAIParams(messages, this.model);\n        if (params.stream) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            const finalChunks = {};\n            for await (const chunk of stream){\n                chunk.message.response_metadata = {\n                    ...chunk.generationInfo,\n                    ...chunk.message.response_metadata\n                };\n                const index = chunk.generationInfo?.completion ?? 0;\n                if (finalChunks[index] === undefined) {\n                    finalChunks[index] = chunk;\n                } else {\n                    finalChunks[index] = finalChunks[index].concat(chunk);\n                }\n            }\n            const generations = Object.entries(finalChunks).sort(([aKey], [bKey])=>parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value])=>value);\n            const { functions, function_call } = this.invocationParams(options);\n            // OpenAI does not support token usage report under stream mode,\n            // fallback to estimation.\n            const promptTokenUsage = await this.getEstimatedTokenCountFromPrompt(messages, functions, function_call);\n            const completionTokenUsage = await this.getNumTokensFromGenerations(generations);\n            usageMetadata.input_tokens = promptTokenUsage;\n            usageMetadata.output_tokens = completionTokenUsage;\n            usageMetadata.total_tokens = promptTokenUsage + completionTokenUsage;\n            return {\n                generations,\n                llmOutput: {\n                    estimatedTokenUsage: {\n                        promptTokens: usageMetadata.input_tokens,\n                        completionTokens: usageMetadata.output_tokens,\n                        totalTokens: usageMetadata.total_tokens\n                    }\n                }\n            };\n        } else {\n            let data;\n            if (options.response_format && options.response_format.type === \"json_schema\") {\n                data = await this.betaParsedCompletionWithRetry({\n                    ...params,\n                    stream: false,\n                    messages: messagesMapped\n                }, {\n                    signal: options?.signal,\n                    ...options?.options\n                });\n            } else {\n                data = await this.completionWithRetry({\n                    ...params,\n                    stream: false,\n                    messages: messagesMapped\n                }, {\n                    signal: options?.signal,\n                    ...options?.options\n                });\n            }\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens, prompt_tokens_details: promptTokensDetails, completion_tokens_details: completionTokensDetails } = data?.usage ?? {};\n            if (completionTokens) {\n                usageMetadata.output_tokens = (usageMetadata.output_tokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                usageMetadata.input_tokens = (usageMetadata.input_tokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                usageMetadata.total_tokens = (usageMetadata.total_tokens ?? 0) + totalTokens;\n            }\n            if (promptTokensDetails?.audio_tokens !== null || promptTokensDetails?.cached_tokens !== null) {\n                usageMetadata.input_token_details = {\n                    ...promptTokensDetails?.audio_tokens !== null && {\n                        audio: promptTokensDetails?.audio_tokens\n                    },\n                    ...promptTokensDetails?.cached_tokens !== null && {\n                        cache_read: promptTokensDetails?.cached_tokens\n                    }\n                };\n            }\n            if (completionTokensDetails?.audio_tokens !== null || completionTokensDetails?.reasoning_tokens !== null) {\n                usageMetadata.output_token_details = {\n                    ...completionTokensDetails?.audio_tokens !== null && {\n                        audio: completionTokensDetails?.audio_tokens\n                    },\n                    ...completionTokensDetails?.reasoning_tokens !== null && {\n                        reasoning: completionTokensDetails?.reasoning_tokens\n                    }\n                };\n            }\n            const generations = [];\n            for (const part of data?.choices ?? []){\n                const text = part.message?.content ?? \"\";\n                const generation = {\n                    text,\n                    message: this._convertOpenAIChatCompletionMessageToBaseMessage(part.message ?? {\n                        role: \"assistant\"\n                    }, data)\n                };\n                generation.generationInfo = {\n                    ...part.finish_reason ? {\n                        finish_reason: part.finish_reason\n                    } : {},\n                    ...part.logprobs ? {\n                        logprobs: part.logprobs\n                    } : {}\n                };\n                if ((0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isAIMessage)(generation.message)) {\n                    generation.message.usage_metadata = usageMetadata;\n                }\n                // Fields are not serialized unless passed to the constructor\n                // Doing this ensures all fields on the message are serialized\n                generation.message = new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage(Object.fromEntries(Object.entries(generation.message).filter(([key])=>!key.startsWith(\"lc_\"))));\n                generations.push(generation);\n            }\n            return {\n                generations,\n                llmOutput: {\n                    tokenUsage: {\n                        promptTokens: usageMetadata.input_tokens,\n                        completionTokens: usageMetadata.output_tokens,\n                        totalTokens: usageMetadata.total_tokens\n                    }\n                }\n            };\n        }\n    }\n    /**\n     * Estimate the number of tokens a prompt will use.\n     * Modified from: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts\n     */ async getEstimatedTokenCountFromPrompt(messages, functions, function_call) {\n        // It appears that if functions are present, the first system message is padded with a trailing newline. This\n        // was inferred by trying lots of combinations of messages and functions and seeing what the token counts were.\n        let tokens = (await this.getNumTokensFromMessages(messages)).totalCount;\n        // If there are functions, add the function definitions as they count towards token usage\n        if (functions && function_call !== \"auto\") {\n            const promptDefinitions = (0,_utils_openai_format_fndef_js__WEBPACK_IMPORTED_MODULE_11__.formatFunctionDefinitions)(functions);\n            tokens += await this.getNumTokens(promptDefinitions);\n            tokens += 9; // Add nine per completion\n        }\n        // If there's a system message _and_ functions are present, subtract four tokens. I assume this is because\n        // functions typically add a system message, but reuse the first one if it's already there. This offsets\n        // the extra 9 tokens added by the function definitions.\n        if (functions && messages.find((m)=>m._getType() === \"system\")) {\n            tokens -= 4;\n        }\n        // If function_call is 'none', add one token.\n        // If it's a FunctionCall object, add 4 + the number of tokens in the function name.\n        // If it's undefined or 'auto', don't add anything.\n        if (function_call === \"none\") {\n            tokens += 1;\n        } else if (typeof function_call === \"object\") {\n            tokens += await this.getNumTokens(function_call.name) + 4;\n        }\n        return tokens;\n    }\n    /**\n     * Estimate the number of tokens an array of generations have used.\n     */ async getNumTokensFromGenerations(generations) {\n        const generationUsages = await Promise.all(generations.map(async (generation)=>{\n            if (generation.message.additional_kwargs?.function_call) {\n                return (await this.getNumTokensFromMessages([\n                    generation.message\n                ])).countPerMessage[0];\n            } else {\n                return await this.getNumTokens(generation.message.content);\n            }\n        }));\n        return generationUsages.reduce((a, b)=>a + b, 0);\n    }\n    async getNumTokensFromMessages(messages) {\n        let totalCount = 0;\n        let tokensPerMessage = 0;\n        let tokensPerName = 0;\n        // From: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_format_inputs_to_ChatGPT_models.ipynb\n        if (this.model === \"gpt-3.5-turbo-0301\") {\n            tokensPerMessage = 4;\n            tokensPerName = -1;\n        } else {\n            tokensPerMessage = 3;\n            tokensPerName = 1;\n        }\n        const countPerMessage = await Promise.all(messages.map(async (message)=>{\n            const textCount = await this.getNumTokens(message.content);\n            const roleCount = await this.getNumTokens(messageToOpenAIRole(message));\n            const nameCount = message.name !== undefined ? tokensPerName + await this.getNumTokens(message.name) : 0;\n            let count = textCount + tokensPerMessage + roleCount + nameCount;\n            // From: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts messageTokenEstimate\n            const openAIMessage = message;\n            if (openAIMessage._getType() === \"function\") {\n                count -= 2;\n            }\n            if (openAIMessage.additional_kwargs?.function_call) {\n                count += 3;\n            }\n            if (openAIMessage?.additional_kwargs.function_call?.name) {\n                count += await this.getNumTokens(openAIMessage.additional_kwargs.function_call?.name);\n            }\n            if (openAIMessage.additional_kwargs.function_call?.arguments) {\n                try {\n                    count += await this.getNumTokens(// Remove newlines and spaces\n                    JSON.stringify(JSON.parse(openAIMessage.additional_kwargs.function_call?.arguments)));\n                } catch (error) {\n                    console.error(\"Error parsing function arguments\", error, JSON.stringify(openAIMessage.additional_kwargs.function_call));\n                    count += await this.getNumTokens(openAIMessage.additional_kwargs.function_call?.arguments);\n                }\n            }\n            totalCount += count;\n            return count;\n        }));\n        totalCount += 3; // every reply is primed with <|start|>assistant<|message|>\n        return {\n            totalCount,\n            countPerMessage\n        };\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.chat.completions.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_10__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    async responseApiWithRetry(request, options) {\n        return this.caller.call(async ()=>{\n            const requestOptions = this._getClientOptions(options);\n            try {\n                // use parse if dealing with json_schema\n                if (request.text?.format?.type === \"json_schema\" && !request.stream) {\n                    return await this.client.responses.parse(request, requestOptions);\n                }\n                return await this.client.responses.create(request, requestOptions);\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_10__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    /**\n     * Call the beta chat completions parse endpoint. This should only be called if\n     * response_format is set to \"json_object\".\n     * @param {OpenAIClient.Chat.ChatCompletionCreateParamsNonStreaming} request\n     * @param {OpenAICoreRequestOptions | undefined} options\n     */ async betaParsedCompletionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.beta.chat.completions.parse(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_10__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_9__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_14__.OpenAI(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n    /** @ignore */ _combineLLMOutput(...llmOutputs) {\n        return llmOutputs.reduce((acc, llmOutput)=>{\n            if (llmOutput && llmOutput.tokenUsage) {\n                acc.tokenUsage.completionTokens += llmOutput.tokenUsage.completionTokens ?? 0;\n                acc.tokenUsage.promptTokens += llmOutput.tokenUsage.promptTokens ?? 0;\n                acc.tokenUsage.totalTokens += llmOutput.tokenUsage.totalTokens ?? 0;\n            }\n            return acc;\n        }, {\n            tokenUsage: {\n                completionTokens: 0,\n                promptTokens: 0,\n                totalTokens: 0\n            }\n        });\n    }\n    withStructuredOutput(outputSchema, config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let schema;\n        let name;\n        let method;\n        let includeRaw;\n        if (isStructuredOutputMethodParams(outputSchema)) {\n            schema = outputSchema.schema;\n            name = outputSchema.name;\n            method = outputSchema.method;\n            includeRaw = outputSchema.includeRaw;\n        } else {\n            schema = outputSchema;\n            name = config?.name;\n            method = config?.method;\n            includeRaw = config?.includeRaw;\n        }\n        let llm;\n        let outputParser;\n        if (config?.strict !== undefined && method === \"jsonMode\") {\n            throw new Error(\"Argument `strict` is only supported for `method` = 'function_calling'\");\n        }\n        if (!this.model.startsWith(\"gpt-3\") && !this.model.startsWith(\"gpt-4-\") && this.model !== \"gpt-4\") {\n            if (method === undefined) {\n                method = \"jsonSchema\";\n            }\n        } else if (method === \"jsonSchema\") {\n            console.warn(`[WARNING]: JSON Schema is not supported for model \"${this.model}\". Falling back to tool calling.`);\n        }\n        if (method === \"jsonMode\") {\n            llm = this.bind({\n                response_format: {\n                    type: \"json_object\"\n                }\n            });\n            if (isZodSchema(schema)) {\n                outputParser = _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_6__.StructuredOutputParser.fromZodSchema(schema);\n            } else {\n                outputParser = new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_6__.JsonOutputParser();\n            }\n        } else if (method === \"jsonSchema\") {\n            llm = this.bind({\n                response_format: {\n                    type: \"json_schema\",\n                    json_schema: {\n                        name: name ?? \"extract\",\n                        description: schema.description,\n                        schema,\n                        strict: config?.strict\n                    }\n                }\n            });\n            if (isZodSchema(schema)) {\n                const altParser = _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_6__.StructuredOutputParser.fromZodSchema(schema);\n                outputParser = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_5__.RunnableLambda.from((aiMessage)=>{\n                    if (\"parsed\" in aiMessage.additional_kwargs) {\n                        return aiMessage.additional_kwargs.parsed;\n                    }\n                    return altParser;\n                });\n            } else {\n                outputParser = new _langchain_core_output_parsers__WEBPACK_IMPORTED_MODULE_6__.JsonOutputParser();\n            }\n        } else {\n            let functionName = name ?? \"extract\";\n            // Is function calling\n            if (isZodSchema(schema)) {\n                const asJsonSchema = (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_8__.zodToJsonSchema)(schema);\n                llm = this.bind({\n                    tools: [\n                        {\n                            type: \"function\",\n                            function: {\n                                name: functionName,\n                                description: asJsonSchema.description,\n                                parameters: asJsonSchema\n                            }\n                        }\n                    ],\n                    tool_choice: {\n                        type: \"function\",\n                        function: {\n                            name: functionName\n                        }\n                    },\n                    // Do not pass `strict` argument to OpenAI if `config.strict` is undefined\n                    ...config?.strict !== undefined ? {\n                        strict: config.strict\n                    } : {}\n                });\n                outputParser = new _langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.JsonOutputKeyToolsParser({\n                    returnSingle: true,\n                    keyName: functionName,\n                    zodSchema: schema\n                });\n            } else {\n                let openAIFunctionDefinition;\n                if (typeof schema.name === \"string\" && typeof schema.parameters === \"object\" && schema.parameters != null) {\n                    openAIFunctionDefinition = schema;\n                    functionName = schema.name;\n                } else {\n                    functionName = schema.title ?? functionName;\n                    openAIFunctionDefinition = {\n                        name: functionName,\n                        description: schema.description ?? \"\",\n                        parameters: schema\n                    };\n                }\n                llm = this.bind({\n                    tools: [\n                        {\n                            type: \"function\",\n                            function: openAIFunctionDefinition\n                        }\n                    ],\n                    tool_choice: {\n                        type: \"function\",\n                        function: {\n                            name: functionName\n                        }\n                    },\n                    // Do not pass `strict` argument to OpenAI if `config.strict` is undefined\n                    ...config?.strict !== undefined ? {\n                        strict: config.strict\n                    } : {}\n                });\n                outputParser = new _langchain_core_output_parsers_openai_tools__WEBPACK_IMPORTED_MODULE_7__.JsonOutputKeyToolsParser({\n                    returnSingle: true,\n                    keyName: functionName\n                });\n            }\n        }\n        if (!includeRaw) {\n            return llm.pipe(outputParser);\n        }\n        const parserAssign = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_5__.RunnablePassthrough.assign({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            parsed: (input, config)=>outputParser.invoke(input.raw, config)\n        });\n        const parserNone = _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_5__.RunnablePassthrough.assign({\n            parsed: ()=>null\n        });\n        const parsedWithFallback = parserAssign.withFallbacks({\n            fallbacks: [\n                parserNone\n            ]\n        });\n        return _langchain_core_runnables__WEBPACK_IMPORTED_MODULE_5__.RunnableSequence.from([\n            {\n                raw: llm\n            },\n            parsedWithFallback\n        ]);\n    }\n}\nfunction isZodSchema(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ninput) {\n    // Check for a characteristic method of Zod schemas\n    return typeof input?.parse === \"function\";\n}\nfunction isStructuredOutputMethodParams(x) {\n    return x !== undefined && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof x.schema === \"object\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDaUo7QUFDbEk7QUFDSTtBQUNVO0FBQ1I7QUFDOEI7QUFDUjtBQUNtRTtBQUN6RztBQUNFO0FBQ1I7QUFDc0M7QUFDVDtBQUNwQjtBQUN4RCxTQUFTK0IsZ0NBQWdDQyxPQUFPO0lBQzVDLElBQUlBLFFBQVFDLElBQUksS0FBSyxZQUNqQkQsUUFBUUMsSUFBSSxLQUFLLGVBQ2pCRCxRQUFRQyxJQUFJLEtBQUssZUFDakJELFFBQVFDLElBQUksS0FBSyxVQUNqQkQsUUFBUUMsSUFBSSxLQUFLLGNBQ2pCRCxRQUFRQyxJQUFJLEtBQUssUUFBUTtRQUN6QkMsUUFBUUMsSUFBSSxDQUFDLENBQUMsc0JBQXNCLEVBQUVILFFBQVFDLElBQUksQ0FBQyxDQUFDO0lBQ3hEO0lBQ0EsT0FBT0QsUUFBUUMsSUFBSTtBQUN2QjtBQUNPLFNBQVNHLG9CQUFvQkosT0FBTztJQUN2QyxNQUFNSyxPQUFPTCxRQUFRTSxRQUFRO0lBQzdCLE9BQVFEO1FBQ0osS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFBVztnQkFDWixJQUFJLENBQUNqQyxpRUFBV0EsQ0FBQ21DLFVBQVUsQ0FBQ1AsVUFDeEIsTUFBTSxJQUFJUSxNQUFNO2dCQUNwQixPQUFPVCxnQ0FBZ0NDO1lBQzNDO1FBQ0E7WUFDSSxNQUFNLElBQUlRLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUgsS0FBSyxDQUFDO0lBQ3ZEO0FBQ0o7QUFDQSw4Q0FBOEM7QUFDdkMsU0FBU0ksK0JBQStCQyxRQUFRLEVBQUVDLEtBQUs7SUFDMUQsaUVBQWlFO0lBQ2pFLE9BQU9ELFNBQVNFLE9BQU8sQ0FBQyxDQUFDWjtR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RDtJQUNuRCxPQUFPLE9BQU9BLE9BQU9vRCxVQUFVO0FBQ25DO0FBQ0EsU0FBU29PLCtCQUErQnVCLENBQUM7SUFHckMsT0FBUUEsTUFBTTVPLGFBQ1YsOERBQThEO0lBQzlELE9BQU80TyxFQUFFaEwsTUFBTSxLQUNYO0FBQ1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9jaGF0X21vZGVscy5qcz84NTcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSBhcyBPcGVuQUlDbGllbnQgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rLCBDaGF0TWVzc2FnZSwgQ2hhdE1lc3NhZ2VDaHVuaywgRnVuY3Rpb25NZXNzYWdlQ2h1bmssIEh1bWFuTWVzc2FnZUNodW5rLCBTeXN0ZW1NZXNzYWdlQ2h1bmssIFRvb2xNZXNzYWdlQ2h1bmssIGlzQUlNZXNzYWdlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IENoYXRHZW5lcmF0aW9uQ2h1bmssIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9vdXRwdXRzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IEJhc2VDaGF0TW9kZWwsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHNcIjtcbmltcG9ydCB7IGlzT3BlbkFJVG9vbCwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlXCI7XG5pbXBvcnQgeyBSdW5uYWJsZUxhbWJkYSwgUnVubmFibGVQYXNzdGhyb3VnaCwgUnVubmFibGVTZXF1ZW5jZSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlc1wiO1xuaW1wb3J0IHsgSnNvbk91dHB1dFBhcnNlciwgU3RydWN0dXJlZE91dHB1dFBhcnNlciwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzXCI7XG5pbXBvcnQgeyBKc29uT3V0cHV0S2V5VG9vbHNQYXJzZXIsIGNvbnZlcnRMYW5nQ2hhaW5Ub29sQ2FsbFRvT3BlbkFJLCBtYWtlSW52YWxpZFRvb2xDYWxsLCBwYXJzZVRvb2xDYWxsLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0X3BhcnNlcnMvb3BlbmFpX3Rvb2xzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiem9kLXRvLWpzb24tc2NoZW1hXCI7XG5pbXBvcnQgeyB6b2RSZXNwb25zZUZvcm1hdCB9IGZyb20gXCJvcGVuYWkvaGVscGVycy96b2RcIjtcbmltcG9ydCB7IGdldEVuZHBvaW50IH0gZnJvbSBcIi4vdXRpbHMvYXp1cmUuanNcIjtcbmltcG9ydCB7IGZvcm1hdFRvT3BlbkFJVG9vbENob2ljZSwgd3JhcE9wZW5BSUNsaWVudEVycm9yLCB9IGZyb20gXCIuL3V0aWxzL29wZW5haS5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0RnVuY3Rpb25EZWZpbml0aW9ucywgfSBmcm9tIFwiLi91dGlscy9vcGVuYWktZm9ybWF0LWZuZGVmLmpzXCI7XG5pbXBvcnQgeyBfY29udmVydFRvT3BlbkFJVG9vbCB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLmpzXCI7XG5mdW5jdGlvbiBleHRyYWN0R2VuZXJpY01lc3NhZ2VDdXN0b21Sb2xlKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZS5yb2xlICE9PSBcInN5c3RlbVwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJkZXZlbG9wZXJcIiAmJlxuICAgICAgICBtZXNzYWdlLnJvbGUgIT09IFwiYXNzaXN0YW50XCIgJiZcbiAgICAgICAgbWVzc2FnZS5yb2xlICE9PSBcInVzZXJcIiAmJlxuICAgICAgICBtZXNzYWdlLnJvbGUgIT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICBtZXNzYWdlLnJvbGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBtZXNzYWdlIHJvbGU6ICR7bWVzc2FnZS5yb2xlfWApO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZS5yb2xlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lc3NhZ2VUb09wZW5BSVJvbGUobWVzc2FnZSkge1xuICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLl9nZXRUeXBlKCk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgICAgICBjYXNlIFwiYWlcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFzc2lzdGFudFwiO1xuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcInVzZXJcIjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgICAgICBjYXNlIFwiZ2VuZXJpY1wiOiB7XG4gICAgICAgICAgICBpZiAoIUNoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW5lcmljIGNoYXQgbWVzc2FnZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBleHRyYWN0R2VuZXJpY01lc3NhZ2VDdXN0b21Sb2xlKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gbWVzc2FnZSB0eXBlOiAke3R5cGV9YCk7XG4gICAgfVxufVxuLy8gVXNlZCBpbiBMYW5nU21pdGgsIGV4cG9ydCBpcyBpbXBvcnRhbnQgaGVyZVxuZXhwb3J0IGZ1bmN0aW9uIF9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyhtZXNzYWdlcywgbW9kZWwpIHtcbiAgICAvLyBUT0RPOiBGdW5jdGlvbiBtZXNzYWdlcyBkbyBub3Qgc3VwcG9ydCBhcnJheSBjb250ZW50LCBmaXggY2FzdFxuICAgIHJldHVybiBtZXNzYWdlcy5mbGF0TWFwKChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGxldCByb2xlID0gbWVzc2FnZVRvT3BlbkFJUm9sZShtZXNzYWdlKTtcbiAgICAgICAgaWYgKHJvbGUgPT09IFwic3lzdGVtXCIgJiYgaXNSZWFzb25pbmdNb2RlbChtb2RlbCkpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcImRldmVsb3BlclwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25QYXJhbSA9IHtcbiAgICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29tcGxldGlvblBhcmFtLm5hbWUgPSBtZXNzYWdlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb21wbGV0aW9uUGFyYW0uZnVuY3Rpb25fY2FsbCA9IG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbDtcbiAgICAgICAgICAgIGNvbXBsZXRpb25QYXJhbS5jb250ZW50ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBSU1lc3NhZ2UobWVzc2FnZSkgJiYgISFtZXNzYWdlLnRvb2xfY2FsbHM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgY29tcGxldGlvblBhcmFtLnRvb2xfY2FsbHMgPSBtZXNzYWdlLnRvb2xfY2FsbHMubWFwKGNvbnZlcnRMYW5nQ2hhaW5Ub29sQ2FsbFRvT3BlbkFJKTtcbiAgICAgICAgICAgIGNvbXBsZXRpb25QYXJhbS5jb250ZW50ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfY2FsbHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25QYXJhbS50b29sX2NhbGxzID0gbWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy50b29sX2NhbGxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG9vbF9jYWxsX2lkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uUGFyYW0udG9vbF9jYWxsX2lkID0gbWVzc2FnZS50b29sX2NhbGxfaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuYXVkaW8gJiZcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmF1ZGlvID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBcImlkXCIgaW4gbWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5hdWRpbykge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9NZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuYXVkaW8uaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gW2NvbXBsZXRpb25QYXJhbSwgYXVkaW9NZXNzYWdlXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGxldGlvblBhcmFtO1xuICAgIH0pO1xufVxuY29uc3QgX0ZVTkNUSU9OX0NBTExfSURTX01BUF9LRVkgPSBcIl9fb3BlbmFpX2Z1bmN0aW9uX2NhbGxfaWRzX19cIjtcbmZ1bmN0aW9uIF9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVJlc3BvbnNlc1BhcmFtcyhtZXNzYWdlcywgbW9kZWwpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMuZmxhdE1hcCgobGNNc2cpID0+IHtcbiAgICAgICAgbGV0IHJvbGUgPSBtZXNzYWdlVG9PcGVuQUlSb2xlKGxjTXNnKTtcbiAgICAgICAgaWYgKHJvbGUgPT09IFwic3lzdGVtXCIgJiYgaXNSZWFzb25pbmdNb2RlbChtb2RlbCkpXG4gICAgICAgICAgICByb2xlID0gXCJkZXZlbG9wZXJcIjtcbiAgICAgICAgaWYgKHJvbGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnVuY3Rpb24gbWVzc2FnZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gUmVzcG9uc2VzIEFQSVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm9sZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xNZXNzYWdlID0gbGNNc2c7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcHV0ZXIgY2FsbCBvdXRwdXRcbiAgICAgICAgICAgIGlmICh0b29sTWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncz8udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsX291dHB1dFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b29sTWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfc2NyZWVuc2hvdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogdG9vbE1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodG9vbE1lc3NhZ2UuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9haVNjcmVlbnNob3QgPSB0b29sTWVzc2FnZS5jb250ZW50LmZpbmQoKGkpID0+IGkudHlwZSA9PT0gXCJjb21wdXRlcl9zY3JlZW5zaG90XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9haVNjcmVlbnNob3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9haVNjcmVlbnNob3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsY0ltYWdlID0gdG9vbE1lc3NhZ2UuY29udGVudC5maW5kKChpKSA9PiBpLnR5cGUgPT09IFwiaW1hZ2VfdXJsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxjSW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvbXB1dGVyX3NjcmVlbnNob3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB0eXBlb2YgbGNJbWFnZS5pbWFnZV91cmwgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGNJbWFnZS5pbWFnZV91cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbGNJbWFnZS5pbWFnZV91cmwudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb21wdXRlciBjYWxsIG91dHB1dFwiKTtcbiAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfY2FsbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBjYWxsX2lkOiB0b29sTWVzc2FnZS50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsX291dHB1dFwiLFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xNZXNzYWdlLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgICBpZDogdG9vbE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB0eXBlb2YgdG9vbE1lc3NhZ2UuY29udGVudCAhPT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHRvb2xNZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogdG9vbE1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gW107XG4gICAgICAgICAgICAvLyByZWFzb25pbmcgaXRlbXNcbiAgICAgICAgICAgIGlmIChsY01zZy5hZGRpdGlvbmFsX2t3YXJncy5yZWFzb25pbmcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVhc29uaW5nSXRlbSA9IChpdGVtKSA9PiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgICBpdGVtICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCIgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCI7XG4gICAgICAgICAgICAgICAgaWYgKGlzUmVhc29uaW5nSXRlbShsY01zZy5hZGRpdGlvbmFsX2t3YXJncy5yZWFzb25pbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2gobGNNc2cuYWRkaXRpb25hbF9rd2FyZ3MucmVhc29uaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhaSBjb250ZW50XG4gICAgICAgICAgICBsZXQgeyBjb250ZW50IH0gPSBsY01zZztcbiAgICAgICAgICAgIGlmIChsY01zZy5hZGRpdGlvbmFsX2t3YXJncy5yZWZ1c2FsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IFt7IHR5cGU6IFwib3V0cHV0X3RleHRcIiwgdGV4dDogY29udGVudCwgYW5ub3RhdGlvbnM6IFtdIH1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZW50ID0gW1xuICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICB7IHR5cGU6IFwicmVmdXNhbFwiLCByZWZ1c2FsOiBsY01zZy5hZGRpdGlvbmFsX2t3YXJncy5yZWZ1c2FsIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogdHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIDogY29udGVudC5mbGF0TWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3V0cHV0X3RleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogaXRlbS50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IGFkZCB0eXBlcyBmb3IgYGFubm90YXRpb25zYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogaXRlbS5hbm5vdGF0aW9ucyA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gXCJvdXRwdXRfdGV4dFwiIHx8IGl0ZW0udHlwZSA9PT0gXCJyZWZ1c2FsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgY2FsbHMgYW5kIGNvbXB1dGVyIHVzZSB0b29sIGNhbGxzXG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIGxjTXNnLmFkZGl0aW9uYWxfa3dhcmdzW19GVU5DVElPTl9DQUxMX0lEU19NQVBfS0VZXTtcbiAgICAgICAgICAgIGlmIChpc0FJTWVzc2FnZShsY01zZykgJiYgISFsY01zZy50b29sX2NhbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKC4uLmxjTXNnLnRvb2xfY2FsbHMubWFwKCh0b29sQ2FsbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogSlNPTi5zdHJpbmdpZnkodG9vbENhbGwuYXJncyksXG4gICAgICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE1pZ2h0IGNvbWUgZnJvbSBhIG5vbi1SZXNwb25zZXMgQVBJIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGZ1bmN0aW9uQ2FsbElkcz8uW3Rvb2xDYWxsLmlkXSxcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGNNc2cuYWRkaXRpb25hbF9rd2FyZ3MudG9vbF9jYWxscyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQucHVzaCguLi5sY01zZy5hZGRpdGlvbmFsX2t3YXJncy50b29sX2NhbGxzLm1hcCgodG9vbENhbGwpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25fY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYWxsX2lkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBNaWdodCBjb21lIGZyb20gYSBub24tUmVzcG9uc2VzIEFQSSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkOiBmdW5jdGlvbkNhbGxJZHM/Llt0b29sQ2FsbC5pZF0sXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0b29sT3V0cHV0cyA9IGxjTXNnLnJlc3BvbnNlX21ldGFkYXRhLm91dHB1dD8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBsY01zZy5yZXNwb25zZV9tZXRhZGF0YS5vdXRwdXRcbiAgICAgICAgICAgICAgICA6IGxjTXNnLmFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfb3V0cHV0cztcbiAgICAgICAgICAgIGlmICh0b29sT3V0cHV0cyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FzdFRvb2xPdXRwdXRzID0gdG9vbE91dHB1dHM7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nQ2FsbHMgPSBjYXN0VG9vbE91dHB1dHM/LmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSBcInJlYXNvbmluZ1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wdXRlckNhbGxzID0gY2FzdFRvb2xPdXRwdXRzPy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsXCIpO1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFJlYXNvbmluZyBvdXRwdXRzIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBtb2RlbCBCRUZPUkUgY29tcHV0ZXIgY2FsbHMuXG4gICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ0NhbGxzLmxlbmd0aCA+IDAgJiYgY29tcHV0ZXJDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2goLi4ucmVhc29uaW5nQ2FsbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZXJDYWxscy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKC4uLmNvbXB1dGVyQ2FsbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb2xlID09PSBcInVzZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiB0eXBlb2YgbGNNc2cuY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IGxjTXNnLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgOiBsY01zZy5jb250ZW50LmZsYXRNYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJpbnB1dF90ZXh0XCIsIHRleHQ6IGl0ZW0udGV4dCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gXCJpbWFnZV91cmxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlX3VybCA9IHR5cGVvZiBpdGVtLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGl0ZW0uaW1hZ2VfdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXRlbS5pbWFnZV91cmwudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHR5cGVvZiBpdGVtLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYXV0b1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXRlbS5pbWFnZV91cmwuZGV0YWlsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiaW5wdXRfaW1hZ2VcIiwgaW1hZ2VfdXJsLCBkZXRhaWwgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwiaW5wdXRfdGV4dFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSBcImlucHV0X2ltYWdlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09IFwiaW5wdXRfZmlsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfSk7XG59XG5mdW5jdGlvbiBfY29udmVydE9wZW5BSVJlc3BvbnNlc01lc3NhZ2VUb0Jhc2VNZXNzYWdlKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIC8vIFRPRE86IGFkZCBzdXBwb3J0IGZvciBgYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHNgXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBlcnJvci5uYW1lID0gcmVzcG9uc2UuZXJyb3IuY29kZTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBbXTtcbiAgICBjb25zdCB0b29sX2NhbGxzID0gW107XG4gICAgY29uc3QgaW52YWxpZF90b29sX2NhbGxzID0gW107XG4gICAgY29uc3QgcmVzcG9uc2VfbWV0YWRhdGEgPSB7XG4gICAgICAgIG1vZGVsOiByZXNwb25zZS5tb2RlbCxcbiAgICAgICAgY3JlYXRlZF9hdDogcmVzcG9uc2UuY3JlYXRlZF9hdCxcbiAgICAgICAgaWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgICBpbmNvbXBsZXRlX2RldGFpbHM6IHJlc3BvbnNlLmluY29tcGxldGVfZGV0YWlscyxcbiAgICAgICAgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhLFxuICAgICAgICBvYmplY3Q6IHJlc3BvbnNlLm9iamVjdCxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHVzZXI6IHJlc3BvbnNlLnVzZXIsXG4gICAgICAgIC8vIGZvciBjb21wYXRpYmlsaXR5IHdpdGggY2hhdCBjb21wbGV0aW9uIGNhbGxzLlxuICAgICAgICBtb2RlbF9uYW1lOiByZXNwb25zZS5tb2RlbCxcbiAgICB9O1xuICAgIGNvbnN0IGFkZGl0aW9uYWxfa3dhcmdzID0ge307XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSBcIm1lc3NhZ2VcIikge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKC4uLml0ZW0uY29udGVudC5mbGF0TWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gXCJvdXRwdXRfdGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInBhcnNlZFwiIGluIHBhcnQgJiYgcGFydC5wYXJzZWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MucGFyc2VkID0gcGFydC5wYXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydC50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHBhcnQuYW5ub3RhdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09IFwicmVmdXNhbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLnJlZnVzYWwgPSBwYXJ0LnJlZnVzYWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImZ1bmN0aW9uX2NhbGxcIikge1xuICAgICAgICAgICAgY29uc3QgZm5BZGFwdGVyID0ge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7IG5hbWU6IGl0ZW0ubmFtZSwgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyB9LFxuICAgICAgICAgICAgICAgIGlkOiBpdGVtLmNhbGxfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzLnB1c2gocGFyc2VUb29sQ2FsbChmbkFkYXB0ZXIsIHsgcmV0dXJuSWQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyTWVzc2FnZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgZSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZVwiIGluIGUgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGUubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBlcnJNZXNzYWdlID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHMucHVzaChtYWtlSW52YWxpZFRvb2xDYWxsKGZuQWRhcHRlciwgZXJyTWVzc2FnZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3NbX0ZVTkNUSU9OX0NBTExfSURTX01BUF9LRVldID8/PSB7fTtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzW19GVU5DVElPTl9DQUxMX0lEU19NQVBfS0VZXVtpdGVtLmNhbGxfaWRdID0gaXRlbS5pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCIpIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLnJlYXNvbmluZyA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncy50b29sX291dHB1dHMgPz89IFtdO1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MudG9vbF9vdXRwdXRzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2Uoe1xuICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRvb2xfY2FsbHMsXG4gICAgICAgIGludmFsaWRfdG9vbF9jYWxscyxcbiAgICAgICAgdXNhZ2VfbWV0YWRhdGE6IHJlc3BvbnNlLnVzYWdlLFxuICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBfY29udmVydE9wZW5BSVJlc3BvbnNlc0RlbHRhVG9CYXNlTWVzc2FnZUNodW5rKGNodW5rKSB7XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGxldCBnZW5lcmF0aW9uSW5mbyA9IHt9O1xuICAgIGxldCB1c2FnZV9tZXRhZGF0YTtcbiAgICBjb25zdCB0b29sX2NhbGxfY2h1bmtzID0gW107XG4gICAgY29uc3QgcmVzcG9uc2VfbWV0YWRhdGEgPSB7fTtcbiAgICBjb25zdCBhZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgIGxldCBpZDtcbiAgICBpZiAoY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YVwiKSB7XG4gICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIHRleHQ6IGNodW5rLmRlbHRhLFxuICAgICAgICAgICAgaW5kZXg6IGNodW5rLmNvbnRlbnRfaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaHVuay50eXBlID09PSBcInJlc3BvbnNlLm91dHB1dF90ZXh0LmFubm90YXRpb24uYWRkZWRcIikge1xuICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgYW5ub3RhdGlvbnM6IFtjaHVuay5hbm5vdGF0aW9uXSxcbiAgICAgICAgICAgIGluZGV4OiBjaHVuay5jb250ZW50X2luZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiICYmXG4gICAgICAgIGNodW5rLml0ZW0udHlwZSA9PT0gXCJtZXNzYWdlXCIpIHtcbiAgICAgICAgaWQgPSBjaHVuay5pdGVtLmlkO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaHVuay50eXBlID09PSBcInJlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkXCIgJiZcbiAgICAgICAgY2h1bmsuaXRlbS50eXBlID09PSBcImZ1bmN0aW9uX2NhbGxcIikge1xuICAgICAgICB0b29sX2NhbGxfY2h1bmtzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgIG5hbWU6IGNodW5rLml0ZW0ubmFtZSxcbiAgICAgICAgICAgIGFyZ3M6IGNodW5rLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgaWQ6IGNodW5rLml0ZW0uaWQsXG4gICAgICAgICAgICBpbmRleDogY2h1bmsub3V0cHV0X2luZGV4LFxuICAgICAgICB9KTtcbiAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3NbX0ZVTkNUSU9OX0NBTExfSURTX01BUF9LRVldID0ge1xuICAgICAgICAgICAgW2NodW5rLml0ZW0uY2FsbF9pZF06IGNodW5rLml0ZW0uaWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZVwiICYmXG4gICAgICAgIChjaHVuay5pdGVtLnR5cGUgPT09IFwid2ViX3NlYXJjaF9jYWxsXCIgfHxcbiAgICAgICAgICAgIGNodW5rLml0ZW0udHlwZSA9PT0gXCJmaWxlX3NlYXJjaF9jYWxsXCIgfHxcbiAgICAgICAgICAgIGNodW5rLml0ZW0udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsXCIpKSB7XG4gICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLnRvb2xfb3V0cHV0cyA9IFtjaHVuay5pdGVtXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5jcmVhdGVkXCIpIHtcbiAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGEuaWQgPSBjaHVuay5yZXNwb25zZS5pZDtcbiAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGEubW9kZWxfbmFtZSA9IGNodW5rLnJlc3BvbnNlLm1vZGVsO1xuICAgICAgICByZXNwb25zZV9tZXRhZGF0YS5tb2RlbCA9IGNodW5rLnJlc3BvbnNlLm1vZGVsO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNvbXBsZXRlZFwiKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IF9jb252ZXJ0T3BlbkFJUmVzcG9uc2VzTWVzc2FnZVRvQmFzZU1lc3NhZ2UoY2h1bmsucmVzcG9uc2UpO1xuICAgICAgICB1c2FnZV9tZXRhZGF0YSA9IGNodW5rLnJlc3BvbnNlLnVzYWdlO1xuICAgICAgICBpZiAoY2h1bmsucmVzcG9uc2UudGV4dD8uZm9ybWF0Py50eXBlID09PSBcImpzb25fc2NoZW1hXCIpIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLnBhcnNlZCA/Pz0gSlNPTi5wYXJzZShtc2cudGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY2h1bmsucmVzcG9uc2UpKSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSBcImlkXCIpXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZGVsdGFcIikge1xuICAgICAgICB0b29sX2NhbGxfY2h1bmtzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxfY2h1bmtcIixcbiAgICAgICAgICAgIGFyZ3M6IGNodW5rLmRlbHRhLFxuICAgICAgICAgICAgaW5kZXg6IGNodW5rLm91dHB1dF9pbmRleCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uud2ViX3NlYXJjaF9jYWxsLmNvbXBsZXRlZFwiIHx8XG4gICAgICAgIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuZmlsZV9zZWFyY2hfY2FsbC5jb21wbGV0ZWRcIikge1xuICAgICAgICBnZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgIHRvb2xfb3V0cHV0czoge1xuICAgICAgICAgICAgICAgIGlkOiBjaHVuay5pdGVtX2lkLFxuICAgICAgICAgICAgICAgIHR5cGU6IGNodW5rLnR5cGUucmVwbGFjZShcInJlc3BvbnNlLlwiLCBcIlwiKS5yZXBsYWNlKFwiLmNvbXBsZXRlZFwiLCBcIlwiKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiY29tcGxldGVkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaHVuay50eXBlID09PSBcInJlc3BvbnNlLnJlZnVzYWwuZG9uZVwiKSB7XG4gICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLnJlZnVzYWwgPSBjaHVuay5yZWZ1c2FsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgIC8vIExlZ2FjeSByZWFzb25zLCBgb25MTE1OZXdUb2tlbmAgc2hvdWxkIHB1bGxzIHRoaXMgb3V0XG4gICAgICAgIHRleHQ6IGNvbnRlbnQubWFwKChwYXJ0KSA9PiBwYXJ0LnRleHQpLmpvaW4oXCJcIiksXG4gICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzLFxuICAgICAgICAgICAgdXNhZ2VfbWV0YWRhdGEsXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICB9KSxcbiAgICAgICAgZ2VuZXJhdGlvbkluZm8sXG4gICAgfSk7XG59XG5mdW5jdGlvbiBpc0J1aWx0SW5Ub29sKHRvb2wpIHtcbiAgICByZXR1cm4gXCJ0eXBlXCIgaW4gdG9vbCAmJiB0b29sLnR5cGUgIT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGlzQnVpbHRJblRvb2xDaG9pY2UodG9vbF9jaG9pY2UpIHtcbiAgICByZXR1cm4gKHRvb2xfY2hvaWNlICE9IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHRvb2xfY2hvaWNlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIFwidHlwZVwiIGluIHRvb2xfY2hvaWNlICYmXG4gICAgICAgIHRvb2xfY2hvaWNlLnR5cGUgIT09IFwiZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBfY29udmVydENoYXRPcGVuQUlUb29sVHlwZVRvT3BlbkFJVG9vbCh0b29sLCBmaWVsZHMpIHtcbiAgICBpZiAoaXNPcGVuQUlUb29sKHRvb2wpKSB7XG4gICAgICAgIGlmIChmaWVsZHM/LnN0cmljdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udG9vbC5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICAgICAgc3RyaWN0OiBmaWVsZHMuc3RyaWN0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29sO1xuICAgIH1cbiAgICByZXR1cm4gX2NvbnZlcnRUb09wZW5BSVRvb2wodG9vbCwgZmllbGRzKTtcbn1cbmZ1bmN0aW9uIGlzUmVhc29uaW5nTW9kZWwobW9kZWwpIHtcbiAgICByZXR1cm4gbW9kZWw/LnN0YXJ0c1dpdGgoXCJvMVwiKSB8fCBtb2RlbD8uc3RhcnRzV2l0aChcIm8zXCIpO1xufVxuLyoqXG4gKiBPcGVuQUkgY2hhdCBtb2RlbCBpbnRlZ3JhdGlvbi5cbiAqXG4gKiBUbyB1c2Ugd2l0aCBBenVyZSwgaW1wb3J0IHRoZSBgQXp1cmVDaGF0T3BlbkFJYCBjbGFzcy5cbiAqXG4gKiBTZXR1cDpcbiAqIEluc3RhbGwgYEBsYW5nY2hhaW4vb3BlbmFpYCBhbmQgc2V0IGFuIGVudmlyb25tZW50IHZhcmlhYmxlIG5hbWVkIGBPUEVOQUlfQVBJX0tFWWAuXG4gKlxuICogYGBgYmFzaFxuICogbnBtIGluc3RhbGwgQGxhbmdjaGFpbi9vcGVuYWlcbiAqIGV4cG9ydCBPUEVOQUlfQVBJX0tFWT1cInlvdXItYXBpLWtleVwiXG4gKiBgYGBcbiAqXG4gKiAjIyBbQ29uc3RydWN0b3IgYXJnc10oaHR0cHM6Ly9hcGkuanMubGFuZ2NoYWluLmNvbS9jbGFzc2VzL2xhbmdjaGFpbl9vcGVuYWkuQ2hhdE9wZW5BSS5odG1sI2NvbnN0cnVjdG9yKVxuICpcbiAqICMjIFtSdW50aW1lIGFyZ3NdKGh0dHBzOi8vYXBpLmpzLmxhbmdjaGFpbi5jb20vaW50ZXJmYWNlcy9sYW5nY2hhaW5fb3BlbmFpLkNoYXRPcGVuQUlDYWxsT3B0aW9ucy5odG1sKVxuICpcbiAqIFJ1bnRpbWUgYXJncyBjYW4gYmUgcGFzc2VkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gYW55IG9mIHRoZSBiYXNlIHJ1bm5hYmxlIG1ldGhvZHMgYC5pbnZva2VgLiBgLnN0cmVhbWAsIGAuYmF0Y2hgLCBldGMuXG4gKiBUaGV5IGNhbiBhbHNvIGJlIHBhc3NlZCB2aWEgYC5iaW5kYCwgb3IgdGhlIHNlY29uZCBhcmcgaW4gYC5iaW5kVG9vbHNgLCBsaWtlIHNob3duIGluIHRoZSBleGFtcGxlcyBiZWxvdzpcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBXaGVuIGNhbGxpbmcgYC5iaW5kYCwgY2FsbCBvcHRpb25zIHNob3VsZCBiZSBwYXNzZWQgdmlhIHRoZSBmaXJzdCBhcmd1bWVudFxuICogY29uc3QgbGxtV2l0aEFyZ3NCb3VuZCA9IGxsbS5iaW5kKHtcbiAqICAgc3RvcDogW1wiXFxuXCJdLFxuICogICB0b29sczogWy4uLl0sXG4gKiB9KTtcbiAqXG4gKiAvLyBXaGVuIGNhbGxpbmcgYC5iaW5kVG9vbHNgLCBjYWxsIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgdGhlIHNlY29uZCBhcmd1bWVudFxuICogY29uc3QgbGxtV2l0aFRvb2xzID0gbGxtLmJpbmRUb29scyhcbiAqICAgWy4uLl0sXG4gKiAgIHtcbiAqICAgICB0b29sX2Nob2ljZTogXCJhdXRvXCIsXG4gKiAgIH1cbiAqICk7XG4gKiBgYGBcbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIDxkZXRhaWxzIG9wZW4+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkluc3RhbnRpYXRlPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENoYXRPcGVuQUkgfSBmcm9tICdAbGFuZ2NoYWluL29wZW5haSc7XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRPcGVuQUkoe1xuICogICBtb2RlbDogXCJncHQtNG9cIixcbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIG1heFRva2VuczogdW5kZWZpbmVkLFxuICogICB0aW1lb3V0OiB1bmRlZmluZWQsXG4gKiAgIG1heFJldHJpZXM6IDIsXG4gKiAgIC8vIGFwaUtleTogXCIuLi5cIixcbiAqICAgLy8gYmFzZVVybDogXCIuLi5cIixcbiAqICAgLy8gb3JnYW5pemF0aW9uOiBcIi4uLlwiLFxuICogICAvLyBvdGhlciBwYXJhbXMuLi5cbiAqIH0pO1xuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkludm9raW5nPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGlucHV0ID0gYFRyYW5zbGF0ZSBcIkkgbG92ZSBwcm9ncmFtbWluZ1wiIGludG8gRnJlbmNoLmA7XG4gKlxuICogLy8gTW9kZWxzIGFsc28gYWNjZXB0IGEgbGlzdCBvZiBjaGF0IG1lc3NhZ2VzIG9yIGEgZm9ybWF0dGVkIHByb21wdFxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiBBSU1lc3NhZ2Uge1xuICogICBcImlkXCI6IFwiY2hhdGNtcGwtOXU0TXB1NDRDYlBqd1lGa1RiZW9aZ3Z6QjAwVHpcIixcbiAqICAgXCJjb250ZW50XCI6IFwiSidhZG9yZSBsYSBwcm9ncmFtbWF0aW9uLlwiLFxuICogICBcInJlc3BvbnNlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcInRva2VuVXNhZ2VcIjoge1xuICogICAgICAgXCJjb21wbGV0aW9uVG9rZW5zXCI6IDUsXG4gKiAgICAgICBcInByb21wdFRva2Vuc1wiOiAyOCxcbiAqICAgICAgIFwidG90YWxUb2tlbnNcIjogMzNcbiAqICAgICB9LFxuICogICAgIFwiZmluaXNoX3JlYXNvblwiOiBcInN0b3BcIixcbiAqICAgICBcInN5c3RlbV9maW5nZXJwcmludFwiOiBcImZwXzNhYTcyNjJjMjdcIlxuICogICB9LFxuICogICBcInVzYWdlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlucHV0X3Rva2Vuc1wiOiAyOCxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogNSxcbiAqICAgICBcInRvdGFsX3Rva2Vuc1wiOiAzM1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+U3RyZWFtaW5nIENodW5rczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGF3YWl0IGxsbS5zdHJlYW0oaW5wdXQpKSB7XG4gKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImlkXCI6IFwiY2hhdGNtcGwtOXU0TldCN3lVZUhDS2RMcjZqUDNIcGFPWUhUcXNcIixcbiAqICAgXCJjb250ZW50XCI6IFwiXCJcbiAqIH1cbiAqIEFJTWVzc2FnZUNodW5rIHtcbiAqICAgXCJjb250ZW50XCI6IFwiSlwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIidhZG9yZVwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIiBsYVwiXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIiBwcm9ncmFtbWF0aW9uXCIsLFxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCIuXCIsLFxuICogfVxuICogQUlNZXNzYWdlQ2h1bmsge1xuICogICBcImNvbnRlbnRcIjogXCJcIixcbiAqICAgXCJyZXNwb25zZV9tZXRhZGF0YVwiOiB7XG4gKiAgICAgXCJmaW5pc2hfcmVhc29uXCI6IFwic3RvcFwiLFxuICogICAgIFwic3lzdGVtX2ZpbmdlcnByaW50XCI6IFwiZnBfYzlhYTljMDQ5MVwiXG4gKiAgIH0sXG4gKiB9XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiY29udGVudFwiOiBcIlwiLFxuICogICBcInVzYWdlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlucHV0X3Rva2Vuc1wiOiAyOCxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogNSxcbiAqICAgICBcInRvdGFsX3Rva2Vuc1wiOiAzM1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+QWdncmVnYXRlIFN0cmVhbWVkIENodW5rczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBBSU1lc3NhZ2VDaHVuayB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS9tZXNzYWdlcyc7XG4gKiBpbXBvcnQgeyBjb25jYXQgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvdXRpbHMvc3RyZWFtJztcbiAqXG4gKiBjb25zdCBzdHJlYW0gPSBhd2FpdCBsbG0uc3RyZWFtKGlucHV0KTtcbiAqIGxldCBmdWxsOiBBSU1lc3NhZ2VDaHVuayB8IHVuZGVmaW5lZDtcbiAqIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gKiAgIGZ1bGwgPSAhZnVsbCA/IGNodW5rIDogY29uY2F0KGZ1bGwsIGNodW5rKTtcbiAqIH1cbiAqIGNvbnNvbGUubG9nKGZ1bGwpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiBBSU1lc3NhZ2VDaHVuayB7XG4gKiAgIFwiaWRcIjogXCJjaGF0Y21wbC05dTRQblg2Rnk3T21LNDZEQVN5MGJINmN4bjVYdVwiLFxuICogICBcImNvbnRlbnRcIjogXCJKJ2Fkb3JlIGxhIHByb2dyYW1tYXRpb24uXCIsXG4gKiAgIFwicmVzcG9uc2VfbWV0YWRhdGFcIjoge1xuICogICAgIFwicHJvbXB0XCI6IDAsXG4gKiAgICAgXCJjb21wbGV0aW9uXCI6IDAsXG4gKiAgICAgXCJmaW5pc2hfcmVhc29uXCI6IFwic3RvcFwiLFxuICogICB9LFxuICogICBcInVzYWdlX21ldGFkYXRhXCI6IHtcbiAqICAgICBcImlucHV0X3Rva2Vuc1wiOiAyOCxcbiAqICAgICBcIm91dHB1dF90b2tlbnNcIjogNSxcbiAqICAgICBcInRvdGFsX3Rva2Vuc1wiOiAzM1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+QmluZCB0b29sczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbiAqXG4gKiBjb25zdCBHZXRXZWF0aGVyID0ge1xuICogICBuYW1lOiBcIkdldFdlYXRoZXJcIixcbiAqICAgZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHdlYXRoZXIgaW4gYSBnaXZlbiBsb2NhdGlvblwiLFxuICogICBzY2hlbWE6IHoub2JqZWN0KHtcbiAqICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBjaXR5IGFuZCBzdGF0ZSwgZS5nLiBTYW4gRnJhbmNpc2NvLCBDQVwiKVxuICogICB9KSxcbiAqIH1cbiAqXG4gKiBjb25zdCBHZXRQb3B1bGF0aW9uID0ge1xuICogICBuYW1lOiBcIkdldFBvcHVsYXRpb25cIixcbiAqICAgZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHBvcHVsYXRpb24gaW4gYSBnaXZlbiBsb2NhdGlvblwiLFxuICogICBzY2hlbWE6IHoub2JqZWN0KHtcbiAqICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBjaXR5IGFuZCBzdGF0ZSwgZS5nLiBTYW4gRnJhbmNpc2NvLCBDQVwiKVxuICogICB9KSxcbiAqIH1cbiAqXG4gKiBjb25zdCBsbG1XaXRoVG9vbHMgPSBsbG0uYmluZFRvb2xzKFxuICogICBbR2V0V2VhdGhlciwgR2V0UG9wdWxhdGlvbl0sXG4gKiAgIHtcbiAqICAgICAvLyBzdHJpY3Q6IHRydWUgIC8vIGVuZm9yY2UgdG9vbCBhcmdzIHNjaGVtYSBpcyByZXNwZWN0ZWRcbiAqICAgfVxuICogKTtcbiAqIGNvbnN0IGFpTXNnID0gYXdhaXQgbGxtV2l0aFRvb2xzLmludm9rZShcbiAqICAgXCJXaGljaCBjaXR5IGlzIGhvdHRlciB0b2RheSBhbmQgd2hpY2ggaXMgYmlnZ2VyOiBMQSBvciBOWT9cIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKGFpTXNnLnRvb2xfY2FsbHMpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiBbXG4gKiAgIHtcbiAqICAgICBuYW1lOiAnR2V0V2VhdGhlcicsXG4gKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ0xvcyBBbmdlbGVzLCBDQScgfSxcbiAqICAgICB0eXBlOiAndG9vbF9jYWxsJyxcbiAqICAgICBpZDogJ2NhbGxfdVBVNEZpRnpvS0F0TXhmbVBuZlFMNlVLJ1xuICogICB9LFxuICogICB7XG4gKiAgICAgbmFtZTogJ0dldFdlYXRoZXInLFxuICogICAgIGFyZ3M6IHsgbG9jYXRpb246ICdOZXcgWW9yaywgTlknIH0sXG4gKiAgICAgdHlwZTogJ3Rvb2xfY2FsbCcsXG4gKiAgICAgaWQ6ICdjYWxsX1VOa0V3dVFzSHJHWXFnRFF1SDluUEF0WCdcbiAqICAgfSxcbiAqICAge1xuICogICAgIG5hbWU6ICdHZXRQb3B1bGF0aW9uJyxcbiAqICAgICBhcmdzOiB7IGxvY2F0aW9uOiAnTG9zIEFuZ2VsZXMsIENBJyB9LFxuICogICAgIHR5cGU6ICd0b29sX2NhbGwnLFxuICogICAgIGlkOiAnY2FsbF9rTDNPWHhhcTlPaklLcVJUcHZqYUNIMTQnXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBuYW1lOiAnR2V0UG9wdWxhdGlvbicsXG4gKiAgICAgYXJnczogeyBsb2NhdGlvbjogJ05ldyBZb3JrLCBOWScgfSxcbiAqICAgICB0eXBlOiAndG9vbF9jYWxsJyxcbiAqICAgICBpZDogJ2NhbGxfczlLUUIxVVdqNDVMTEdhRW5qejAxNzlxJ1xuICogICB9XG4gKiBdXG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+U3RydWN0dXJlZCBPdXRwdXQ8L3N0cm9uZz48L3N1bW1hcnk+XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4gKlxuICogY29uc3QgSm9rZSA9IHoub2JqZWN0KHtcbiAqICAgc2V0dXA6IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgc2V0dXAgb2YgdGhlIGpva2VcIiksXG4gKiAgIHB1bmNobGluZTogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBwdW5jaGxpbmUgdG8gdGhlIGpva2VcIiksXG4gKiAgIHJhdGluZzogei5udW1iZXIoKS5udWxsYWJsZSgpLmRlc2NyaWJlKFwiSG93IGZ1bm55IHRoZSBqb2tlIGlzLCBmcm9tIDEgdG8gMTBcIilcbiAqIH0pLmRlc2NyaWJlKCdKb2tlIHRvIHRlbGwgdXNlci4nKTtcbiAqXG4gKiBjb25zdCBzdHJ1Y3R1cmVkTGxtID0gbGxtLndpdGhTdHJ1Y3R1cmVkT3V0cHV0KEpva2UsIHtcbiAqICAgbmFtZTogXCJKb2tlXCIsXG4gKiAgIHN0cmljdDogdHJ1ZSwgLy8gT3B0aW9uYWxseSBlbmFibGUgT3BlbkFJIHN0cnVjdHVyZWQgb3V0cHV0c1xuICogfSk7XG4gKiBjb25zdCBqb2tlUmVzdWx0ID0gYXdhaXQgc3RydWN0dXJlZExsbS5pbnZva2UoXCJUZWxsIG1lIGEgam9rZSBhYm91dCBjYXRzXCIpO1xuICogY29uc29sZS5sb2coam9rZVJlc3VsdCk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHtcbiAqICAgc2V0dXA6ICdXaHkgd2FzIHRoZSBjYXQgc2l0dGluZyBvbiB0aGUgY29tcHV0ZXI/JyxcbiAqICAgcHVuY2hsaW5lOiAnQmVjYXVzZSBpdCB3YW50ZWQgdG8ga2VlcCBhbiBleWUgb24gdGhlIG1vdXNlIScsXG4gKiAgIHJhdGluZzogN1xuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkpTT04gT2JqZWN0IFJlc3BvbnNlIEZvcm1hdDwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBqc29uTGxtID0gbGxtLmJpbmQoeyByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0gfSk7XG4gKiBjb25zdCBqc29uTGxtQWlNc2cgPSBhd2FpdCBqc29uTGxtLmludm9rZShcbiAqICAgXCJSZXR1cm4gYSBKU09OIG9iamVjdCB3aXRoIGtleSAncmFuZG9tSW50cycgYW5kIGEgdmFsdWUgb2YgMTAgcmFuZG9tIGludHMgaW4gWzAtOTldXCJcbiAqICk7XG4gKiBjb25zb2xlLmxvZyhqc29uTGxtQWlNc2cuY29udGVudCk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHtcbiAqICAgXCJyYW5kb21JbnRzXCI6IFsyMywgODcsIDQ1LCAxMiwgNzgsIDM0LCA1NiwgOTAsIDExLCA2N11cbiAqIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5NdWx0aW1vZGFsPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEh1bWFuTWVzc2FnZSB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS9tZXNzYWdlcyc7XG4gKlxuICogY29uc3QgaW1hZ2VVcmwgPSBcImh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXCI7XG4gKiBjb25zdCBpbWFnZURhdGEgPSBhd2FpdCBmZXRjaChpbWFnZVVybCkudGhlbihyZXMgPT4gcmVzLmFycmF5QnVmZmVyKCkpO1xuICogY29uc3QgYmFzZTY0SW1hZ2UgPSBCdWZmZXIuZnJvbShpbWFnZURhdGEpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAqXG4gKiBjb25zdCBtZXNzYWdlID0gbmV3IEh1bWFuTWVzc2FnZSh7XG4gKiAgIGNvbnRlbnQ6IFtcbiAqICAgICB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBcImRlc2NyaWJlIHRoZSB3ZWF0aGVyIGluIHRoaXMgaW1hZ2VcIiB9LFxuICogICAgIHtcbiAqICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gKiAgICAgICBpbWFnZV91cmw6IHsgdXJsOiBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2Jhc2U2NEltYWdlfWAgfSxcbiAqICAgICB9LFxuICogICBdXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBpbWFnZURlc2NyaXB0aW9uQWlNc2cgPSBhd2FpdCBsbG0uaW52b2tlKFttZXNzYWdlXSk7XG4gKiBjb25zb2xlLmxvZyhpbWFnZURlc2NyaXB0aW9uQWlNc2cuY29udGVudCk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIFRoZSB3ZWF0aGVyIGluIHRoZSBpbWFnZSBhcHBlYXJzIHRvIGJlIGNsZWFyIGFuZCBzdW5ueS4gVGhlIHNreSBpcyBtb3N0bHkgYmx1ZSB3aXRoIGEgZmV3IHNjYXR0ZXJlZCB3aGl0ZSBjbG91ZHMsIGluZGljYXRpbmcgZmFpciB3ZWF0aGVyLiBUaGUgYnJpZ2h0IHN1bmxpZ2h0IGlzIGNhc3Rpbmcgc2hhZG93cyBvbiB0aGUgZ3JlZW4sIGdyYXNzeSBoaWxsLCBzdWdnZXN0aW5nIGl0IGlzIGEgcGxlYXNhbnQgZGF5IHdpdGggZ29vZCB2aXNpYmlsaXR5LiBUaGVyZSBhcmUgbm8gc2lnbnMgb2YgcmFpbiBvciBzdG9ybXkgY29uZGl0aW9ucy5cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5Vc2FnZSBNZXRhZGF0YTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhaU1zZ0Zvck1ldGFkYXRhID0gYXdhaXQgbGxtLmludm9rZShpbnB1dCk7XG4gKiBjb25zb2xlLmxvZyhhaU1zZ0Zvck1ldGFkYXRhLnVzYWdlX21ldGFkYXRhKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICogeyBpbnB1dF90b2tlbnM6IDI4LCBvdXRwdXRfdG9rZW5zOiA1LCB0b3RhbF90b2tlbnM6IDMzIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5Mb2dwcm9iczwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBsb2dwcm9ic0xsbSA9IG5ldyBDaGF0T3BlbkFJKHsgbG9ncHJvYnM6IHRydWUgfSk7XG4gKiBjb25zdCBhaU1zZ0ZvckxvZ3Byb2JzID0gYXdhaXQgbG9ncHJvYnNMbG0uaW52b2tlKGlucHV0KTtcbiAqIGNvbnNvbGUubG9nKGFpTXNnRm9yTG9ncHJvYnMucmVzcG9uc2VfbWV0YWRhdGEubG9ncHJvYnMpO1xuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiB7XG4gKiAgIGNvbnRlbnQ6IFtcbiAqICAgICB7XG4gKiAgICAgICB0b2tlbjogJ0onLFxuICogICAgICAgbG9ncHJvYjogLTAuMDAwMDUwNjE2NzYzLFxuICogICAgICAgYnl0ZXM6IFtBcnJheV0sXG4gKiAgICAgICB0b3BfbG9ncHJvYnM6IFtdXG4gKiAgICAgfSxcbiAqICAgICB7XG4gKiAgICAgICB0b2tlbjogXCInXCIsXG4gKiAgICAgICBsb2dwcm9iOiAtMC4wMTg2ODczNixcbiAqICAgICAgIGJ5dGVzOiBbQXJyYXldLFxuICogICAgICAgdG9wX2xvZ3Byb2JzOiBbXVxuICogICAgIH0sXG4gKiAgICAge1xuICogICAgICAgdG9rZW46ICdhZCcsXG4gKiAgICAgICBsb2dwcm9iOiAtMC4wMDAwMDMwNTQ1MDA3LFxuICogICAgICAgYnl0ZXM6IFtBcnJheV0sXG4gKiAgICAgICB0b3BfbG9ncHJvYnM6IFtdXG4gKiAgICAgfSxcbiAqICAgICB7IHRva2VuOiAnb3JlJywgbG9ncHJvYjogMCwgYnl0ZXM6IFtBcnJheV0sIHRvcF9sb2dwcm9iczogW10gfSxcbiAqICAgICB7XG4gKiAgICAgICB0b2tlbjogJyBsYScsXG4gKiAgICAgICBsb2dwcm9iOiAtMC41MTU0MDQsXG4gKiAgICAgICBieXRlczogW0FycmF5XSxcbiAqICAgICAgIHRvcF9sb2dwcm9iczogW11cbiAqICAgICB9LFxuICogICAgIHtcbiAqICAgICAgIHRva2VuOiAnIHByb2dyYW1tJyxcbiAqICAgICAgIGxvZ3Byb2I6IC0wLjAwMDAxMTg3NTU3MTUsXG4gKiAgICAgICBieXRlczogW0FycmF5XSxcbiAqICAgICAgIHRvcF9sb2dwcm9iczogW11cbiAqICAgICB9LFxuICogICAgIHsgdG9rZW46ICdhdGlvbicsIGxvZ3Byb2I6IDAsIGJ5dGVzOiBbQXJyYXldLCB0b3BfbG9ncHJvYnM6IFtdIH0sXG4gKiAgICAge1xuICogICAgICAgdG9rZW46ICcuJyxcbiAqICAgICAgIGxvZ3Byb2I6IC0wLjAwMDAwMzc2OTcyMjUsXG4gKiAgICAgICBieXRlczogW0FycmF5XSxcbiAqICAgICAgIHRvcF9sb2dwcm9iczogW11cbiAqICAgICB9XG4gKiAgIF0sXG4gKiAgIHJlZnVzYWw6IG51bGxcbiAqIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5SZXNwb25zZSBNZXRhZGF0YTwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhaU1zZ0ZvclJlc3BvbnNlTWV0YWRhdGEgPSBhd2FpdCBsbG0uaW52b2tlKGlucHV0KTtcbiAqIGNvbnNvbGUubG9nKGFpTXNnRm9yUmVzcG9uc2VNZXRhZGF0YS5yZXNwb25zZV9tZXRhZGF0YSk7XG4gKiBgYGBcbiAqXG4gKiBgYGB0eHRcbiAqIHtcbiAqICAgdG9rZW5Vc2FnZTogeyBjb21wbGV0aW9uVG9rZW5zOiA1LCBwcm9tcHRUb2tlbnM6IDI4LCB0b3RhbFRva2VuczogMzMgfSxcbiAqICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnLFxuICogICBzeXN0ZW1fZmluZ2VycHJpbnQ6ICdmcF8zYWE3MjYyYzI3J1xuICogfVxuICogYGBgXG4gKiA8L2RldGFpbHM+XG4gKlxuICogPGJyIC8+XG4gKlxuICogPGRldGFpbHM+XG4gKiA8c3VtbWFyeT48c3Ryb25nPkpTT04gU2NoZW1hIFN0cnVjdHVyZWQgT3V0cHV0PC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGxsbUZvckpzb25TY2hlbWEgPSBuZXcgQ2hhdE9wZW5BSSh7XG4gKiAgIG1vZGVsOiBcImdwdC00by0yMDI0LTA4LTA2XCIsXG4gKiB9KS53aXRoU3RydWN0dXJlZE91dHB1dChcbiAqICAgei5vYmplY3Qoe1xuICogICAgIGNvbW1hbmQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgY29tbWFuZCB0byBleGVjdXRlXCIpLFxuICogICAgIGV4cGVjdGVkT3V0cHV0OiB6LnN0cmluZygpLmRlc2NyaWJlKFwiVGhlIGV4cGVjdGVkIG91dHB1dCBvZiB0aGUgY29tbWFuZFwiKSxcbiAqICAgICBvcHRpb25zOiB6XG4gKiAgICAgICAuYXJyYXkoei5zdHJpbmcoKSlcbiAqICAgICAgIC5kZXNjcmliZShcIlRoZSBvcHRpb25zIHlvdSBjYW4gcGFzcyB0byB0aGUgY29tbWFuZFwiKSxcbiAqICAgfSksXG4gKiAgIHtcbiAqICAgICBtZXRob2Q6IFwianNvblNjaGVtYVwiLFxuICogICAgIHN0cmljdDogdHJ1ZSwgLy8gT3B0aW9uYWwgd2hlbiB1c2luZyB0aGUgYGpzb25TY2hlbWFgIG1ldGhvZFxuICogICB9XG4gKiApO1xuICpcbiAqIGNvbnN0IGpzb25TY2hlbWFSZXMgPSBhd2FpdCBsbG1Gb3JKc29uU2NoZW1hLmludm9rZShcbiAqICAgXCJXaGF0IGlzIHRoZSBjb21tYW5kIHRvIGxpc3QgZmlsZXMgaW4gYSBkaXJlY3Rvcnk/XCJcbiAqICk7XG4gKiBjb25zb2xlLmxvZyhqc29uU2NoZW1hUmVzKTtcbiAqIGBgYFxuICpcbiAqIGBgYHR4dFxuICoge1xuICogICBjb21tYW5kOiAnbHMnLFxuICogICBleHBlY3RlZE91dHB1dDogJ0EgbGlzdCBvZiBmaWxlcyBhbmQgc3ViZGlyZWN0b3JpZXMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZGlyZWN0b3J5LicsXG4gKiAgIG9wdGlvbnM6IFtcbiAqICAgICAnLWE6IGluY2x1ZGUgZGlyZWN0b3J5IGVudHJpZXMgd2hvc2UgbmFtZXMgYmVnaW4gd2l0aCBhIGRvdCAoLikuJyxcbiAqICAgICAnLWw6IHVzZSBhIGxvbmcgbGlzdGluZyBmb3JtYXQuJyxcbiAqICAgICAnLWg6IHdpdGggLWwsIHByaW50IHNpemVzIGluIGh1bWFuIHJlYWRhYmxlIGZvcm1hdCAoZS5nLiwgMUssIDIzNE0sIDJHKS4nLFxuICogICAgICctdDogc29ydCBieSB0aW1lLCBuZXdlc3QgZmlyc3QuJyxcbiAqICAgICAnLXI6IHJldmVyc2Ugb3JkZXIgd2hpbGUgc29ydGluZy4nLFxuICogICAgICctUzogc29ydCBieSBmaWxlIHNpemUsIGxhcmdlc3QgZmlyc3QuJyxcbiAqICAgICAnLVI6IGxpc3Qgc3ViZGlyZWN0b3JpZXMgcmVjdXJzaXZlbHkuJ1xuICogICBdXG4gKiB9XG4gKiBgYGBcbiAqIDwvZGV0YWlscz5cbiAqXG4gKiA8YnIgLz5cbiAqXG4gKiA8ZGV0YWlscz5cbiAqIDxzdW1tYXJ5PjxzdHJvbmc+QXVkaW8gT3V0cHV0czwvc3Ryb25nPjwvc3VtbWFyeT5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBDaGF0T3BlbkFJIH0gZnJvbSBcIkBsYW5nY2hhaW4vb3BlbmFpXCI7XG4gKlxuICogY29uc3QgbW9kZWxXaXRoQXVkaW9PdXRwdXQgPSBuZXcgQ2hhdE9wZW5BSSh7XG4gKiAgIG1vZGVsOiBcImdwdC00by1hdWRpby1wcmV2aWV3XCIsXG4gKiAgIC8vIFlvdSBtYXkgYWxzbyBwYXNzIHRoZXNlIGZpZWxkcyB0byBgLmJpbmRgIGFzIGEgY2FsbCBhcmd1bWVudC5cbiAqICAgbW9kYWxpdGllczogW1widGV4dFwiLCBcImF1ZGlvXCJdLCAvLyBTcGVjaWZpZXMgdGhhdCB0aGUgbW9kZWwgc2hvdWxkIG91dHB1dCBhdWRpby5cbiAqICAgYXVkaW86IHtcbiAqICAgICB2b2ljZTogXCJhbGxveVwiLFxuICogICAgIGZvcm1hdDogXCJ3YXZcIixcbiAqICAgfSxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IGF1ZGlvT3V0cHV0UmVzdWx0ID0gYXdhaXQgbW9kZWxXaXRoQXVkaW9PdXRwdXQuaW52b2tlKFwiVGVsbCBtZSBhIGpva2UgYWJvdXQgY2F0cy5cIik7XG4gKiBjb25zdCBjYXN0TWVzc2FnZUNvbnRlbnQgPSBhdWRpb091dHB1dFJlc3VsdC5jb250ZW50WzBdIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gKlxuICogY29uc29sZS5sb2coe1xuICogICAuLi5jYXN0TWVzc2FnZUNvbnRlbnQsXG4gKiAgIGRhdGE6IGNhc3RNZXNzYWdlQ29udGVudC5kYXRhLnNsaWNlKDAsIDEwMCkgLy8gU2xpY2VkIGZvciBicmV2aXR5XG4gKiB9KVxuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiB7XG4gKiAgIGlkOiAnYXVkaW9fNjcxMTc3MThjNjAwODE5MGEzYWZhZDNlMzA1NGI5YjYnLFxuICogICBkYXRhOiAnVWtsR1JxWXdCZ0JYUVZaRlptMTBJQkFBQUFBQkFBRUF3RjBBQUlDN0FBQUNBQkFBVEVsVFZCb0FBQUJKVGtaUFNWTkdWQTRBQUFCTVlYWm1OVGd1TWprdU1UQXdBR1JoZEdGZycsXG4gKiAgIGV4cGlyZXNfYXQ6IDE3MjkyMDE0NDgsXG4gKiAgIHRyYW5zY3JpcHQ6ICdTdXJlISBXaHkgZGlkIHRoZSBjYXQgc2l0IG9uIHRoZSBjb21wdXRlcj8gQmVjYXVzZSBpdCB3YW50ZWQgdG8ga2VlcCBhbiBleWUgb24gdGhlIG1vdXNlISdcbiAqIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICpcbiAqIDxkZXRhaWxzPlxuICogPHN1bW1hcnk+PHN0cm9uZz5BdWRpbyBPdXRwdXRzPC9zdHJvbmc+PC9zdW1tYXJ5PlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENoYXRPcGVuQUkgfSBmcm9tIFwiQGxhbmdjaGFpbi9vcGVuYWlcIjtcbiAqXG4gKiBjb25zdCBtb2RlbFdpdGhBdWRpb091dHB1dCA9IG5ldyBDaGF0T3BlbkFJKHtcbiAqICAgbW9kZWw6IFwiZ3B0LTRvLWF1ZGlvLXByZXZpZXdcIixcbiAqICAgLy8gWW91IG1heSBhbHNvIHBhc3MgdGhlc2UgZmllbGRzIHRvIGAuYmluZGAgYXMgYSBjYWxsIGFyZ3VtZW50LlxuICogICBtb2RhbGl0aWVzOiBbXCJ0ZXh0XCIsIFwiYXVkaW9cIl0sIC8vIFNwZWNpZmllcyB0aGF0IHRoZSBtb2RlbCBzaG91bGQgb3V0cHV0IGF1ZGlvLlxuICogICBhdWRpbzoge1xuICogICAgIHZvaWNlOiBcImFsbG95XCIsXG4gKiAgICAgZm9ybWF0OiBcIndhdlwiLFxuICogICB9LFxuICogfSk7XG4gKlxuICogY29uc3QgYXVkaW9PdXRwdXRSZXN1bHQgPSBhd2FpdCBtb2RlbFdpdGhBdWRpb091dHB1dC5pbnZva2UoXCJUZWxsIG1lIGEgam9rZSBhYm91dCBjYXRzLlwiKTtcbiAqIGNvbnN0IGNhc3RBdWRpb0NvbnRlbnQgPSBhdWRpb091dHB1dFJlc3VsdC5hZGRpdGlvbmFsX2t3YXJncy5hdWRpbyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICpcbiAqIGNvbnNvbGUubG9nKHtcbiAqICAgLi4uY2FzdEF1ZGlvQ29udGVudCxcbiAqICAgZGF0YTogY2FzdEF1ZGlvQ29udGVudC5kYXRhLnNsaWNlKDAsIDEwMCkgLy8gU2xpY2VkIGZvciBicmV2aXR5XG4gKiB9KVxuICogYGBgXG4gKlxuICogYGBgdHh0XG4gKiB7XG4gKiAgIGlkOiAnYXVkaW9fNjcxMTc3MThjNjAwODE5MGEzYWZhZDNlMzA1NGI5YjYnLFxuICogICBkYXRhOiAnVWtsR1JxWXdCZ0JYUVZaRlptMTBJQkFBQUFBQkFBRUF3RjBBQUlDN0FBQUNBQkFBVEVsVFZCb0FBQUJKVGtaUFNWTkdWQTRBQUFCTVlYWm1OVGd1TWprdU1UQXdBR1JoZEdGZycsXG4gKiAgIGV4cGlyZXNfYXQ6IDE3MjkyMDE0NDgsXG4gKiAgIHRyYW5zY3JpcHQ6ICdTdXJlISBXaHkgZGlkIHRoZSBjYXQgc2l0IG9uIHRoZSBjb21wdXRlcj8gQmVjYXVzZSBpdCB3YW50ZWQgdG8ga2VlcCBhbiBleWUgb24gdGhlIG1vdXNlISdcbiAqIH1cbiAqIGBgYFxuICogPC9kZXRhaWxzPlxuICpcbiAqIDxiciAvPlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE9wZW5BSSBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0T3BlbkFJXCI7XG4gICAgfVxuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnN1cGVyLmNhbGxLZXlzLFxuICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uX2NhbGxcIixcbiAgICAgICAgICAgIFwiZnVuY3Rpb25zXCIsXG4gICAgICAgICAgICBcInRvb2xzXCIsXG4gICAgICAgICAgICBcInRvb2xfY2hvaWNlXCIsXG4gICAgICAgICAgICBcInByb21wdEluZGV4XCIsXG4gICAgICAgICAgICBcInJlc3BvbnNlX2Zvcm1hdFwiLFxuICAgICAgICAgICAgXCJzZWVkXCIsXG4gICAgICAgICAgICBcInJlYXNvbmluZ19lZmZvcnRcIixcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwiT1BFTkFJX0FQSV9LRVlcIixcbiAgICAgICAgICAgIGFwaUtleTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiBcIk9QRU5BSV9PUkdBTklaQVRJT05cIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbE5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgICAgIG9wZW5BSUFwaUtleTogXCJvcGVuYWlfYXBpX2tleVwiLFxuICAgICAgICAgICAgYXBpS2V5OiBcIm9wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBsY19zZXJpYWxpemFibGVfa2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiY29uZmlndXJhdGlvblwiLFxuICAgICAgICAgICAgXCJsb2dwcm9ic1wiLFxuICAgICAgICAgICAgXCJ0b3BMb2dwcm9ic1wiLFxuICAgICAgICAgICAgXCJwcmVmaXhNZXNzYWdlc1wiLFxuICAgICAgICAgICAgXCJzdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nXCIsXG4gICAgICAgICAgICBcIm1vZGFsaXRpZXNcIixcbiAgICAgICAgICAgIFwiYXVkaW9cIixcbiAgICAgICAgICAgIFwicmVhc29uaW5nRWZmb3J0XCIsXG4gICAgICAgICAgICBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgICBcIm1heFRva2Vuc1wiLFxuICAgICAgICAgICAgXCJ0b3BQXCIsXG4gICAgICAgICAgICBcImZyZXF1ZW5jeVBlbmFsdHlcIixcbiAgICAgICAgICAgIFwicHJlc2VuY2VQZW5hbHR5XCIsXG4gICAgICAgICAgICBcIm5cIixcbiAgICAgICAgICAgIFwibG9naXRCaWFzXCIsXG4gICAgICAgICAgICBcInVzZXJcIixcbiAgICAgICAgICAgIFwic3RyZWFtaW5nXCIsXG4gICAgICAgICAgICBcInN0cmVhbVVzYWdlXCIsXG4gICAgICAgICAgICBcIm1vZGVsTmFtZVwiLFxuICAgICAgICAgICAgXCJtb2RlbFwiLFxuICAgICAgICAgICAgXCJtb2RlbEt3YXJnc1wiLFxuICAgICAgICAgICAgXCJzdG9wXCIsXG4gICAgICAgICAgICBcInN0b3BTZXF1ZW5jZXNcIixcbiAgICAgICAgICAgIFwidGltZW91dFwiLFxuICAgICAgICAgICAgXCJvcGVuQUlBcGlLZXlcIixcbiAgICAgICAgICAgIFwiYXBpS2V5XCIsXG4gICAgICAgICAgICBcImNhY2hlXCIsXG4gICAgICAgICAgICBcIm1heENvbmN1cnJlbmN5XCIsXG4gICAgICAgICAgICBcIm1heFJldHJpZXNcIixcbiAgICAgICAgICAgIFwidmVyYm9zZVwiLFxuICAgICAgICAgICAgXCJjYWxsYmFja3NcIixcbiAgICAgICAgICAgIFwidGFnc1wiLFxuICAgICAgICAgICAgXCJtZXRhZGF0YVwiLFxuICAgICAgICAgICAgXCJkaXNhYmxlU3RyZWFtaW5nXCIsXG4gICAgICAgIF07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcFBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVzZW5jZVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsb2dpdEJpYXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEBkZXByZWNhdGVkIFVzZSBcIm1vZGVsXCIgaW5zdGVhZCAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZ3B0LTMuNS10dXJib1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbEt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9wXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3BTZXF1ZW5jZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0aW1lb3V0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbWluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbVVzYWdlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhUb2tlbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9ncHJvYnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wTG9ncHJvYnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcmdhbml6YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX19pbmNsdWRlUmF3UmVzcG9uc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgbW9kZWwgc3VwcG9ydHMgdGhlIGBzdHJpY3RgIGFyZ3VtZW50IHdoZW4gcGFzc2luZyBpbiB0b29scy5cbiAgICAgICAgICogSWYgYHVuZGVmaW5lZGAgdGhlIGBzdHJpY3RgIGFyZ3VtZW50IHdpbGwgbm90IGJlIHBhc3NlZCB0byBPcGVuQUkuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1ZGlvXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGFsaXRpZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhc29uaW5nRWZmb3J0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZVJlc3BvbnNlc0FwaVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BlbkFJQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/LmFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSB0aGlzLm9wZW5BSUFwaUtleTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5jb25maWd1cmF0aW9uPy5vcmdhbml6YXRpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX09SR0FOSVpBVElPTlwiKTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGZpZWxkcz8ubW9kZWwgPz8gZmllbGRzPy5tb2RlbE5hbWUgPz8gdGhpcy5tb2RlbDtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPSB0aGlzLm1vZGVsO1xuICAgICAgICB0aGlzLm1vZGVsS3dhcmdzID0gZmllbGRzPy5tb2RlbEt3YXJncyA/PyB7fTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gZmllbGRzPy50aW1lb3V0O1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlO1xuICAgICAgICB0aGlzLnRvcFAgPSBmaWVsZHM/LnRvcFAgPz8gdGhpcy50b3BQO1xuICAgICAgICB0aGlzLmZyZXF1ZW5jeVBlbmFsdHkgPSBmaWVsZHM/LmZyZXF1ZW5jeVBlbmFsdHkgPz8gdGhpcy5mcmVxdWVuY3lQZW5hbHR5O1xuICAgICAgICB0aGlzLnByZXNlbmNlUGVuYWx0eSA9IGZpZWxkcz8ucHJlc2VuY2VQZW5hbHR5ID8/IHRoaXMucHJlc2VuY2VQZW5hbHR5O1xuICAgICAgICB0aGlzLmxvZ3Byb2JzID0gZmllbGRzPy5sb2dwcm9icztcbiAgICAgICAgdGhpcy50b3BMb2dwcm9icyA9IGZpZWxkcz8udG9wTG9ncHJvYnM7XG4gICAgICAgIHRoaXMubiA9IGZpZWxkcz8ubiA/PyB0aGlzLm47XG4gICAgICAgIHRoaXMubG9naXRCaWFzID0gZmllbGRzPy5sb2dpdEJpYXM7XG4gICAgICAgIHRoaXMuc3RvcCA9IGZpZWxkcz8uc3RvcFNlcXVlbmNlcyA/PyBmaWVsZHM/LnN0b3A7XG4gICAgICAgIHRoaXMuc3RvcFNlcXVlbmNlcyA9IHRoaXMuc3RvcDtcbiAgICAgICAgdGhpcy51c2VyID0gZmllbGRzPy51c2VyO1xuICAgICAgICB0aGlzLl9faW5jbHVkZVJhd1Jlc3BvbnNlID0gZmllbGRzPy5fX2luY2x1ZGVSYXdSZXNwb25zZTtcbiAgICAgICAgdGhpcy5hdWRpbyA9IGZpZWxkcz8uYXVkaW87XG4gICAgICAgIHRoaXMubW9kYWxpdGllcyA9IGZpZWxkcz8ubW9kYWxpdGllcztcbiAgICAgICAgdGhpcy5yZWFzb25pbmdFZmZvcnQgPSBmaWVsZHM/LnJlYXNvbmluZ0VmZm9ydDtcbiAgICAgICAgdGhpcy5tYXhUb2tlbnMgPSBmaWVsZHM/Lm1heENvbXBsZXRpb25Ub2tlbnMgPz8gZmllbGRzPy5tYXhUb2tlbnM7XG4gICAgICAgIHRoaXMudXNlUmVzcG9uc2VzQXBpID0gZmllbGRzPy51c2VSZXNwb25zZXNBcGkgPz8gdGhpcy51c2VSZXNwb25zZXNBcGk7XG4gICAgICAgIGlmICh0aGlzLm1vZGVsID09PSBcIm8xXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN0cmVhbWluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJlYW1pbmcgPSBmaWVsZHM/LnN0cmVhbWluZyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy5zdHJlYW1Vc2FnZSA9IGZpZWxkcz8uc3RyZWFtVXNhZ2UgPz8gdGhpcy5zdHJlYW1Vc2FnZTtcbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuYXBpS2V5LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB0aGlzLm9yZ2FuaXphdGlvbixcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlLFxuICAgICAgICAgICAgLi4uZmllbGRzPy5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgICAgICAvLyBJZiBgc3VwcG9ydHNTdHJpY3RUb29sQ2FsbGluZ2AgaXMgZXhwbGljaXRseSBzZXQsIHVzZSB0aGF0IHZhbHVlLlxuICAgICAgICAvLyBFbHNlIGxlYXZlIHVuZGVmaW5lZCBzbyBpdCdzIG5vdCBwYXNzZWQgdG8gT3BlbkFJLlxuICAgICAgICBpZiAoZmllbGRzPy5zdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNTdHJpY3RUb29sQ2FsbGluZyA9IGZpZWxkcy5zdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldExzUGFyYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbHNfcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICAgICAgICBsc19tb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgbHNfbW9kZWxfdHlwZTogXCJjaGF0XCIsXG4gICAgICAgICAgICBsc190ZW1wZXJhdHVyZTogcGFyYW1zLnRlbXBlcmF0dXJlID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxzX21heF90b2tlbnM6IHBhcmFtcy5tYXhfdG9rZW5zID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxzX3N0b3A6IG9wdGlvbnMuc3RvcCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYmluZFRvb2xzKHRvb2xzLCBrd2FyZ3MpIHtcbiAgICAgICAgbGV0IHN0cmljdDtcbiAgICAgICAgaWYgKGt3YXJncz8uc3RyaWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0cmljdCA9IGt3YXJncy5zdHJpY3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0cmljdCA9IHRoaXMuc3VwcG9ydHNTdHJpY3RUb29sQ2FsbGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5iaW5kKHtcbiAgICAgICAgICAgIHRvb2xzOiB0b29scy5tYXAoKHRvb2wpID0+IGlzQnVpbHRJblRvb2wodG9vbClcbiAgICAgICAgICAgICAgICA/IHRvb2xcbiAgICAgICAgICAgICAgICA6IF9jb252ZXJ0Q2hhdE9wZW5BSVRvb2xUeXBlVG9PcGVuQUlUb29sKHRvb2wsIHsgc3RyaWN0IH0pKSxcbiAgICAgICAgICAgIC4uLmt3YXJncyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlc3BvbnNlRm9ybWF0KHJlc0Zvcm1hdCkge1xuICAgICAgICBpZiAocmVzRm9ybWF0ICYmXG4gICAgICAgICAgICByZXNGb3JtYXQudHlwZSA9PT0gXCJqc29uX3NjaGVtYVwiICYmXG4gICAgICAgICAgICByZXNGb3JtYXQuanNvbl9zY2hlbWEuc2NoZW1hICYmXG4gICAgICAgICAgICBpc1pvZFNjaGVtYShyZXNGb3JtYXQuanNvbl9zY2hlbWEuc2NoZW1hKSkge1xuICAgICAgICAgICAgcmV0dXJuIHpvZFJlc3BvbnNlRm9ybWF0KHJlc0Zvcm1hdC5qc29uX3NjaGVtYS5zY2hlbWEsIHJlc0Zvcm1hdC5qc29uX3NjaGVtYS5uYW1lLCB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlc0Zvcm1hdC5qc29uX3NjaGVtYS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNGb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMsIGV4dHJhKSB7XG4gICAgICAgIGxldCBzdHJpY3Q7XG4gICAgICAgIGlmIChvcHRpb25zPy5zdHJpY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RyaWN0ID0gb3B0aW9ucy5zdHJpY3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0cmljdCA9IHRoaXMuc3VwcG9ydHNTdHJpY3RUb29sQ2FsbGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fdXNlUmVzcG9uc2VBcGkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgICAgICB0b3BfcDogdGhpcy50b3BQLFxuICAgICAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgICAgICAvLyBpZiBpbmNsdWRlX3VzYWdlIGlzIHNldCBvciBzdHJlYW1Vc2FnZSB0aGVuIHN0cmVhbSBtdXN0IGJlIHNldCB0byB0cnVlLlxuICAgICAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW1pbmcsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNfcmVzcG9uc2VfaWQ6IG9wdGlvbnM/LnByZXZpb3VzX3Jlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIHRydW5jYXRpb246IG9wdGlvbnM/LnRydW5jYXRpb24sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogb3B0aW9ucz8uaW5jbHVkZSxcbiAgICAgICAgICAgICAgICB0b29sczogb3B0aW9ucz8udG9vbHM/Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMudG9vbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHRvb2wpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0J1aWx0SW5Ub29sKHRvb2wpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2w7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc09wZW5BSVRvb2wodG9vbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2wuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5mdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5mdW5jdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBpc0J1aWx0SW5Ub29sQ2hvaWNlKG9wdGlvbnM/LnRvb2xfY2hvaWNlKVxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnM/LnRvb2xfY2hvaWNlXG4gICAgICAgICAgICAgICAgICAgIDogKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IGZvcm1hdFRvT3BlbkFJVG9vbENob2ljZShvcHRpb25zPy50b29sX2Nob2ljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlZCA9PT0gXCJvYmplY3RcIiAmJiBcInR5cGVcIiBpbiBmb3JtYXR0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImZ1bmN0aW9uXCIsIG5hbWU6IGZvcm1hdHRlZC5mdW5jdGlvbi5uYW1lIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSgpLFxuICAgICAgICAgICAgICAgIHRleHQ6ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zPy50ZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gdGhpcy5jcmVhdGVSZXNwb25zZUZvcm1hdChvcHRpb25zPy5yZXNwb25zZV9mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0Py50eXBlID09PSBcImpzb25fc2NoZW1hXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXQuanNvbl9zY2hlbWEuc2NoZW1hICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwianNvbl9zY2hlbWFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZm9ybWF0Lmpzb25fc2NoZW1hLnNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmb3JtYXQuanNvbl9zY2hlbWEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmb3JtYXQuanNvbl9zY2hlbWEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdDogZm9ybWF0Lmpzb25fc2NoZW1hLnN0cmljdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBmb3JtYXQgfTtcbiAgICAgICAgICAgICAgICB9KSgpLFxuICAgICAgICAgICAgICAgIHBhcmFsbGVsX3Rvb2xfY2FsbHM6IG9wdGlvbnM/LnBhcmFsbGVsX3Rvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgbWF4X291dHB1dF90b2tlbnM6IHRoaXMubWF4VG9rZW5zID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMubW9kZWxLd2FyZ3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nRWZmb3J0ID0gb3B0aW9ucz8ucmVhc29uaW5nX2VmZm9ydCA/PyB0aGlzLnJlYXNvbmluZ0VmZm9ydDtcbiAgICAgICAgICAgIGlmIChyZWFzb25pbmdFZmZvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5yZWFzb25pbmcgPSB7IGVmZm9ydDogcmVhc29uaW5nRWZmb3J0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RyZWFtT3B0aW9uc0NvbmZpZyA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtX29wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RyZWFtT3B0aW9uc0NvbmZpZyA9IHsgc3RyZWFtX29wdGlvbnM6IG9wdGlvbnMuc3RyZWFtX29wdGlvbnMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0cmVhbVVzYWdlICYmICh0aGlzLnN0cmVhbWluZyB8fCBleHRyYT8uc3RyZWFtaW5nKSkge1xuICAgICAgICAgICAgc3RyZWFtT3B0aW9uc0NvbmZpZyA9IHsgc3RyZWFtX29wdGlvbnM6IHsgaW5jbHVkZV91c2FnZTogdHJ1ZSB9IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIHRvcF9wOiB0aGlzLnRvcFAsXG4gICAgICAgICAgICBmcmVxdWVuY3lfcGVuYWx0eTogdGhpcy5mcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgICAgICAgcHJlc2VuY2VfcGVuYWx0eTogdGhpcy5wcmVzZW5jZVBlbmFsdHksXG4gICAgICAgICAgICBsb2dwcm9iczogdGhpcy5sb2dwcm9icyxcbiAgICAgICAgICAgIHRvcF9sb2dwcm9iczogdGhpcy50b3BMb2dwcm9icyxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGxvZ2l0X2JpYXM6IHRoaXMubG9naXRCaWFzLFxuICAgICAgICAgICAgc3RvcDogb3B0aW9ucz8uc3RvcCA/PyB0aGlzLnN0b3BTZXF1ZW5jZXMsXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICAvLyBpZiBpbmNsdWRlX3VzYWdlIGlzIHNldCBvciBzdHJlYW1Vc2FnZSB0aGVuIHN0cmVhbSBtdXN0IGJlIHNldCB0byB0cnVlLlxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbWluZyxcbiAgICAgICAgICAgIGZ1bmN0aW9uczogb3B0aW9ucz8uZnVuY3Rpb25zLFxuICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogb3B0aW9ucz8uZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICAgIHRvb2xzOiBvcHRpb25zPy50b29scz8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRvb2xzLm1hcCgodG9vbCkgPT4gX2NvbnZlcnRDaGF0T3BlbkFJVG9vbFR5cGVUb09wZW5BSVRvb2wodG9vbCwgeyBzdHJpY3QgfSkpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogZm9ybWF0VG9PcGVuQUlUb29sQ2hvaWNlKG9wdGlvbnM/LnRvb2xfY2hvaWNlKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogdGhpcy5jcmVhdGVSZXNwb25zZUZvcm1hdChvcHRpb25zPy5yZXNwb25zZV9mb3JtYXQpLFxuICAgICAgICAgICAgc2VlZDogb3B0aW9ucz8uc2VlZCxcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnNDb25maWcsXG4gICAgICAgICAgICBwYXJhbGxlbF90b29sX2NhbGxzOiBvcHRpb25zPy5wYXJhbGxlbF90b29sX2NhbGxzLFxuICAgICAgICAgICAgLi4uKHRoaXMuYXVkaW8gfHwgb3B0aW9ucz8uYXVkaW9cbiAgICAgICAgICAgICAgICA/IHsgYXVkaW86IHRoaXMuYXVkaW8gfHwgb3B0aW9ucz8uYXVkaW8gfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgLi4uKHRoaXMubW9kYWxpdGllcyB8fCBvcHRpb25zPy5tb2RhbGl0aWVzXG4gICAgICAgICAgICAgICAgPyB7IG1vZGFsaXRpZXM6IHRoaXMubW9kYWxpdGllcyB8fCBvcHRpb25zPy5tb2RhbGl0aWVzIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIC4uLnRoaXMubW9kZWxLd2FyZ3MsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zPy5wcmVkaWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5wcmVkaWN0aW9uID0gb3B0aW9ucy5wcmVkaWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlYXNvbmluZ0VmZm9ydCA9IG9wdGlvbnM/LnJlYXNvbmluZ19lZmZvcnQgPz8gdGhpcy5yZWFzb25pbmdFZmZvcnQ7XG4gICAgICAgIGlmIChyZWFzb25pbmdFZmZvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1zLnJlYXNvbmluZ19lZmZvcnQgPSByZWFzb25pbmdFZmZvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVhc29uaW5nTW9kZWwocGFyYW1zLm1vZGVsKSkge1xuICAgICAgICAgICAgcGFyYW1zLm1heF9jb21wbGV0aW9uX3Rva2VucyA9XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhUb2tlbnMgPT09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5tYXhUb2tlbnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJhbXMubWF4X3Rva2VucyA9IHRoaXMubWF4VG9rZW5zID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMubWF4VG9rZW5zO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuICAgIF9jb252ZXJ0T3BlbkFJQ2hhdENvbXBsZXRpb25NZXNzYWdlVG9CYXNlTWVzc2FnZShtZXNzYWdlLCByYXdSZXNwb25zZSkge1xuICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBtZXNzYWdlLnRvb2xfY2FsbHM7XG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS5yb2xlKSB7XG4gICAgICAgICAgICBjYXNlIFwiYXNzaXN0YW50XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByYXdUb29sQ2FsbCBvZiByYXdUb29sQ2FsbHMgPz8gW10pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHBhcnNlVG9vbENhbGwocmF3VG9vbENhbGwsIHsgcmV0dXJuSWQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKG1ha2VJbnZhbGlkVG9vbENhbGwocmF3VG9vbENhbGwsIGUubWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFkZGl0aW9uYWxfa3dhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbl9jYWxsOiBtZXNzYWdlLmZ1bmN0aW9uX2NhbGwsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHJhd1Rvb2xDYWxscyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9faW5jbHVkZVJhd1Jlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MuX19yYXdfcmVzcG9uc2UgPSByYXdSZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHJhd1Jlc3BvbnNlLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAuLi4ocmF3UmVzcG9uc2Uuc3lzdGVtX2ZpbmdlcnByaW50XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogeyAuLi5yYXdSZXNwb25zZS51c2FnZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbV9maW5nZXJwcmludDogcmF3UmVzcG9uc2Uuc3lzdGVtX2ZpbmdlcnByaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hdWRpbykge1xuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncy5hdWRpbyA9IG1lc3NhZ2UuYXVkaW87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50IHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBpbnZhbGlkVG9vbENhbGxzLFxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGlkOiByYXdSZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZShtZXNzYWdlLmNvbnRlbnQgfHwgXCJcIiwgbWVzc2FnZS5yb2xlID8/IFwidW5rbm93blwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfY29udmVydE9wZW5BSURlbHRhVG9CYXNlTWVzc2FnZUNodW5rKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZGVsdGEsIHJhd1Jlc3BvbnNlLCBkZWZhdWx0Um9sZSkge1xuICAgICAgICBjb25zdCByb2xlID0gZGVsdGEucm9sZSA/PyBkZWZhdWx0Um9sZTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRlbHRhLmNvbnRlbnQgPz8gXCJcIjtcbiAgICAgICAgbGV0IGFkZGl0aW9uYWxfa3dhcmdzO1xuICAgICAgICBpZiAoZGVsdGEuZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MgPSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogZGVsdGEuZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGEudG9vbF9jYWxscykge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MgPSB7XG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogZGVsdGEudG9vbF9jYWxscyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9faW5jbHVkZVJhd1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncy5fX3Jhd19yZXNwb25zZSA9IHJhd1Jlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWx0YS5hdWRpbykge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MuYXVkaW8gPSB7XG4gICAgICAgICAgICAgICAgLi4uZGVsdGEuYXVkaW8sXG4gICAgICAgICAgICAgICAgaW5kZXg6IHJhd1Jlc3BvbnNlLmNob2ljZXNbMF0uaW5kZXgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlX21ldGFkYXRhID0geyB1c2FnZTogeyAuLi5yYXdSZXNwb25zZS51c2FnZSB9IH07XG4gICAgICAgIGlmIChyb2xlID09PSBcInVzZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IGNvbnRlbnQsIHJlc3BvbnNlX21ldGFkYXRhIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsQ2h1bmtzID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkZWx0YS50b29sX2NhbGxzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmF3VG9vbENhbGwgb2YgZGVsdGEudG9vbF9jYWxscykge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbENodW5rcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJhd1Rvb2xDYWxsLmZ1bmN0aW9uPy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogcmF3VG9vbENhbGwuZnVuY3Rpb24/LmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByYXdUb29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiByYXdUb29sQ2FsbC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbF9jYWxsX2NodW5rXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogdG9vbENhbGxDaHVua3MsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICAgICAgaWQ6IHJhd1Jlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocm9sZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyBjb250ZW50LCByZXNwb25zZV9tZXRhZGF0YSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb2xlID09PSBcImRldmVsb3BlclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoge1xuICAgICAgICAgICAgICAgICAgICBfX29wZW5haV9yb2xlX186IFwiZGV2ZWxvcGVyXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJvbGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgICAgICBuYW1lOiBkZWx0YS5uYW1lLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocm9sZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfaWQ6IGRlbHRhLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZUNodW5rKHsgY29udGVudCwgcm9sZSwgcmVzcG9uc2VfbWV0YWRhdGEgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBpZiAodGhpcy5fdXNlUmVzcG9uc2VBcGkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUl0ZXJhYmxlID0gYXdhaXQgdGhpcy5yZXNwb25zZUFwaVdpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMsIHsgc3RyZWFtaW5nOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAgIGlucHV0OiBfY29udmVydE1lc3NhZ2VzVG9PcGVuQUlSZXNwb25zZXNQYXJhbXMobWVzc2FnZXMsIHRoaXMubW9kZWwpLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBkYXRhIG9mIHN0cmVhbUl0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBfY29udmVydE9wZW5BSVJlc3BvbnNlc0RlbHRhVG9CYXNlTWVzc2FnZUNodW5rKGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChjaHVuayA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlc01hcHBlZCA9IF9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyhtZXNzYWdlcywgdGhpcy5tb2RlbCk7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXNNYXBwZWQsXG4gICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBkZWZhdWx0Um9sZTtcbiAgICAgICAgY29uc3Qgc3RyZWFtSXRlcmFibGUgPSBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkocGFyYW1zLCBvcHRpb25zKTtcbiAgICAgICAgbGV0IHVzYWdlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRhdGEgb2Ygc3RyZWFtSXRlcmFibGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGRhdGE/LmNob2ljZXM/LlswXTtcbiAgICAgICAgICAgIGlmIChkYXRhLnVzYWdlKSB7XG4gICAgICAgICAgICAgICAgdXNhZ2UgPSBkYXRhLnVzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaG9pY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgZGVsdGEgfSA9IGNob2ljZTtcbiAgICAgICAgICAgIGlmICghZGVsdGEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5fY29udmVydE9wZW5BSURlbHRhVG9CYXNlTWVzc2FnZUNodW5rKGRlbHRhLCBkYXRhLCBkZWZhdWx0Um9sZSk7XG4gICAgICAgICAgICBkZWZhdWx0Um9sZSA9IGRlbHRhLnJvbGUgPz8gZGVmYXVsdFJvbGU7XG4gICAgICAgICAgICBjb25zdCBuZXdUb2tlbkluZGljZXMgPSB7XG4gICAgICAgICAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdEluZGV4ID8/IDAsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbjogY2hvaWNlLmluZGV4ID8/IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuay5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbV0FSTklOR106IFJlY2VpdmVkIG5vbi1zdHJpbmcgY29udGVudCBmcm9tIE9wZW5BSS4gVGhpcyBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZC5cIik7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbkluZm8gPSB7IC4uLm5ld1Rva2VuSW5kaWNlcyB9O1xuICAgICAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mby5maW5pc2hfcmVhc29uID0gY2hvaWNlLmZpbmlzaF9yZWFzb247XG4gICAgICAgICAgICAgICAgLy8gT25seSBpbmNsdWRlIHN5c3RlbSBmaW5nZXJwcmludCBpbiB0aGUgbGFzdCBjaHVuayBmb3Igbm93XG4gICAgICAgICAgICAgICAgLy8gdG8gYXZvaWQgY29uY2F0ZW5hdGlvbiBpc3N1ZXNcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mby5zeXN0ZW1fZmluZ2VycHJpbnQgPSBkYXRhLnN5c3RlbV9maW5nZXJwcmludDtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mby5tb2RlbF9uYW1lID0gZGF0YS5tb2RlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxvZ3Byb2JzKSB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm8ubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0aW9uQ2h1bmsgPSBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogY2h1bmssXG4gICAgICAgICAgICAgICAgdGV4dDogY2h1bmsuY29udGVudCxcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgeWllbGQgZ2VuZXJhdGlvbkNodW5rO1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oZ2VuZXJhdGlvbkNodW5rLnRleHQgPz8gXCJcIiwgbmV3VG9rZW5JbmRpY2VzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7IGNodW5rOiBnZW5lcmF0aW9uQ2h1bmsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VuRGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAuLi4odXNhZ2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzPy5hdWRpb190b2tlbnMgIT09IG51bGwgJiYge1xuICAgICAgICAgICAgICAgICAgICBhdWRpbzogdXNhZ2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzPy5hdWRpb190b2tlbnMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKHVzYWdlLnByb21wdF90b2tlbnNfZGV0YWlscz8uY2FjaGVkX3Rva2VucyAhPT0gbnVsbCAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlX3JlYWQ6IHVzYWdlLnByb21wdF90b2tlbnNfZGV0YWlscz8uY2FjaGVkX3Rva2VucyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbkRldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uKHVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM/LmF1ZGlvX3Rva2VucyAhPT0gbnVsbCAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB1c2FnZS5jb21wbGV0aW9uX3Rva2Vuc19kZXRhaWxzPy5hdWRpb190b2tlbnMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgLi4uKHVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM/LnJlYXNvbmluZ190b2tlbnMgIT09IG51bGwgJiYge1xuICAgICAgICAgICAgICAgICAgICByZWFzb25pbmc6IHVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM/LnJlYXNvbmluZ190b2tlbnMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbkNodW5rID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogeyAuLi51c2FnZSB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB1c2FnZV9tZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5zOiB1c2FnZS5wcm9tcHRfdG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3Rva2VuczogdXNhZ2UuY29tcGxldGlvbl90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbF90b2tlbnM6IHVzYWdlLnRvdGFsX3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihPYmplY3Qua2V5cyhpbnB1dFRva2VuRGV0YWlscykubGVuZ3RoID4gMCAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogaW5wdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihPYmplY3Qua2V5cyhvdXRwdXRUb2tlbkRldGFpbHMpLmxlbmd0aCA+IDAgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbl9kZXRhaWxzOiBvdXRwdXRUb2tlbkRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB5aWVsZCBnZW5lcmF0aW9uQ2h1bms7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICpcbiAgICAgKi9cbiAgICBpZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCk7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX3Jlc3BvbnNlQXBpR2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgaW52b2NhdGlvblBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKTtcbiAgICAgICAgaWYgKGludm9jYXRpb25QYXJhbXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgIC4uLmNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gZmluYWxDaHVuaz8uY29uY2F0KGNodW5rKSA/PyBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IGZpbmFsQ2h1bmsgPyBbZmluYWxDaHVua10gOiBbXSxcbiAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkVG9rZW5Vc2FnZTogZmluYWxDaHVuaz8ubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgPy51c2FnZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dCA9IF9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVJlc3BvbnNlc1BhcmFtcyhtZXNzYWdlcywgdGhpcy5tb2RlbCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc3BvbnNlQXBpV2l0aFJldHJ5KHsgaW5wdXQsIC4uLmludm9jYXRpb25QYXJhbXMgfSwgeyBzaWduYWw6IG9wdGlvbnM/LnNpZ25hbCwgLi4ub3B0aW9ucz8ub3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBkYXRhLm91dHB1dF90ZXh0LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfY29udmVydE9wZW5BSVJlc3BvbnNlc01lc3NhZ2VUb0Jhc2VNZXNzYWdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkVG9rZW5Vc2FnZTogZGF0YS51c2FnZVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogZGF0YS51c2FnZS5pbnB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiBkYXRhLnVzYWdlLm91dHB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogZGF0YS51c2FnZS50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfdXNlUmVzcG9uc2VBcGkob3B0aW9ucykge1xuICAgICAgICBjb25zdCB1c2VzQnVpbHRJblRvb2xzID0gb3B0aW9ucz8udG9vbHM/LnNvbWUoaXNCdWlsdEluVG9vbCk7XG4gICAgICAgIGNvbnN0IGhhc1Jlc3BvbnNlc09ubHlLd2FyZ3MgPSBvcHRpb25zPy5wcmV2aW91c19yZXNwb25zZV9pZCAhPSBudWxsIHx8XG4gICAgICAgICAgICBvcHRpb25zPy50ZXh0ICE9IG51bGwgfHxcbiAgICAgICAgICAgIG9wdGlvbnM/LnRydW5jYXRpb24gIT0gbnVsbCB8fFxuICAgICAgICAgICAgb3B0aW9ucz8uaW5jbHVkZSAhPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VSZXNwb25zZXNBcGkgfHwgdXNlc0J1aWx0SW5Ub29scyB8fCBoYXNSZXNwb25zZXNPbmx5S3dhcmdzO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBpZiAodGhpcy5fdXNlUmVzcG9uc2VBcGkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZUFwaUdlbmVyYXRlKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2FnZU1ldGFkYXRhID0ge307XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNNYXBwZWQgPSBfY29udmVydE1lc3NhZ2VzVG9PcGVuQUlQYXJhbXMobWVzc2FnZXMsIHRoaXMubW9kZWwpO1xuICAgICAgICBpZiAocGFyYW1zLnN0cmVhbSkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICAgICAgY29uc3QgZmluYWxDaHVua3MgPSB7fTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgIC4uLmNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rLmdlbmVyYXRpb25JbmZvPy5jb21wbGV0aW9uID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzW2luZGV4XSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVua3NbaW5kZXhdID0gZmluYWxDaHVua3NbaW5kZXhdLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBPYmplY3QuZW50cmllcyhmaW5hbENodW5rcylcbiAgICAgICAgICAgICAgICAuc29ydCgoW2FLZXldLCBbYktleV0pID0+IHBhcnNlSW50KGFLZXksIDEwKSAtIHBhcnNlSW50KGJLZXksIDEwKSlcbiAgICAgICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCB7IGZ1bmN0aW9ucywgZnVuY3Rpb25fY2FsbCB9ID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gT3BlbkFJIGRvZXMgbm90IHN1cHBvcnQgdG9rZW4gdXNhZ2UgcmVwb3J0IHVuZGVyIHN0cmVhbSBtb2RlLFxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gZXN0aW1hdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IHByb21wdFRva2VuVXNhZ2UgPSBhd2FpdCB0aGlzLmdldEVzdGltYXRlZFRva2VuQ291bnRGcm9tUHJvbXB0KG1lc3NhZ2VzLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwpO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvblRva2VuVXNhZ2UgPSBhd2FpdCB0aGlzLmdldE51bVRva2Vuc0Zyb21HZW5lcmF0aW9ucyhnZW5lcmF0aW9ucyk7XG4gICAgICAgICAgICB1c2FnZU1ldGFkYXRhLmlucHV0X3Rva2VucyA9IHByb21wdFRva2VuVXNhZ2U7XG4gICAgICAgICAgICB1c2FnZU1ldGFkYXRhLm91dHB1dF90b2tlbnMgPSBjb21wbGV0aW9uVG9rZW5Vc2FnZTtcbiAgICAgICAgICAgIHVzYWdlTWV0YWRhdGEudG90YWxfdG9rZW5zID0gcHJvbXB0VG9rZW5Vc2FnZSArIGNvbXBsZXRpb25Ub2tlblVzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9ucyxcbiAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkVG9rZW5Vc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0VG9rZW5zOiB1c2FnZU1ldGFkYXRhLmlucHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Ub2tlbnM6IHVzYWdlTWV0YWRhdGEub3V0cHV0X3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiB1c2FnZU1ldGFkYXRhLnRvdGFsX3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkYXRhO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVzcG9uc2VfZm9ybWF0ICYmXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZXNwb25zZV9mb3JtYXQudHlwZSA9PT0gXCJqc29uX3NjaGVtYVwiKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHRoaXMuYmV0YVBhcnNlZENvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc01hcHBlZCxcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zPy5vcHRpb25zLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzTWFwcGVkLFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zPy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnM/Lm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGNvbXBsZXRpb25fdG9rZW5zOiBjb21wbGV0aW9uVG9rZW5zLCBwcm9tcHRfdG9rZW5zOiBwcm9tcHRUb2tlbnMsIHRvdGFsX3Rva2VuczogdG90YWxUb2tlbnMsIHByb21wdF90b2tlbnNfZGV0YWlsczogcHJvbXB0VG9rZW5zRGV0YWlscywgY29tcGxldGlvbl90b2tlbnNfZGV0YWlsczogY29tcGxldGlvblRva2Vuc0RldGFpbHMsIH0gPSBkYXRhPy51c2FnZSA/PyB7fTtcbiAgICAgICAgICAgIGlmIChjb21wbGV0aW9uVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdXNhZ2VNZXRhZGF0YS5vdXRwdXRfdG9rZW5zID1cbiAgICAgICAgICAgICAgICAgICAgKHVzYWdlTWV0YWRhdGEub3V0cHV0X3Rva2VucyA/PyAwKSArIGNvbXBsZXRpb25Ub2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbXB0VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdXNhZ2VNZXRhZGF0YS5pbnB1dF90b2tlbnMgPVxuICAgICAgICAgICAgICAgICAgICAodXNhZ2VNZXRhZGF0YS5pbnB1dF90b2tlbnMgPz8gMCkgKyBwcm9tcHRUb2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG90YWxUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICB1c2FnZU1ldGFkYXRhLnRvdGFsX3Rva2VucyA9XG4gICAgICAgICAgICAgICAgICAgICh1c2FnZU1ldGFkYXRhLnRvdGFsX3Rva2VucyA/PyAwKSArIHRvdGFsVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdFRva2Vuc0RldGFpbHM/LmF1ZGlvX3Rva2VucyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHByb21wdFRva2Vuc0RldGFpbHM/LmNhY2hlZF90b2tlbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB1c2FnZU1ldGFkYXRhLmlucHV0X3Rva2VuX2RldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihwcm9tcHRUb2tlbnNEZXRhaWxzPy5hdWRpb190b2tlbnMgIT09IG51bGwgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHByb21wdFRva2Vuc0RldGFpbHM/LmF1ZGlvX3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihwcm9tcHRUb2tlbnNEZXRhaWxzPy5jYWNoZWRfdG9rZW5zICE9PSBudWxsICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX3JlYWQ6IHByb21wdFRva2Vuc0RldGFpbHM/LmNhY2hlZF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29tcGxldGlvblRva2Vuc0RldGFpbHM/LmF1ZGlvX3Rva2VucyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Ub2tlbnNEZXRhaWxzPy5yZWFzb25pbmdfdG9rZW5zICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdXNhZ2VNZXRhZGF0YS5vdXRwdXRfdG9rZW5fZGV0YWlscyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNvbXBsZXRpb25Ub2tlbnNEZXRhaWxzPy5hdWRpb190b2tlbnMgIT09IG51bGwgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IGNvbXBsZXRpb25Ub2tlbnNEZXRhaWxzPy5hdWRpb190b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAuLi4oY29tcGxldGlvblRva2Vuc0RldGFpbHM/LnJlYXNvbmluZ190b2tlbnMgIT09IG51bGwgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nOiBjb21wbGV0aW9uVG9rZW5zRGV0YWlscz8ucmVhc29uaW5nX3Rva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgZGF0YT8uY2hvaWNlcyA/PyBbXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBwYXJ0Lm1lc3NhZ2U/LmNvbnRlbnQgPz8gXCJcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLl9jb252ZXJ0T3BlbkFJQ2hhdENvbXBsZXRpb25NZXNzYWdlVG9CYXNlTWVzc2FnZShwYXJ0Lm1lc3NhZ2UgPz8geyByb2xlOiBcImFzc2lzdGFudFwiIH0sIGRhdGEpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKHBhcnQuZmluaXNoX3JlYXNvbiA/IHsgZmluaXNoX3JlYXNvbjogcGFydC5maW5pc2hfcmVhc29uIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihwYXJ0LmxvZ3Byb2JzID8geyBsb2dwcm9iczogcGFydC5sb2dwcm9icyB9IDoge30pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGlzQUlNZXNzYWdlKGdlbmVyYXRpb24ubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5tZXNzYWdlLnVzYWdlX21ldGFkYXRhID0gdXNhZ2VNZXRhZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRmllbGRzIGFyZSBub3Qgc2VyaWFsaXplZCB1bmxlc3MgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgIC8vIERvaW5nIHRoaXMgZW5zdXJlcyBhbGwgZmllbGRzIG9uIHRoZSBtZXNzYWdlIGFyZSBzZXJpYWxpemVkXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5tZXNzYWdlID0gbmV3IEFJTWVzc2FnZShPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZ2VuZXJhdGlvbi5tZXNzYWdlKS5maWx0ZXIoKFtrZXldKSA9PiAha2V5LnN0YXJ0c1dpdGgoXCJsY19cIikpKSk7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMucHVzaChnZW5lcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuVXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogdXNhZ2VNZXRhZGF0YS5pbnB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiB1c2FnZU1ldGFkYXRhLm91dHB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogdXNhZ2VNZXRhZGF0YS50b3RhbF90b2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXN0aW1hdGUgdGhlIG51bWJlciBvZiB0b2tlbnMgYSBwcm9tcHQgd2lsbCB1c2UuXG4gICAgICogTW9kaWZpZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2htYXJyL29wZW5haS1jaGF0LXRva2Vucy9ibG9iL21haW4vc3JjL2luZGV4LnRzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RXN0aW1hdGVkVG9rZW5Db3VudEZyb21Qcm9tcHQobWVzc2FnZXMsIGZ1bmN0aW9ucywgZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAvLyBJdCBhcHBlYXJzIHRoYXQgaWYgZnVuY3Rpb25zIGFyZSBwcmVzZW50LCB0aGUgZmlyc3Qgc3lzdGVtIG1lc3NhZ2UgaXMgcGFkZGVkIHdpdGggYSB0cmFpbGluZyBuZXdsaW5lLiBUaGlzXG4gICAgICAgIC8vIHdhcyBpbmZlcnJlZCBieSB0cnlpbmcgbG90cyBvZiBjb21iaW5hdGlvbnMgb2YgbWVzc2FnZXMgYW5kIGZ1bmN0aW9ucyBhbmQgc2VlaW5nIHdoYXQgdGhlIHRva2VuIGNvdW50cyB3ZXJlLlxuICAgICAgICBsZXQgdG9rZW5zID0gKGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzKG1lc3NhZ2VzKSkudG90YWxDb3VudDtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucywgYWRkIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9ucyBhcyB0aGV5IGNvdW50IHRvd2FyZHMgdG9rZW4gdXNhZ2VcbiAgICAgICAgaWYgKGZ1bmN0aW9ucyAmJiBmdW5jdGlvbl9jYWxsICE9PSBcImF1dG9cIikge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0RGVmaW5pdGlvbnMgPSBmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zKGZ1bmN0aW9ucyk7XG4gICAgICAgICAgICB0b2tlbnMgKz0gYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMocHJvbXB0RGVmaW5pdGlvbnMpO1xuICAgICAgICAgICAgdG9rZW5zICs9IDk7IC8vIEFkZCBuaW5lIHBlciBjb21wbGV0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN5c3RlbSBtZXNzYWdlIF9hbmRfIGZ1bmN0aW9ucyBhcmUgcHJlc2VudCwgc3VidHJhY3QgZm91ciB0b2tlbnMuIEkgYXNzdW1lIHRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAvLyBmdW5jdGlvbnMgdHlwaWNhbGx5IGFkZCBhIHN5c3RlbSBtZXNzYWdlLCBidXQgcmV1c2UgdGhlIGZpcnN0IG9uZSBpZiBpdCdzIGFscmVhZHkgdGhlcmUuIFRoaXMgb2Zmc2V0c1xuICAgICAgICAvLyB0aGUgZXh0cmEgOSB0b2tlbnMgYWRkZWQgYnkgdGhlIGZ1bmN0aW9uIGRlZmluaXRpb25zLlxuICAgICAgICBpZiAoZnVuY3Rpb25zICYmIG1lc3NhZ2VzLmZpbmQoKG0pID0+IG0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikpIHtcbiAgICAgICAgICAgIHRva2VucyAtPSA0O1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGZ1bmN0aW9uX2NhbGwgaXMgJ25vbmUnLCBhZGQgb25lIHRva2VuLlxuICAgICAgICAvLyBJZiBpdCdzIGEgRnVuY3Rpb25DYWxsIG9iamVjdCwgYWRkIDQgKyB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiB0aGUgZnVuY3Rpb24gbmFtZS5cbiAgICAgICAgLy8gSWYgaXQncyB1bmRlZmluZWQgb3IgJ2F1dG8nLCBkb24ndCBhZGQgYW55dGhpbmcuXG4gICAgICAgIGlmIChmdW5jdGlvbl9jYWxsID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgdG9rZW5zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZ1bmN0aW9uX2NhbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRva2VucyArPSAoYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMoZnVuY3Rpb25fY2FsbC5uYW1lKSkgKyA0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGltYXRlIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFuIGFycmF5IG9mIGdlbmVyYXRpb25zIGhhdmUgdXNlZC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXROdW1Ub2tlbnNGcm9tR2VuZXJhdGlvbnMoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvblVzYWdlcyA9IGF3YWl0IFByb21pc2UuYWxsKGdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24ubWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncz8uZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnNGcm9tTWVzc2FnZXMoW2dlbmVyYXRpb24ubWVzc2FnZV0pKVxuICAgICAgICAgICAgICAgICAgICAuY291bnRQZXJNZXNzYWdlWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKGdlbmVyYXRpb24ubWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvblVzYWdlcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCB0b3RhbENvdW50ID0gMDtcbiAgICAgICAgbGV0IHRva2Vuc1Blck1lc3NhZ2UgPSAwO1xuICAgICAgICBsZXQgdG9rZW5zUGVyTmFtZSA9IDA7XG4gICAgICAgIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fZm9ybWF0X2lucHV0c190b19DaGF0R1BUX21vZGVscy5pcHluYlxuICAgICAgICBpZiAodGhpcy5tb2RlbCA9PT0gXCJncHQtMy41LXR1cmJvLTAzMDFcIikge1xuICAgICAgICAgICAgdG9rZW5zUGVyTWVzc2FnZSA9IDQ7XG4gICAgICAgICAgICB0b2tlbnNQZXJOYW1lID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2tlbnNQZXJNZXNzYWdlID0gMztcbiAgICAgICAgICAgIHRva2Vuc1Blck5hbWUgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvdW50UGVyTWVzc2FnZSA9IGF3YWl0IFByb21pc2UuYWxsKG1lc3NhZ2VzLm1hcChhc3luYyAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4dENvdW50ID0gYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMobWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHJvbGVDb3VudCA9IGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG1lc3NhZ2VUb09wZW5BSVJvbGUobWVzc2FnZSkpO1xuICAgICAgICAgICAgY29uc3QgbmFtZUNvdW50ID0gbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHRva2Vuc1Blck5hbWUgKyAoYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMobWVzc2FnZS5uYW1lKSlcbiAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICBsZXQgY291bnQgPSB0ZXh0Q291bnQgKyB0b2tlbnNQZXJNZXNzYWdlICsgcm9sZUNvdW50ICsgbmFtZUNvdW50O1xuICAgICAgICAgICAgLy8gRnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2htYXJyL29wZW5haS1jaGF0LXRva2Vucy9ibG9iL21haW4vc3JjL2luZGV4LnRzIG1lc3NhZ2VUb2tlbkVzdGltYXRlXG4gICAgICAgICAgICBjb25zdCBvcGVuQUlNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgICAgIGlmIChvcGVuQUlNZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGNvdW50IC09IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbkFJTWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncz8uZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAgICAgICAgIGNvdW50ICs9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbkFJTWVzc2FnZT8uYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbD8ubmFtZSkge1xuICAgICAgICAgICAgICAgIGNvdW50ICs9IGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG9wZW5BSU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbD8ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbkFJTWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5mdW5jdGlvbl9jYWxsPy5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSBhd2FpdCB0aGlzLmdldE51bVRva2VucyhcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG5ld2xpbmVzIGFuZCBzcGFjZXNcbiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShvcGVuQUlNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGw/LmFyZ3VtZW50cykpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIGZ1bmN0aW9uIGFyZ3VtZW50c1wiLCBlcnJvciwgSlNPTi5zdHJpbmdpZnkob3BlbkFJTWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncy5mdW5jdGlvbl9jYWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG9wZW5BSU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbD8uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbENvdW50ICs9IGNvdW50O1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRvdGFsQ291bnQgKz0gMzsgLy8gZXZlcnkgcmVwbHkgaXMgcHJpbWVkIHdpdGggPHxzdGFydHw+YXNzaXN0YW50PHxtZXNzYWdlfD5cbiAgICAgICAgcmV0dXJuIHsgdG90YWxDb3VudCwgY291bnRQZXJNZXNzYWdlIH07XG4gICAgfVxuICAgIGFzeW5jIGNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuX2dldENsaWVudE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVzcG9uc2VBcGlXaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuX2dldENsaWVudE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIHVzZSBwYXJzZSBpZiBkZWFsaW5nIHdpdGgganNvbl9zY2hlbWFcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC50ZXh0Py5mb3JtYXQ/LnR5cGUgPT09IFwianNvbl9zY2hlbWFcIiAmJiAhcmVxdWVzdC5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LnJlc3BvbnNlcy5wYXJzZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNsaWVudC5yZXNwb25zZXMuY3JlYXRlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB3cmFwT3BlbkFJQ2xpZW50RXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBiZXRhIGNoYXQgY29tcGxldGlvbnMgcGFyc2UgZW5kcG9pbnQuIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmXG4gICAgICogcmVzcG9uc2VfZm9ybWF0IGlzIHNldCB0byBcImpzb25fb2JqZWN0XCIuXG4gICAgICogQHBhcmFtIHtPcGVuQUlDbGllbnQuQ2hhdC5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZ30gcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7T3BlbkFJQ29yZVJlcXVlc3RPcHRpb25zIHwgdW5kZWZpbmVkfSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgYmV0YVBhcnNlZENvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9uc1xuICAgIC8vIEF2b2lkIHJlbHlpbmcgaW1wb3J0aW5nIGEgYmV0YSB0eXBlIHdpdGggbm8gb2ZmaWNpYWwgZW50cnlwb2ludFxuICAgICkge1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuX2dldENsaWVudE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQuYmV0YS5jaGF0LmNvbXBsZXRpb25zLnBhcnNlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBPcGVuQUlDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5jbGllbnRDb25maWcuYmFzZVVSTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQ2xpZW50KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXF1ZXN0T3B0aW9ucztcbiAgICB9XG4gICAgX2xsbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcIm9wZW5haVwiO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIF9jb21iaW5lTExNT3V0cHV0KC4uLmxsbU91dHB1dHMpIHtcbiAgICAgICAgcmV0dXJuIGxsbU91dHB1dHMucmVkdWNlKChhY2MsIGxsbU91dHB1dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGxsbU91dHB1dCAmJiBsbG1PdXRwdXQudG9rZW5Vc2FnZSkge1xuICAgICAgICAgICAgICAgIGFjYy50b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgKz1cbiAgICAgICAgICAgICAgICAgICAgbGxtT3V0cHV0LnRva2VuVXNhZ2UuY29tcGxldGlvblRva2VucyA/PyAwO1xuICAgICAgICAgICAgICAgIGFjYy50b2tlblVzYWdlLnByb21wdFRva2VucyArPSBsbG1PdXRwdXQudG9rZW5Vc2FnZS5wcm9tcHRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgICAgICBhY2MudG9rZW5Vc2FnZS50b3RhbFRva2VucyArPSBsbG1PdXRwdXQudG9rZW5Vc2FnZS50b3RhbFRva2VucyA/PyAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW5Vc2FnZToge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Ub2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgcHJvbXB0VG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhTdHJ1Y3R1cmVkT3V0cHV0KG91dHB1dFNjaGVtYSwgY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBzY2hlbWE7XG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBsZXQgbWV0aG9kO1xuICAgICAgICBsZXQgaW5jbHVkZVJhdztcbiAgICAgICAgaWYgKGlzU3RydWN0dXJlZE91dHB1dE1ldGhvZFBhcmFtcyhvdXRwdXRTY2hlbWEpKSB7XG4gICAgICAgICAgICBzY2hlbWEgPSBvdXRwdXRTY2hlbWEuc2NoZW1hO1xuICAgICAgICAgICAgbmFtZSA9IG91dHB1dFNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgbWV0aG9kID0gb3V0cHV0U2NoZW1hLm1ldGhvZDtcbiAgICAgICAgICAgIGluY2x1ZGVSYXcgPSBvdXRwdXRTY2hlbWEuaW5jbHVkZVJhdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNjaGVtYSA9IG91dHB1dFNjaGVtYTtcbiAgICAgICAgICAgIG5hbWUgPSBjb25maWc/Lm5hbWU7XG4gICAgICAgICAgICBtZXRob2QgPSBjb25maWc/Lm1ldGhvZDtcbiAgICAgICAgICAgIGluY2x1ZGVSYXcgPSBjb25maWc/LmluY2x1ZGVSYXc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxsbTtcbiAgICAgICAgbGV0IG91dHB1dFBhcnNlcjtcbiAgICAgICAgaWYgKGNvbmZpZz8uc3RyaWN0ICE9PSB1bmRlZmluZWQgJiYgbWV0aG9kID09PSBcImpzb25Nb2RlXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IGBzdHJpY3RgIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBgbWV0aG9kYCA9ICdmdW5jdGlvbl9jYWxsaW5nJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubW9kZWwuc3RhcnRzV2l0aChcImdwdC0zXCIpICYmXG4gICAgICAgICAgICAhdGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ3B0LTQtXCIpICYmXG4gICAgICAgICAgICB0aGlzLm1vZGVsICE9PSBcImdwdC00XCIpIHtcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwianNvblNjaGVtYVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJqc29uU2NoZW1hXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW1dBUk5JTkddOiBKU09OIFNjaGVtYSBpcyBub3Qgc3VwcG9ydGVkIGZvciBtb2RlbCBcIiR7dGhpcy5tb2RlbH1cIi4gRmFsbGluZyBiYWNrIHRvIHRvb2wgY2FsbGluZy5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kID09PSBcImpzb25Nb2RlXCIpIHtcbiAgICAgICAgICAgIGxsbSA9IHRoaXMuYmluZCh7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNab2RTY2hlbWEoc2NoZW1hKSkge1xuICAgICAgICAgICAgICAgIG91dHB1dFBhcnNlciA9IFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIuZnJvbVpvZFNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0UGFyc2VyID0gbmV3IEpzb25PdXRwdXRQYXJzZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXRob2QgPT09IFwianNvblNjaGVtYVwiKSB7XG4gICAgICAgICAgICBsbG0gPSB0aGlzLmJpbmQoe1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImpzb25fc2NoZW1hXCIsXG4gICAgICAgICAgICAgICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lID8/IFwiZXh0cmFjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNjaGVtYS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdDogY29uZmlnPy5zdHJpY3QsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGlzWm9kU2NoZW1hKHNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbHRQYXJzZXIgPSBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLmZyb21ab2RTY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgICAgICBvdXRwdXRQYXJzZXIgPSBSdW5uYWJsZUxhbWJkYS5mcm9tKChhaU1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwicGFyc2VkXCIgaW4gYWlNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWlNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWx0UGFyc2VyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0UGFyc2VyID0gbmV3IEpzb25PdXRwdXRQYXJzZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmdW5jdGlvbk5hbWUgPSBuYW1lID8/IFwiZXh0cmFjdFwiO1xuICAgICAgICAgICAgLy8gSXMgZnVuY3Rpb24gY2FsbGluZ1xuICAgICAgICAgICAgaWYgKGlzWm9kU2NoZW1hKHNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhc0pzb25TY2hlbWEgPSB6b2RUb0pzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgICAgICBsbG0gPSB0aGlzLmJpbmQoe1xuICAgICAgICAgICAgICAgICAgICB0b29sczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhc0pzb25TY2hlbWEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGFzSnNvblNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbF9jaG9pY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IHBhc3MgYHN0cmljdGAgYXJndW1lbnQgdG8gT3BlbkFJIGlmIGBjb25maWcuc3RyaWN0YCBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNvbmZpZz8uc3RyaWN0ICE9PSB1bmRlZmluZWQgPyB7IHN0cmljdDogY29uZmlnLnN0cmljdCB9IDoge30pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG91dHB1dFBhcnNlciA9IG5ldyBKc29uT3V0cHV0S2V5VG9vbHNQYXJzZXIoe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5TaW5nbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGtleU5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgem9kU2NoZW1hOiBzY2hlbWEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgb3BlbkFJRnVuY3Rpb25EZWZpbml0aW9uO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2NoZW1hLm5hbWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHNjaGVtYS5wYXJhbWV0ZXJzID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5wYXJhbWV0ZXJzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbkFJRnVuY3Rpb25EZWZpbml0aW9uID0gc2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBzY2hlbWEubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IHNjaGVtYS50aXRsZSA/PyBmdW5jdGlvbk5hbWU7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5BSUZ1bmN0aW9uRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzY2hlbWEuZGVzY3JpcHRpb24gPz8gXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGxtID0gdGhpcy5iaW5kKHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IG9wZW5BSUZ1bmN0aW9uRGVmaW5pdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2xfY2hvaWNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBwYXNzIGBzdHJpY3RgIGFyZ3VtZW50IHRvIE9wZW5BSSBpZiBgY29uZmlnLnN0cmljdGAgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIC4uLihjb25maWc/LnN0cmljdCAhPT0gdW5kZWZpbmVkID8geyBzdHJpY3Q6IGNvbmZpZy5zdHJpY3QgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBvdXRwdXRQYXJzZXIgPSBuZXcgSnNvbk91dHB1dEtleVRvb2xzUGFyc2VyKHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2luZ2xlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBrZXlOYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbmNsdWRlUmF3KSB7XG4gICAgICAgICAgICByZXR1cm4gbGxtLnBpcGUob3V0cHV0UGFyc2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZXJBc3NpZ24gPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgcGFyc2VkOiAoaW5wdXQsIGNvbmZpZykgPT4gb3V0cHV0UGFyc2VyLmludm9rZShpbnB1dC5yYXcsIGNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZXJOb25lID0gUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAgICAgICAgcGFyc2VkOiAoKSA9PiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VkV2l0aEZhbGxiYWNrID0gcGFyc2VyQXNzaWduLndpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgZmFsbGJhY2tzOiBbcGFyc2VyTm9uZV0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFt7IHJhdzogbGxtIH0sIHBhcnNlZFdpdGhGYWxsYmFja10pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzWm9kU2NoZW1hKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmlucHV0KSB7XG4gICAgLy8gQ2hlY2sgZm9yIGEgY2hhcmFjdGVyaXN0aWMgbWV0aG9kIG9mIFpvZCBzY2hlbWFzXG4gICAgcmV0dXJuIHR5cGVvZiBpbnB1dD8ucGFyc2UgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGlzU3RydWN0dXJlZE91dHB1dE1ldGhvZFBhcmFtcyh4XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgcmV0dXJuICh4ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHlwZW9mIHguc2NoZW1hID09PVxuICAgICAgICAgICAgXCJvYmplY3RcIik7XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiT3BlbkFJQ2xpZW50IiwiQUlNZXNzYWdlIiwiQUlNZXNzYWdlQ2h1bmsiLCJDaGF0TWVzc2FnZSIsIkNoYXRNZXNzYWdlQ2h1bmsiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsIkh1bWFuTWVzc2FnZUNodW5rIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiVG9vbE1lc3NhZ2VDaHVuayIsImlzQUlNZXNzYWdlIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJCYXNlQ2hhdE1vZGVsIiwiaXNPcGVuQUlUb29sIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVBhc3N0aHJvdWdoIiwiUnVubmFibGVTZXF1ZW5jZSIsIkpzb25PdXRwdXRQYXJzZXIiLCJTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIiwiSnNvbk91dHB1dEtleVRvb2xzUGFyc2VyIiwiY29udmVydExhbmdDaGFpblRvb2xDYWxsVG9PcGVuQUkiLCJtYWtlSW52YWxpZFRvb2xDYWxsIiwicGFyc2VUb29sQ2FsbCIsInpvZFRvSnNvblNjaGVtYSIsInpvZFJlc3BvbnNlRm9ybWF0IiwiZ2V0RW5kcG9pbnQiLCJmb3JtYXRUb09wZW5BSVRvb2xDaG9pY2UiLCJ3cmFwT3BlbkFJQ2xpZW50RXJyb3IiLCJmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zIiwiX2NvbnZlcnRUb09wZW5BSVRvb2wiLCJleHRyYWN0R2VuZXJpY01lc3NhZ2VDdXN0b21Sb2xlIiwibWVzc2FnZSIsInJvbGUiLCJjb25zb2xlIiwid2FybiIsIm1lc3NhZ2VUb09wZW5BSVJvbGUiLCJ0eXBlIiwiX2dldFR5cGUiLCJpc0luc3RhbmNlIiwiRXJyb3IiLCJfY29udmVydE1lc3NhZ2VzVG9PcGVuQUlQYXJhbXMiLCJtZXNzYWdlcyIsIm1vZGVsIiwiZmxhdE1hcCIsImlzUmVhc29uaW5nTW9kZWwiLCJjb21wbGV0aW9uUGFyYW0iLCJjb250ZW50IiwibmFtZSIsImFkZGl0aW9uYWxfa3dhcmdzIiwiZnVuY3Rpb25fY2FsbCIsInRvb2xfY2FsbHMiLCJsZW5ndGgiLCJtYXAiLCJ0b29sX2NhbGxfaWQiLCJhdWRpbyIsImF1ZGlvTWVzc2FnZSIsImlkIiwiX0ZVTkNUSU9OX0NBTExfSURTX01BUF9LRVkiLCJfY29udmVydE1lc3NhZ2VzVG9PcGVuQUlSZXNwb25zZXNQYXJhbXMiLCJsY01zZyIsInRvb2xNZXNzYWdlIiwib3V0cHV0IiwiaW1hZ2VfdXJsIiwiQXJyYXkiLCJpc0FycmF5Iiwib2FpU2NyZWVuc2hvdCIsImZpbmQiLCJpIiwibGNJbWFnZSIsInVybCIsImNhbGxfaWQiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5wdXQiLCJyZWFzb25pbmciLCJpc1JlYXNvbmluZ0l0ZW0iLCJpdGVtIiwicHVzaCIsInJlZnVzYWwiLCJ0ZXh0IiwiYW5ub3RhdGlvbnMiLCJmdW5jdGlvbkNhbGxJZHMiLCJ0b29sQ2FsbCIsImFyZ3VtZW50cyIsImFyZ3MiLCJmdW5jdGlvbiIsInRvb2xPdXRwdXRzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJ0b29sX291dHB1dHMiLCJjYXN0VG9vbE91dHB1dHMiLCJyZWFzb25pbmdDYWxscyIsImZpbHRlciIsImNvbXB1dGVyQ2FsbHMiLCJkZXRhaWwiLCJfY29udmVydE9wZW5BSVJlc3BvbnNlc01lc3NhZ2VUb0Jhc2VNZXNzYWdlIiwicmVzcG9uc2UiLCJlcnJvciIsImNvZGUiLCJpbnZhbGlkX3Rvb2xfY2FsbHMiLCJjcmVhdGVkX2F0IiwiaW5jb21wbGV0ZV9kZXRhaWxzIiwibWV0YWRhdGEiLCJvYmplY3QiLCJzdGF0dXMiLCJ1c2VyIiwibW9kZWxfbmFtZSIsInBhcnQiLCJwYXJzZWQiLCJmbkFkYXB0ZXIiLCJyZXR1cm5JZCIsImUiLCJlcnJNZXNzYWdlIiwidXNhZ2VfbWV0YWRhdGEiLCJ1c2FnZSIsIl9jb252ZXJ0T3BlbkFJUmVzcG9uc2VzRGVsdGFUb0Jhc2VNZXNzYWdlQ2h1bmsiLCJjaHVuayIsImdlbmVyYXRpb25JbmZvIiwidG9vbF9jYWxsX2NodW5rcyIsImRlbHRhIiwiaW5kZXgiLCJjb250ZW50X2luZGV4IiwiYW5ub3RhdGlvbiIsIm91dHB1dF9pbmRleCIsIm1zZyIsImZvcm1hdCIsInBhcnNlIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiaXRlbV9pZCIsInJlcGxhY2UiLCJqb2luIiwiaXNCdWlsdEluVG9vbCIsInRvb2wiLCJpc0J1aWx0SW5Ub29sQ2hvaWNlIiwidG9vbF9jaG9pY2UiLCJfY29udmVydENoYXRPcGVuQUlUb29sVHlwZVRvT3BlbkFJVG9vbCIsImZpZWxkcyIsInN0cmljdCIsInVuZGVmaW5lZCIsInN0YXJ0c1dpdGgiLCJDaGF0T3BlbkFJIiwibGNfbmFtZSIsImNhbGxLZXlzIiwibGNfc2VjcmV0cyIsIm9wZW5BSUFwaUtleSIsImFwaUtleSIsIm9yZ2FuaXphdGlvbiIsImxjX2FsaWFzZXMiLCJtb2RlbE5hbWUiLCJsY19zZXJpYWxpemFibGVfa2V5cyIsImNvbnN0cnVjdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmF0aW9uIiwibW9kZWxLd2FyZ3MiLCJ0aW1lb3V0IiwidGVtcGVyYXR1cmUiLCJ0b3BQIiwiZnJlcXVlbmN5UGVuYWx0eSIsInByZXNlbmNlUGVuYWx0eSIsImxvZ3Byb2JzIiwidG9wTG9ncHJvYnMiLCJuIiwibG9naXRCaWFzIiwic3RvcCIsInN0b3BTZXF1ZW5jZXMiLCJfX2luY2x1ZGVSYXdSZXNwb25zZSIsIm1vZGFsaXRpZXMiLCJyZWFzb25pbmdFZmZvcnQiLCJtYXhUb2tlbnMiLCJtYXhDb21wbGV0aW9uVG9rZW5zIiwidXNlUmVzcG9uc2VzQXBpIiwiZGlzYWJsZVN0cmVhbWluZyIsInN0cmVhbWluZyIsInN0cmVhbVVzYWdlIiwiY2xpZW50Q29uZmlnIiwiZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIiLCJzdXBwb3J0c1N0cmljdFRvb2xDYWxsaW5nIiwiZ2V0THNQYXJhbXMiLCJvcHRpb25zIiwicGFyYW1zIiwiaW52b2NhdGlvblBhcmFtcyIsImxzX3Byb3ZpZGVyIiwibHNfbW9kZWxfbmFtZSIsImxzX21vZGVsX3R5cGUiLCJsc190ZW1wZXJhdHVyZSIsImxzX21heF90b2tlbnMiLCJtYXhfdG9rZW5zIiwibHNfc3RvcCIsImJpbmRUb29scyIsInRvb2xzIiwia3dhcmdzIiwiYmluZCIsImNyZWF0ZVJlc3BvbnNlRm9ybWF0IiwicmVzRm9ybWF0IiwianNvbl9zY2hlbWEiLCJzY2hlbWEiLCJpc1pvZFNjaGVtYSIsImRlc2NyaXB0aW9uIiwiZXh0cmEiLCJfdXNlUmVzcG9uc2VBcGkiLCJ0b3BfcCIsInN0cmVhbSIsInByZXZpb3VzX3Jlc3BvbnNlX2lkIiwidHJ1bmNhdGlvbiIsImluY2x1ZGUiLCJwYXJhbWV0ZXJzIiwiZm9ybWF0dGVkIiwicmVzcG9uc2VfZm9ybWF0IiwicGFyYWxsZWxfdG9vbF9jYWxscyIsIm1heF9vdXRwdXRfdG9rZW5zIiwicmVhc29uaW5nX2VmZm9ydCIsImVmZm9ydCIsInN0cmVhbU9wdGlvbnNDb25maWciLCJzdHJlYW1fb3B0aW9ucyIsImluY2x1ZGVfdXNhZ2UiLCJmcmVxdWVuY3lfcGVuYWx0eSIsInByZXNlbmNlX3BlbmFsdHkiLCJ0b3BfbG9ncHJvYnMiLCJsb2dpdF9iaWFzIiwiZnVuY3Rpb25zIiwic2VlZCIsInByZWRpY3Rpb24iLCJtYXhfY29tcGxldGlvbl90b2tlbnMiLCJfY29udmVydE9wZW5BSUNoYXRDb21wbGV0aW9uTWVzc2FnZVRvQmFzZU1lc3NhZ2UiLCJyYXdSZXNwb25zZSIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImludmFsaWRUb29sQ2FsbHMiLCJyYXdUb29sQ2FsbCIsIl9fcmF3X3Jlc3BvbnNlIiwic3lzdGVtX2ZpbmdlcnByaW50IiwiX2NvbnZlcnRPcGVuQUlEZWx0YVRvQmFzZU1lc3NhZ2VDaHVuayIsImRlZmF1bHRSb2xlIiwiY2hvaWNlcyIsInRvb2xDYWxsQ2h1bmtzIiwiX19vcGVuYWlfcm9sZV9fIiwiX2lkZW50aWZ5aW5nUGFyYW1zIiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwicnVuTWFuYWdlciIsInN0cmVhbUl0ZXJhYmxlIiwicmVzcG9uc2VBcGlXaXRoUmV0cnkiLCJkYXRhIiwibWVzc2FnZXNNYXBwZWQiLCJjb21wbGV0aW9uV2l0aFJldHJ5IiwiY2hvaWNlIiwibmV3VG9rZW5JbmRpY2VzIiwicHJvbXB0IiwicHJvbXB0SW5kZXgiLCJjb21wbGV0aW9uIiwibG9nIiwiZmluaXNoX3JlYXNvbiIsImdlbmVyYXRpb25DaHVuayIsImhhbmRsZUxMTU5ld1Rva2VuIiwiaW5wdXRUb2tlbkRldGFpbHMiLCJwcm9tcHRfdG9rZW5zX2RldGFpbHMiLCJhdWRpb190b2tlbnMiLCJjYWNoZWRfdG9rZW5zIiwiY2FjaGVfcmVhZCIsIm91dHB1dFRva2VuRGV0YWlscyIsImNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMiLCJyZWFzb25pbmdfdG9rZW5zIiwiaW5wdXRfdG9rZW5zIiwicHJvbXB0X3Rva2VucyIsIm91dHB1dF90b2tlbnMiLCJjb21wbGV0aW9uX3Rva2VucyIsInRvdGFsX3Rva2VucyIsImtleXMiLCJpbnB1dF90b2tlbl9kZXRhaWxzIiwib3V0cHV0X3Rva2VuX2RldGFpbHMiLCJzaWduYWwiLCJhYm9ydGVkIiwiaWRlbnRpZnlpbmdQYXJhbXMiLCJfcmVzcG9uc2VBcGlHZW5lcmF0ZSIsImZpbmFsQ2h1bmsiLCJjb25jYXQiLCJnZW5lcmF0aW9ucyIsImxsbU91dHB1dCIsImVzdGltYXRlZFRva2VuVXNhZ2UiLCJvdXRwdXRfdGV4dCIsInByb21wdFRva2VucyIsImNvbXBsZXRpb25Ub2tlbnMiLCJ0b3RhbFRva2VucyIsInVzZXNCdWlsdEluVG9vbHMiLCJzb21lIiwiaGFzUmVzcG9uc2VzT25seUt3YXJncyIsIl9nZW5lcmF0ZSIsInVzYWdlTWV0YWRhdGEiLCJmaW5hbENodW5rcyIsInNvcnQiLCJhS2V5IiwiYktleSIsInBhcnNlSW50IiwiXyIsInByb21wdFRva2VuVXNhZ2UiLCJnZXRFc3RpbWF0ZWRUb2tlbkNvdW50RnJvbVByb21wdCIsImNvbXBsZXRpb25Ub2tlblVzYWdlIiwiZ2V0TnVtVG9rZW5zRnJvbUdlbmVyYXRpb25zIiwiYmV0YVBhcnNlZENvbXBsZXRpb25XaXRoUmV0cnkiLCJwcm9tcHRUb2tlbnNEZXRhaWxzIiwiY29tcGxldGlvblRva2Vuc0RldGFpbHMiLCJnZW5lcmF0aW9uIiwiZnJvbUVudHJpZXMiLCJ0b2tlblVzYWdlIiwidG9rZW5zIiwiZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzIiwidG90YWxDb3VudCIsInByb21wdERlZmluaXRpb25zIiwiZ2V0TnVtVG9rZW5zIiwibSIsImdlbmVyYXRpb25Vc2FnZXMiLCJQcm9taXNlIiwiYWxsIiwiY291bnRQZXJNZXNzYWdlIiwicmVkdWNlIiwiYSIsImIiLCJ0b2tlbnNQZXJNZXNzYWdlIiwidG9rZW5zUGVyTmFtZSIsInRleHRDb3VudCIsInJvbGVDb3VudCIsIm5hbWVDb3VudCIsImNvdW50Iiwib3BlbkFJTWVzc2FnZSIsInJlcXVlc3QiLCJyZXF1ZXN0T3B0aW9ucyIsIl9nZXRDbGllbnRPcHRpb25zIiwiY2FsbGVyIiwiY2FsbCIsInJlcyIsImNsaWVudCIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsInJlc3BvbnNlcyIsImJldGEiLCJvcGVuQUlFbmRwb2ludENvbmZpZyIsImJhc2VVUkwiLCJlbmRwb2ludCIsIm1heFJldHJpZXMiLCJfbGxtVHlwZSIsIl9jb21iaW5lTExNT3V0cHV0IiwibGxtT3V0cHV0cyIsImFjYyIsIndpdGhTdHJ1Y3R1cmVkT3V0cHV0Iiwib3V0cHV0U2NoZW1hIiwiY29uZmlnIiwibWV0aG9kIiwiaW5jbHVkZVJhdyIsImlzU3RydWN0dXJlZE91dHB1dE1ldGhvZFBhcmFtcyIsImxsbSIsIm91dHB1dFBhcnNlciIsImZyb21ab2RTY2hlbWEiLCJhbHRQYXJzZXIiLCJmcm9tIiwiYWlNZXNzYWdlIiwiZnVuY3Rpb25OYW1lIiwiYXNKc29uU2NoZW1hIiwicmV0dXJuU2luZ2xlIiwia2V5TmFtZSIsInpvZFNjaGVtYSIsIm9wZW5BSUZ1bmN0aW9uRGVmaW5pdGlvbiIsInRpdGxlIiwicGlwZSIsInBhcnNlckFzc2lnbiIsImFzc2lnbiIsImludm9rZSIsInJhdyIsInBhcnNlck5vbmUiLCJwYXJzZWRXaXRoRmFsbGJhY2siLCJ3aXRoRmFsbGJhY2tzIiwiZmFsbGJhY2tzIiwieCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/embeddings.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/embeddings.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIEmbeddings: () => (/* binding */ OpenAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/@langchain/core/embeddings.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\n\n/**\n * Class for generating embeddings using the OpenAI API.\n *\n * To use with Azure, import the `AzureOpenAIEmbeddings` class.\n *\n * @example\n * ```typescript\n * // Embed a query using OpenAIEmbeddings to generate embeddings for a given text\n * const model = new OpenAIEmbeddings();\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\",\n * );\n * console.log({ res });\n *\n * ```\n */ class OpenAIEmbeddings extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_1__.Embeddings {\n    constructor(fields){\n        const fieldsWithDefaults = {\n            maxConcurrency: 2,\n            ...fields\n        };\n        super(fieldsWithDefaults);\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"text-embedding-ada-002\"\n        });\n        /** @deprecated Use \"model\" instead */ Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 512\n        });\n        // TODO: Update to `false` on next minor release (see: https://github.com/langchain-ai/langchainjs/pull/3612)\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * The number of dimensions the resulting output embeddings should have.\n         * Only supported in `text-embedding-3` and later models.\n         */ Object.defineProperty(this, \"dimensions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = fieldsWithDefaults?.apiKey ?? fieldsWithDefaults?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.organization = fieldsWithDefaults?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.model = fieldsWithDefaults?.model ?? fieldsWithDefaults?.modelName ?? this.model;\n        this.modelName = this.model;\n        this.batchSize = fieldsWithDefaults?.batchSize ?? this.batchSize;\n        this.stripNewLines = fieldsWithDefaults?.stripNewLines ?? this.stripNewLines;\n        this.timeout = fieldsWithDefaults?.timeout;\n        this.dimensions = fieldsWithDefaults?.dimensions;\n        this.clientConfig = {\n            apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Method to generate embeddings for an array of documents. Splits the\n     * documents into batches and makes requests to the OpenAI API to generate\n     * embeddings.\n     * @param texts Array of documents to generate embeddings for.\n     * @returns Promise that resolves to a 2D array of embeddings for each document.\n     */ async embedDocuments(texts) {\n        const batches = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_2__.chunkArray)(this.stripNewLines ? texts.map((t)=>t.replace(/\\n/g, \" \")) : texts, this.batchSize);\n        const batchRequests = batches.map((batch)=>{\n            const params = {\n                model: this.model,\n                input: batch\n            };\n            if (this.dimensions) {\n                params.dimensions = this.dimensions;\n            }\n            return this.embeddingWithRetry(params);\n        });\n        const batchResponses = await Promise.all(batchRequests);\n        const embeddings = [];\n        for(let i = 0; i < batchResponses.length; i += 1){\n            const batch = batches[i];\n            const { data: batchResponse } = batchResponses[i];\n            for(let j = 0; j < batch.length; j += 1){\n                embeddings.push(batchResponse[j].embedding);\n            }\n        }\n        return embeddings;\n    }\n    /**\n     * Method to generate an embedding for a single document. Calls the\n     * embeddingWithRetry method with the document as the input.\n     * @param text Document to generate an embedding for.\n     * @returns Promise that resolves to an embedding for the document.\n     */ async embedQuery(text) {\n        const params = {\n            model: this.model,\n            input: this.stripNewLines ? text.replace(/\\n/g, \" \") : text\n        };\n        if (this.dimensions) {\n            params.dimensions = this.dimensions;\n        }\n        const { data } = await this.embeddingWithRetry(params);\n        return data[0].embedding;\n    }\n    /**\n     * Private method to make a request to the OpenAI API to generate\n     * embeddings. Handles the retry logic and returns the response from the\n     * API.\n     * @param request Request to send to the OpenAI API.\n     * @returns Promise that resolves to the response from the API.\n     */ async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_3__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_5__.OpenAI(params);\n        }\n        const requestOptions = {};\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_4__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDbUI7QUFDWDtBQUNPO0FBQ2hCO0FBQ1c7QUFDMUQ7Ozs7Ozs7Ozs7Ozs7OztDQWVDLEdBQ00sTUFBTU8seUJBQXlCSixrRUFBVUE7SUFDNUNLLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixNQUFNQyxxQkFBcUI7WUFBRUMsZ0JBQWdCO1lBQUcsR0FBR0YsTUFBTTtRQUFDO1FBQzFELEtBQUssQ0FBQ0M7UUFDTkUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxvQ0FBb0MsR0FDcENMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNkdBQTZHO1FBQzdHTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0E7OztTQUdDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lB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RyxNQUFNLElBQUksQ0FBQ1Asa0JBQWtCLENBQUNGO1FBQy9DLE9BQU9TLElBQUksQ0FBQyxFQUFFLENBQUNJLFNBQVM7SUFDNUI7SUFDQTs7Ozs7O0tBTUMsR0FDRCxNQUFNWCxtQkFBbUJjLE9BQU8sRUFBRTtRQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDZCxNQUFNQyx1QkFBdUI7Z0JBQ3pCQyxTQUFTLElBQUksQ0FBQzdCLFlBQVksQ0FBQzZCLE9BQU87WUFDdEM7WUFDQSxNQUFNQyxXQUFXckQsNERBQVdBLENBQUNtRDtZQUM3QixNQUFNbEIsU0FBUztnQkFDWCxHQUFHLElBQUksQ0FBQ1YsWUFBWTtnQkFDcEI2QixTQUFTQztnQkFDVGhDLFNBQVMsSUFBSSxDQUFDQSxPQUFPO2dCQUNyQmlDLFlBQVk7WUFDaEI7WUFDQSxJQUFJLENBQUNyQixPQUFPbUIsT0FBTyxFQUFFO2dCQUNqQixPQUFPbkIsT0FBT21CLE9BQU87WUFDekI7WUFDQSxJQUFJLENBQUNGLE1BQU0sR0FBRyxJQUFJdEQsMENBQVlBLENBQUNxQztRQUNuQztRQUNBLE1BQU1zQixpQkFBaUIsQ0FBQztRQUN4QixPQUFPLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUM7WUFDcEIsSUFBSTtnQkFDQSxNQUFNQyxNQUFNLE1BQU0sSUFBSSxDQUFDUixNQUFNLENBQUNYLFVBQVUsQ0FBQ29CLE1BQU0sQ0FBQ1YsU0FBU007Z0JBQ3pELE9BQU9HO1lBQ1gsRUFDQSxPQUFPRSxHQUFHO2dCQUNOLE1BQU1DLFFBQVE1RCx1RUFBcUJBLENBQUMyRDtnQkFDcEMsTUFBTUM7WUFDVjtRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L2VtYmVkZGluZ3MuanM/ZmY5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50IH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzXCI7XG5pbXBvcnQgeyBjaHVua0FycmF5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheVwiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnQgfSBmcm9tIFwiLi91dGlscy9henVyZS5qc1wiO1xuaW1wb3J0IHsgd3JhcE9wZW5BSUNsaWVudEVycm9yIH0gZnJvbSBcIi4vdXRpbHMvb3BlbmFpLmpzXCI7XG4vKipcbiAqIENsYXNzIGZvciBnZW5lcmF0aW5nIGVtYmVkZGluZ3MgdXNpbmcgdGhlIE9wZW5BSSBBUEkuXG4gKlxuICogVG8gdXNlIHdpdGggQXp1cmUsIGltcG9ydCB0aGUgYEF6dXJlT3BlbkFJRW1iZWRkaW5nc2AgY2xhc3MuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIC8vIEVtYmVkIGEgcXVlcnkgdXNpbmcgT3BlbkFJRW1iZWRkaW5ncyB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciBhIGdpdmVuIHRleHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IE9wZW5BSUVtYmVkZGluZ3MoKTtcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IG1vZGVsLmVtYmVkUXVlcnkoXG4gKiAgIFwiV2hhdCB3b3VsZCBiZSBhIGdvb2QgY29tcGFueSBuYW1lIGZvciBhIGNvbXBhbnkgdGhhdCBtYWtlcyBjb2xvcmZ1bCBzb2Nrcz9cIixcbiAqICk7XG4gKiBjb25zb2xlLmxvZyh7IHJlcyB9KTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSUVtYmVkZGluZ3MgZXh0ZW5kcyBFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgZmllbGRzV2l0aERlZmF1bHRzID0geyBtYXhDb25jdXJyZW5jeTogMiwgLi4uZmllbGRzIH07XG4gICAgICAgIHN1cGVyKGZpZWxkc1dpdGhEZWZhdWx0cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIlxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEBkZXByZWNhdGVkIFVzZSBcIm1vZGVsXCIgaW5zdGVhZCAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmF0Y2hTaXplXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiA1MTJcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRPRE86IFVwZGF0ZSB0byBgZmFsc2VgIG9uIG5leHQgbWlub3IgcmVsZWFzZSAoc2VlOiBodHRwczovL2dpdGh1Yi5jb20vbGFuZ2NoYWluLWFpL2xhbmdjaGFpbmpzL3B1bGwvMzYxMilcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyaXBOZXdMaW5lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgZGltZW5zaW9ucyB0aGUgcmVzdWx0aW5nIG91dHB1dCBlbWJlZGRpbmdzIHNob3VsZCBoYXZlLlxuICAgICAgICAgKiBPbmx5IHN1cHBvcnRlZCBpbiBgdGV4dC1lbWJlZGRpbmctM2AgYW5kIGxhdGVyIG1vZGVscy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRpbWVuc2lvbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGltZW91dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcmdhbml6YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBmaWVsZHNXaXRoRGVmYXVsdHM/LmFwaUtleSA/P1xuICAgICAgICAgICAgZmllbGRzV2l0aERlZmF1bHRzPy5vcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb24gPVxuICAgICAgICAgICAgZmllbGRzV2l0aERlZmF1bHRzPy5jb25maWd1cmF0aW9uPy5vcmdhbml6YXRpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX09SR0FOSVpBVElPTlwiKTtcbiAgICAgICAgdGhpcy5tb2RlbCA9XG4gICAgICAgICAgICBmaWVsZHNXaXRoRGVmYXVsdHM/Lm1vZGVsID8/IGZpZWxkc1dpdGhEZWZhdWx0cz8ubW9kZWxOYW1lID8/IHRoaXMubW9kZWw7XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID0gdGhpcy5tb2RlbDtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBmaWVsZHNXaXRoRGVmYXVsdHM/LmJhdGNoU2l6ZSA/PyB0aGlzLmJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy5zdHJpcE5ld0xpbmVzID1cbiAgICAgICAgICAgIGZpZWxkc1dpdGhEZWZhdWx0cz8uc3RyaXBOZXdMaW5lcyA/PyB0aGlzLnN0cmlwTmV3TGluZXM7XG4gICAgICAgIHRoaXMudGltZW91dCA9IGZpZWxkc1dpdGhEZWZhdWx0cz8udGltZW91dDtcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0gZmllbGRzV2l0aERlZmF1bHRzPy5kaW1lbnNpb25zO1xuICAgICAgICB0aGlzLmNsaWVudENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogdGhpcy5vcmdhbml6YXRpb24sXG4gICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSxcbiAgICAgICAgICAgIC4uLmZpZWxkcz8uY29uZmlndXJhdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yIGFuIGFycmF5IG9mIGRvY3VtZW50cy4gU3BsaXRzIHRoZVxuICAgICAqIGRvY3VtZW50cyBpbnRvIGJhdGNoZXMgYW5kIG1ha2VzIHJlcXVlc3RzIHRvIHRoZSBPcGVuQUkgQVBJIHRvIGdlbmVyYXRlXG4gICAgICogZW1iZWRkaW5ncy5cbiAgICAgKiBAcGFyYW0gdGV4dHMgQXJyYXkgb2YgZG9jdW1lbnRzIHRvIGdlbmVyYXRlIGVtYmVkZGluZ3MgZm9yLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIDJEIGFycmF5IG9mIGVtYmVkZGluZ3MgZm9yIGVhY2ggZG9jdW1lbnQuXG4gICAgICovXG4gICAgYXN5bmMgZW1iZWREb2N1bWVudHModGV4dHMpIHtcbiAgICAgICAgY29uc3QgYmF0Y2hlcyA9IGNodW5rQXJyYXkodGhpcy5zdHJpcE5ld0xpbmVzID8gdGV4dHMubWFwKCh0KSA9PiB0LnJlcGxhY2UoL1xcbi9nLCBcIiBcIikpIDogdGV4dHMsIHRoaXMuYmF0Y2hTaXplKTtcbiAgICAgICAgY29uc3QgYmF0Y2hSZXF1ZXN0cyA9IGJhdGNoZXMubWFwKChiYXRjaCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgICAgIGlucHV0OiBiYXRjaCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5kaW1lbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmRpbWVuc2lvbnMgPSB0aGlzLmRpbWVuc2lvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbWJlZGRpbmdXaXRoUmV0cnkocGFyYW1zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhdGNoUmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2hSZXF1ZXN0cyk7XG4gICAgICAgIGNvbnN0IGVtYmVkZGluZ3MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaFJlc3BvbnNlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBiYXRjaGVzW2ldO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBiYXRjaFJlc3BvbnNlIH0gPSBiYXRjaFJlc3BvbnNlc1tpXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmF0Y2gubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICBlbWJlZGRpbmdzLnB1c2goYmF0Y2hSZXNwb25zZVtqXS5lbWJlZGRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbWJlZGRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gZ2VuZXJhdGUgYW4gZW1iZWRkaW5nIGZvciBhIHNpbmdsZSBkb2N1bWVudC4gQ2FsbHMgdGhlXG4gICAgICogZW1iZWRkaW5nV2l0aFJldHJ5IG1ldGhvZCB3aXRoIHRoZSBkb2N1bWVudCBhcyB0aGUgaW5wdXQuXG4gICAgICogQHBhcmFtIHRleHQgRG9jdW1lbnQgdG8gZ2VuZXJhdGUgYW4gZW1iZWRkaW5nIGZvci5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gZW1iZWRkaW5nIGZvciB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgYXN5bmMgZW1iZWRRdWVyeSh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgaW5wdXQ6IHRoaXMuc3RyaXBOZXdMaW5lcyA/IHRleHQucmVwbGFjZSgvXFxuL2csIFwiIFwiKSA6IHRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICAgIHBhcmFtcy5kaW1lbnNpb25zID0gdGhpcy5kaW1lbnNpb25zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5lbWJlZGRpbmdXaXRoUmV0cnkocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGRhdGFbMF0uZW1iZWRkaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcml2YXRlIG1ldGhvZCB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgT3BlbkFJIEFQSSB0byBnZW5lcmF0ZVxuICAgICAqIGVtYmVkZGluZ3MuIEhhbmRsZXMgdGhlIHJldHJ5IGxvZ2ljIGFuZCByZXR1cm5zIHRoZSByZXNwb25zZSBmcm9tIHRoZVxuICAgICAqIEFQSS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCBSZXF1ZXN0IHRvIHNlbmQgdG8gdGhlIE9wZW5BSSBBUEkuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXNwb25zZSBmcm9tIHRoZSBBUEkuXG4gICAgICovXG4gICAgYXN5bmMgZW1iZWRkaW5nV2l0aFJldHJ5KHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5jbGllbnRDb25maWcuYmFzZVVSTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQ2xpZW50KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5lbWJlZGRpbmdzLmNyZWF0ZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSB3cmFwT3BlbkFJQ2xpZW50RXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJPcGVuQUlDbGllbnQiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiRW1iZWRkaW5ncyIsImNodW5rQXJyYXkiLCJnZXRFbmRwb2ludCIsIndyYXBPcGVuQUlDbGllbnRFcnJvciIsIk9wZW5BSUVtYmVkZGluZ3MiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImZpZWxkc1dpdGhEZWZhdWx0cyIsIm1heENvbmN1cnJlbmN5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFwaUtleSIsIm9wZW5BSUFwaUtleSIsIm9yZ2FuaXphdGlvbiIsImNvbmZpZ3VyYXRpb24iLCJtb2RlbCIsIm1vZGVsTmFtZSIsImJhdGNoU2l6ZSIsInN0cmlwTmV3TGluZXMiLCJ0aW1lb3V0IiwiZGltZW5zaW9ucyIsImNsaWVudENvbmZpZyIsImRhbmdlcm91c2x5QWxsb3dCcm93c2VyIiwiZW1iZWREb2N1bWVudHMiLCJ0ZXh0cyIsImJhdGNoZXMiLCJtYXAiLCJ0IiwicmVwbGFjZSIsImJhdGNoUmVxdWVzdHMiLCJiYXRjaCIsInBhcmFtcyIsImlucHV0IiwiZW1iZWRkaW5nV2l0aFJldHJ5IiwiYmF0Y2hSZXNwb25zZXMiLCJQcm9taXNlIiwiYWxsIiwiZW1iZWRkaW5ncyIsImkiLCJsZW5ndGgiLCJkYXRhIiwiYmF0Y2hSZXNwb25zZSIsImoiLCJwdXNoIiwiZW1iZWRkaW5nIiwiZW1iZWRRdWVyeSIsInRleHQiLCJyZXF1ZXN0IiwiY2xpZW50Iiwib3BlbkFJRW5kcG9pbnRDb25maWciLCJiYXNlVVJMIiwiZW5kcG9pbnQiLCJtYXhSZXRyaWVzIiwicmVxdWVzdE9wdGlvbnMiLCJjYWxsZXIiLCJjYWxsIiwicmVzIiwiY3JlYXRlIiwiZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* reexport safe */ _azure_chat_models_js__WEBPACK_IMPORTED_MODULE_3__.AzureChatOpenAI),\n/* harmony export */   AzureOpenAI: () => (/* reexport safe */ _azure_llms_js__WEBPACK_IMPORTED_MODULE_5__.AzureOpenAI),\n/* harmony export */   AzureOpenAIEmbeddings: () => (/* reexport safe */ _azure_embeddings_js__WEBPACK_IMPORTED_MODULE_6__.AzureOpenAIEmbeddings),\n/* harmony export */   ChatOpenAI: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_2__.ChatOpenAI),\n/* harmony export */   DallEAPIWrapper: () => (/* reexport safe */ _tools_index_js__WEBPACK_IMPORTED_MODULE_11__.DallEAPIWrapper),\n/* harmony export */   OpenAI: () => (/* reexport safe */ _llms_js__WEBPACK_IMPORTED_MODULE_4__.OpenAI),\n/* harmony export */   OpenAIClient: () => (/* reexport safe */ openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI),\n/* harmony export */   OpenAIEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_7__.OpenAIEmbeddings),\n/* harmony export */   _convertMessagesToOpenAIParams: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_2__._convertMessagesToOpenAIParams),\n/* harmony export */   convertPromptToOpenAI: () => (/* reexport safe */ _utils_prompts_js__WEBPACK_IMPORTED_MODULE_12__.convertPromptToOpenAI),\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__.formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__.formatToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__.formatToOpenAITool),\n/* harmony export */   formatToOpenAIToolChoice: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__.formatToOpenAIToolChoice),\n/* harmony export */   getEndpoint: () => (/* reexport safe */ _utils_azure_js__WEBPACK_IMPORTED_MODULE_10__.getEndpoint),\n/* harmony export */   messageToOpenAIRole: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_2__.messageToOpenAIRole),\n/* harmony export */   toFile: () => (/* reexport safe */ openai__WEBPACK_IMPORTED_MODULE_1__.toFile),\n/* harmony export */   wrapOpenAIClientError: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__.wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/uploads.mjs\");\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\");\n/* harmony import */ var _azure_chat_models_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./azure/chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js\");\n/* harmony import */ var _llms_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/llms.js\");\n/* harmony import */ var _azure_llms_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./azure/llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js\");\n/* harmony import */ var _azure_embeddings_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./azure/embeddings.js */ \"(rsc)/./node_modules/@langchain/openai/dist/azure/embeddings.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/@langchain/openai/dist/embeddings.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/@langchain/openai/dist/types.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _tools_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./tools/index.js */ \"(rsc)/./node_modules/@langchain/openai/dist/tools/index.js\");\n/* harmony import */ var _utils_prompts_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/prompts.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/prompts.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ3ZCO0FBQ007QUFDYjtBQUNNO0FBQ007QUFDTjtBQUNMO0FBQ087QUFDRDtBQUNBO0FBQzBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvaW5kZXguanM/ZmM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50LCB0b0ZpbGUgfSBmcm9tIFwib3BlbmFpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jaGF0X21vZGVscy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYXp1cmUvY2hhdF9tb2RlbHMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xsbXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F6dXJlL2xsbXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F6dXJlL2VtYmVkZGluZ3MuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VtYmVkZGluZ3MuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3R5cGVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlscy9vcGVuYWkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3V0aWxzL2F6dXJlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90b29scy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgY29udmVydFByb21wdFRvT3BlbkFJIH0gZnJvbSBcIi4vdXRpbHMvcHJvbXB0cy5qc1wiO1xuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIk9wZW5BSUNsaWVudCIsInRvRmlsZSIsImNvbnZlcnRQcm9tcHRUb09wZW5BSSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/llms.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/llms.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAI: () => (/* binding */ OpenAI)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/@langchain/core/language_models/base.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/language_models/llms */ \"(rsc)/./node_modules/@langchain/core/language_models/llms.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\n\n\n\n/**\n * Wrapper around OpenAI large language models.\n *\n * To use you should have the `openai` package installed, with the\n * `OPENAI_API_KEY` environment variable set.\n *\n * To use with Azure, import the `AzureOpenAI` class.\n *\n * @remarks\n * Any parameters that are valid to be passed to {@link\n * https://platform.openai.com/docs/api-reference/completions/create |\n * `openai.createCompletion`} can be passed through {@link modelKwargs}, even\n * if not explicitly available on this class.\n * @example\n * ```typescript\n * const model = new OpenAI({\n *   modelName: \"gpt-4\",\n *   temperature: 0.7,\n *   maxTokens: 1000,\n *   maxRetries: 5,\n * });\n *\n * const res = await model.invoke(\n *   \"Question: What would be a good company name for a company that makes colorful socks?\\nAnswer:\"\n * );\n * console.log({ res });\n * ```\n */ class OpenAI extends _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_3__.BaseLLM {\n    static lc_name() {\n        return \"OpenAI\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\"\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            apiKey: \"OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            apiKey: \"openai_api_key\"\n        };\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"bestOf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo-instruct\"\n        });\n        /** @deprecated Use \"model\" instead */ Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 20\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey = fields?.apiKey ?? fields?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.apiKey = this.openAIApiKey;\n        this.organization = fields?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        if ((this.model?.startsWith(\"gpt-3.5-turbo\") || this.model?.startsWith(\"gpt-4\") || this.model?.startsWith(\"o1\")) && !this.model?.includes(\"-instruct\")) {\n            throw new Error([\n                `Your chosen OpenAI model, \"${this.model}\", is a chat model and not a text-in/text-out LLM.`,\n                `Passing it into the \"OpenAI\" class is no longer supported.`,\n                `Please use the \"ChatOpenAI\" class instead.`,\n                \"\",\n                `See this page for more information:`,\n                \"|\",\n                `└> https://js.langchain.com/docs/integrations/chat/openai`\n            ].join(\"\\n\"));\n        }\n        this.modelName = this.model;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.batchSize = fields?.batchSize ?? this.batchSize;\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.maxTokens = fields?.maxTokens ?? this.maxTokens;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.n = fields?.n ?? this.n;\n        this.bestOf = fields?.bestOf ?? this.bestOf;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stopSequences ?? fields?.stop;\n        this.stopSequences = this.stop;\n        this.user = fields?.user;\n        this.streaming = fields?.streaming ?? false;\n        if (this.streaming && this.bestOf && this.bestOf > 1) {\n            throw new Error(\"Cannot stream results when bestOf > 1\");\n        }\n        this.clientConfig = {\n            apiKey: this.apiKey,\n            organization: this.organization,\n            dangerouslyAllowBrowser: true,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ invocationParams(options) {\n        return {\n            model: this.model,\n            temperature: this.temperature,\n            max_tokens: this.maxTokens,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            n: this.n,\n            best_of: this.bestOf,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stopSequences,\n            user: this.user,\n            stream: this.streaming,\n            ...this.modelKwargs\n        };\n    }\n    /** @ignore */ _identifyingParams() {\n        return {\n            model_name: this.model,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    /**\n     * Get the identifying parameters for the model\n     */ identifyingParams() {\n        return this._identifyingParams();\n    }\n    /**\n     * Call out to OpenAI's endpoint with k unique prompts\n     *\n     * @param [prompts] - The prompts to pass into the model.\n     * @param [options] - Optional list of stop words to use when generating.\n     * @param [runManager] - Optional callback manager to use when generating.\n     *\n     * @returns The full LLM output.\n     *\n     * @example\n     * ```ts\n     * import { OpenAI } from \"langchain/llms/openai\";\n     * const openai = new OpenAI();\n     * const response = await openai.generate([\"Tell me a joke.\"]);\n     * ```\n     */ async _generate(prompts, options, runManager) {\n        const subPrompts = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__.chunkArray)(prompts, this.batchSize);\n        const choices = [];\n        const tokenUsage = {};\n        const params = this.invocationParams(options);\n        if (params.max_tokens === -1) {\n            if (prompts.length !== 1) {\n                throw new Error(\"max_tokens set to -1 not supported for multiple inputs\");\n            }\n            params.max_tokens = await (0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_0__.calculateMaxTokens)({\n                prompt: prompts[0],\n                // Cast here to allow for other models that may not fit the union\n                modelName: this.model\n            });\n        }\n        for(let i = 0; i < subPrompts.length; i += 1){\n            const data = params.stream ? await (async ()=>{\n                const choices = [];\n                let response;\n                const stream = await this.completionWithRetry({\n                    ...params,\n                    stream: true,\n                    prompt: subPrompts[i]\n                }, options);\n                for await (const message of stream){\n                    // on the first message set the response properties\n                    if (!response) {\n                        response = {\n                            id: message.id,\n                            object: message.object,\n                            created: message.created,\n                            model: message.model\n                        };\n                    }\n                    // on all messages, update choice\n                    for (const part of message.choices){\n                        if (!choices[part.index]) {\n                            choices[part.index] = part;\n                        } else {\n                            const choice = choices[part.index];\n                            choice.text += part.text;\n                            choice.finish_reason = part.finish_reason;\n                            choice.logprobs = part.logprobs;\n                        }\n                        void runManager?.handleLLMNewToken(part.text, {\n                            prompt: Math.floor(part.index / this.n),\n                            completion: part.index % this.n\n                        });\n                    }\n                }\n                if (options.signal?.aborted) {\n                    throw new Error(\"AbortError\");\n                }\n                return {\n                    ...response,\n                    choices\n                };\n            })() : await this.completionWithRetry({\n                ...params,\n                stream: false,\n                prompt: subPrompts[i]\n            }, {\n                signal: options.signal,\n                ...options.options\n            });\n            choices.push(...data.choices);\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = data.usage ? data.usage : {\n                completion_tokens: undefined,\n                prompt_tokens: undefined,\n                total_tokens: undefined\n            };\n            if (completionTokens) {\n                tokenUsage.completionTokens = (tokenUsage.completionTokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                tokenUsage.promptTokens = (tokenUsage.promptTokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                tokenUsage.totalTokens = (tokenUsage.totalTokens ?? 0) + totalTokens;\n            }\n        }\n        const generations = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__.chunkArray)(choices, this.n).map((promptChoices)=>promptChoices.map((choice)=>({\n                    text: choice.text ?? \"\",\n                    generationInfo: {\n                        finishReason: choice.finish_reason,\n                        logprobs: choice.logprobs\n                    }\n                })));\n        return {\n            generations,\n            llmOutput: {\n                tokenUsage\n            }\n        };\n    }\n    // TODO(jacoblee): Refactor with _generate(..., {stream: true}) implementation?\n    async *_streamResponseChunks(input, options, runManager) {\n        const params = {\n            ...this.invocationParams(options),\n            prompt: input,\n            stream: true\n        };\n        const stream = await this.completionWithRetry(params, options);\n        for await (const data of stream){\n            const choice = data?.choices[0];\n            if (!choice) {\n                continue;\n            }\n            const chunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.GenerationChunk({\n                text: choice.text,\n                generationInfo: {\n                    finishReason: choice.finish_reason\n                }\n            });\n            yield chunk;\n            // eslint-disable-next-line no-void\n            void runManager?.handleLLMNewToken(chunk.text ?? \"\");\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.completions.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_6__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    /**\n     * Calls the OpenAI API with retry logic in case of failures.\n     * @param request The request to send to the OpenAI API.\n     * @param options Optional configuration for the API call.\n     * @returns The response from the OpenAI API.\n     */ _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_5__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_7__.OpenAI(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFnRDtBQUMwQjtBQUNoQjtBQUNTO0FBQ0g7QUFDRDtBQUNoQjtBQUNXO0FBQzFEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EyQkMsR0FDTSxNQUFNQSxlQUFlSyx5RUFBT0E7SUFDL0IsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLElBQUlDLFdBQVc7UUFDWCxPQUFPO2VBQUksS0FBSyxDQUFDQTtZQUFVO1NBQVU7SUFDekM7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTztZQUNIQyxjQUFjO1lBQ2RDLFFBQVE7WUFDUkMsY0FBYztRQUNsQjtJQUNKO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsV0FBVztZQUNYSixjQUFjO1lBQ2RDLFFBQVE7UUFDWjtJQUNKO0lBQ0FJLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBLFVBQVUsQ0FBQztRQUNqQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFB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QkFDTixNQUFNQyxRQUFRN0csdUVBQXFCQSxDQUFDNEc7Z0JBQ3BDLE1BQU1DO1lBQ1Y7UUFDSjtJQUNKO0lBQ0E7Ozs7O0tBS0MsR0FDRFIsa0JBQWtCNUQsT0FBTyxFQUFFO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUNnRSxNQUFNLEVBQUU7WUFDZCxNQUFNSyx1QkFBdUI7Z0JBQ3pCQyxTQUFTLElBQUksQ0FBQ3pFLFlBQVksQ0FBQ3lFLE9BQU87WUFDdEM7WUFDQSxNQUFNQyxXQUFXakgsNERBQVdBLENBQUMrRztZQUM3QixNQUFNcEQsU0FBUztnQkFDWCxHQUFHLElBQUksQ0FBQ3BCLFlBQVk7Z0JBQ3BCeUUsU0FBU0M7Z0JBQ1R2RixTQUFTLElBQUksQ0FBQ0EsT0FBTztnQkFDckJ3RixZQUFZO1lBQ2hCO1lBQ0EsSUFBSSxDQUFDdkQsT0FBT3FELE9BQU8sRUFBRTtnQkFDakIsT0FBT3JELE9BQU9xRCxPQUFPO1lBQ3pCO1lBQ0EsSUFBSSxDQUFDTixNQUFNLEdBQUcsSUFBSWhILDBDQUFZQSxDQUFDaUU7UUFDbkM7UUFDQSxNQUFNMEMsaUJBQWlCO1lBQ25CLEdBQUcsSUFBSSxDQUFDOUQsWUFBWTtZQUNwQixHQUFHRyxPQUFPO1FBQ2Q7UUFDQSxPQUFPMkQ7SUFDWDtJQUNBYyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9sbG1zLmpzP2Y2YTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJIGFzIE9wZW5BSUNsaWVudCB9IGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IGNhbGN1bGF0ZU1heFRva2VucyB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2VcIjtcbmltcG9ydCB7IEdlbmVyYXRpb25DaHVuayB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvb3V0cHV0c1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBCYXNlTExNLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2xsbXNcIjtcbmltcG9ydCB7IGNodW5rQXJyYXkgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5XCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludCB9IGZyb20gXCIuL3V0aWxzL2F6dXJlLmpzXCI7XG5pbXBvcnQgeyB3cmFwT3BlbkFJQ2xpZW50RXJyb3IgfSBmcm9tIFwiLi91dGlscy9vcGVuYWkuanNcIjtcbi8qKlxuICogV3JhcHBlciBhcm91bmQgT3BlbkFJIGxhcmdlIGxhbmd1YWdlIG1vZGVscy5cbiAqXG4gKiBUbyB1c2UgeW91IHNob3VsZCBoYXZlIHRoZSBgb3BlbmFpYCBwYWNrYWdlIGluc3RhbGxlZCwgd2l0aCB0aGVcbiAqIGBPUEVOQUlfQVBJX0tFWWAgZW52aXJvbm1lbnQgdmFyaWFibGUgc2V0LlxuICpcbiAqIFRvIHVzZSB3aXRoIEF6dXJlLCBpbXBvcnQgdGhlIGBBenVyZU9wZW5BSWAgY2xhc3MuXG4gKlxuICogQHJlbWFya3NcbiAqIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIHZhbGlkIHRvIGJlIHBhc3NlZCB0byB7QGxpbmtcbiAqIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMvY3JlYXRlIHxcbiAqIGBvcGVuYWkuY3JlYXRlQ29tcGxldGlvbmB9IGNhbiBiZSBwYXNzZWQgdGhyb3VnaCB7QGxpbmsgbW9kZWxLd2FyZ3N9LCBldmVuXG4gKiBpZiBub3QgZXhwbGljaXRseSBhdmFpbGFibGUgb24gdGhpcyBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtb2RlbCA9IG5ldyBPcGVuQUkoe1xuICogICBtb2RlbE5hbWU6IFwiZ3B0LTRcIixcbiAqICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAqICAgbWF4VG9rZW5zOiAxMDAwLFxuICogICBtYXhSZXRyaWVzOiA1LFxuICogfSk7XG4gKlxuICogY29uc3QgcmVzID0gYXdhaXQgbW9kZWwuaW52b2tlKFxuICogICBcIlF1ZXN0aW9uOiBXaGF0IHdvdWxkIGJlIGEgZ29vZCBjb21wYW55IG5hbWUgZm9yIGEgY29tcGFueSB0aGF0IG1ha2VzIGNvbG9yZnVsIHNvY2tzP1xcbkFuc3dlcjpcIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUkgZXh0ZW5kcyBCYXNlTExNIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiT3BlbkFJXCI7XG4gICAgfVxuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5zdXBlci5jYWxsS2V5cywgXCJvcHRpb25zXCJdO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wZW5BSUFwaUtleTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICAgICAgYXBpS2V5OiBcIk9QRU5BSV9BUElfS0VZXCIsXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IFwiT1BFTkFJX09SR0FOSVpBVElPTlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsTmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgICAgb3BlbkFJQXBpS2V5OiBcIm9wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBhcGlLZXk6IFwib3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VG9rZW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcFBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVzZW5jZVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmVzdE9mXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxvZ2l0Qmlhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJncHQtMy41LXR1cmJvLWluc3RydWN0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgXCJtb2RlbFwiIGluc3RlYWQgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMjBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9wU2VxdWVuY2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcmdhbml6YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wZW5BSUFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/LmFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICB0aGlzLmFwaUtleSA9IHRoaXMub3BlbkFJQXBpS2V5O1xuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvbiA9XG4gICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/Lm9yZ2FuaXphdGlvbiA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfT1JHQU5JWkFUSU9OXCIpO1xuICAgICAgICB0aGlzLm1vZGVsID0gZmllbGRzPy5tb2RlbCA/PyBmaWVsZHM/Lm1vZGVsTmFtZSA/PyB0aGlzLm1vZGVsO1xuICAgICAgICBpZiAoKHRoaXMubW9kZWw/LnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvXCIpIHx8XG4gICAgICAgICAgICB0aGlzLm1vZGVsPy5zdGFydHNXaXRoKFwiZ3B0LTRcIikgfHxcbiAgICAgICAgICAgIHRoaXMubW9kZWw/LnN0YXJ0c1dpdGgoXCJvMVwiKSkgJiZcbiAgICAgICAgICAgICF0aGlzLm1vZGVsPy5pbmNsdWRlcyhcIi1pbnN0cnVjdFwiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFtcbiAgICAgICAgICAgICAgICBgWW91ciBjaG9zZW4gT3BlbkFJIG1vZGVsLCBcIiR7dGhpcy5tb2RlbH1cIiwgaXMgYSBjaGF0IG1vZGVsIGFuZCBub3QgYSB0ZXh0LWluL3RleHQtb3V0IExMTS5gLFxuICAgICAgICAgICAgICAgIGBQYXNzaW5nIGl0IGludG8gdGhlIFwiT3BlbkFJXCIgY2xhc3MgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gLFxuICAgICAgICAgICAgICAgIGBQbGVhc2UgdXNlIHRoZSBcIkNoYXRPcGVuQUlcIiBjbGFzcyBpbnN0ZWFkLmAsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICBgU2VlIHRoaXMgcGFnZSBmb3IgbW9yZSBpbmZvcm1hdGlvbjpgLFxuICAgICAgICAgICAgICAgIFwifFwiLFxuICAgICAgICAgICAgICAgIGDilJQ+IGh0dHBzOi8vanMubGFuZ2NoYWluLmNvbS9kb2NzL2ludGVncmF0aW9ucy9jaGF0L29wZW5haWAsXG4gICAgICAgICAgICBdLmpvaW4oXCJcXG5cIikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID0gdGhpcy5tb2RlbDtcbiAgICAgICAgdGhpcy5tb2RlbEt3YXJncyA9IGZpZWxkcz8ubW9kZWxLd2FyZ3MgPz8ge307XG4gICAgICAgIHRoaXMuYmF0Y2hTaXplID0gZmllbGRzPy5iYXRjaFNpemUgPz8gdGhpcy5iYXRjaFNpemU7XG4gICAgICAgIHRoaXMudGltZW91dCA9IGZpZWxkcz8udGltZW91dDtcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IGZpZWxkcz8udGVtcGVyYXR1cmUgPz8gdGhpcy50ZW1wZXJhdHVyZTtcbiAgICAgICAgdGhpcy5tYXhUb2tlbnMgPSBmaWVsZHM/Lm1heFRva2VucyA/PyB0aGlzLm1heFRva2VucztcbiAgICAgICAgdGhpcy50b3BQID0gZmllbGRzPy50b3BQID8/IHRoaXMudG9wUDtcbiAgICAgICAgdGhpcy5mcmVxdWVuY3lQZW5hbHR5ID0gZmllbGRzPy5mcmVxdWVuY3lQZW5hbHR5ID8/IHRoaXMuZnJlcXVlbmN5UGVuYWx0eTtcbiAgICAgICAgdGhpcy5wcmVzZW5jZVBlbmFsdHkgPSBmaWVsZHM/LnByZXNlbmNlUGVuYWx0eSA/PyB0aGlzLnByZXNlbmNlUGVuYWx0eTtcbiAgICAgICAgdGhpcy5uID0gZmllbGRzPy5uID8/IHRoaXMubjtcbiAgICAgICAgdGhpcy5iZXN0T2YgPSBmaWVsZHM/LmJlc3RPZiA/PyB0aGlzLmJlc3RPZjtcbiAgICAgICAgdGhpcy5sb2dpdEJpYXMgPSBmaWVsZHM/LmxvZ2l0QmlhcztcbiAgICAgICAgdGhpcy5zdG9wID0gZmllbGRzPy5zdG9wU2VxdWVuY2VzID8/IGZpZWxkcz8uc3RvcDtcbiAgICAgICAgdGhpcy5zdG9wU2VxdWVuY2VzID0gdGhpcy5zdG9wO1xuICAgICAgICB0aGlzLnVzZXIgPSBmaWVsZHM/LnVzZXI7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbWluZyAmJiB0aGlzLmJlc3RPZiAmJiB0aGlzLmJlc3RPZiA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzdHJlYW0gcmVzdWx0cyB3aGVuIGJlc3RPZiA+IDFcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuYXBpS2V5LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB0aGlzLm9yZ2FuaXphdGlvbixcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlLFxuICAgICAgICAgICAgLi4uZmllbGRzPy5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogdGhpcy5tYXhUb2tlbnMsXG4gICAgICAgICAgICB0b3BfcDogdGhpcy50b3BQLFxuICAgICAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IHRoaXMuZnJlcXVlbmN5UGVuYWx0eSxcbiAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHRoaXMucHJlc2VuY2VQZW5hbHR5LFxuICAgICAgICAgICAgbjogdGhpcy5uLFxuICAgICAgICAgICAgYmVzdF9vZjogdGhpcy5iZXN0T2YsXG4gICAgICAgICAgICBsb2dpdF9iaWFzOiB0aGlzLmxvZ2l0QmlhcyxcbiAgICAgICAgICAgIHN0b3A6IG9wdGlvbnM/LnN0b3AgPz8gdGhpcy5zdG9wU2VxdWVuY2VzLFxuICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbWluZyxcbiAgICAgICAgICAgIC4uLnRoaXMubW9kZWxLd2FyZ3MsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxfbmFtZTogdGhpcy5tb2RlbCxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIG91dCB0byBPcGVuQUkncyBlbmRwb2ludCB3aXRoIGsgdW5pcXVlIHByb21wdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBbcHJvbXB0c10gLSBUaGUgcHJvbXB0cyB0byBwYXNzIGludG8gdGhlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBbb3B0aW9uc10gLSBPcHRpb25hbCBsaXN0IG9mIHN0b3Agd29yZHMgdG8gdXNlIHdoZW4gZ2VuZXJhdGluZy5cbiAgICAgKiBAcGFyYW0gW3J1bk1hbmFnZXJdIC0gT3B0aW9uYWwgY2FsbGJhY2sgbWFuYWdlciB0byB1c2Ugd2hlbiBnZW5lcmF0aW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGZ1bGwgTExNIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBPcGVuQUkgfSBmcm9tIFwibGFuZ2NoYWluL2xsbXMvb3BlbmFpXCI7XG4gICAgICogY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSgpO1xuICAgICAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmdlbmVyYXRlKFtcIlRlbGwgbWUgYSBqb2tlLlwiXSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgX2dlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3Qgc3ViUHJvbXB0cyA9IGNodW5rQXJyYXkocHJvbXB0cywgdGhpcy5iYXRjaFNpemUpO1xuICAgICAgICBjb25zdCBjaG9pY2VzID0gW107XG4gICAgICAgIGNvbnN0IHRva2VuVXNhZ2UgPSB7fTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICBpZiAocGFyYW1zLm1heF90b2tlbnMgPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAocHJvbXB0cy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYXhfdG9rZW5zIHNldCB0byAtMSBub3Qgc3VwcG9ydGVkIGZvciBtdWx0aXBsZSBpbnB1dHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMubWF4X3Rva2VucyA9IGF3YWl0IGNhbGN1bGF0ZU1heFRva2Vucyh7XG4gICAgICAgICAgICAgICAgcHJvbXB0OiBwcm9tcHRzWzBdLFxuICAgICAgICAgICAgICAgIC8vIENhc3QgaGVyZSB0byBhbGxvdyBmb3Igb3RoZXIgbW9kZWxzIHRoYXQgbWF5IG5vdCBmaXQgdGhlIHVuaW9uXG4gICAgICAgICAgICAgICAgbW9kZWxOYW1lOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJQcm9tcHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gcGFyYW1zLnN0cmVhbVxuICAgICAgICAgICAgICAgID8gYXdhaXQgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hvaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHN1YlByb21wdHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IG1lc3NhZ2Ugb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgZmlyc3QgbWVzc2FnZSBzZXQgdGhlIHJlc3BvbnNlIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogbWVzc2FnZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IG1lc3NhZ2UuY3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG1lc3NhZ2UubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGFsbCBtZXNzYWdlcywgdXBkYXRlIGNob2ljZVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIG1lc3NhZ2UuY2hvaWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hvaWNlc1twYXJ0LmluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzW3BhcnQuaW5kZXhdID0gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGNob2ljZXNbcGFydC5pbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS50ZXh0ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLmZpbmlzaF9yZWFzb24gPSBwYXJ0LmZpbmlzaF9yZWFzb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5sb2dwcm9icyA9IHBhcnQubG9ncHJvYnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocGFydC50ZXh0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogTWF0aC5mbG9vcihwYXJ0LmluZGV4IC8gdGhpcy5uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbjogcGFydC5pbmRleCAlIHRoaXMubixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzcG9uc2UsIGNob2ljZXMgfTtcbiAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdDogc3ViUHJvbXB0c1tpXSxcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNob2ljZXMucHVzaCguLi5kYXRhLmNob2ljZXMpO1xuICAgICAgICAgICAgY29uc3QgeyBjb21wbGV0aW9uX3Rva2VuczogY29tcGxldGlvblRva2VucywgcHJvbXB0X3Rva2VuczogcHJvbXB0VG9rZW5zLCB0b3RhbF90b2tlbnM6IHRvdGFsVG9rZW5zLCB9ID0gZGF0YS51c2FnZVxuICAgICAgICAgICAgICAgID8gZGF0YS51c2FnZVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uX3Rva2VuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBwcm9tcHRfdG9rZW5zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY29tcGxldGlvblRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UuY29tcGxldGlvblRva2VucyA9XG4gICAgICAgICAgICAgICAgICAgICh0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPz8gMCkgKyBjb21wbGV0aW9uVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdFRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID0gKHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID8/IDApICsgcHJvbXB0VG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvdGFsVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZS50b3RhbFRva2VucyA9ICh0b2tlblVzYWdlLnRvdGFsVG9rZW5zID8/IDApICsgdG90YWxUb2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBjaHVua0FycmF5KGNob2ljZXMsIHRoaXMubikubWFwKChwcm9tcHRDaG9pY2VzKSA9PiBwcm9tcHRDaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiAoe1xuICAgICAgICAgICAgdGV4dDogY2hvaWNlLnRleHQgPz8gXCJcIixcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiBjaG9pY2UuZmluaXNoX3JlYXNvbixcbiAgICAgICAgICAgICAgICBsb2dwcm9iczogY2hvaWNlLmxvZ3Byb2JzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiB7IHRva2VuVXNhZ2UgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gVE9ETyhqYWNvYmxlZSk6IFJlZmFjdG9yIHdpdGggX2dlbmVyYXRlKC4uLiwge3N0cmVhbTogdHJ1ZX0pIGltcGxlbWVudGF0aW9uP1xuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoaW5wdXQsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpLFxuICAgICAgICAgICAgcHJvbXB0OiBpbnB1dCxcbiAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHBhcmFtcywgb3B0aW9ucyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZGF0YSBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGRhdGE/LmNob2ljZXNbMF07XG4gICAgICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBjaG9pY2UudGV4dCxcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb246IGNob2ljZS5maW5pc2hfcmVhc29uLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZvaWRcbiAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oY2h1bmsudGV4dCA/PyBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0gdGhpcy5fZ2V0Q2xpZW50T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5jb21wbGV0aW9ucy5jcmVhdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIE9wZW5BSSBBUEkgd2l0aCByZXRyeSBsb2dpYyBpbiBjYXNlIG9mIGZhaWx1cmVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSByZXF1ZXN0IHRvIHNlbmQgdG8gdGhlIE9wZW5BSSBBUEkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIEFQSSBjYWxsLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNwb25zZSBmcm9tIHRoZSBPcGVuQUkgQVBJLlxuICAgICAqL1xuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5jbGllbnRDb25maWcuYmFzZVVSTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQ2xpZW50KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXF1ZXN0T3B0aW9ucztcbiAgICB9XG4gICAgX2xsbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcIm9wZW5haVwiO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJPcGVuQUlDbGllbnQiLCJjYWxjdWxhdGVNYXhUb2tlbnMiLCJHZW5lcmF0aW9uQ2h1bmsiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUxMTSIsImNodW5rQXJyYXkiLCJnZXRFbmRwb2ludCIsIndyYXBPcGVuQUlDbGllbnRFcnJvciIsImxjX25hbWUiLCJjYWxsS2V5cyIsImxjX3NlY3JldHMiLCJvcGVuQUlBcGlLZXkiLCJhcGlLZXkiLCJvcmdhbml6YXRpb24iLCJsY19hbGlhc2VzIiwibW9kZWxOYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiY29uZmlndXJhdGlvbiIsIm1vZGVsIiwic3RhcnRzV2l0aCIsImluY2x1ZGVzIiwiRXJyb3IiLCJqb2luIiwibW9kZWxLd2FyZ3MiLCJiYXRjaFNpemUiLCJ0aW1lb3V0IiwidGVtcGVyYXR1cmUiLCJtYXhUb2tlbnMiLCJ0b3BQIiwiZnJlcXVlbmN5UGVuYWx0eSIsInByZXNlbmNlUGVuYWx0eSIsIm4iLCJiZXN0T2YiLCJsb2dpdEJpYXMiLCJzdG9wIiwic3RvcFNlcXVlbmNlcyIsInVzZXIiLCJzdHJlYW1pbmciLCJjbGllbnRDb25maWciLCJkYW5nZXJvdXNseUFsbG93QnJvd3NlciIsImludm9jYXRpb25QYXJhbXMiLCJvcHRpb25zIiwibWF4X3Rva2VucyIsInRvcF9wIiwiZnJlcXVlbmN5X3BlbmFsdHkiLCJwcmVzZW5jZV9wZW5hbHR5IiwiYmVzdF9vZiIsImxvZ2l0X2JpYXMiLCJzdHJlYW0iLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJtb2RlbF9uYW1lIiwiaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2VuZXJhdGUiLCJwcm9tcHRzIiwicnVuTWFuYWdlciIsInN1YlByb21wdHMiLCJjaG9pY2VzIiwidG9rZW5Vc2FnZSIsInBhcmFtcyIsImxlbmd0aCIsInByb21wdCIsImkiLCJkYXRhIiwicmVzcG9uc2UiLCJjb21wbGV0aW9uV2l0aFJldHJ5IiwibWVzc2FnZSIsImlkIiwib2JqZWN0IiwiY3JlYXRlZCIsInBhcnQiLCJpbmRleCIsImNob2ljZSIsInRleHQiLCJmaW5pc2hfcmVhc29uIiwibG9ncHJvYnMiLCJoYW5kbGVMTE1OZXdUb2tlbiIsIk1hdGgiLCJmbG9vciIsImNvbXBsZXRpb24iLCJzaWduYWwiLCJhYm9ydGVkIiwicHVzaCIsImNvbXBsZXRpb25fdG9rZW5zIiwiY29tcGxldGlvblRva2VucyIsInByb21wdF90b2tlbnMiLCJwcm9tcHRUb2tlbnMiLCJ0b3RhbF90b2tlbnMiLCJ0b3RhbFRva2VucyIsInVzYWdlIiwidW5kZWZpbmVkIiwiZ2VuZXJhdGlvbnMiLCJtYXAiLCJwcm9tcHRDaG9pY2VzIiwiZ2VuZXJhdGlvbkluZm8iLCJmaW5pc2hSZWFzb24iLCJsbG1PdXRwdXQiLCJfc3RyZWFtUmVzcG9uc2VDaHVua3MiLCJpbnB1dCIsImNodW5rIiwicmVxdWVzdCIsInJlcXVlc3RPcHRpb25zIiwiX2dldENsaWVudE9wdGlvbnMiLCJjYWxsZXIiLCJjYWxsIiwicmVzIiwiY2xpZW50IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJlIiwiZXJyb3IiLCJvcGVuQUlFbmRwb2ludENvbmZpZyIsImJhc2VVUkwiLCJlbmRwb2ludCIsIm1heFJldHJpZXMiLCJfbGxtVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/tools/dalle.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/tools/dalle.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DallEAPIWrapper: () => (/* binding */ DallEAPIWrapper)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/tools */ \"(rsc)/./node_modules/@langchain/core/tools.js\");\n/* eslint-disable no-param-reassign */ \n\n\n/**\n * A tool for generating images with Open AIs Dall-E 2 or 3 API.\n */ class DallEAPIWrapper extends _langchain_core_tools__WEBPACK_IMPORTED_MODULE_1__.Tool {\n    static lc_name() {\n        return \"DallEAPIWrapper\";\n    }\n    constructor(fields){\n        // Shim for new base tool param name\n        if (fields?.responseFormat !== undefined && [\n            \"url\",\n            \"b64_json\"\n        ].includes(fields.responseFormat)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            fields.dallEResponseFormat = fields.responseFormat;\n            fields.responseFormat = \"content\";\n        }\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"dalle_api_wrapper\"\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description.\"\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"dall-e-3\"\n        });\n        Object.defineProperty(this, \"style\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"vivid\"\n        });\n        Object.defineProperty(this, \"quality\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"standard\"\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"size\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"1024x1024\"\n        });\n        Object.defineProperty(this, \"dallEResponseFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"url\"\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const openAIApiKey = fields?.apiKey ?? fields?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        const organization = fields?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        const clientConfig = {\n            apiKey: openAIApiKey,\n            organization,\n            dangerouslyAllowBrowser: true,\n            baseURL: fields?.baseUrl\n        };\n        this.client = new openai__WEBPACK_IMPORTED_MODULE_2__.OpenAI(clientConfig);\n        this.model = fields?.model ?? fields?.modelName ?? this.model;\n        this.style = fields?.style ?? this.style;\n        this.quality = fields?.quality ?? this.quality;\n        this.n = fields?.n ?? this.n;\n        this.size = fields?.size ?? this.size;\n        this.dallEResponseFormat = fields?.dallEResponseFormat ?? this.dallEResponseFormat;\n        this.user = fields?.user;\n    }\n    /**\n     * Processes the API response if multiple images are generated.\n     * Returns a list of MessageContentImageUrl objects. If the response\n     * format is `url`, then the `image_url` field will contain the URL.\n     * If it is `b64_json`, then the `image_url` field will contain an object\n     * with a `url` field with the base64 encoded image.\n     *\n     * @param {OpenAIClient.Images.ImagesResponse[]} response The API response\n     * @returns {MessageContentImageUrl[]}\n     */ processMultipleGeneratedUrls(response) {\n        if (this.dallEResponseFormat === \"url\") {\n            return response.flatMap((res)=>{\n                const imageUrlContent = res.data.flatMap((item)=>{\n                    if (!item.url) return [];\n                    return {\n                        type: \"image_url\",\n                        image_url: item.url\n                    };\n                }).filter((item)=>item !== undefined && item.type === \"image_url\" && typeof item.image_url === \"string\" && item.image_url !== undefined);\n                return imageUrlContent;\n            });\n        } else {\n            return response.flatMap((res)=>{\n                const b64Content = res.data.flatMap((item)=>{\n                    if (!item.b64_json) return [];\n                    return {\n                        type: \"image_url\",\n                        image_url: {\n                            url: item.b64_json\n                        }\n                    };\n                }).filter((item)=>item !== undefined && item.type === \"image_url\" && typeof item.image_url === \"object\" && \"url\" in item.image_url && typeof item.image_url.url === \"string\" && item.image_url.url !== undefined);\n                return b64Content;\n            });\n        }\n    }\n    /** @ignore */ async _call(input) {\n        const generateImageFields = {\n            model: this.model,\n            prompt: input,\n            n: 1,\n            size: this.size,\n            response_format: this.dallEResponseFormat,\n            style: this.style,\n            quality: this.quality,\n            user: this.user\n        };\n        if (this.n > 1) {\n            const results = await Promise.all(Array.from({\n                length: this.n\n            }).map(()=>this.client.images.generate(generateImageFields)));\n            return this.processMultipleGeneratedUrls(results);\n        }\n        const response = await this.client.images.generate(generateImageFields);\n        let data = \"\";\n        if (this.dallEResponseFormat === \"url\") {\n            [data] = response.data.map((item)=>item.url).filter((url)=>url !== \"undefined\");\n        } else {\n            [data] = response.data.map((item)=>item.b64_json).filter((b64_json)=>b64_json !== \"undefined\");\n        }\n        return data;\n    }\n}\nObject.defineProperty(DallEAPIWrapper, \"toolName\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"dalle_api_wrapper\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90b29scy9kYWxsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsb0NBQW9DLEdBQytCO0FBQ25CO0FBQ0g7QUFDN0M7O0NBRUMsR0FDTSxNQUFNSSx3QkFBd0JELHVEQUFJQTtJQUNyQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixvQ0FBb0M7UUFDcEMsSUFBSUEsUUFBUUMsbUJBQW1CQyxhQUMzQjtZQUFDO1lBQU87U0FBVyxDQUFDQyxRQUFRLENBQUNILE9BQU9DLGNBQWMsR0FBRztZQUNyRCw4REFBOEQ7WUFDOURELE9BQU9JLG1CQUFtQixHQUFHSixPQUFPQyxjQUFjO1lBQ2xERCxPQUFPQyxjQUFjLEdBQUc7UUFDNUI7UUFDQSxLQUFLLENBQUNEO1FBQ05LLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZ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LFdBQWFBLGFBQWE7UUFDM0M7UUFDQSxPQUFPUDtJQUNYO0FBQ0o7QUFDQTFCLE9BQU9DLGNBQWMsQ0FBQ1QsaUJBQWlCLFlBQVk7SUFDL0NVLFlBQVk7SUFDWkMsY0FBYztJQUNkQyxVQUFVO0lBQ1ZDLE9BQU87QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3Rvb2xzL2RhbGxlLmpzPzVmYTQiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgT3BlbkFJIGFzIE9wZW5BSUNsaWVudCB9IGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IFRvb2wgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3Rvb2xzXCI7XG4vKipcbiAqIEEgdG9vbCBmb3IgZ2VuZXJhdGluZyBpbWFnZXMgd2l0aCBPcGVuIEFJcyBEYWxsLUUgMiBvciAzIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIERhbGxFQVBJV3JhcHBlciBleHRlbmRzIFRvb2wge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJEYWxsRUFQSVdyYXBwZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIC8vIFNoaW0gZm9yIG5ldyBiYXNlIHRvb2wgcGFyYW0gbmFtZVxuICAgICAgICBpZiAoZmllbGRzPy5yZXNwb25zZUZvcm1hdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBbXCJ1cmxcIiwgXCJiNjRfanNvblwiXS5pbmNsdWRlcyhmaWVsZHMucmVzcG9uc2VGb3JtYXQpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgZmllbGRzLmRhbGxFUmVzcG9uc2VGb3JtYXQgPSBmaWVsZHMucmVzcG9uc2VGb3JtYXQ7XG4gICAgICAgICAgICBmaWVsZHMucmVzcG9uc2VGb3JtYXQgPSBcImNvbnRlbnRcIjtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImRhbGxlX2FwaV93cmFwcGVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlc2NyaXB0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIkEgd3JhcHBlciBhcm91bmQgT3BlbkFJIERBTEwtRSBBUEkuIFVzZWZ1bCBmb3Igd2hlbiB5b3UgbmVlZCB0byBnZW5lcmF0ZSBpbWFnZXMgZnJvbSBhIHRleHQgZGVzY3JpcHRpb24uIElucHV0IHNob3VsZCBiZSBhbiBpbWFnZSBkZXNjcmlwdGlvbi5cIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImRhbGwtZS0zXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0eWxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcInZpdmlkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1YWxpdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwic3RhbmRhcmRcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCIxMDI0eDEwMjRcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGFsbEVSZXNwb25zZUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJ1cmxcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvcGVuQUlBcGlLZXkgPSBmaWVsZHM/LmFwaUtleSA/P1xuICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gZmllbGRzPy5vcmdhbml6YXRpb24gPz8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9QRU5BSV9PUkdBTklaQVRJT05cIik7XG4gICAgICAgIGNvbnN0IGNsaWVudENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaUtleTogb3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uLFxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsXG4gICAgICAgICAgICBiYXNlVVJMOiBmaWVsZHM/LmJhc2VVcmwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IE9wZW5BSUNsaWVudChjbGllbnRDb25maWcpO1xuICAgICAgICB0aGlzLm1vZGVsID0gZmllbGRzPy5tb2RlbCA/PyBmaWVsZHM/Lm1vZGVsTmFtZSA/PyB0aGlzLm1vZGVsO1xuICAgICAgICB0aGlzLnN0eWxlID0gZmllbGRzPy5zdHlsZSA/PyB0aGlzLnN0eWxlO1xuICAgICAgICB0aGlzLnF1YWxpdHkgPSBmaWVsZHM/LnF1YWxpdHkgPz8gdGhpcy5xdWFsaXR5O1xuICAgICAgICB0aGlzLm4gPSBmaWVsZHM/Lm4gPz8gdGhpcy5uO1xuICAgICAgICB0aGlzLnNpemUgPSBmaWVsZHM/LnNpemUgPz8gdGhpcy5zaXplO1xuICAgICAgICB0aGlzLmRhbGxFUmVzcG9uc2VGb3JtYXQgPVxuICAgICAgICAgICAgZmllbGRzPy5kYWxsRVJlc3BvbnNlRm9ybWF0ID8/IHRoaXMuZGFsbEVSZXNwb25zZUZvcm1hdDtcbiAgICAgICAgdGhpcy51c2VyID0gZmllbGRzPy51c2VyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdGhlIEFQSSByZXNwb25zZSBpZiBtdWx0aXBsZSBpbWFnZXMgYXJlIGdlbmVyYXRlZC5cbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBNZXNzYWdlQ29udGVudEltYWdlVXJsIG9iamVjdHMuIElmIHRoZSByZXNwb25zZVxuICAgICAqIGZvcm1hdCBpcyBgdXJsYCwgdGhlbiB0aGUgYGltYWdlX3VybGAgZmllbGQgd2lsbCBjb250YWluIHRoZSBVUkwuXG4gICAgICogSWYgaXQgaXMgYGI2NF9qc29uYCwgdGhlbiB0aGUgYGltYWdlX3VybGAgZmllbGQgd2lsbCBjb250YWluIGFuIG9iamVjdFxuICAgICAqIHdpdGggYSBgdXJsYCBmaWVsZCB3aXRoIHRoZSBiYXNlNjQgZW5jb2RlZCBpbWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T3BlbkFJQ2xpZW50LkltYWdlcy5JbWFnZXNSZXNwb25zZVtdfSByZXNwb25zZSBUaGUgQVBJIHJlc3BvbnNlXG4gICAgICogQHJldHVybnMge01lc3NhZ2VDb250ZW50SW1hZ2VVcmxbXX1cbiAgICAgKi9cbiAgICBwcm9jZXNzTXVsdGlwbGVHZW5lcmF0ZWRVcmxzKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0aGlzLmRhbGxFUmVzcG9uc2VGb3JtYXQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5mbGF0TWFwKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybENvbnRlbnQgPSByZXMuZGF0YVxuICAgICAgICAgICAgICAgICAgICAuZmxhdE1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0udXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogaXRlbS51cmwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gXCJpbWFnZV91cmxcIiAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbS5pbWFnZV91cmwgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pbWFnZV91cmwgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlVXJsQ29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmZsYXRNYXAoKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGI2NENvbnRlbnQgPSByZXMuZGF0YVxuICAgICAgICAgICAgICAgICAgICAuZmxhdE1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uYjY0X2pzb24pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLmI2NF9qc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSBcImltYWdlX3VybFwiICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBpdGVtLmltYWdlX3VybCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgICBcInVybFwiIGluIGl0ZW0uaW1hZ2VfdXJsICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBpdGVtLmltYWdlX3VybC51cmwgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pbWFnZV91cmwudXJsICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBiNjRDb250ZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfY2FsbChpbnB1dCkge1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUltYWdlRmllbGRzID0ge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICBwcm9tcHQ6IGlucHV0LFxuICAgICAgICAgICAgbjogMSxcbiAgICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIHJlc3BvbnNlX2Zvcm1hdDogdGhpcy5kYWxsRVJlc3BvbnNlRm9ybWF0LFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuc3R5bGUsXG4gICAgICAgICAgICBxdWFsaXR5OiB0aGlzLnF1YWxpdHksXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm4gPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoQXJyYXkuZnJvbSh7IGxlbmd0aDogdGhpcy5uIH0pLm1hcCgoKSA9PiB0aGlzLmNsaWVudC5pbWFnZXMuZ2VuZXJhdGUoZ2VuZXJhdGVJbWFnZUZpZWxkcykpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NNdWx0aXBsZUdlbmVyYXRlZFVybHMocmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5pbWFnZXMuZ2VuZXJhdGUoZ2VuZXJhdGVJbWFnZUZpZWxkcyk7XG4gICAgICAgIGxldCBkYXRhID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMuZGFsbEVSZXNwb25zZUZvcm1hdCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgW2RhdGFdID0gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0udXJsKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHVybCkgPT4gdXJsICE9PSBcInVuZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFtkYXRhXSA9IHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmI2NF9qc29uKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGI2NF9qc29uKSA9PiBiNjRfanNvbiAhPT0gXCJ1bmRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KERhbGxFQVBJV3JhcHBlciwgXCJ0b29sTmFtZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IFwiZGFsbGVfYXBpX3dyYXBwZXJcIlxufSk7XG4iXSwibmFtZXMiOlsiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIk9wZW5BSSIsIk9wZW5BSUNsaWVudCIsIlRvb2wiLCJEYWxsRUFQSVdyYXBwZXIiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJyZXNwb25zZUZvcm1hdCIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwiZGFsbEVSZXNwb25zZUZvcm1hdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJvcGVuQUlBcGlLZXkiLCJhcGlLZXkiLCJvcmdhbml6YXRpb24iLCJjbGllbnRDb25maWciLCJkYW5nZXJvdXNseUFsbG93QnJvd3NlciIsImJhc2VVUkwiLCJiYXNlVXJsIiwiY2xpZW50IiwibW9kZWwiLCJtb2RlbE5hbWUiLCJzdHlsZSIsInF1YWxpdHkiLCJuIiwic2l6ZSIsInVzZXIiLCJwcm9jZXNzTXVsdGlwbGVHZW5lcmF0ZWRVcmxzIiwicmVzcG9uc2UiLCJmbGF0TWFwIiwicmVzIiwiaW1hZ2VVcmxDb250ZW50IiwiZGF0YSIsIml0ZW0iLCJ1cmwiLCJ0eXBlIiwiaW1hZ2VfdXJsIiwiZmlsdGVyIiwiYjY0Q29udGVudCIsImI2NF9qc29uIiwiX2NhbGwiLCJpbnB1dCIsImdlbmVyYXRlSW1hZ2VGaWVsZHMiLCJwcm9tcHQiLCJyZXNwb25zZV9mb3JtYXQiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIm1hcCIsImltYWdlcyIsImdlbmVyYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/tools/dalle.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/tools/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/tools/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DallEAPIWrapper: () => (/* reexport safe */ _dalle_js__WEBPACK_IMPORTED_MODULE_0__.DallEAPIWrapper)\n/* harmony export */ });\n/* harmony import */ var _dalle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dalle.js */ \"(rsc)/./node_modules/@langchain/openai/dist/tools/dalle.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90b29scy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3Rvb2xzL2luZGV4LmpzPzdjN2IiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vZGFsbGUuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/tools/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/types.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/types.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90eXBlcy5qcz8yYTdhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/azure.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEndpoint: () => (/* binding */ getEndpoint)\n/* harmony export */ });\n/**\n * This function generates an endpoint URL for (Azure) OpenAI\n * based on the configuration parameters provided.\n *\n * @param {OpenAIEndpointConfig} config - The configuration object for the (Azure) endpoint.\n *\n * @property {string} config.azureOpenAIApiDeploymentName - The deployment name of Azure OpenAI.\n * @property {string} config.azureOpenAIApiInstanceName - The instance name of Azure OpenAI, e.g. `example-resource`.\n * @property {string} config.azureOpenAIApiKey - The API Key for Azure OpenAI.\n * @property {string} config.azureOpenAIBasePath - The base path for Azure OpenAI, e.g. `https://example-resource.azure.openai.com/openai/deployments/`.\n * @property {string} config.baseURL - Some other custom base path URL.\n * @property {string} config.azureOpenAIEndpoint - The endpoint for the Azure OpenAI instance, e.g. `https://example-resource.azure.openai.com/`.\n *\n * The function operates as follows:\n * - If both `azureOpenAIBasePath` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`).\n * - If both `azureOpenAIEndpoint` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIEndpoint}/openai/deployments/${azureOpenAIApiDeploymentName}`).\n * - If `azureOpenAIApiKey` is provided, it checks for `azureOpenAIApiInstanceName` and `azureOpenAIApiDeploymentName` and throws an error if any of these is missing. If both are provided, it generates an URL incorporating these parameters.\n * - If none of the above conditions are met, return any custom `baseURL`.\n * - The function returns the generated URL as a string, or undefined if no custom paths are specified.\n *\n * @throws Will throw an error if the necessary parameters for generating the URL are missing.\n *\n * @returns {string | undefined} The generated (Azure) OpenAI endpoint URL.\n */ function getEndpoint(config) {\n    const { azureOpenAIApiDeploymentName, azureOpenAIApiInstanceName, azureOpenAIApiKey, azureOpenAIBasePath, baseURL, azureADTokenProvider, azureOpenAIEndpoint } = config;\n    if ((azureOpenAIApiKey || azureADTokenProvider) && azureOpenAIBasePath && azureOpenAIApiDeploymentName) {\n        return `${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`;\n    }\n    if ((azureOpenAIApiKey || azureADTokenProvider) && azureOpenAIEndpoint && azureOpenAIApiDeploymentName) {\n        return `${azureOpenAIEndpoint}/openai/deployments/${azureOpenAIApiDeploymentName}`;\n    }\n    if (azureOpenAIApiKey || azureADTokenProvider) {\n        if (!azureOpenAIApiInstanceName) {\n            throw new Error(\"azureOpenAIApiInstanceName is required when using azureOpenAIApiKey\");\n        }\n        if (!azureOpenAIApiDeploymentName) {\n            throw new Error(\"azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey\");\n        }\n        return `https://${azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${azureOpenAIApiDeploymentName}`;\n    }\n    return baseURL;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9henVyZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBdUJDLEdBQ00sU0FBU0EsWUFBWUMsTUFBTTtJQUM5QixNQUFNLEVBQUVDLDRCQUE0QixFQUFFQywwQkFBMEIsRUFBRUMsaUJBQWlCLEVBQUVDLG1CQUFtQixFQUFFQyxPQUFPLEVBQUVDLG9CQUFvQixFQUFFQyxtQkFBbUIsRUFBRyxHQUFHUDtJQUNsSyxJQUFJLENBQUNHLHFCQUFxQkcsb0JBQW1CLEtBQ3pDRix1QkFDQUgsOEJBQThCO1FBQzlCLE9BQU8sQ0FBQyxFQUFFRyxvQkFBb0IsQ0FBQyxFQUFFSCw2QkFBNkIsQ0FBQztJQUNuRTtJQUNBLElBQUksQ0FBQ0UscUJBQXFCRyxvQkFBbUIsS0FDekNDLHVCQUNBTiw4QkFBOEI7UUFDOUIsT0FBTyxDQUFDLEVBQUVNLG9CQUFvQixvQkFBb0IsRUFBRU4sNkJBQTZCLENBQUM7SUFDdEY7SUFDQSxJQUFJRSxxQkFBcUJHLHNCQUFzQjtRQUMzQyxJQUFJLENBQUNKLDRCQUE0QjtZQUM3QixNQUFNLElBQUlNLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNQLDhCQUE4QjtZQUMvQixNQUFNLElBQUlPLE1BQU07UUFDcEI7UUFDQSxPQUFPLENBQUMsUUFBUSxFQUFFTiwyQkFBMkIscUNBQXFDLEVBQUVELDZCQUE2QixDQUFDO0lBQ3RIO0lBQ0EsT0FBT0k7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3V0aWxzL2F6dXJlLmpzP2Q4NzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyBhbiBlbmRwb2ludCBVUkwgZm9yIChBenVyZSkgT3BlbkFJXG4gKiBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSB7T3BlbkFJRW5kcG9pbnRDb25maWd9IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIChBenVyZSkgZW5kcG9pbnQuXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIC0gVGhlIGRlcGxveW1lbnQgbmFtZSBvZiBBenVyZSBPcGVuQUkuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIC0gVGhlIGluc3RhbmNlIG5hbWUgb2YgQXp1cmUgT3BlbkFJLCBlLmcuIGBleGFtcGxlLXJlc291cmNlYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb25maWcuYXp1cmVPcGVuQUlBcGlLZXkgLSBUaGUgQVBJIEtleSBmb3IgQXp1cmUgT3BlbkFJLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUJhc2VQYXRoIC0gVGhlIGJhc2UgcGF0aCBmb3IgQXp1cmUgT3BlbkFJLCBlLmcuIGBodHRwczovL2V4YW1wbGUtcmVzb3VyY2UuYXp1cmUub3BlbmFpLmNvbS9vcGVuYWkvZGVwbG95bWVudHMvYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb25maWcuYmFzZVVSTCAtIFNvbWUgb3RoZXIgY3VzdG9tIGJhc2UgcGF0aCBVUkwuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnLmF6dXJlT3BlbkFJRW5kcG9pbnQgLSBUaGUgZW5kcG9pbnQgZm9yIHRoZSBBenVyZSBPcGVuQUkgaW5zdGFuY2UsIGUuZy4gYGh0dHBzOi8vZXhhbXBsZS1yZXNvdXJjZS5henVyZS5vcGVuYWkuY29tL2AuXG4gKlxuICogVGhlIGZ1bmN0aW9uIG9wZXJhdGVzIGFzIGZvbGxvd3M6XG4gKiAtIElmIGJvdGggYGF6dXJlT3BlbkFJQmFzZVBhdGhgIGFuZCBgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZWAgKHBsdXMgYGF6dXJlT3BlbkFJQXBpS2V5YCkgYXJlIHByb3ZpZGVkLCBpdCByZXR1cm5zIGFuIFVSTCBjb21iaW5pbmcgdGhlc2UgdHdvIHBhcmFtZXRlcnMgKGAke2F6dXJlT3BlbkFJQmFzZVBhdGh9LyR7YXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZX1gKS5cbiAqIC0gSWYgYm90aCBgYXp1cmVPcGVuQUlFbmRwb2ludGAgYW5kIGBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lYCAocGx1cyBgYXp1cmVPcGVuQUlBcGlLZXlgKSBhcmUgcHJvdmlkZWQsIGl0IHJldHVybnMgYW4gVVJMIGNvbWJpbmluZyB0aGVzZSB0d28gcGFyYW1ldGVycyAoYCR7YXp1cmVPcGVuQUlFbmRwb2ludH0vb3BlbmFpL2RlcGxveW1lbnRzLyR7YXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZX1gKS5cbiAqIC0gSWYgYGF6dXJlT3BlbkFJQXBpS2V5YCBpcyBwcm92aWRlZCwgaXQgY2hlY2tzIGZvciBgYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVgIGFuZCBgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZWAgYW5kIHRocm93cyBhbiBlcnJvciBpZiBhbnkgb2YgdGhlc2UgaXMgbWlzc2luZy4gSWYgYm90aCBhcmUgcHJvdmlkZWQsIGl0IGdlbmVyYXRlcyBhbiBVUkwgaW5jb3Jwb3JhdGluZyB0aGVzZSBwYXJhbWV0ZXJzLlxuICogLSBJZiBub25lIG9mIHRoZSBhYm92ZSBjb25kaXRpb25zIGFyZSBtZXQsIHJldHVybiBhbnkgY3VzdG9tIGBiYXNlVVJMYC5cbiAqIC0gVGhlIGZ1bmN0aW9uIHJldHVybnMgdGhlIGdlbmVyYXRlZCBVUkwgYXMgYSBzdHJpbmcsIG9yIHVuZGVmaW5lZCBpZiBubyBjdXN0b20gcGF0aHMgYXJlIHNwZWNpZmllZC5cbiAqXG4gKiBAdGhyb3dzIFdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIG5lY2Vzc2FyeSBwYXJhbWV0ZXJzIGZvciBnZW5lcmF0aW5nIHRoZSBVUkwgYXJlIG1pc3NpbmcuXG4gKlxuICogQHJldHVybnMge3N0cmluZyB8IHVuZGVmaW5lZH0gVGhlIGdlbmVyYXRlZCAoQXp1cmUpIE9wZW5BSSBlbmRwb2ludCBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmRwb2ludChjb25maWcpIHtcbiAgICBjb25zdCB7IGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUsIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLCBhenVyZU9wZW5BSUFwaUtleSwgYXp1cmVPcGVuQUlCYXNlUGF0aCwgYmFzZVVSTCwgYXp1cmVBRFRva2VuUHJvdmlkZXIsIGF6dXJlT3BlbkFJRW5kcG9pbnQsIH0gPSBjb25maWc7XG4gICAgaWYgKChhenVyZU9wZW5BSUFwaUtleSB8fCBhenVyZUFEVG9rZW5Qcm92aWRlcikgJiZcbiAgICAgICAgYXp1cmVPcGVuQUlCYXNlUGF0aCAmJlxuICAgICAgICBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHthenVyZU9wZW5BSUJhc2VQYXRofS8ke2F6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YDtcbiAgICB9XG4gICAgaWYgKChhenVyZU9wZW5BSUFwaUtleSB8fCBhenVyZUFEVG9rZW5Qcm92aWRlcikgJiZcbiAgICAgICAgYXp1cmVPcGVuQUlFbmRwb2ludCAmJlxuICAgICAgICBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHthenVyZU9wZW5BSUVuZHBvaW50fS9vcGVuYWkvZGVwbG95bWVudHMvJHthenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWA7XG4gICAgfVxuICAgIGlmIChhenVyZU9wZW5BSUFwaUtleSB8fCBhenVyZUFEVG9rZW5Qcm92aWRlcikge1xuICAgICAgICBpZiAoIWF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIGF6dXJlT3BlbkFJQXBpS2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlciB3aGVuIHVzaW5nIGF6dXJlT3BlbkFJQXBpS2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2F6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lfS5vcGVuYWkuYXp1cmUuY29tL29wZW5haS9kZXBsb3ltZW50cy8ke2F6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2VVUkw7XG59XG4iXSwibmFtZXMiOlsiZ2V0RW5kcG9pbnQiLCJjb25maWciLCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIiwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUiLCJhenVyZU9wZW5BSUFwaUtleSIsImF6dXJlT3BlbkFJQmFzZVBhdGgiLCJiYXNlVVJMIiwiYXp1cmVBRFRva2VuUHJvdmlkZXIiLCJhenVyZU9wZW5BSUVuZHBvaW50IiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/errors.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/errors.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLangChainErrorFields: () => (/* binding */ addLangChainErrorFields)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ /* eslint-disable no-param-reassign */ function addLangChainErrorFields(error, lc_error_code) {\n    error.lc_error_code = lc_error_code;\n    error.message = `${error.message}\\n\\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${lc_error_code}/\\n`;\n    return error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHFEQUFxRCxHQUNyRCxvQ0FBb0MsR0FDN0IsU0FBU0Esd0JBQXdCQyxLQUFLLEVBQUVDLGFBQWE7SUFDeERELE1BQU1DLGFBQWEsR0FBR0E7SUFDdEJELE1BQU1FLE9BQU8sR0FBRyxDQUFDLEVBQUVGLE1BQU1FLE9BQU8sQ0FBQyw4RUFBOEUsRUFBRUQsY0FBYyxHQUFHLENBQUM7SUFDbkksT0FBT0Q7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3V0aWxzL2Vycm9ycy5qcz9iNzY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5leHBvcnQgZnVuY3Rpb24gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZXJyb3IsIGxjX2Vycm9yX2NvZGUpIHtcbiAgICBlcnJvci5sY19lcnJvcl9jb2RlID0gbGNfZXJyb3JfY29kZTtcbiAgICBlcnJvci5tZXNzYWdlID0gYCR7ZXJyb3IubWVzc2FnZX1cXG5cXG5Ucm91Ymxlc2hvb3RpbmcgVVJMOiBodHRwczovL2pzLmxhbmdjaGFpbi5jb20vZG9jcy90cm91Ymxlc2hvb3RpbmcvZXJyb3JzLyR7bGNfZXJyb3JfY29kZX0vXFxuYDtcbiAgICByZXR1cm4gZXJyb3I7XG59XG4iXSwibmFtZXMiOlsiYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMiLCJlcnJvciIsImxjX2Vycm9yX2NvZGUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatFunctionDefinitions: () => (/* binding */ formatFunctionDefinitions)\n/* harmony export */ });\nfunction isAnyOfProp(prop) {\n    return prop.anyOf !== undefined && Array.isArray(prop.anyOf);\n}\n// When OpenAI use functions in the prompt, they format them as TypeScript definitions rather than OpenAPI JSON schemas.\n// This function converts the JSON schemas into TypeScript definitions.\nfunction formatFunctionDefinitions(functions) {\n    const lines = [\n        \"namespace functions {\",\n        \"\"\n    ];\n    for (const f of functions){\n        if (f.description) {\n            lines.push(`// ${f.description}`);\n        }\n        if (Object.keys(f.parameters.properties ?? {}).length > 0) {\n            lines.push(`type ${f.name} = (_: {`);\n            lines.push(formatObjectProperties(f.parameters, 0));\n            lines.push(\"}) => any;\");\n        } else {\n            lines.push(`type ${f.name} = () => any;`);\n        }\n        lines.push(\"\");\n    }\n    lines.push(\"} // namespace functions\");\n    return lines.join(\"\\n\");\n}\n// Format just the properties of an object (not including the surrounding braces)\nfunction formatObjectProperties(obj, indent) {\n    const lines = [];\n    for (const [name, param] of Object.entries(obj.properties ?? {})){\n        if (param.description && indent < 2) {\n            lines.push(`// ${param.description}`);\n        }\n        if (obj.required?.includes(name)) {\n            lines.push(`${name}: ${formatType(param, indent)},`);\n        } else {\n            lines.push(`${name}?: ${formatType(param, indent)},`);\n        }\n    }\n    return lines.map((line)=>\" \".repeat(indent) + line).join(\"\\n\");\n}\n// Format a single property type\nfunction formatType(param, indent) {\n    if (isAnyOfProp(param)) {\n        return param.anyOf.map((v)=>formatType(v, indent)).join(\" | \");\n    }\n    switch(param.type){\n        case \"string\":\n            if (param.enum) {\n                return param.enum.map((v)=>`\"${v}\"`).join(\" | \");\n            }\n            return \"string\";\n        case \"number\":\n            if (param.enum) {\n                return param.enum.map((v)=>`${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"integer\":\n            if (param.enum) {\n                return param.enum.map((v)=>`${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"null\":\n            return \"null\";\n        case \"object\":\n            return [\n                \"{\",\n                formatObjectProperties(param, indent + 2),\n                \"}\"\n            ].join(\"\\n\");\n        case \"array\":\n            if (param.items) {\n                return `${formatType(param.items, indent)}[]`;\n            }\n            return \"any[]\";\n        default:\n            return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9vcGVuYWktZm9ybWF0LWZuZGVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxTQUFTQSxZQUFZQyxJQUFJO0lBQ3JCLE9BQVFBLEtBQUtDLEtBQUssS0FBS0MsYUFDbkJDLE1BQU1DLE9BQU8sQ0FBQ0osS0FBS0MsS0FBSztBQUNoQztBQUNBLHdIQUF3SDtBQUN4SCx1RUFBdUU7QUFDaEUsU0FBU0ksMEJBQTBCQyxTQUFTO0lBQy9DLE1BQU1DLFFBQVE7UUFBQztRQUF5QjtLQUFHO0lBQzNDLEtBQUssTUFBTUMsS0FBS0YsVUFBVztRQUN2QixJQUFJRSxFQUFFQyxXQUFXLEVBQUU7WUFDZkYsTUFBTUcsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFRixFQUFFQyxXQUFXLENBQUMsQ0FBQztRQUNwQztRQUNBLElBQUlFLE9BQU9DLElBQUksQ0FBQ0osRUFBRUssVUFBVSxDQUFDQyxVQUFVLElBQUksQ0FBQyxHQUFHQyxNQUFNLEdBQUcsR0FBRztZQUN2RFIsTUFBTUcsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFRixFQUFFUSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ25DVCxNQUFNRyxJQUFJLENBQUNPLHVCQUF1QlQsRUFBRUssVUFBVSxFQUFFO1lBQ2hETixNQUFNRyxJQUFJLENBQUM7UUFDZixPQUNLO1lBQ0RILE1BQU1HLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRUYsRUFBRVEsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM1QztRQUNBVCxNQUFNRyxJQUFJLENBQUM7SUFDZjtJQUNBSCxNQUFNRyxJQUFJLENBQUM7SUFDWCxPQUFPSCxNQUFNVyxJQUFJLENBQUM7QUFDdEI7QUFDQSxpRkFBaUY7QUFDakYsU0FBU0QsdUJBQXVCRSxHQUFHLEVBQUVDLE1BQU07SUFDdkMsTUFBTWIsUUFBUSxFQUFFO0lBQ2hCLEtBQUssTUFBTSxDQUFDUyxNQUFNSyxNQUFNLElBQUlWLE9BQU9XLE9BQU8sQ0FBQ0gsSUFBSUwsVUFBVSxJQUFJLENBQUMsR0FBSTtRQUM5RCxJQUFJTyxNQUFNWixXQUFXLElBQUlXLFNBQVMsR0FBRztZQUNqQ2IsTUFBTUcsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFVyxNQUFNWixXQUFXLENBQUMsQ0FBQztRQUN4QztRQUNBLElBQUlVLElBQUlJLFFBQVEsRUFBRUMsU0FBU1IsT0FBTztZQUM5QlQsTUFBTUcsSUFBSSxDQUFDLENBQUMsRUFBRU0sS0FBSyxFQUFFLEVBQUVTLFdBQVdKLE9BQU9ELFFBQVEsQ0FBQyxDQUFDO1FBQ3ZELE9BQ0s7WUFDRGIsTUFBTUcsSUFBSSxDQUFDLENBQUMsRUFBRU0sS0FBSyxHQUFHLEVBQUVTLFdBQVdKLE9BQU9ELFFBQVEsQ0FBQyxDQUFDO1FBQ3hEO0lBQ0o7SUFDQSxPQUFPYixNQUFNbUIsR0FBRyxDQUFDLENBQUNDLE9BQVMsSUFBSUMsTUFBTSxDQUFDUixVQUFVTyxNQUFNVCxJQUFJLENBQUM7QUFDL0Q7QUFDQSxnQ0FBZ0M7QUFDaEMsU0FBU08sV0FBV0osS0FBSyxFQUFFRCxNQUFNO0lBQzdCLElBQUlyQixZQUFZc0IsUUFBUTtRQUNwQixPQUFPQSxNQUFNcEIsS0FBSyxDQUFDeUIsR0FBRyxDQUFDLENBQUNHLElBQU1KLFdBQVdJLEdBQUdULFNBQVNGLElBQUksQ0FBQztJQUM5RDtJQUNBLE9BQVFHLE1BQU1TLElBQUk7UUFDZCxLQUFLO1lBQ0QsSUFBSVQsTUFBTVUsSUFBSSxFQUFFO2dCQUNaLE9BQU9WLE1BQU1VLElBQUksQ0FBQ0wsR0FBRyxDQUFDLENBQUNHLElBQU0sQ0FBQyxDQUFDLEVBQUVBLEVBQUUsQ0FBQyxDQUFDLEVBQUVYLElBQUksQ0FBQztZQUNoRDtZQUNBLE9BQU87UUFDWCxLQUFLO1lBQ0QsSUFBSUcsTUFBTVUsSUFBSSxFQUFFO2dCQUNaLE9BQU9WLE1BQU1VLElBQUksQ0FBQ0wsR0FBRyxDQUFDLENBQUNHLElBQU0sQ0FBQyxFQUFFQSxFQUFFLENBQUMsRUFBRVgsSUFBSSxDQUFDO1lBQzlDO1lBQ0EsT0FBTztRQUNYLEtBQUs7WUFDRCxJQUFJRyxNQUFNVSxJQUFJLEVBQUU7Z0JBQ1osT0FBT1YsTUFBTVUsSUFBSSxDQUFDTCxHQUFHLENBQUMsQ0FBQ0csSUFBTSxDQUFDLEVBQUVBLEVBQUUsQ0FBQyxFQUFFWCxJQUFJLENBQUM7WUFDOUM7WUFDQSxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO2dCQUFDO2dCQUFLRCx1QkFBdUJJLE9BQU9ELFNBQVM7Z0JBQUk7YUFBSSxDQUFDRixJQUFJLENBQUM7UUFDdEUsS0FBSztZQUNELElBQUlHLE1BQU1XLEtBQUssRUFBRTtnQkFDYixPQUFPLENBQUMsRUFBRVAsV0FBV0osTUFBTVcsS0FBSyxFQUFFWixRQUFRLEVBQUUsQ0FBQztZQUNqRDtZQUNBLE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvdXRpbHMvb3BlbmFpLWZvcm1hdC1mbmRlZi5qcz84YjI5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzQW55T2ZQcm9wKHByb3ApIHtcbiAgICByZXR1cm4gKHByb3AuYW55T2YgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHByb3AuYW55T2YpKTtcbn1cbi8vIFdoZW4gT3BlbkFJIHVzZSBmdW5jdGlvbnMgaW4gdGhlIHByb21wdCwgdGhleSBmb3JtYXQgdGhlbSBhcyBUeXBlU2NyaXB0IGRlZmluaXRpb25zIHJhdGhlciB0aGFuIE9wZW5BUEkgSlNPTiBzY2hlbWFzLlxuLy8gVGhpcyBmdW5jdGlvbiBjb252ZXJ0cyB0aGUgSlNPTiBzY2hlbWFzIGludG8gVHlwZVNjcmlwdCBkZWZpbml0aW9ucy5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zKGZ1bmN0aW9ucykge1xuICAgIGNvbnN0IGxpbmVzID0gW1wibmFtZXNwYWNlIGZ1bmN0aW9ucyB7XCIsIFwiXCJdO1xuICAgIGZvciAoY29uc3QgZiBvZiBmdW5jdGlvbnMpIHtcbiAgICAgICAgaWYgKGYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC8vICR7Zi5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZi5wYXJhbWV0ZXJzLnByb3BlcnRpZXMgPz8ge30pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHR5cGUgJHtmLm5hbWV9ID0gKF86IHtgKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0T2JqZWN0UHJvcGVydGllcyhmLnBhcmFtZXRlcnMsIDApKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJ9KSA9PiBhbnk7XCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGluZXMucHVzaChgdHlwZSAke2YubmFtZX0gPSAoKSA9PiBhbnk7YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgbGluZXMucHVzaChcIn0gLy8gbmFtZXNwYWNlIGZ1bmN0aW9uc1wiKTtcbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbn1cbi8vIEZvcm1hdCBqdXN0IHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCAobm90IGluY2x1ZGluZyB0aGUgc3Vycm91bmRpbmcgYnJhY2VzKVxuZnVuY3Rpb24gZm9ybWF0T2JqZWN0UHJvcGVydGllcyhvYmosIGluZGVudCkge1xuICAgIGNvbnN0IGxpbmVzID0gW107XG4gICAgZm9yIChjb25zdCBbbmFtZSwgcGFyYW1dIG9mIE9iamVjdC5lbnRyaWVzKG9iai5wcm9wZXJ0aWVzID8/IHt9KSkge1xuICAgICAgICBpZiAocGFyYW0uZGVzY3JpcHRpb24gJiYgaW5kZW50IDwgMikge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLy8gJHtwYXJhbS5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqLnJlcXVpcmVkPy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgJHtuYW1lfTogJHtmb3JtYXRUeXBlKHBhcmFtLCBpbmRlbnQpfSxgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCR7bmFtZX0/OiAke2Zvcm1hdFR5cGUocGFyYW0sIGluZGVudCl9LGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IFwiIFwiLnJlcGVhdChpbmRlbnQpICsgbGluZSkuam9pbihcIlxcblwiKTtcbn1cbi8vIEZvcm1hdCBhIHNpbmdsZSBwcm9wZXJ0eSB0eXBlXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHBhcmFtLCBpbmRlbnQpIHtcbiAgICBpZiAoaXNBbnlPZlByb3AocGFyYW0pKSB7XG4gICAgICAgIHJldHVybiBwYXJhbS5hbnlPZi5tYXAoKHYpID0+IGZvcm1hdFR5cGUodiwgaW5kZW50KSkuam9pbihcIiB8IFwiKTtcbiAgICB9XG4gICAgc3dpdGNoIChwYXJhbS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgXCIke3Z9XCJgKS5qb2luKFwiIHwgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgJHt2fWApLmpvaW4oXCIgfCBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImludGVnZXJcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgJHt2fWApLmpvaW4oXCIgfCBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcIm51bGxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIFtcIntcIiwgZm9ybWF0T2JqZWN0UHJvcGVydGllcyhwYXJhbSwgaW5kZW50ICsgMiksIFwifVwiXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5pdGVtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtmb3JtYXRUeXBlKHBhcmFtLml0ZW1zLCBpbmRlbnQpfVtdYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcImFueVtdXCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNBbnlPZlByb3AiLCJwcm9wIiwiYW55T2YiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zIiwiZnVuY3Rpb25zIiwibGluZXMiLCJmIiwiZGVzY3JpcHRpb24iLCJwdXNoIiwiT2JqZWN0Iiwia2V5cyIsInBhcmFtZXRlcnMiLCJwcm9wZXJ0aWVzIiwibGVuZ3RoIiwibmFtZSIsImZvcm1hdE9iamVjdFByb3BlcnRpZXMiLCJqb2luIiwib2JqIiwiaW5kZW50IiwicGFyYW0iLCJlbnRyaWVzIiwicmVxdWlyZWQiLCJpbmNsdWRlcyIsImZvcm1hdFR5cGUiLCJtYXAiLCJsaW5lIiwicmVwZWF0IiwidiIsInR5cGUiLCJlbnVtIiwiaXRlbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/openai.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* binding */ formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAITool),\n/* harmony export */   formatToOpenAIToolChoice: () => (/* binding */ formatToOpenAIToolChoice),\n/* harmony export */   wrapOpenAIClientError: () => (/* binding */ wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/error.mjs\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/errors.js\");\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction wrapOpenAIClientError(e) {\n    let error;\n    if (e.constructor.name === openai__WEBPACK_IMPORTED_MODULE_3__.APIConnectionTimeoutError.name) {\n        error = new Error(e.message);\n        error.name = \"TimeoutError\";\n    } else if (e.constructor.name === openai__WEBPACK_IMPORTED_MODULE_3__.APIUserAbortError.name) {\n        error = new Error(e.message);\n        error.name = \"AbortError\";\n    } else if (e.status === 400 && e.message.includes(\"tool_calls\")) {\n        error = (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.addLangChainErrorFields)(e, \"INVALID_TOOL_RESULTS\");\n    } else if (e.status === 401) {\n        error = (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.addLangChainErrorFields)(e, \"MODEL_AUTHENTICATION\");\n    } else if (e.status === 429) {\n        error = (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.addLangChainErrorFields)(e, \"MODEL_RATE_LIMIT\");\n    } else if (e.status === 404) {\n        error = (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.addLangChainErrorFields)(e, \"MODEL_NOT_FOUND\");\n    } else {\n        error = e;\n    }\n    return error;\n}\n\nfunction formatToOpenAIAssistantTool(tool) {\n    return {\n        type: \"function\",\n        function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(tool.schema)\n        }\n    };\n}\nfunction formatToOpenAIToolChoice(toolChoice) {\n    if (!toolChoice) {\n        return undefined;\n    } else if (toolChoice === \"any\" || toolChoice === \"required\") {\n        return \"required\";\n    } else if (toolChoice === \"auto\") {\n        return \"auto\";\n    } else if (toolChoice === \"none\") {\n        return \"none\";\n    } else if (typeof toolChoice === \"string\") {\n        return {\n            type: \"function\",\n            function: {\n                name: toolChoice\n            }\n        };\n    } else {\n        return toolChoice;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9vcGVuYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVFO0FBQ2xCO0FBQ2tEO0FBQ2pEO0FBQ3RELDhEQUE4RDtBQUN2RCxTQUFTTSxzQkFBc0JDLENBQUM7SUFDbkMsSUFBSUM7SUFDSixJQUFJRCxFQUFFRSxXQUFXLENBQUNDLElBQUksS0FBS1YsNkRBQXlCQSxDQUFDVSxJQUFJLEVBQUU7UUFDdkRGLFFBQVEsSUFBSUcsTUFBTUosRUFBRUssT0FBTztRQUMzQkosTUFBTUUsSUFBSSxHQUFHO0lBQ2pCLE9BQ0ssSUFBSUgsRUFBRUUsV0FBVyxDQUFDQyxJQUFJLEtBQUtULHFEQUFpQkEsQ0FBQ1MsSUFBSSxFQUFFO1FBQ3BERixRQUFRLElBQUlHLE1BQU1KLEVBQUVLLE9BQU87UUFDM0JKLE1BQU1FLElBQUksR0FBRztJQUNqQixPQUNLLElBQUlILEVBQUVNLE1BQU0sS0FBSyxPQUFPTixFQUFFSyxPQUFPLENBQUNFLFFBQVEsQ0FBQyxlQUFlO1FBQzNETixRQUFRSCxtRUFBdUJBLENBQUNFLEdBQUc7SUFDdkMsT0FDSyxJQUFJQSxFQUFFTSxNQUFNLEtBQUssS0FBSztRQUN2QkwsUUFBUUgsbUVBQXVCQSxDQUFDRSxHQUFHO0lBQ3ZDLE9BQ0ssSUFBSUEsRUFBRU0sTUFBTSxLQUFLLEtBQUs7UUFDdkJMLFFBQVFILG1FQUF1QkEsQ0FBQ0UsR0FBRztJQUN2QyxPQUNLLElBQUlBLEVBQUVNLE1BQU0sS0FBSyxLQUFLO1FBQ3ZCTCxRQUFRSCxtRUFBdUJBLENBQUNFLEdBQUc7SUFDdkMsT0FDSztRQUNEQyxRQUFRRDtJQUNaO0lBQ0EsT0FBT0M7QUFDWDtBQUN5RztBQUNsRyxTQUFTUyw0QkFBNEJDLElBQUk7SUFDNUMsT0FBTztRQUNIQyxNQUFNO1FBQ05DLFVBQVU7WUFDTlYsTUFBTVEsS0FBS1IsSUFBSTtZQUNmVyxhQUFhSCxLQUFLRyxXQUFXO1lBQzdCQyxZQUFZcEIsbUVBQWVBLENBQUNnQixLQUFLSyxNQUFNO1FBQzNDO0lBQ0o7QUFDSjtBQUNPLFNBQVNDLHlCQUF5QkMsVUFBVTtJQUMvQyxJQUFJLENBQUNBLFlBQVk7UUFDYixPQUFPQztJQUNYLE9BQ0ssSUFBSUQsZUFBZSxTQUFTQSxlQUFlLFlBQVk7UUFDeEQsT0FBTztJQUNYLE9BQ0ssSUFBSUEsZUFBZSxRQUFRO1FBQzVCLE9BQU87SUFDWCxPQUNLLElBQUlBLGVBQWUsUUFBUTtRQUM1QixPQUFPO0lBQ1gsT0FDSyxJQUFJLE9BQU9BLGVBQWUsVUFBVTtRQUNyQyxPQUFPO1lBQ0hOLE1BQU07WUFDTkMsVUFBVTtnQkFDTlYsTUFBTWU7WUFDVjtRQUNKO0lBQ0osT0FDSztRQUNELE9BQU9BO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3V0aWxzL29wZW5haS5qcz85MzNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsIEFQSVVzZXJBYm9ydEVycm9yLCB9IGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uLCBjb252ZXJ0VG9PcGVuQUlUb29sLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZnVuY3Rpb25fY2FsbGluZ1wiO1xuaW1wb3J0IHsgYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpIHtcbiAgICBsZXQgZXJyb3I7XG4gICAgaWYgKGUuY29uc3RydWN0b3IubmFtZSA9PT0gQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvci5uYW1lKSB7XG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgIGVycm9yLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLmNvbnN0cnVjdG9yLm5hbWUgPT09IEFQSVVzZXJBYm9ydEVycm9yLm5hbWUpIHtcbiAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgZXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnN0YXR1cyA9PT0gNDAwICYmIGUubWVzc2FnZS5pbmNsdWRlcyhcInRvb2xfY2FsbHNcIikpIHtcbiAgICAgICAgZXJyb3IgPSBhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyhlLCBcIklOVkFMSURfVE9PTF9SRVNVTFRTXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIGVycm9yID0gYWRkTGFuZ0NoYWluRXJyb3JGaWVsZHMoZSwgXCJNT0RFTF9BVVRIRU5USUNBVElPTlwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKGUsIFwiTU9ERUxfUkFURV9MSU1JVFwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBlcnJvciA9IGFkZExhbmdDaGFpbkVycm9yRmllbGRzKGUsIFwiTU9ERUxfTk9UX0ZPVU5EXCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXJyb3IgPSBlO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3I7XG59XG5leHBvcnQgeyBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbiBhcyBmb3JtYXRUb09wZW5BSUZ1bmN0aW9uLCBjb252ZXJ0VG9PcGVuQUlUb29sIGFzIGZvcm1hdFRvT3BlbkFJVG9vbCwgfTtcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUb09wZW5BSUFzc2lzdGFudFRvb2wodG9vbCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKHRvb2wuc2NoZW1hKSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRvT3BlbkFJVG9vbENob2ljZSh0b29sQ2hvaWNlKSB7XG4gICAgaWYgKCF0b29sQ2hvaWNlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRvb2xDaG9pY2UgPT09IFwiYW55XCIgfHwgdG9vbENob2ljZSA9PT0gXCJyZXF1aXJlZFwiKSB7XG4gICAgICAgIHJldHVybiBcInJlcXVpcmVkXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRvb2xDaG9pY2UgPT09IFwiYXV0b1wiKSB7XG4gICAgICAgIHJldHVybiBcImF1dG9cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAodG9vbENob2ljZSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibm9uZVwiO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdG9vbENob2ljZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0b29sQ2hvaWNlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBUElDb25uZWN0aW9uVGltZW91dEVycm9yIiwiQVBJVXNlckFib3J0RXJyb3IiLCJ6b2RUb0pzb25TY2hlbWEiLCJjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbiIsImNvbnZlcnRUb09wZW5BSVRvb2wiLCJhZGRMYW5nQ2hhaW5FcnJvckZpZWxkcyIsIndyYXBPcGVuQUlDbGllbnRFcnJvciIsImUiLCJlcnJvciIsImNvbnN0cnVjdG9yIiwibmFtZSIsIkVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsImluY2x1ZGVzIiwiZm9ybWF0VG9PcGVuQUlGdW5jdGlvbiIsImZvcm1hdFRvT3BlbkFJVG9vbCIsImZvcm1hdFRvT3BlbkFJQXNzaXN0YW50VG9vbCIsInRvb2wiLCJ0eXBlIiwiZnVuY3Rpb24iLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJzY2hlbWEiLCJmb3JtYXRUb09wZW5BSVRvb2xDaG9pY2UiLCJ0b29sQ2hvaWNlIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/prompts.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/prompts.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertPromptToOpenAI: () => (/* binding */ convertPromptToOpenAI)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\");\n\n/**\n * Convert a formatted LangChain prompt (e.g. pulled from the hub) into\n * a format expected by OpenAI's JS SDK.\n *\n * Requires the \"@langchain/openai\" package to be installed in addition\n * to the OpenAI SDK.\n *\n * @example\n * ```ts\n * import { convertPromptToOpenAI } from \"langsmith/utils/hub/openai\";\n * import { pull } from \"langchain/hub\";\n *\n * import OpenAI from 'openai';\n *\n * const prompt = await pull(\"jacob/joke-generator\");\n * const formattedPrompt = await prompt.invoke({\n *   topic: \"cats\",\n * });\n *\n * const { messages } = convertPromptToOpenAI(formattedPrompt);\n *\n * const openAIClient = new OpenAI();\n *\n * const openaiResponse = await openAIClient.chat.completions.create({\n *   model: \"gpt-4o\",\n *   messages,\n * });\n * ```\n * @param formattedPrompt\n * @returns A partial OpenAI payload.\n */ function convertPromptToOpenAI(formattedPrompt) {\n    const messages = formattedPrompt.toChatMessages();\n    return {\n        messages: (0,_chat_models_js__WEBPACK_IMPORTED_MODULE_0__._convertMessagesToOpenAIParams)(messages)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9wcm9tcHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1FO0FBQ25FOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E4QkMsR0FDTSxTQUFTQyxzQkFBc0JDLGVBQWU7SUFDakQsTUFBTUMsV0FBV0QsZ0JBQWdCRSxjQUFjO0lBQy9DLE9BQU87UUFDSEQsVUFBVUgsK0VBQThCQSxDQUFDRztJQUM3QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWFya2V0LXJlc2VhcmNoLWFnZW50Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvdXRpbHMvcHJvbXB0cy5qcz8zZDQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyB9IGZyb20gXCIuLi9jaGF0X21vZGVscy5qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgZm9ybWF0dGVkIExhbmdDaGFpbiBwcm9tcHQgKGUuZy4gcHVsbGVkIGZyb20gdGhlIGh1YikgaW50b1xuICogYSBmb3JtYXQgZXhwZWN0ZWQgYnkgT3BlbkFJJ3MgSlMgU0RLLlxuICpcbiAqIFJlcXVpcmVzIHRoZSBcIkBsYW5nY2hhaW4vb3BlbmFpXCIgcGFja2FnZSB0byBiZSBpbnN0YWxsZWQgaW4gYWRkaXRpb25cbiAqIHRvIHRoZSBPcGVuQUkgU0RLLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY29udmVydFByb21wdFRvT3BlbkFJIH0gZnJvbSBcImxhbmdzbWl0aC91dGlscy9odWIvb3BlbmFpXCI7XG4gKiBpbXBvcnQgeyBwdWxsIH0gZnJvbSBcImxhbmdjaGFpbi9odWJcIjtcbiAqXG4gKiBpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG4gKlxuICogY29uc3QgcHJvbXB0ID0gYXdhaXQgcHVsbChcImphY29iL2pva2UtZ2VuZXJhdG9yXCIpO1xuICogY29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gYXdhaXQgcHJvbXB0Lmludm9rZSh7XG4gKiAgIHRvcGljOiBcImNhdHNcIixcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHsgbWVzc2FnZXMgfSA9IGNvbnZlcnRQcm9tcHRUb09wZW5BSShmb3JtYXR0ZWRQcm9tcHQpO1xuICpcbiAqIGNvbnN0IG9wZW5BSUNsaWVudCA9IG5ldyBPcGVuQUkoKTtcbiAqXG4gKiBjb25zdCBvcGVuYWlSZXNwb25zZSA9IGF3YWl0IG9wZW5BSUNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gKiAgIG1vZGVsOiBcImdwdC00b1wiLFxuICogICBtZXNzYWdlcyxcbiAqIH0pO1xuICogYGBgXG4gKiBAcGFyYW0gZm9ybWF0dGVkUHJvbXB0XG4gKiBAcmV0dXJucyBBIHBhcnRpYWwgT3BlbkFJIHBheWxvYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0UHJvbXB0VG9PcGVuQUkoZm9ybWF0dGVkUHJvbXB0KSB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBmb3JtYXR0ZWRQcm9tcHQudG9DaGF0TWVzc2FnZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlczogX2NvbnZlcnRNZXNzYWdlc1RvT3BlbkFJUGFyYW1zKG1lc3NhZ2VzKSxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbIl9jb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyIsImNvbnZlcnRQcm9tcHRUb09wZW5BSSIsImZvcm1hdHRlZFByb21wdCIsIm1lc3NhZ2VzIiwidG9DaGF0TWVzc2FnZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/prompts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/tools.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/tools.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _convertToOpenAITool: () => (/* binding */ _convertToOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var openai_helpers_zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai/helpers/zod */ \"(rsc)/./node_modules/openai/helpers/zod.mjs\");\n\n\n/**\n * Formats a tool in either OpenAI format, or LangChain structured tool format\n * into an OpenAI tool format. If the tool is already in OpenAI format, return without\n * any changes. If it is in LangChain structured tool format, convert it to OpenAI tool format\n * using OpenAI's `zodFunction` util, falling back to `convertToOpenAIFunction` if the parameters\n * returned from the `zodFunction` util are not defined.\n *\n * @param {BindToolsInput} tool The tool to convert to an OpenAI tool.\n * @param {Object} [fields] Additional fields to add to the OpenAI tool.\n * @returns {ToolDefinition} The inputted tool in OpenAI tool format.\n */ function _convertToOpenAITool(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntool, fields) {\n    let toolDef;\n    if ((0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_0__.isLangChainTool)(tool)) {\n        const oaiToolDef = (0,openai_helpers_zod__WEBPACK_IMPORTED_MODULE_1__.zodFunction)({\n            name: tool.name,\n            parameters: tool.schema,\n            description: tool.description\n        });\n        if (!oaiToolDef.function.parameters) {\n            // Fallback to the `convertToOpenAIFunction` util if the parameters are not defined.\n            toolDef = {\n                type: \"function\",\n                function: (0,_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIFunction)(tool, fields)\n            };\n        } else {\n            toolDef = {\n                type: oaiToolDef.type,\n                function: {\n                    name: oaiToolDef.function.name,\n                    description: oaiToolDef.function.description,\n                    parameters: oaiToolDef.function.parameters,\n                    ...fields?.strict !== undefined ? {\n                        strict: fields.strict\n                    } : {}\n                }\n            };\n        }\n    } else {\n        toolDef = tool;\n    }\n    if (fields?.strict !== undefined) {\n        toolDef.function.strict = fields.strict;\n    }\n    return toolDef;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy90b29scy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUc7QUFDbEQ7QUFDakQ7Ozs7Ozs7Ozs7Q0FVQyxHQUNNLFNBQVNHLHFCQUNoQiw4REFBOEQ7QUFDOURDLElBQUksRUFBRUMsTUFBTTtJQUNSLElBQUlDO0lBQ0osSUFBSUwsdUZBQWVBLENBQUNHLE9BQU87UUFDdkIsTUFBTUcsYUFBYUwsK0RBQVdBLENBQUM7WUFDM0JNLE1BQU1KLEtBQUtJLElBQUk7WUFDZkMsWUFBWUwsS0FBS00sTUFBTTtZQUN2QkMsYUFBYVAsS0FBS08sV0FBVztRQUNqQztRQUNBLElBQUksQ0FBQ0osV0FBV0ssUUFBUSxDQUFDSCxVQUFVLEVBQUU7WUFDakMsb0ZBQW9GO1lBQ3BGSCxVQUFVO2dCQUNOTyxNQUFNO2dCQUNORCxVQUFVWiwrRkFBdUJBLENBQUNJLE1BQU1DO1lBQzVDO1FBQ0osT0FDSztZQUNEQyxVQUFVO2dCQUNOTyxNQUFNTixXQUFXTSxJQUFJO2dCQUNyQkQsVUFBVTtvQkFDTkosTUFBTUQsV0FBV0ssUUFBUSxDQUFDSixJQUFJO29CQUM5QkcsYUFBYUosV0FBV0ssUUFBUSxDQUFDRCxXQUFXO29CQUM1Q0YsWUFBWUYsV0FBV0ssUUFBUSxDQUFDSCxVQUFVO29CQUMxQyxHQUFJSixRQUFRUyxXQUFXQyxZQUFZO3dCQUFFRCxRQUFRVCxPQUFPUyxNQUFNO29CQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNyRTtZQUNKO1FBQ0o7SUFDSixPQUNLO1FBQ0RSLFVBQVVGO0lBQ2Q7SUFDQSxJQUFJQyxRQUFRUyxXQUFXQyxXQUFXO1FBQzlCVCxRQUFRTSxRQUFRLENBQUNFLE1BQU0sR0FBR1QsT0FBT1MsTUFBTTtJQUMzQztJQUNBLE9BQU9SO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tYXJrZXQtcmVzZWFyY2gtYWdlbnQvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy90b29scy5qcz85OWJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uLCBpc0xhbmdDaGFpblRvb2wsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nXCI7XG5pbXBvcnQgeyB6b2RGdW5jdGlvbiB9IGZyb20gXCJvcGVuYWkvaGVscGVycy96b2RcIjtcbi8qKlxuICogRm9ybWF0cyBhIHRvb2wgaW4gZWl0aGVyIE9wZW5BSSBmb3JtYXQsIG9yIExhbmdDaGFpbiBzdHJ1Y3R1cmVkIHRvb2wgZm9ybWF0XG4gKiBpbnRvIGFuIE9wZW5BSSB0b29sIGZvcm1hdC4gSWYgdGhlIHRvb2wgaXMgYWxyZWFkeSBpbiBPcGVuQUkgZm9ybWF0LCByZXR1cm4gd2l0aG91dFxuICogYW55IGNoYW5nZXMuIElmIGl0IGlzIGluIExhbmdDaGFpbiBzdHJ1Y3R1cmVkIHRvb2wgZm9ybWF0LCBjb252ZXJ0IGl0IHRvIE9wZW5BSSB0b29sIGZvcm1hdFxuICogdXNpbmcgT3BlbkFJJ3MgYHpvZEZ1bmN0aW9uYCB1dGlsLCBmYWxsaW5nIGJhY2sgdG8gYGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uYCBpZiB0aGUgcGFyYW1ldGVyc1xuICogcmV0dXJuZWQgZnJvbSB0aGUgYHpvZEZ1bmN0aW9uYCB1dGlsIGFyZSBub3QgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge0JpbmRUb29sc0lucHV0fSB0b29sIFRoZSB0b29sIHRvIGNvbnZlcnQgdG8gYW4gT3BlbkFJIHRvb2wuXG4gKiBAcGFyYW0ge09iamVjdH0gW2ZpZWxkc10gQWRkaXRpb25hbCBmaWVsZHMgdG8gYWRkIHRvIHRoZSBPcGVuQUkgdG9vbC5cbiAqIEByZXR1cm5zIHtUb29sRGVmaW5pdGlvbn0gVGhlIGlucHV0dGVkIHRvb2wgaW4gT3BlbkFJIHRvb2wgZm9ybWF0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gX2NvbnZlcnRUb09wZW5BSVRvb2woXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudG9vbCwgZmllbGRzKSB7XG4gICAgbGV0IHRvb2xEZWY7XG4gICAgaWYgKGlzTGFuZ0NoYWluVG9vbCh0b29sKSkge1xuICAgICAgICBjb25zdCBvYWlUb29sRGVmID0gem9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5zY2hlbWEsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghb2FpVG9vbERlZi5mdW5jdGlvbi5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byB0aGUgYGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uYCB1dGlsIGlmIHRoZSBwYXJhbWV0ZXJzIGFyZSBub3QgZGVmaW5lZC5cbiAgICAgICAgICAgIHRvb2xEZWYgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbih0b29sLCBmaWVsZHMpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvb2xEZWYgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogb2FpVG9vbERlZi50eXBlLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9haVRvb2xEZWYuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG9haVRvb2xEZWYuZnVuY3Rpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IG9haVRvb2xEZWYuZnVuY3Rpb24ucGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGZpZWxkcz8uc3RyaWN0ICE9PSB1bmRlZmluZWQgPyB7IHN0cmljdDogZmllbGRzLnN0cmljdCB9IDoge30pLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0b29sRGVmID0gdG9vbDtcbiAgICB9XG4gICAgaWYgKGZpZWxkcz8uc3RyaWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdG9vbERlZi5mdW5jdGlvbi5zdHJpY3QgPSBmaWVsZHMuc3RyaWN0O1xuICAgIH1cbiAgICByZXR1cm4gdG9vbERlZjtcbn1cbiJdLCJuYW1lcyI6WyJjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbiIsImlzTGFuZ0NoYWluVG9vbCIsInpvZEZ1bmN0aW9uIiwiX2NvbnZlcnRUb09wZW5BSVRvb2wiLCJ0b29sIiwiZmllbGRzIiwidG9vbERlZiIsIm9haVRvb2xEZWYiLCJuYW1lIiwicGFyYW1ldGVycyIsInNjaGVtYSIsImRlc2NyaXB0aW9uIiwiZnVuY3Rpb24iLCJ0eXBlIiwic3RyaWN0IiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/index.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/openai/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AzureChatOpenAI),\n/* harmony export */   AzureOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AzureOpenAI),\n/* harmony export */   AzureOpenAIEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AzureOpenAIEmbeddings),\n/* harmony export */   ChatOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI),\n/* harmony export */   DallEAPIWrapper: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.DallEAPIWrapper),\n/* harmony export */   OpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAI),\n/* harmony export */   OpenAIClient: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAIClient),\n/* harmony export */   OpenAIEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAIEmbeddings),\n/* harmony export */   _convertMessagesToOpenAIParams: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__._convertMessagesToOpenAIParams),\n/* harmony export */   convertPromptToOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.convertPromptToOpenAI),\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAITool),\n/* harmony export */   formatToOpenAIToolChoice: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAIToolChoice),\n/* harmony export */   getEndpoint: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getEndpoint),\n/* harmony export */   messageToOpenAIRole: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.messageToOpenAIRole),\n/* harmony export */   toFile: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.toFile),\n/* harmony export */   wrapOpenAIClientError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/openai/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldC1yZXNlYXJjaC1hZ2VudC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9pbmRleC5qcz9iOTA2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/index.js\n");

/***/ })

};
;